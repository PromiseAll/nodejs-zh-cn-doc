<!DOCTYPE html><html lang="zh-CN"><head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width">
  <title>tls.createSecurePair([context][, isServer][, requestCert][, rejectUnauthorized][, options]) | Node.js API 文档</title>
  
  

    <link href="../../api/static/inject.css" rel="stylesheet"><link rel="icon" sizes="32x32" type="image/png" href="../../api/static/favicon.png"></head>

<body class="alt apidoc" id="page_api_item">
  <div id="api-section-tls">
    <div id="content" class="clearfix">

      <div id="column1" data-id="__ID__" class="interior">
        <header>
          <h1>tls.createSecurePair([context][, isServer][, requestCert][, rejectUnauthorized][, options])</h1>
          <div id="gtoc">
            <ul>
              <li>v16.16.0</li>
              <li>
                <a href="../tls.html#tls_tls_createsecurepair_context_isserver_requestcert_rejectunauthorized_options" name="toc">返回上层文档</a>
              </li>

              <li class="picker-header">
    <a href="#">
        <span class="collapsed-arrow">►</span><span class="expanded-arrow">▼</span>
        其他版本
      </a>
    <div class="picker"><ol id="alt-docs">
    <li><a href="../../api/tls/tls_createsecurepair_context_isserver_requestcert_rejectunauthorized_options.html">18.6.0</a></li><li><a href="">16.16.0</a></li><li><a href="../../api-v14/tls/tls_createsecurepair_context_isserver_requestcert_rejectunauthorized_options.html">14.20.0</a></li>
</ol></div>
  </li>

              <li>
                <a href="http://api.nodejs.cn/" class="link-to-search">搜索</a>
              </li>
              <li>
                
                
              </li>

              <!-- <li>
                <a href="https://github.com/nodejscn/node-api-cn/edit/master/tls/#tlscreatesecurepaircontext-isserver-requestcert-rejectunauthorized-options.md" rel="nofollow">提交修改</a>
              </li> -->
              <!-- <li>
                <a href="/gzh/">公众号</a>
              </li> -->
              <!-- <li class="biz_wrap" data-biz="api_item_nav">
                <a target="_blank" class="biz_title biz_link"></a>
              </li> -->
            </ul>
          </div>
          <hr>
        </header>

        <div id="apicontent">
          <div id="content_left"><div class="api_metadata">
<details class="changelog" open=""><summary>版本历史</summary>
<table>
<tbody><tr><th>版本</th><th>变更</th></tr>
<tr><td>v5.0.0</td>
<td><p>现在支持 ALPN 选项。</p></td></tr>
<tr><td>v0.11.3</td>
<td><p><span>弃用于: v0.11.3</span></p></td></tr>
<tr><td>v0.3.2</td>
<td><p><span>新增于: v0.3.2</span></p></td></tr>
</tbody></table>
</details>
</div><p></p><div class="api_stability api_stability_0"><a href="../documentation.html#stability-index">稳定性: 0</a> - 弃用: 改为使用 <a href="../tls.html#class-tlstlssocket"><code>tls.TLSSocket</code></a> 。</div><p></p><ul class="">
<li><code>context</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" rel="nofollow" class="type">&lt;Object&gt;</a> <code>tls.createSecureContext()</code> 返回的安全上下文对象</li>
<li><code>isServer</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" rel="nofollow" class="type">&lt;boolean&gt;</a> <code>true</code> 指定此 TLS 连接应作为服务器打开。</li>
<li><code>requestCert</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" rel="nofollow" class="type">&lt;boolean&gt;</a> <code>true</code> 指定服务器是否应从连接的客户端请求证书。
仅在 <code>isServer</code> 为 <code>true</code> 时适用。</li>
<li><code>rejectUnauthorized</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" rel="nofollow" class="type">&lt;boolean&gt;</a> 如果不是 <code>false</code>，则服务器会自动拒绝证书无效的客户端。
仅在 <code>isServer</code> 为 <code>true</code> 时适用。</li>
<li><code>options</code>
<ul>
<li><code>enableTrace</code>: 参见 <a href="../tls.html#tlscreateserveroptions-secureconnectionlistener"><code>tls.createServer()</code></a></li>
<li><code>secureContext</code>: 来自 <a href="../tls.html#tlscreatesecurecontextoptions"><code>tls.createSecureContext()</code></a> 的 TLS 上下文对象</li>
<li><code>isServer</code>: 如果 <code>true</code> TLS 套接字将在服务器模式下实例化。
<strong>默认值:</strong> <code>false</code>。</li>
<li><code>server</code> <a href="../net.html#class-netserver" rel="nofollow" class="type">&lt;net.Server&gt;</a> <a href="../net.html#class-netserver"><code>net.Server</code></a> 实例</li>
<li><code>requestCert</code>: 参见 <a href="../tls.html#tlscreateserveroptions-secureconnectionlistener"><code>tls.createServer()</code></a></li>
<li><code>rejectUnauthorized</code>: 参见 <a href="../tls.html#tlscreateserveroptions-secureconnectionlistener"><code>tls.createServer()</code></a></li>
<li><code>ALPNProtocols</code>: 参见 <a href="../tls.html#tlscreateserveroptions-secureconnectionlistener"><code>tls.createServer()</code></a></li>
<li><code>SNICallback</code>: 参见 <a href="../tls.html#tlscreateserveroptions-secureconnectionlistener"><code>tls.createServer()</code></a></li>
<li><code>session</code> <a href="../buffer.html#class-buffer" rel="nofollow" class="type">&lt;Buffer&gt;</a> 包含 TLS 会话的 <code>Buffer</code> 实例。</li>
<li><code>requestOCSP</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" rel="nofollow" class="type">&lt;boolean&gt;</a> 如果为 <code>true</code>，则指定将 OCSP 状态请求扩展添加到客户端 hello 并且在建立安全通信之前将在套接字上触发 <code>'OCSPResponse'</code> 事件。</li>
</ul>
</li>
</ul><p>使用两个流创建新的安全对对象，其中一个读取和写入加密数据，另一个读取和写入明文数据。
通常，加密流通过管道传输到/从传入的加密数据流，明文用作初始加密流的替代。</p><p class=""><code>tls.createSecurePair()</code> 返回具有 <code>cleartext</code> 和 <code>encrypted</code> 流属性的 <code>tls.SecurePair</code> 对象。</p><p class="">使用 <code>cleartext</code> 与 <a href="../tls.html#class-tlstlssocket"><code>tls.TLSSocket</code></a> 具有相同的 API。</p><p class="">现在不推荐使用 <code>tls.createSecurePair()</code> 方法而支持 <code>tls.TLSSocket()</code>。
例如代码：</p><pre class=""><code class="language-js">pair = tls.<span class="hljs-title function_">createSecurePair</span>(<span class="hljs-comment">/* ... */</span>);
pair.<span class="hljs-property">encrypted</span>.<span class="hljs-title function_">pipe</span>(socket);
socket.<span class="hljs-title function_">pipe</span>(pair.<span class="hljs-property">encrypted</span>);</code></pre><p class="">可以替换为：</p><pre class=""><code class="language-js">secureSocket = tls.<span class="hljs-title class_">TLSSocket</span>(socket, options);</code></pre><p class="">其中 <code>secureSocket</code> 与 <code>pair.cleartext</code> 具有相同的 API。</p></div>
          <div id="content_right"><div class="api_metadata">
<details class="changelog" open=""><summary>History</summary>
<table>
<tbody><tr><th>Version</th><th>Changes</th></tr>
<tr><td>v5.0.0</td>
<td><p>ALPN options are supported now.</p></td></tr>
<tr><td>v0.11.3</td>
<td><p><span>Deprecated since: v0.11.3</span></p></td></tr>
<tr><td>v0.3.2</td>
<td><p><span>Added in: v0.3.2</span></p></td></tr>
</tbody></table>
</details>
</div><p></p><div class="api_stability api_stability_0"><a href="../documentation.html#stability-index">Stability: 0</a> - Deprecated: Use <a href="../tls.html#class-tlstlssocket"><code>tls.TLSSocket</code></a> instead.</div><p></p><ul>
<li><code>context</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" rel="nofollow" class="type">&lt;Object&gt;</a> A secure context object as returned by
<code>tls.createSecureContext()</code></li>
<li><code>isServer</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" rel="nofollow" class="type">&lt;boolean&gt;</a> <code>true</code> to specify that this TLS connection should be
opened as a server.</li>
<li><code>requestCert</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" rel="nofollow" class="type">&lt;boolean&gt;</a> <code>true</code> to specify whether a server should request a
certificate from a connecting client. Only applies when <code>isServer</code> is <code>true</code>.</li>
<li><code>rejectUnauthorized</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" rel="nofollow" class="type">&lt;boolean&gt;</a> If not <code>false</code> a server automatically reject
clients with invalid certificates. Only applies when <code>isServer</code> is <code>true</code>.</li>
<li><code>options</code>
<ul>
<li><code>enableTrace</code>: See <a href="../tls.html#tlscreateserveroptions-secureconnectionlistener"><code>tls.createServer()</code></a></li>
<li><code>secureContext</code>: A TLS context object from <a href="../tls.html#tlscreatesecurecontextoptions"><code>tls.createSecureContext()</code></a></li>
<li><code>isServer</code>: If <code>true</code> the TLS socket will be instantiated in server-mode.
<strong>Default:</strong> <code>false</code>.</li>
<li><code>server</code> <a href="../net.html#class-netserver" rel="nofollow" class="type">&lt;net.Server&gt;</a> A <a href="../net.html#class-netserver"><code>net.Server</code></a> instance</li>
<li><code>requestCert</code>: See <a href="../tls.html#tlscreateserveroptions-secureconnectionlistener"><code>tls.createServer()</code></a></li>
<li><code>rejectUnauthorized</code>: See <a href="../tls.html#tlscreateserveroptions-secureconnectionlistener"><code>tls.createServer()</code></a></li>
<li><code>ALPNProtocols</code>: See <a href="../tls.html#tlscreateserveroptions-secureconnectionlistener"><code>tls.createServer()</code></a></li>
<li><code>SNICallback</code>: See <a href="../tls.html#tlscreateserveroptions-secureconnectionlistener"><code>tls.createServer()</code></a></li>
<li><code>session</code> <a href="../buffer.html#class-buffer" rel="nofollow" class="type">&lt;Buffer&gt;</a> A <code>Buffer</code> instance containing a TLS session.</li>
<li><code>requestOCSP</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" rel="nofollow" class="type">&lt;boolean&gt;</a> If <code>true</code>, specifies that the OCSP status request
extension will be added to the client hello and an <code>'OCSPResponse'</code> event
will be emitted on the socket before establishing a secure communication.</li>
</ul>
</li>
</ul><p>Creates a new secure pair object with two streams, one of which reads and writes
the encrypted data and the other of which reads and writes the cleartext data.
Generally, the encrypted stream is piped to/from an incoming encrypted data
stream and the cleartext one is used as a replacement for the initial encrypted
stream.</p><p><code>tls.createSecurePair()</code> returns a <code>tls.SecurePair</code> object with <code>cleartext</code> and
<code>encrypted</code> stream properties.</p><p>Using <code>cleartext</code> has the same API as <a href="../tls.html#class-tlstlssocket"><code>tls.TLSSocket</code></a>.</p><p>The <code>tls.createSecurePair()</code> method is now deprecated in favor of
<code>tls.TLSSocket()</code>. For example, the code:</p><pre><code class="language-js">pair = tls.<span class="hljs-title function_">createSecurePair</span>(<span class="hljs-comment">/* ... */</span>);
pair.<span class="hljs-property">encrypted</span>.<span class="hljs-title function_">pipe</span>(socket);
socket.<span class="hljs-title function_">pipe</span>(pair.<span class="hljs-property">encrypted</span>);</code></pre><p>can be replaced by:</p><pre><code class="language-js">secureSocket = tls.<span class="hljs-title class_">TLSSocket</span>(socket, options);</code></pre><p>where <code>secureSocket</code> has the same API as <code>pair.cleartext</code>.</p></div>
          <div></div>
        </div>

        <!-- <div id="biz_item" class="biz_wrap" data-biz="api_item">
          <a target="_blank" class="biz_link">
            <img class="biz_img" />
          </a>
        </div> -->
      </div>
    </div>
  </div>
  
  <div id="wxpaycode_box" style="display: none;">
    <div id="wxpaycode_img_box">
      <div id="wxpaycode_vip_tips">
        因经营维护成本巨大，
        <br>为了能提供更高质量的中文文档，
        <br>即日起将只对VIP会员开放。
        <br>扫码成为VIP会员，会员费用为<span id="wxpaycode_vip_money">199</span>元/年
      </div>
      <img id="wxpaycode_img">
    </div>
  </div>
  
  
  



    <script src="../../api/static/inject.js" defer=""></script></body></html>