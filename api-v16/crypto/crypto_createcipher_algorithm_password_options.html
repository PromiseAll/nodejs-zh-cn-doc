<!DOCTYPE html><html lang="zh-CN"><head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width">
  <title>crypto.createCipher(algorithm, password[, options]) | Node.js API 文档</title>
  
  

    <link href="../../api/static/inject.css" rel="stylesheet"><link rel="icon" sizes="32x32" type="image/png" href="../../api/static/favicon.png"></head>

<body class="alt apidoc" id="page_api_item">
  <div id="api-section-crypto">
    <div id="content" class="clearfix">

      <div id="column1" data-id="__ID__" class="interior">
        <header>
          <h1>crypto.createCipher(algorithm, password[, options])</h1>
          <div id="gtoc">
            <ul>
              <li>v16.16.0</li>
              <li>
                <a href="../crypto.html#crypto_crypto_createcipher_algorithm_password_options" name="toc">返回上层文档</a>
              </li>

              <li class="picker-header">
    <a href="#">
        <span class="collapsed-arrow">►</span><span class="expanded-arrow">▼</span>
        其他版本
      </a>
    <div class="picker"><ol id="alt-docs">
    <li><a href="../../api/crypto/crypto_createcipher_algorithm_password_options.html">18.6.0</a></li><li><a href="">16.16.0</a></li><li><a href="../../api-v14/crypto/crypto_createcipher_algorithm_password_options.html">14.20.0</a></li>
</ol></div>
  </li>

              <li>
                <a href="http://api.nodejs.cn/" class="link-to-search">搜索</a>
              </li>
              <li>
                
                
              </li>

              <!-- <li>
                <a href="https://github.com/nodejscn/node-api-cn/edit/master/crypto/#cryptocreatecipheralgorithm-password-options.md" rel="nofollow">提交修改</a>
              </li> -->
              <!-- <li>
                <a href="/gzh/">公众号</a>
              </li> -->
              <!-- <li class="biz_wrap" data-biz="api_item_nav">
                <a target="_blank" class="biz_title biz_link"></a>
              </li> -->
            </ul>
          </div>
          <hr>
        </header>

        <div id="apicontent">
          <div id="content_left"><div class="api_metadata">
<details class="changelog" open=""><summary>版本历史</summary>
<table>
<tbody><tr><th>版本</th><th>变更</th></tr>
<tr><td>v15.0.0</td>
<td><p>密码参数可以是 ArrayBuffer 并且限制为最多 2 ** 31 - 1 个字节。</p></td></tr>
<tr><td>v10.10.0</td>
<td><p>现在支持 OCB 模式下的加密。</p></td></tr>
<tr><td>v10.2.0</td>
<td><p>选项 <code>authTagLength</code> 现在可用于在 GCM 模式下生成较短的身份验证标签，默认为 16 字节。</p></td></tr>
<tr><td>v10.0.0</td>
<td><p><span>弃用于: v10.0.0</span></p></td></tr>
<tr><td>v0.1.94</td>
<td><p><span>新增于: v0.1.94</span></p></td></tr>
</tbody></table>
</details>
</div><p></p><div class="api_stability api_stability_0"><a href="../documentation.html#stability-index">稳定性: 0</a> - 弃用: 改为使用 <a href="../crypto.html#cryptocreatecipherivalgorithm-key-iv-options"><code>crypto.createCipheriv()</code></a> 。</div><p></p><ul class="">
<li><code>algorithm</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a></li>
<li><code>password</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/ArrayBuffer" rel="nofollow" class="type">&lt;ArrayBuffer&gt;</a> | <a href="../buffer.html#class-buffer" rel="nofollow" class="type">&lt;Buffer&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/TypedArray" rel="nofollow" class="type">&lt;TypedArray&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/DataView" rel="nofollow" class="type">&lt;DataView&gt;</a></li>
<li><code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" rel="nofollow" class="type">&lt;Object&gt;</a> <a href="../stream.html#new-streamtransformoptions"><code>stream.transform</code> 选项</a></li>
<li>返回: <a href="../crypto.html#class-cipher" rel="nofollow" class="type">&lt;Cipher&gt;</a></li>
</ul><p>创建并返回使用给定 <code>algorithm</code> 和 <code>password</code> 的 <code>Cipher</code> 对象。</p><p class=""><code>options</code> 参数控制流的行为，并且是可选的，除非使用 CCM 或 OCB 模式的加密（例如 <code>'aes-128-ccm'</code>）。
在这种情况下，需要 <code>authTagLength</code> 选项并指定身份验证标签的长度（以字节为单位），请参阅 <a href="../crypto.html#ccm-mode">CCM 模式</a>。
在 GCM 模式下，<code>authTagLength</code> 选项不是必需的，但可用于设置 <code>getAuthTag()</code> 将返回的身份验证标签的长度，默认为 16 字节。</p><p class=""><code>algorithm</code> 依赖于 OpenSSL，例如 <code>'aes192'</code> 等。
在最近的 OpenSSL 版本中，<code>openssl list -cipher-algorithms</code> 将显示可用的密码算法。</p><p class=""><code>password</code> 用于派生密钥和初始化向量 (IV)。
该值必须是 <code>'latin1'</code> 编码的字符串、<a href="../buffer.html"><code>Buffer</code></a>、<code>TypedArray</code> 或 <code>DataView</code>。</p><p class=""><code>crypto.createCipher()</code> 的实现使用 OpenSSL 函数 <a href="https://www.openssl.org/docs/man1.1.0/crypto/EVP_BytesToKey.html" rel="nofollow"><code>EVP_BytesToKey</code></a> 派生密钥，摘要算法设置为 MD5，一次迭代，不加盐。
缺少盐允许字典攻击，因为相同的密码总是创建相同的密钥。
低迭代次数和非加密安全散列算法允许非常快速地测试密码。</p><p class="">根据 OpenSSL 建议使用更现代的算法而不是 <a href="https://www.openssl.org/docs/man1.1.0/crypto/EVP_BytesToKey.html" rel="nofollow"><code>EVP_BytesToKey</code></a>，建议开发人员使用 <a href="../crypto.html#cryptoscryptpassword-salt-keylen-options-callback"><code>crypto.scrypt()</code></a> 自行派生密钥和 IV，并使用 <a href="../crypto.html#cryptocreatecipherivalgorithm-key-iv-options"><code>crypto.createCipheriv()</code></a> 创建 <code>Cipher</code> 对象。
用户不应在 <code>crypto.createCipher()</code> 中使用计数器模式（例如 CTR、GCM 或 CCM）的密码。
使用它们时会发出警告，以避免导致漏洞的 IV 重用风险。
对于在 GCM 中重用 IV 的情况，请参阅 <a href="https://github.com/nonce-disrespect/nonce-disrespect" rel="nofollow">Nonce-Disrespecting Adversaries</a> 以获取详细信息。</p></div>
          <div id="content_right"><div class="api_metadata">
<details class="changelog" open=""><summary>History</summary>
<table>
<tbody><tr><th>Version</th><th>Changes</th></tr>
<tr><td>v15.0.0</td>
<td><p>The password argument can be an ArrayBuffer and is limited to a maximum of 2 ** 31 - 1 bytes.</p></td></tr>
<tr><td>v10.10.0</td>
<td><p>Ciphers in OCB mode are now supported.</p></td></tr>
<tr><td>v10.2.0</td>
<td><p>The <code>authTagLength</code> option can now be used to produce shorter authentication tags in GCM mode and defaults to 16 bytes.</p></td></tr>
<tr><td>v10.0.0</td>
<td><p><span>Deprecated since: v10.0.0</span></p></td></tr>
<tr><td>v0.1.94</td>
<td><p><span>Added in: v0.1.94</span></p></td></tr>
</tbody></table>
</details>
</div><p></p><div class="api_stability api_stability_0"><a href="../documentation.html#stability-index">Stability: 0</a> - Deprecated: Use <a href="../crypto.html#cryptocreatecipherivalgorithm-key-iv-options"><code>crypto.createCipheriv()</code></a> instead.</div><p></p><ul>
<li><code>algorithm</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a></li>
<li><code>password</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/ArrayBuffer" rel="nofollow" class="type">&lt;ArrayBuffer&gt;</a> | <a href="../buffer.html#class-buffer" rel="nofollow" class="type">&lt;Buffer&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/TypedArray" rel="nofollow" class="type">&lt;TypedArray&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/DataView" rel="nofollow" class="type">&lt;DataView&gt;</a></li>
<li><code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" rel="nofollow" class="type">&lt;Object&gt;</a> <a href="../stream.html#new-streamtransformoptions"><code>stream.transform</code> options</a></li>
<li>Returns: <a href="../crypto.html#class-cipher" rel="nofollow" class="type">&lt;Cipher&gt;</a></li>
</ul><p>Creates and returns a <code>Cipher</code> object that uses the given <code>algorithm</code> and
<code>password</code>.</p><p>The <code>options</code> argument controls stream behavior and is optional except when a
cipher in CCM or OCB mode is used (e.g. <code>'aes-128-ccm'</code>). In that case, the
<code>authTagLength</code> option is required and specifies the length of the
authentication tag in bytes, see <a href="../crypto.html#ccm-mode">CCM mode</a>. In GCM mode, the <code>authTagLength</code>
option is not required but can be used to set the length of the authentication
tag that will be returned by <code>getAuthTag()</code> and defaults to 16 bytes.</p><p>The <code>algorithm</code> is dependent on OpenSSL, examples are <code>'aes192'</code>, etc. On
recent OpenSSL releases, <code>openssl list -cipher-algorithms</code> will
display the available cipher algorithms.</p><p>The <code>password</code> is used to derive the cipher key and initialization vector (IV).
The value must be either a <code>'latin1'</code> encoded string, a <a href="../buffer.html"><code>Buffer</code></a>, a
<code>TypedArray</code>, or a <code>DataView</code>.</p><p>The implementation of <code>crypto.createCipher()</code> derives keys using the OpenSSL
function <a href="https://www.openssl.org/docs/man1.1.0/crypto/EVP_BytesToKey.html" rel="nofollow"><code>EVP_BytesToKey</code></a> with the digest algorithm set to MD5, one
iteration, and no salt. The lack of salt allows dictionary attacks as the same
password always creates the same key. The low iteration count and
non-cryptographically secure hash algorithm allow passwords to be tested very
rapidly.</p><p>In line with OpenSSL's recommendation to use a more modern algorithm instead of
<a href="https://www.openssl.org/docs/man1.1.0/crypto/EVP_BytesToKey.html" rel="nofollow"><code>EVP_BytesToKey</code></a> it is recommended that developers derive a key and IV on
their own using <a href="../crypto.html#cryptoscryptpassword-salt-keylen-options-callback"><code>crypto.scrypt()</code></a> and to use <a href="../crypto.html#cryptocreatecipherivalgorithm-key-iv-options"><code>crypto.createCipheriv()</code></a>
to create the <code>Cipher</code> object. Users should not use ciphers with counter mode
(e.g. CTR, GCM, or CCM) in <code>crypto.createCipher()</code>. A warning is emitted when
they are used in order to avoid the risk of IV reuse that causes
vulnerabilities. For the case when IV is reused in GCM, see <a href="https://github.com/nonce-disrespect/nonce-disrespect" rel="nofollow">Nonce-Disrespecting
Adversaries</a> for details.</p></div>
          <div></div>
        </div>

        <!-- <div id="biz_item" class="biz_wrap" data-biz="api_item">
          <a target="_blank" class="biz_link">
            <img class="biz_img" />
          </a>
        </div> -->
      </div>
    </div>
  </div>
  
  <div id="wxpaycode_box" style="display: none;">
    <div id="wxpaycode_img_box">
      <div id="wxpaycode_vip_tips">
        因经营维护成本巨大，
        <br>为了能提供更高质量的中文文档，
        <br>即日起将只对VIP会员开放。
        <br>扫码成为VIP会员，会员费用为<span id="wxpaycode_vip_money">199</span>元/年
      </div>
      <img id="wxpaycode_img">
    </div>
  </div>
  
  
  



    <script src="../../api/static/inject.js" defer=""></script></body></html>