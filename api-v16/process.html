<!DOCTYPE html><html lang="zh-CN"><head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width">
  <title>process 进程 | Node.js API 文档</title>
  
  
  <style>@media(max-width:502px){.with-35-chars>.js-flavor-selector{float:none;margin:0 0 1em auto;}}@media(max-width:694px){.with-59-chars>.js-flavor-selector{float:none;margin:0 0 1em auto;}}@media(max-width:510px){.with-36-chars>.js-flavor-selector{float:none;margin:0 0 1em auto;}}@media(max-width:558px){.with-42-chars>.js-flavor-selector{float:none;margin:0 0 1em auto;}}@media(max-width:542px){.with-40-chars>.js-flavor-selector{float:none;margin:0 0 1em auto;}}@media(max-width:526px){.with-38-chars>.js-flavor-selector{float:none;margin:0 0 1em auto;}}@media(max-width:566px){.with-43-chars>.js-flavor-selector{float:none;margin:0 0 1em auto;}}@media(max-width:654px){.with-54-chars>.js-flavor-selector{float:none;margin:0 0 1em auto;}}@media(max-width:710px){.with-61-chars>.js-flavor-selector{float:none;margin:0 0 1em auto;}}@media(max-width:582px){.with-45-chars>.js-flavor-selector{float:none;margin:0 0 1em auto;}}@media(max-width:518px){.with-37-chars>.js-flavor-selector{float:none;margin:0 0 1em auto;}}@media(max-width:534px){.with-39-chars>.js-flavor-selector{float:none;margin:0 0 1em auto;}}</style>

    <link href="../api/static/inject.css" rel="stylesheet"><link rel="icon" sizes="32x32" type="image/png" href="../api/static/favicon.png"></head>

<body class="alt apidoc api_page_process" id="page_api">
  <div id="content" class="clearfix">
    <div id="column2" class="interior">
      <div id="intro" class="interior">
        

      </div>
      <!-- <ul>
          <li><a href="./" class="nav-documentation">v16.16.0</a></li>
        </ul> -->
      <!-- <div id="biz_nav" class="biz_wrap" data-biz="api_nav"><a target="_blank" class="biz_link"><img
            class="biz_img"></a>
      </div> -->
      <div class="line"></div>
      <ul>
<li><a href="documentation.html" class="nav-documentation" rel="nofollow">关于本文档</a></li>
<li><a href="synopsis.html" class="nav-synopsis" rel="nofollow">用法与示例</a></li>
</ul>
<hr class="line">
<ul>
<li><a href="assert.html" class="nav-assert" rel="nofollow">assert<span class="api_nav_cn_name">断言</span></a></li>
<li><a href="async_hooks.html" class="nav-async_hooks" rel="nofollow">async_hooks<span class="api_nav_cn_name">异步钩子</span></a></li>
<li><a href="async_context.html" class="nav-async_context" rel="nofollow"><span style="font-size:11px;">async_hooks/context</span><span class="api_nav_cn_name" style="font-size:12px;padding-left:1px;">异步上下文</span></a></li>
<li><a href="buffer.html" class="nav-buffer" rel="nofollow">buffer<span class="api_nav_cn_name">缓冲区</span></a></li>
<li><a href="addons.html" class="nav-addons" rel="nofollow">C++插件</a></li>
<li><a href="n-api.html" class="nav-n-api" rel="nofollow"><span style="font-size:14px;">C/C++插件(使用Node-API)</span></a></li>
<li><a href="embedding.html" class="nav-embedding" rel="nofollow">C++嵌入器</a></li>
<li><a href="child_process.html" class="nav-child_process" rel="nofollow">child_process<span class="api_nav_cn_name">子进程</span></a></li>
<li><a href="cluster.html" class="nav-cluster" rel="nofollow">cluster<span class="api_nav_cn_name">集群</span></a></li>
<li><a href="cli.html" class="nav-cli" rel="nofollow">CLI<span class="api_nav_cn_name">命令行</span></a></li>
<li><a href="console.html" class="nav-console" rel="nofollow">console<span class="api_nav_cn_name">控制台</span></a></li>
<li><a href="corepack.html" class="nav-corepack" rel="nofollow">Corepack<span class="api_nav_cn_name">核心包</span></a></li>
<li><a href="crypto.html" class="nav-crypto" rel="nofollow">crypto<span class="api_nav_cn_name">加密</span></a></li>
<li><a href="webcrypto.html" class="nav-webcrypto" rel="nofollow"><span style="font-size:14px;">crypto/webcrypto</span><span class="api_nav_cn_name" style="font-size:12px;padding-left:2px;">网络加密</span></a></li>
<li><a href="debugger.html" class="nav-debugger" rel="nofollow">debugger<span class="api_nav_cn_name">调试器</span></a></li>
<li><a href="deprecations.html" class="nav-deprecations" rel="nofollow">deprecation<span class="api_nav_cn_name">弃用</span></a></li>
<li><a href="dgram.html" class="nav-dgram" rel="nofollow">dgram<span class="api_nav_cn_name">数据报</span></a></li>
<li><a href="diagnostics_channel.html" class="nav-diagnostics_channel" rel="nofollow"><span style="font-size:14px;">diagnostics_channel</span><span class="api_nav_cn_name" style="font-size:12px;padding-left:2px;">诊断通道</span></a></li>
<li><a href="dns.html" class="nav-dns" rel="nofollow">dns<span class="api_nav_cn_name">域名服务器</span></a></li>
<li><a href="domain.html" class="nav-domain" rel="nofollow">domain<span class="api_nav_cn_name">域</span></a></li>
<li><a href="errors.html" class="nav-errors" rel="nofollow">Error<span class="api_nav_cn_name">错误</span></a></li>
<li><a href="events.html" class="nav-events" rel="nofollow">events<span class="api_nav_cn_name">事件触发器</span></a></li>
<li><a href="fs.html" class="nav-fs" rel="nofollow">fs<span class="api_nav_cn_name">文件系统</span></a></li>
<li><a href="globals.html" class="nav-globals" rel="nofollow">global<span class="api_nav_cn_name">全局变量</span></a></li>
<li><a href="http.html" class="nav-http" rel="nofollow">http<span class="api_nav_cn_name">超文本传输协议</span></a></li>
<li><a href="http2.html" class="nav-http2" rel="nofollow">http2<span class="api_nav_cn_name">超文本传输协议2.0</span></a></li>
<li><a href="https.html" class="nav-https" rel="nofollow">https<span class="api_nav_cn_name">安全超文本传输协议</span></a></li>
<li><a href="inspector.html" class="nav-inspector" rel="nofollow">inspector<span class="api_nav_cn_name">检查器</span></a></li>
<li><a href="intl.html" class="nav-intl" rel="nofollow">Intl<span class="api_nav_cn_name">国际化</span></a></li>
<li><a href="module.html" class="nav-module" rel="nofollow">module<span class="api_nav_cn_name">模块</span></a></li>
<li><a href="modules.html" class="nav-modules" rel="nofollow"><span style="font-size:14px;">module/cjs</span><span class="api_nav_cn_name" style="font-size:12px;padding-left:2px;">CommonJS模块</span></a></li>
<li><a href="esm.html" class="nav-esm" rel="nofollow"><span style="font-size:14px;">module/esm</span><span class="api_nav_cn_name" style="font-size:12px;padding-left:2px;">ECMAScript模块</span></a></li>
<li><a href="packages.html" class="nav-packages" rel="nofollow"><span style="font-size:14px;">module/package</span><span class="api_nav_cn_name" style="font-size:12px;padding-left:2px;">包模块</span></a></li>
<li><a href="net.html" class="nav-net" rel="nofollow">net<span class="api_nav_cn_name">网络</span></a></li>
<li><a href="os.html" class="nav-os" rel="nofollow">os<span class="api_nav_cn_name">操作系统</span></a></li>
<li><a href="path.html" class="nav-path" rel="nofollow">path<span class="api_nav_cn_name">路径</span></a></li>
<li><a href="perf_hooks.html" class="nav-perf_hooks" rel="nofollow">perf_hooks<span class="api_nav_cn_name">性能钩子</span></a></li>
<li><a href="policy.html" class="nav-policy" rel="nofollow">policy<span class="api_nav_cn_name">安全策略</span></a></li>
<li><a href="" class="nav-process active" rel="nofollow">process<span class="api_nav_cn_name">进程</span></a></li>
<li><a href="punycode.html" class="nav-punycode" rel="nofollow">punycode<span class="api_nav_cn_name">域名代码</span></a></li>
<li><a href="querystring.html" class="nav-querystring" rel="nofollow">querystring<span class="api_nav_cn_name">查询字符串</span></a></li>
<li><a href="readline.html" class="nav-readline" rel="nofollow">readline<span class="api_nav_cn_name">逐行读取</span></a></li>
<li><a href="repl.html" class="nav-repl" rel="nofollow">repl<span class="api_nav_cn_name">交互式解释器</span></a></li>
<li><a href="report.html" class="nav-report" rel="nofollow">report<span class="api_nav_cn_name">诊断报告</span></a></li>
<li><a href="stream.html" class="nav-stream" rel="nofollow">stream<span class="api_nav_cn_name">流</span></a></li>
<li><a href="webstreams.html" class="nav-webstreams" rel="nofollow">stream/web<span class="api_nav_cn_name">网络流</span></a></li>
<li><a href="string_decoder.html" class="nav-string_decoder" rel="nofollow"><span style="font-size:15px;">string_decoder</span><span class="api_nav_cn_name" style="font-size:12px;padding-left:6px;">字符串解码器</span></a></li>
<li><a href="timers.html" class="nav-timers" rel="nofollow">timers<span class="api_nav_cn_name">定时器</span></a></li>
<li><a href="tls.html" class="nav-tls" rel="nofollow">tls<span class="api_nav_cn_name">安全传输层</span></a></li>
<li><a href="tracing.html" class="nav-tracing" rel="nofollow">trace_events<span class="api_nav_cn_name">跟踪事件</span></a></li>
<li><a href="tty.html" class="nav-tty" rel="nofollow">tty<span class="api_nav_cn_name">终端</span></a></li>
<li><a href="url.html" class="nav-url" rel="nofollow">url<span class="api_nav_cn_name">网址</span></a></li>
<li><a href="util.html" class="nav-util" rel="nofollow">util<span class="api_nav_cn_name">实用工具</span></a></li>
<li><a href="v8.html" class="nav-v8" rel="nofollow">v8<span class="api_nav_cn_name">引擎</span></a></li>
<li><a href="vm.html" class="nav-vm" rel="nofollow">vm<span class="api_nav_cn_name">虚拟机</span></a></li>
<li><a href="wasi.html" class="nav-wasi" rel="nofollow">wasi<span class="api_nav_cn_name">网络汇编系统接口</span></a></li>
<li><a href="worker_threads.html" class="nav-worker_threads" rel="nofollow">worker_threads<span class="api_nav_cn_name">工作线程</span></a></li>
<li><a href="zlib.html" class="nav-zlib" rel="nofollow">zlib<span class="api_nav_cn_name">压缩</span></a></li>
</ul>

    </div>

    <div id="column1" data-id="process" class="interior">
      <header class="header">
        <div class="header-container">
          <h1>Node.js v16.16.0 文档</h1>
          <button class="theme-toggle-btn" id="theme-toggle-btn" title="Toggle dark mode/light mode" aria-label="Toggle dark mode/light mode" hidden="">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon dark-icon" height="24" width="24">
              <path fill="none" d="M0 0h24v24H0z"></path>
              <path d="M11.1 12.08c-2.33-4.51-.5-8.48.53-10.07C6.27 2.2 1.98 6.59 1.98 12c0 .14.02.28.02.42.62-.27 1.29-.42 2-.42 1.66 0 3.18.83 4.1 2.15A4.01 4.01 0 0111 18c0 1.52-.87 2.83-2.12 3.51.98.32 2.03.5 3.11.5 3.5 0 6.58-1.8 8.37-4.52-2.36.23-6.98-.97-9.26-5.41z"></path>
              <path d="M7 16h-.18C6.4 14.84 5.3 14 4 14c-1.66 0-3 1.34-3 3s1.34 3 3 3h3c1.1 0 2-.9 2-2s-.9-2-2-2z"></path>
            </svg>
            <svg xmlns="http://www.w3.org/2000/svg" class="icon light-icon" height="24" width="24">
              <path d="M0 0h24v24H0z" fill="none"></path>
              <path d="M6.76 4.84l-1.8-1.79-1.41 1.41 1.79 1.79 1.42-1.41zM4 10.5H1v2h3v-2zm9-9.95h-2V3.5h2V.55zm7.45 3.91l-1.41-1.41-1.79 1.79 1.41 1.41 1.79-1.79zm-3.21 13.7l1.79 1.8 1.41-1.41-1.8-1.79-1.4 1.4zM20 10.5v2h3v-2h-3zm-8-5c-3.31 0-6 2.69-6 6s2.69 6 6 6 6-2.69 6-6-2.69-6-6-6zm-1 16.95h2V19.5h-2v2.95zm-7.45-3.91l1.41 1.41 1.79-1.8-1.41-1.41-1.79 1.8z"></path>
            </svg>
          </button>
        </div>
        <div id="gtoc">
          <ul>
            <li class="pinned-header">Node.js 16.16.0</li>
            <!-- <li>
              <a href="./">返回文档首页</a>
            </li> -->
            
    <li class="picker-header" id="header_toc">
      <a href="#">
        <span class="collapsed-arrow">►</span><span class="expanded-arrow">▼</span>
        目录
      </a>

      <div class="picker"><div class="toc"><ul>
<li><a href="#process">process 进程</a>
<ul>
<li><a href="#process-events">进程事件</a>
<ul>
<li><a href="#event-beforeexit"><code>'beforeExit'</code> 事件</a></li>
<li><a href="#event-disconnect"><code>'disconnect'</code> 事件</a></li>
<li><a href="#event-exit"><code>'exit'</code> 事件</a></li>
<li><a href="#event-message"><code>'message'</code> 事件</a></li>
<li><span class="stability_0"><a href="#event-multipleresolves"><code>'multipleResolves'</code> 事件</a></span></li>
<li><a href="#event-rejectionhandled"><code>'rejectionHandled'</code> 事件</a></li>
<li><a href="#event-uncaughtexception"><code>'uncaughtException'</code> 事件</a>
<ul>
<li><a href="#warning-using-uncaughtexception-correctly">注意: 正确使用 'uncaughtException'</a></li>
</ul>
</li>
<li><a href="#event-uncaughtexceptionmonitor"><code>'uncaughtExceptionMonitor'</code> 事件</a></li>
<li><a href="#event-unhandledrejection"><code>'unhandledRejection'</code> 事件</a></li>
<li><a href="#event-warning"><code>'warning'</code> 事件</a></li>
<li><a href="#event-worker"><code>'worker'</code> 事件</a>
<ul>
<li><a href="#emitting-custom-warnings">触发自定义的告警</a></li>
<li><a href="#nodejs-warning-names">Node.js 警告的名称</a></li>
</ul>
</li>
<li><a href="#signal-events">信号事件</a></li>
</ul>
</li>
<li><a href="#processabort"><code>process.abort()</code></a></li>
<li><a href="#processallowednodeenvironmentflags"><code>process.allowedNodeEnvironmentFlags</code></a></li>
<li><a href="#processarch"><code>process.arch</code></a></li>
<li><a href="#processargv"><code>process.argv</code></a></li>
<li><a href="#processargv0"><code>process.argv0</code></a></li>
<li><a href="#processchannel"><code>process.channel</code></a>
<ul>
<li><a href="#processchannelref"><code>process.channel.ref()</code></a></li>
<li><a href="#processchannelunref"><code>process.channel.unref()</code></a></li>
</ul>
</li>
<li><a href="#processchdirdirectory"><code>process.chdir(directory)</code></a></li>
<li><a href="#processconfig"><code>process.config</code></a></li>
<li><a href="#processconnected"><code>process.connected</code></a></li>
<li><a href="#processcpuusagepreviousvalue"><code>process.cpuUsage([previousValue])</code></a></li>
<li><a href="#processcwd"><code>process.cwd()</code></a></li>
<li><a href="#processdebugport"><code>process.debugPort</code></a></li>
<li><a href="#processdisconnect"><code>process.disconnect()</code></a></li>
<li><a href="#processdlopenmodule-filename-flags"><code>process.dlopen(module, filename[, flags])</code></a></li>
<li><a href="#processemitwarningwarning-options"><code>process.emitWarning(warning[, options])</code></a></li>
<li><a href="#processemitwarningwarning-type-code-ctor"><code>process.emitWarning(warning[, type[, code]][, ctor])</code></a>
<ul>
<li><a href="#avoiding-duplicate-warnings">避免重复警告</a></li>
</ul>
</li>
<li><a href="#processenv"><code>process.env</code></a></li>
<li><a href="#processexecargv"><code>process.execArgv</code></a></li>
<li><a href="#processexecpath"><code>process.execPath</code></a></li>
<li><a href="#processexitcode"><code>process.exit([code])</code></a></li>
<li><a href="#processexitcode_1"><code>process.exitCode</code></a></li>
<li><span class="stability_1"><a href="#processgetactiveresourcesinfo"><code>process.getActiveResourcesInfo()</code></a></span></li>
<li><a href="#processgetegid"><code>process.getegid()</code></a></li>
<li><a href="#processgeteuid"><code>process.geteuid()</code></a></li>
<li><a href="#processgetgid"><code>process.getgid()</code></a></li>
<li><a href="#processgetgroups"><code>process.getgroups()</code></a></li>
<li><a href="#processgetuid"><code>process.getuid()</code></a></li>
<li><a href="#processhasuncaughtexceptioncapturecallback"><code>process.hasUncaughtExceptionCaptureCallback()</code></a></li>
<li><span class="stability_3"><a href="#processhrtimetime"><code>process.hrtime([time])</code></a></span></li>
<li><a href="#processhrtimebigint"><code>process.hrtime.bigint()</code></a></li>
<li><a href="#processinitgroupsuser-extragroup"><code>process.initgroups(user, extraGroup)</code></a></li>
<li><a href="#processkillpid-signal"><code>process.kill(pid[, signal])</code></a></li>
<li><span class="stability_0"><a href="#processmainmodule"><code>process.mainModule</code></a></span></li>
<li><a href="#processmemoryusage"><code>process.memoryUsage()</code></a></li>
<li><a href="#processmemoryusagerss"><code>process.memoryUsage.rss()</code></a></li>
<li><a href="#processnexttickcallback-args"><code>process.nextTick(callback[, ...args])</code></a>
<ul>
<li><a href="#when-to-use-queuemicrotask-vs-processnexttick">何时使用 queueMicrotask() 与 process.nextTick()</a></li>
</ul>
</li>
<li><a href="#processnodeprecation"><code>process.noDeprecation</code></a></li>
<li><a href="#processpid"><code>process.pid</code></a></li>
<li><a href="#processplatform"><code>process.platform</code></a></li>
<li><a href="#processppid"><code>process.ppid</code></a></li>
<li><a href="#processrelease"><code>process.release</code></a></li>
<li><a href="#processreport"><code>process.report</code></a>
<ul>
<li><a href="#processreportcompact"><code>process.report.compact</code></a></li>
<li><a href="#processreportdirectory"><code>process.report.directory</code></a></li>
<li><a href="#processreportfilename"><code>process.report.filename</code></a></li>
<li><a href="#processreportgetreporterr"><code>process.report.getReport([err])</code></a></li>
<li><a href="#processreportreportonfatalerror"><code>process.report.reportOnFatalError</code></a></li>
<li><a href="#processreportreportonsignal"><code>process.report.reportOnSignal</code></a></li>
<li><a href="#processreportreportonuncaughtexception"><code>process.report.reportOnUncaughtException</code></a></li>
<li><a href="#processreportsignal"><code>process.report.signal</code></a></li>
<li><a href="#processreportwritereportfilename-err"><code>process.report.writeReport([filename][, err])</code></a></li>
</ul>
</li>
<li><a href="#processresourceusage"><code>process.resourceUsage()</code></a></li>
<li><a href="#processsendmessage-sendhandle-options-callback"><code>process.send(message[, sendHandle[, options]][, callback])</code></a></li>
<li><a href="#processsetegidid"><code>process.setegid(id)</code></a></li>
<li><a href="#processseteuidid"><code>process.seteuid(id)</code></a></li>
<li><a href="#processsetgidid"><code>process.setgid(id)</code></a></li>
<li><a href="#processsetgroupsgroups"><code>process.setgroups(groups)</code></a></li>
<li><a href="#processsetuidid"><code>process.setuid(id)</code></a></li>
<li><span class="stability_1"><a href="#processsetsourcemapsenabledval"><code>process.setSourceMapsEnabled(val)</code></a></span></li>
<li><a href="#processsetuncaughtexceptioncapturecallbackfn"><code>process.setUncaughtExceptionCaptureCallback(fn)</code></a></li>
<li><a href="#processstderr"><code>process.stderr</code></a>
<ul>
<li><a href="#processstderrfd"><code>process.stderr.fd</code></a></li>
</ul>
</li>
<li><a href="#processstdin"><code>process.stdin</code></a>
<ul>
<li><a href="#processstdinfd"><code>process.stdin.fd</code></a></li>
</ul>
</li>
<li><a href="#processstdout"><code>process.stdout</code></a>
<ul>
<li><a href="#processstdoutfd"><code>process.stdout.fd</code></a></li>
<li><a href="#a-note-on-process-io">进程 I/O 的注意事项</a></li>
</ul>
</li>
<li><a href="#processthrowdeprecation"><code>process.throwDeprecation</code></a></li>
<li><a href="#processtitle"><code>process.title</code></a></li>
<li><a href="#processtracedeprecation"><code>process.traceDeprecation</code></a></li>
<li><span class="stability_0"><a href="#processumask"><code>process.umask()</code></a></span></li>
<li><a href="#processumaskmask"><code>process.umask(mask)</code></a></li>
<li><a href="#processuptime"><code>process.uptime()</code></a></li>
<li><a href="#processversion"><code>process.version</code></a></li>
<li><a href="#processversions"><code>process.versions</code></a></li>
<li><a href="#exit-codes">退出码</a></li>
</ul>
</li>
</ul></div></div>
    </li>
  
            
    <li class="picker-header">
      <a href="#">
        <span class="collapsed-arrow">►</span><span class="expanded-arrow">▼</span>
        索引
      </a>

      <div class="picker"><ul>
<li><a href="documentation.html" class="nav-documentation">关于本文档</a></li>
<li><a href="synopsis.html" class="nav-synopsis">用法与示例</a></li>

      <li>
        <a href="index.html">首页</a>
      </li>
    </ul>
  
<hr class="line">
<ul>
<li><a href="assert.html" class="nav-assert">assert 断言</a></li>
<li><a href="async_hooks.html" class="nav-async_hooks">async_hooks 异步钩子</a></li>
<li><a href="async_context.html" class="nav-async_context">async_hooks/context 异步上下文</a></li>
<li><a href="buffer.html" class="nav-buffer">buffer 缓冲区</a></li>
<li><a href="addons.html" class="nav-addons">C++插件</a></li>
<li><a href="n-api.html" class="nav-n-api">C/C++插件(使用Node-API)</a></li>
<li><a href="embedding.html" class="nav-embedding">C++嵌入器</a></li>
<li><a href="child_process.html" class="nav-child_process">child_process 子进程</a></li>
<li><a href="cluster.html" class="nav-cluster">cluster 集群</a></li>
<li><a href="cli.html" class="nav-cli">CLI 命令行</a></li>
<li><a href="console.html" class="nav-console">console 控制台</a></li>
<li><a href="corepack.html" class="nav-corepack">Corepack 核心包</a></li>
<li><a href="crypto.html" class="nav-crypto">crypto 加密</a></li>
<li><a href="webcrypto.html" class="nav-webcrypto">crypto/webcrypto 网络加密</a></li>
<li><a href="debugger.html" class="nav-debugger">debugger 调试器</a></li>
<li><a href="deprecations.html" class="nav-deprecations">deprecation 弃用</a></li>
<li><a href="dgram.html" class="nav-dgram">dgram 数据报</a></li>
<li><a href="diagnostics_channel.html" class="nav-diagnostics_channel">diagnostics_channel 诊断通道</a></li>
<li><a href="dns.html" class="nav-dns">dns 域名服务器</a></li>
<li><a href="domain.html" class="nav-domain">domain 域</a></li>
<li><a href="errors.html" class="nav-errors">Error 错误</a></li>
<li><a href="events.html" class="nav-events">events 事件触发器</a></li>
<li><a href="fs.html" class="nav-fs">fs 文件系统</a></li>
<li><a href="globals.html" class="nav-globals">global 全局变量</a></li>
<li><a href="http.html" class="nav-http">http 超文本传输协议</a></li>
<li><a href="http2.html" class="nav-http2">http2 超文本传输协议2.0</a></li>
<li><a href="https.html" class="nav-https">https 安全超文本传输协议</a></li>
<li><a href="inspector.html" class="nav-inspector">inspector 检查器</a></li>
<li><a href="intl.html" class="nav-intl">Intl 国际化</a></li>
<li><a href="module.html" class="nav-module">module 模块</a></li>
<li><a href="modules.html" class="nav-modules">module/cjs CommonJS模块</a></li>
<li><a href="esm.html" class="nav-esm">module/esm ECMAScript模块</a></li>
<li><a href="packages.html" class="nav-packages">module/package 包模块</a></li>
<li><a href="net.html" class="nav-net">net 网络</a></li>
<li><a href="os.html" class="nav-os">os 操作系统</a></li>
<li><a href="path.html" class="nav-path">path 路径</a></li>
<li><a href="perf_hooks.html" class="nav-perf_hooks">perf_hooks 性能钩子</a></li>
<li><a href="policy.html" class="nav-policy">policy 安全策略</a></li>
<li><a href="" class="nav-process active">process 进程</a></li>
<li><a href="punycode.html" class="nav-punycode">punycode 域名代码</a></li>
<li><a href="querystring.html" class="nav-querystring">querystring 查询字符串</a></li>
<li><a href="readline.html" class="nav-readline">readline 逐行读取</a></li>
<li><a href="repl.html" class="nav-repl">repl 交互式解释器</a></li>
<li><a href="report.html" class="nav-report">report 诊断报告</a></li>
<li><a href="stream.html" class="nav-stream">stream 流</a></li>
<li><a href="webstreams.html" class="nav-webstreams">stream/web 网络流</a></li>
<li><a href="string_decoder.html" class="nav-string_decoder">string_decoder 字符串解码器</a></li>
<li><a href="timers.html" class="nav-timers">timers 定时器</a></li>
<li><a href="tls.html" class="nav-tls">tls 安全传输层</a></li>
<li><a href="tracing.html" class="nav-tracing">trace_events 跟踪事件</a></li>
<li><a href="tty.html" class="nav-tty">tty 终端</a></li>
<li><a href="url.html" class="nav-url">url 网址</a></li>
<li><a href="util.html" class="nav-util">util 实用工具</a></li>
<li><a href="v8.html" class="nav-v8">v8 引擎</a></li>
<li><a href="vm.html" class="nav-vm">vm 虚拟机</a></li>
<li><a href="wasi.html" class="nav-wasi">wasi 网络汇编系统接口</a></li>
<li><a href="worker_threads.html" class="nav-worker_threads">worker_threads 工作线程</a></li>
<li><a href="zlib.html" class="nav-zlib">zlib 压缩</a></li>
</ul></div>
    </li>
  
            <li class="picker-header">
    <a href="#">
        <span class="collapsed-arrow">►</span><span class="expanded-arrow">▼</span>
        其他版本
      </a>
    <div class="picker"><ol id="alt-docs">
    <li><a href="../api/process.html">18.6.0</a></li><li><a href="">16.16.0</a></li><li><a href="../api-v14/process.html">14.20.0</a></li>
</ol></div>
  </li>
            <li>
              <a href="http://api.nodejs.cn/" class="link-to-search">搜索</a>
            </li>
            <li>
              
              
            </li>
          </ul>
        </div>
        <hr>
      </header>

      <details id="toc" open=""><summary>目录</summary><ul>
<li><a href="#process">process 进程</a>
<ul>
<li><a href="#process-events">进程事件</a>
<ul>
<li><a href="#event-beforeexit"><code>'beforeExit'</code> 事件</a></li>
<li><a href="#event-disconnect"><code>'disconnect'</code> 事件</a></li>
<li><a href="#event-exit"><code>'exit'</code> 事件</a></li>
<li><a href="#event-message"><code>'message'</code> 事件</a></li>
<li><span class="stability_0"><a href="#event-multipleresolves"><code>'multipleResolves'</code> 事件</a></span></li>
<li><a href="#event-rejectionhandled"><code>'rejectionHandled'</code> 事件</a></li>
<li><a href="#event-uncaughtexception"><code>'uncaughtException'</code> 事件</a>
<ul>
<li><a href="#warning-using-uncaughtexception-correctly">注意: 正确使用 'uncaughtException'</a></li>
</ul>
</li>
<li><a href="#event-uncaughtexceptionmonitor"><code>'uncaughtExceptionMonitor'</code> 事件</a></li>
<li><a href="#event-unhandledrejection"><code>'unhandledRejection'</code> 事件</a></li>
<li><a href="#event-warning"><code>'warning'</code> 事件</a></li>
<li><a href="#event-worker"><code>'worker'</code> 事件</a>
<ul>
<li><a href="#emitting-custom-warnings">触发自定义的告警</a></li>
<li><a href="#nodejs-warning-names">Node.js 警告的名称</a></li>
</ul>
</li>
<li><a href="#signal-events">信号事件</a></li>
</ul>
</li>
<li><a href="#processabort"><code>process.abort()</code></a></li>
<li><a href="#processallowednodeenvironmentflags"><code>process.allowedNodeEnvironmentFlags</code></a></li>
<li><a href="#processarch"><code>process.arch</code></a></li>
<li><a href="#processargv"><code>process.argv</code></a></li>
<li><a href="#processargv0"><code>process.argv0</code></a></li>
<li><a href="#processchannel"><code>process.channel</code></a>
<ul>
<li><a href="#processchannelref"><code>process.channel.ref()</code></a></li>
<li><a href="#processchannelunref"><code>process.channel.unref()</code></a></li>
</ul>
</li>
<li><a href="#processchdirdirectory"><code>process.chdir(directory)</code></a></li>
<li><a href="#processconfig"><code>process.config</code></a></li>
<li><a href="#processconnected"><code>process.connected</code></a></li>
<li><a href="#processcpuusagepreviousvalue"><code>process.cpuUsage([previousValue])</code></a></li>
<li><a href="#processcwd"><code>process.cwd()</code></a></li>
<li><a href="#processdebugport"><code>process.debugPort</code></a></li>
<li><a href="#processdisconnect"><code>process.disconnect()</code></a></li>
<li><a href="#processdlopenmodule-filename-flags"><code>process.dlopen(module, filename[, flags])</code></a></li>
<li><a href="#processemitwarningwarning-options"><code>process.emitWarning(warning[, options])</code></a></li>
<li><a href="#processemitwarningwarning-type-code-ctor"><code>process.emitWarning(warning[, type[, code]][, ctor])</code></a>
<ul>
<li><a href="#avoiding-duplicate-warnings">避免重复警告</a></li>
</ul>
</li>
<li><a href="#processenv"><code>process.env</code></a></li>
<li><a href="#processexecargv"><code>process.execArgv</code></a></li>
<li><a href="#processexecpath"><code>process.execPath</code></a></li>
<li><a href="#processexitcode"><code>process.exit([code])</code></a></li>
<li><a href="#processexitcode_1"><code>process.exitCode</code></a></li>
<li><span class="stability_1"><a href="#processgetactiveresourcesinfo"><code>process.getActiveResourcesInfo()</code></a></span></li>
<li><a href="#processgetegid"><code>process.getegid()</code></a></li>
<li><a href="#processgeteuid"><code>process.geteuid()</code></a></li>
<li><a href="#processgetgid"><code>process.getgid()</code></a></li>
<li><a href="#processgetgroups"><code>process.getgroups()</code></a></li>
<li><a href="#processgetuid"><code>process.getuid()</code></a></li>
<li><a href="#processhasuncaughtexceptioncapturecallback"><code>process.hasUncaughtExceptionCaptureCallback()</code></a></li>
<li><span class="stability_3"><a href="#processhrtimetime"><code>process.hrtime([time])</code></a></span></li>
<li><a href="#processhrtimebigint"><code>process.hrtime.bigint()</code></a></li>
<li><a href="#processinitgroupsuser-extragroup"><code>process.initgroups(user, extraGroup)</code></a></li>
<li><a href="#processkillpid-signal"><code>process.kill(pid[, signal])</code></a></li>
<li><span class="stability_0"><a href="#processmainmodule"><code>process.mainModule</code></a></span></li>
<li><a href="#processmemoryusage"><code>process.memoryUsage()</code></a></li>
<li><a href="#processmemoryusagerss"><code>process.memoryUsage.rss()</code></a></li>
<li><a href="#processnexttickcallback-args"><code>process.nextTick(callback[, ...args])</code></a>
<ul>
<li><a href="#when-to-use-queuemicrotask-vs-processnexttick">何时使用 queueMicrotask() 与 process.nextTick()</a></li>
</ul>
</li>
<li><a href="#processnodeprecation"><code>process.noDeprecation</code></a></li>
<li><a href="#processpid"><code>process.pid</code></a></li>
<li><a href="#processplatform"><code>process.platform</code></a></li>
<li><a href="#processppid"><code>process.ppid</code></a></li>
<li><a href="#processrelease"><code>process.release</code></a></li>
<li><a href="#processreport"><code>process.report</code></a>
<ul>
<li><a href="#processreportcompact"><code>process.report.compact</code></a></li>
<li><a href="#processreportdirectory"><code>process.report.directory</code></a></li>
<li><a href="#processreportfilename"><code>process.report.filename</code></a></li>
<li><a href="#processreportgetreporterr"><code>process.report.getReport([err])</code></a></li>
<li><a href="#processreportreportonfatalerror"><code>process.report.reportOnFatalError</code></a></li>
<li><a href="#processreportreportonsignal"><code>process.report.reportOnSignal</code></a></li>
<li><a href="#processreportreportonuncaughtexception"><code>process.report.reportOnUncaughtException</code></a></li>
<li><a href="#processreportsignal"><code>process.report.signal</code></a></li>
<li><a href="#processreportwritereportfilename-err"><code>process.report.writeReport([filename][, err])</code></a></li>
</ul>
</li>
<li><a href="#processresourceusage"><code>process.resourceUsage()</code></a></li>
<li><a href="#processsendmessage-sendhandle-options-callback"><code>process.send(message[, sendHandle[, options]][, callback])</code></a></li>
<li><a href="#processsetegidid"><code>process.setegid(id)</code></a></li>
<li><a href="#processseteuidid"><code>process.seteuid(id)</code></a></li>
<li><a href="#processsetgidid"><code>process.setgid(id)</code></a></li>
<li><a href="#processsetgroupsgroups"><code>process.setgroups(groups)</code></a></li>
<li><a href="#processsetuidid"><code>process.setuid(id)</code></a></li>
<li><span class="stability_1"><a href="#processsetsourcemapsenabledval"><code>process.setSourceMapsEnabled(val)</code></a></span></li>
<li><a href="#processsetuncaughtexceptioncapturecallbackfn"><code>process.setUncaughtExceptionCaptureCallback(fn)</code></a></li>
<li><a href="#processstderr"><code>process.stderr</code></a>
<ul>
<li><a href="#processstderrfd"><code>process.stderr.fd</code></a></li>
</ul>
</li>
<li><a href="#processstdin"><code>process.stdin</code></a>
<ul>
<li><a href="#processstdinfd"><code>process.stdin.fd</code></a></li>
</ul>
</li>
<li><a href="#processstdout"><code>process.stdout</code></a>
<ul>
<li><a href="#processstdoutfd"><code>process.stdout.fd</code></a></li>
<li><a href="#a-note-on-process-io">进程 I/O 的注意事项</a></li>
</ul>
</li>
<li><a href="#processthrowdeprecation"><code>process.throwDeprecation</code></a></li>
<li><a href="#processtitle"><code>process.title</code></a></li>
<li><a href="#processtracedeprecation"><code>process.traceDeprecation</code></a></li>
<li><span class="stability_0"><a href="#processumask"><code>process.umask()</code></a></span></li>
<li><a href="#processumaskmask"><code>process.umask(mask)</code></a></li>
<li><a href="#processuptime"><code>process.uptime()</code></a></li>
<li><a href="#processversion"><code>process.version</code></a></li>
<li><a href="#processversions"><code>process.versions</code></a></li>
<li><a href="#exit-codes">退出码</a></li>
</ul>
</li>
</ul></details>

      <div id="apicontent">
        <h2>process 进程<span><a class="mark" href="#process" id="process">#</a></span><a aria-hidden="true" class="legacy" id="process_process"></a></h2><p class="tip_wrap" data-show_trans="1" data-item_id="">
                <a href="process/process.html" class="tip_trans">中英对照</a>
                </p>
<!-- introduced_in=v0.10.0 -->
<!-- type=global -->
<p class=""><strong>源代码:</strong> <a rel="nofollow" href="https://github.com/nodejs/node/blob/v16.16.0/lib/process.js">lib/process.js</a></p>
<p><code>process</code> 对象提供有关当前 Node.js 进程的信息并对其进行控制。
虽然它作为全局可用，但是建议通过 require 或 import 显式地访问它：</p>

<pre class="with-35-chars"><input class="js-flavor-selector" type="checkbox" checked="" aria-label="Show modern ES modules syntax"><code class="language-js mjs"><span class="hljs-keyword">import</span> process <span class="hljs-keyword">from</span> <span class="hljs-string">'process'</span>;</code><code class="language-js cjs"><span class="hljs-keyword">const</span> process = <span class="hljs-built_in">require</span>(<span class="hljs-string">'process'</span>);</code></pre>
<section><h3>进程事件<span><a class="mark" href="#process-events" id="process-events">#</a></span><a aria-hidden="true" class="legacy" id="process_process_events"></a></h3><p class="tip_wrap" data-show_trans="1" data-item_id="#process-events">
                <a href="process/process_events.html" class="tip_trans">中英对照</a>
                </p>
<p><code>process</code> 对象是 <a href="events.html#class-eventemitter"><code>EventEmitter</code></a> 的实例。</p>
<h4><code>'beforeExit'</code> 事件<span><a class="mark" href="#event-beforeexit" id="event-beforeexit">#</a></span><a aria-hidden="true" class="legacy" id="process_event_beforeexit"></a></h4><p class="tip_wrap" data-show_trans="1" data-item_id="#event-beforeexit">
                <a href="process/event_beforeexit.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>新增于: v0.11.12</span>
</div>
<p>当 Node.js 清空其事件循环并且没有额外的工作要安排时，则会触发 <code>'beforeExit'</code> 事件。
通常情况下，当没有工作要调度时，Node.js 进程会退出，但是注册在 <code>'beforeExit'</code> 事件上的监听器可以进行异步的调用，从而使 Node.js 进程继续。</p>
<p class="">调用监听器回调函数时将 <a href="#processexitcode"><code>process.exitCode</code></a> 的值作为唯一的参数传入。</p>
<p class="">对于导致显式终止的条件，例如调用 <a href="#processexitcode"><code>process.exit()</code></a> 或未捕获的异常，则不会触发 <code>'beforeExit'</code> 事件。</p>
<p class=""><code>'beforeExit'</code> 不应用作 <code>'exit'</code> 事件的替代，除非打算安排额外的工作。</p>

<pre class="with-35-chars"><input class="js-flavor-selector" type="checkbox" checked="" aria-label="Show modern ES modules syntax"><code class="language-js mjs"><span class="hljs-keyword">import</span> process <span class="hljs-keyword">from</span> <span class="hljs-string">'process'</span>;

process.<span class="hljs-title function_">on</span>(<span class="hljs-string">'beforeExit'</span>, <span class="hljs-function">(<span class="hljs-params">code</span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Process beforeExit event with code: '</span>, code);
});

process.<span class="hljs-title function_">on</span>(<span class="hljs-string">'exit'</span>, <span class="hljs-function">(<span class="hljs-params">code</span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Process exit event with code: '</span>, code);
});

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'This message is displayed first.'</span>);

<span class="hljs-comment">// 打印:</span>
<span class="hljs-comment">// This message is displayed first.</span>
<span class="hljs-comment">// Process beforeExit event with code: 0</span>
<span class="hljs-comment">// Process exit event with code: 0</span></code><code class="language-js cjs"><span class="hljs-keyword">const</span> process = <span class="hljs-built_in">require</span>(<span class="hljs-string">'process'</span>);

process.<span class="hljs-title function_">on</span>(<span class="hljs-string">'beforeExit'</span>, <span class="hljs-function">(<span class="hljs-params">code</span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Process beforeExit event with code: '</span>, code);
});

process.<span class="hljs-title function_">on</span>(<span class="hljs-string">'exit'</span>, <span class="hljs-function">(<span class="hljs-params">code</span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Process exit event with code: '</span>, code);
});

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'This message is displayed first.'</span>);

<span class="hljs-comment">// 打印:</span>
<span class="hljs-comment">// This message is displayed first.</span>
<span class="hljs-comment">// Process beforeExit event with code: 0</span>
<span class="hljs-comment">// Process exit event with code: 0</span></code></pre>
<h4><code>'disconnect'</code> 事件<span><a class="mark" href="#event-disconnect" id="event-disconnect">#</a></span><a aria-hidden="true" class="legacy" id="process_event_disconnect"></a></h4><p class="tip_wrap" data-show_trans="1" data-item_id="#event-disconnect">
                <a href="process/event_disconnect.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>新增于: v0.7.7</span>
</div>
<p>如果 Node.js 进程是使用 IPC 通道衍生（参见<a href="child_process.html">子进程</a>和<a href="cluster.html">集群</a>文档），则在 IPC 通道关闭时将触发 <code>'disconnect'</code> 事件。</p>
<h4><code>'exit'</code> 事件<span><a class="mark" href="#event-exit" id="event-exit">#</a></span><a aria-hidden="true" class="legacy" id="process_event_exit"></a></h4><p class="tip_wrap" data-show_trans="1" data-item_id="#event-exit">
                <a href="process/event_exit.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>新增于: v0.1.7</span>
</div>
<ul class="">
<li><code>code</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a></li>
</ul>
<p>当 Node.js 进程由于以下任一原因即将退出时，则会触发 <code>'exit'</code> 事件：</p>
<ul class="">
<li><code>process.exit()</code> 方法被显式调用；</li>
<li>Node.js 事件循环不再需要执行任何额外的工作。</li>
</ul>
<p class="">此时没有办法阻止事件循环的退出，一旦所有 <code>'exit'</code> 监听器都运行完毕，则 Node.js 进程将终止。</p>
<p class="">监听器回调函数使用 <a href="#processexitcode"><code>process.exitCode</code></a> 属性指定的退出码或传给 <a href="#processexitcode"><code>process.exit()</code></a> 方法的 <code>exitCode</code> 参数调用。</p>

<pre class="with-35-chars"><input class="js-flavor-selector" type="checkbox" checked="" aria-label="Show modern ES modules syntax"><code class="language-js mjs"><span class="hljs-keyword">import</span> process <span class="hljs-keyword">from</span> <span class="hljs-string">'process'</span>;

process.<span class="hljs-title function_">on</span>(<span class="hljs-string">'exit'</span>, <span class="hljs-function">(<span class="hljs-params">code</span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`About to exit with code: <span class="hljs-subst">${code}</span>`</span>);
});</code><code class="language-js cjs"><span class="hljs-keyword">const</span> process = <span class="hljs-built_in">require</span>(<span class="hljs-string">'process'</span>);

process.<span class="hljs-title function_">on</span>(<span class="hljs-string">'exit'</span>, <span class="hljs-function">(<span class="hljs-params">code</span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`About to exit with code: <span class="hljs-subst">${code}</span>`</span>);
});</code></pre>
<p class="">监听器函数必须只执行同步的操作。
Node.js 进程将在调用 <code>'exit'</code> 事件监听器之后立即退出，从而使任何仍在事件循环中排队的其他工作被丢弃。
例如，在以下示例中，超时永远不会发生：</p>

<pre class="with-35-chars"><input class="js-flavor-selector" type="checkbox" checked="" aria-label="Show modern ES modules syntax"><code class="language-js mjs"><span class="hljs-keyword">import</span> process <span class="hljs-keyword">from</span> <span class="hljs-string">'process'</span>;

process.<span class="hljs-title function_">on</span>(<span class="hljs-string">'exit'</span>, <span class="hljs-function">(<span class="hljs-params">code</span>) =&gt;</span> {
  <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'This will not run'</span>);
  }, <span class="hljs-number">0</span>);
});</code><code class="language-js cjs"><span class="hljs-keyword">const</span> process = <span class="hljs-built_in">require</span>(<span class="hljs-string">'process'</span>);

process.<span class="hljs-title function_">on</span>(<span class="hljs-string">'exit'</span>, <span class="hljs-function">(<span class="hljs-params">code</span>) =&gt;</span> {
  <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'This will not run'</span>);
  }, <span class="hljs-number">0</span>);
});</code></pre>
<h4><code>'message'</code> 事件<span><a class="mark" href="#event-message" id="event-message">#</a></span><a aria-hidden="true" class="legacy" id="process_event_message"></a></h4><p class="tip_wrap" data-show_trans="1" data-item_id="#event-message">
                <a href="process/event_message.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>新增于: v0.5.10</span>
</div>
<ul class="">
<li><code>message</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" rel="nofollow" class="type">&lt;Object&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" rel="nofollow" class="type">&lt;boolean&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;number&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Null_type" rel="nofollow" class="type">&lt;null&gt;</a> 解析的 JSON 对象或可序列化的原始值。</li>
<li><code>sendHandle</code> <a href="net.html#class-netserver" rel="nofollow" class="type">&lt;net.Server&gt;</a> | <a href="net.html#class-netsocket" rel="nofollow" class="type">&lt;net.Socket&gt;</a> <a href="net.html#class-netserver"><code>net.Server</code></a> 或 <a href="net.html#class-netsocket"><code>net.Socket</code></a> 对象、或未定义。</li>
</ul>
<p>如果 Node.js 进程是使用 IPC 通道衍生（参见<a href="child_process.html">子进程</a>和<a href="cluster.html">集群</a>文档），则每当子进程收到父进程使用 <a href="child_process.html#subprocesssendmessage-sendhandle-options-callback"><code>childprocess.send()</code></a> 发送的消息时，就会触发 <code>'message'</code> 事件。</p>
<p class="">消息经过序列化和解析。
结果消息可能与最初发送的消息不同。</p>
<p class="">如果在衍生进程时将 <code>serialization</code> 选项设置为 <code>advanced</code>，则 <code>message</code> 参数可以包含 JSON 无法表示的数据。
有关更多详细信息，请参阅<a href="child_process.html#advanced-serialization">子进程的高级序列化</a>。</p>
<h4><code>'multipleResolves'</code> 事件<span><a class="mark" href="#event-multipleresolves" id="event-multipleresolves">#</a></span><a aria-hidden="true" class="legacy" id="process_event_multipleresolves"></a></h4><p class="tip_wrap" data-show_trans="1" data-item_id="#event-multipleresolves">
                <a href="process/event_multipleresolves.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>新增于: v10.12.0</span><span>弃用于: v16.15.0</span>
</div>
<p></p><div class="api_stability api_stability_0"><a href="documentation.html#stability-index">稳定性: 0</a> - 弃用</div><p></p>
<ul class="">
<li><code>type</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> 解决类型
<code>'resolve'</code> 或 <code>'reject'</code> 之一。</li>
<li><code>promise</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" rel="nofollow" class="type">&lt;Promise&gt;</a> 不止一次解决或拒绝的 promise。</li>
<li><code>value</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Data_types" rel="nofollow" class="type">&lt;any&gt;</a> 在原始解决之后解决或拒绝 promise 的值。</li>
</ul>
<p>每当 <code>Promise</code> 满足以下任一条件时，就会触发 <code>'multipleResolves'</code> 事件：</p>
<ul class="">
<li>解决了不止一次。</li>
<li>拒绝了不止一次。</li>
<li>解决后拒绝。</li>
<li>拒绝后解决。</li>
</ul>
<p class="">这对于在使用 <code>Promise</code> 构造函数时跟踪应用程序中的潜在错误很有用，因为多个解决被静默吞下。
但是，此事件的发生并不一定表示错误。
例如，<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise/race" rel="nofollow"><code>Promise.race()</code></a> 可以触发 <code>'multipleResolves'</code> 事件。</p>
<p class="">由于在上面的 <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise/race" rel="nofollow"><code>Promise.race()</code></a> 示例这样的情况下事件的不可靠性，它已被弃用。</p>

<pre class="with-35-chars"><input class="js-flavor-selector" type="checkbox" checked="" aria-label="Show modern ES modules syntax"><code class="language-js mjs"><span class="hljs-keyword">import</span> process <span class="hljs-keyword">from</span> <span class="hljs-string">'process'</span>;

process.<span class="hljs-title function_">on</span>(<span class="hljs-string">'multipleResolves'</span>, <span class="hljs-function">(<span class="hljs-params">type, promise, reason</span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(type, promise, reason);
  <span class="hljs-title function_">setImmediate</span>(<span class="hljs-function">() =&gt;</span> process.<span class="hljs-title function_">exit</span>(<span class="hljs-number">1</span>));
});

<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">main</span>(<span class="hljs-params"></span>) {
  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">await</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> {
      <span class="hljs-title function_">resolve</span>(<span class="hljs-string">'First call'</span>);
      <span class="hljs-title function_">resolve</span>(<span class="hljs-string">'Swallowed resolve'</span>);
      <span class="hljs-title function_">reject</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'Swallowed reject'</span>));
    });
  } <span class="hljs-keyword">catch</span> {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'Failed'</span>);
  }
}

<span class="hljs-title function_">main</span>().<span class="hljs-title function_">then</span>(<span class="hljs-variable language_">console</span>.<span class="hljs-property">log</span>);
<span class="hljs-comment">// resolve: Promise { 'First call' } 'Swallowed resolve'</span>
<span class="hljs-comment">// reject: Promise { 'First call' } Error: Swallowed reject</span>
<span class="hljs-comment">//     at Promise (*)</span>
<span class="hljs-comment">//     at new Promise (&lt;anonymous&gt;)</span>
<span class="hljs-comment">//     at main (*)</span>
<span class="hljs-comment">// First call</span></code><code class="language-js cjs"><span class="hljs-keyword">const</span> process = <span class="hljs-built_in">require</span>(<span class="hljs-string">'process'</span>);

process.<span class="hljs-title function_">on</span>(<span class="hljs-string">'multipleResolves'</span>, <span class="hljs-function">(<span class="hljs-params">type, promise, reason</span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(type, promise, reason);
  <span class="hljs-title function_">setImmediate</span>(<span class="hljs-function">() =&gt;</span> process.<span class="hljs-title function_">exit</span>(<span class="hljs-number">1</span>));
});

<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">main</span>(<span class="hljs-params"></span>) {
  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">await</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> {
      <span class="hljs-title function_">resolve</span>(<span class="hljs-string">'First call'</span>);
      <span class="hljs-title function_">resolve</span>(<span class="hljs-string">'Swallowed resolve'</span>);
      <span class="hljs-title function_">reject</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'Swallowed reject'</span>));
    });
  } <span class="hljs-keyword">catch</span> {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'Failed'</span>);
  }
}

<span class="hljs-title function_">main</span>().<span class="hljs-title function_">then</span>(<span class="hljs-variable language_">console</span>.<span class="hljs-property">log</span>);
<span class="hljs-comment">// resolve: Promise { 'First call' } 'Swallowed resolve'</span>
<span class="hljs-comment">// reject: Promise { 'First call' } Error: Swallowed reject</span>
<span class="hljs-comment">//     at Promise (*)</span>
<span class="hljs-comment">//     at new Promise (&lt;anonymous&gt;)</span>
<span class="hljs-comment">//     at main (*)</span>
<span class="hljs-comment">// First call</span></code></pre>
<h4><code>'rejectionHandled'</code> 事件<span><a class="mark" href="#event-rejectionhandled" id="event-rejectionhandled">#</a></span><a aria-hidden="true" class="legacy" id="process_event_rejectionhandled"></a></h4><p class="tip_wrap" data-show_trans="1" data-item_id="#event-rejectionhandled">
                <a href="process/event_rejectionhandled.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>新增于: v1.4.1</span>
</div>
<ul class="">
<li><code>promise</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" rel="nofollow" class="type">&lt;Promise&gt;</a> 最近处理的 promise。</li>
</ul>
<p>每当 <code>Promise</code> 被拒绝并且错误句柄被附加到它（例如使用 <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise/catch" rel="nofollow"><code>promise.catch()</code></a>）晚于一轮 Node.js 事件循环时，则 <code>'rejectionHandled'</code> 事件就会触发。</p>
<p class=""><code>Promise</code> 对象会在 <code>'unhandledRejection'</code> 事件中先处理，但在处理过程中获得了拒绝句柄。</p>
<p class="">对于 <code>Promise</code> 链，没有始终可以处理拒绝的顶层概念。
由于本质上是异步的，<code>Promise</code> 拒绝可以在未来的某个时间点处理，可能比触发 <code>'unhandledRejection'</code> 事件所需的事件循环轮询要晚得多。</p>
<p class="">另一种表述方式是，与同步代码中未处理的异常列表不断增长不同，promise 中未处理的拒绝列表可能会不断增长和缩小。</p>
<p class="">在同步代码中，当未处理的异常列表增长时，会触发 <code>'uncaughtException'</code> 事件。</p>
<p class="">在异步代码中，当未处理的拒绝列表增长时，会触发 <code>'unhandledRejection'</code> 事件，当未处理的拒绝列表缩小时，会触发 <code>'rejectionHandled'</code> 事件。</p>

<pre class="with-35-chars"><input class="js-flavor-selector" type="checkbox" checked="" aria-label="Show modern ES modules syntax"><code class="language-js mjs"><span class="hljs-keyword">import</span> process <span class="hljs-keyword">from</span> <span class="hljs-string">'process'</span>;

<span class="hljs-keyword">const</span> unhandledRejections = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>();
process.<span class="hljs-title function_">on</span>(<span class="hljs-string">'unhandledRejection'</span>, <span class="hljs-function">(<span class="hljs-params">reason, promise</span>) =&gt;</span> {
  unhandledRejections.<span class="hljs-title function_">set</span>(promise, reason);
});
process.<span class="hljs-title function_">on</span>(<span class="hljs-string">'rejectionHandled'</span>, <span class="hljs-function">(<span class="hljs-params">promise</span>) =&gt;</span> {
  unhandledRejections.<span class="hljs-title function_">delete</span>(promise);
});</code><code class="language-js cjs"><span class="hljs-keyword">const</span> process = <span class="hljs-built_in">require</span>(<span class="hljs-string">'process'</span>);

<span class="hljs-keyword">const</span> unhandledRejections = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>();
process.<span class="hljs-title function_">on</span>(<span class="hljs-string">'unhandledRejection'</span>, <span class="hljs-function">(<span class="hljs-params">reason, promise</span>) =&gt;</span> {
  unhandledRejections.<span class="hljs-title function_">set</span>(promise, reason);
});
process.<span class="hljs-title function_">on</span>(<span class="hljs-string">'rejectionHandled'</span>, <span class="hljs-function">(<span class="hljs-params">promise</span>) =&gt;</span> {
  unhandledRejections.<span class="hljs-title function_">delete</span>(promise);
});</code></pre>
<p class="">在这个例子中，<code>unhandledRejections</code> <code>Map</code> 将随着时间的推移而增长和缩小，反映了开始未处理然后变成处理的拒绝。
可以定期在错误日志中记录此类错误（这可能最适合长时间运行的应用程序）或在进程退出时（这可能对脚本最方便）。</p>
<h4><code>'uncaughtException'</code> 事件<span><a class="mark" href="#event-uncaughtexception" id="event-uncaughtexception">#</a></span><a aria-hidden="true" class="legacy" id="process_event_uncaughtexception"></a></h4><p class="tip_wrap" data-show_trans="1" data-item_id="#event-uncaughtexception">
                <a href="process/event_uncaughtexception.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<details class="changelog"><summary>版本历史</summary>
<table>
<tbody><tr><th>版本</th><th>变更</th></tr>
<tr><td>v12.0.0, v10.17.0</td>
<td><p>添加了 <code>origin</code> 参数。</p></td></tr>
<tr><td>v0.1.18</td>
<td><p><span>新增于: v0.1.18</span></p></td></tr>
</tbody></table>
</details>
</div>
<ul class="">
<li><code>err</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error" rel="nofollow" class="type">&lt;Error&gt;</a> 未捕获的异常。</li>
<li><code>origin</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> 指示异常是源自未处理的拒绝还是源自同步错误。
可以是 <code>'uncaughtException'</code> 或 <code>'unhandledRejection'</code>。
后者用于在基于 <code>Promise</code> 的异步上下文中发生异常（或者如果 <code>Promise</code> 被拒绝）并且 <a href="cli.html#--unhandled-rejectionsmode"><code>--unhandled-rejections</code></a> 标志设置为 <code>strict</code> 或 <code>throw</code>（这是默认值）并且拒绝未处理，或者发生拒绝时 在命令行入口点的 ES 模块静态加载阶段。</li>
</ul>
<p>当未捕获的 JavaScript 异常一直冒泡回到事件循环时，则会触发 <code>'uncaughtException'</code> 事件。
默认情况下，Node.js 通过将堆栈跟踪打印到 <code>stderr</code> 并以代码 1 退出，覆盖任何先前设置的 <a href="#processexitcode"><code>process.exitCode</code></a> 来处理此类异常。
为 <code>'uncaughtException'</code> 事件添加句柄会覆盖此默认行为。
或者，更改 <code>'uncaughtException'</code> 处理程序中的 <a href="#processexitcode"><code>process.exitCode</code></a>，这将导致进程以提供的退出码退出。
否则，在存在此类句柄的情况下，进程将以 0 退出。</p>

<pre class="with-35-chars"><input class="js-flavor-selector" type="checkbox" checked="" aria-label="Show modern ES modules syntax"><code class="language-js mjs"><span class="hljs-keyword">import</span> process <span class="hljs-keyword">from</span> <span class="hljs-string">'process'</span>;

process.<span class="hljs-title function_">on</span>(<span class="hljs-string">'uncaughtException'</span>, <span class="hljs-function">(<span class="hljs-params">err, origin</span>) =&gt;</span> {
  fs.<span class="hljs-title function_">writeSync</span>(
    process.<span class="hljs-property">stderr</span>.<span class="hljs-property">fd</span>,
    <span class="hljs-string">`Caught exception: <span class="hljs-subst">${err}</span>\n`</span> +
    <span class="hljs-string">`Exception origin: <span class="hljs-subst">${origin}</span>`</span>
  );
});

<span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'This will still run.'</span>);
}, <span class="hljs-number">500</span>);

<span class="hljs-comment">// 故意引发异常，但不捕获。</span>
<span class="hljs-title function_">nonexistentFunc</span>();
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'This will not run.'</span>);</code><code class="language-js cjs"><span class="hljs-keyword">const</span> process = <span class="hljs-built_in">require</span>(<span class="hljs-string">'process'</span>);

process.<span class="hljs-title function_">on</span>(<span class="hljs-string">'uncaughtException'</span>, <span class="hljs-function">(<span class="hljs-params">err, origin</span>) =&gt;</span> {
  fs.<span class="hljs-title function_">writeSync</span>(
    process.<span class="hljs-property">stderr</span>.<span class="hljs-property">fd</span>,
    <span class="hljs-string">`Caught exception: <span class="hljs-subst">${err}</span>\n`</span> +
    <span class="hljs-string">`Exception origin: <span class="hljs-subst">${origin}</span>`</span>
  );
});

<span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'This will still run.'</span>);
}, <span class="hljs-number">500</span>);

<span class="hljs-comment">// 故意引发异常，但不捕获。</span>
<span class="hljs-title function_">nonexistentFunc</span>();
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'This will not run.'</span>);</code></pre>
<p class="">通过安装 <code>'uncaughtExceptionMonitor'</code> 监听器，可以在不覆盖退出进程的默认行为的情况下监视 <code>'uncaughtException'</code> 事件。</p>
<h5>注意: 正确使用 'uncaughtException'<span><a class="mark" href="#warning-using-uncaughtexception-correctly" id="warning-using-uncaughtexception-correctly">#</a></span><a aria-hidden="true" class="legacy" id="process_warning_using_uncaughtexception_correctly"></a></h5><p class="tip_wrap" data-show_trans="1" data-item_id="#warning-using-uncaughtexception-correctly">
                <a href="process/warning_using_uncaughtexception_correctly.html" class="tip_trans">中英对照</a>
                </p>
<p><code>'uncaughtException'</code> 是用于异常处理的粗略机制，仅用作最后的手段。
事件_不应该_用作 <code>On Error Resume Next</code> 的等价物。
未处理的异常本质上意味着应用程序处于未定义状态。
在没有从异常中正确恢复的情况下尝试恢复应用程序代码可能会导致其他不可预见和不可预测的问题。</p>
<p class="">从事件句柄中抛出的异常将不会被捕获。
而是，该进程将以非零退出码退出，并将打印堆栈跟踪。
这是为了避免无限递归。</p>
<p class="">尝试在未捕获异常后正常恢复类似于升级计算机时拔掉电源线。
十有八九，什么都没有发生。
但是第十次，系统损坏了。</p>
<p class=""><code>'uncaughtException'</code> 的正确用法是在关闭进程之前对分配的资源（例如文件描述符、句柄等）执行同步清理。
<strong>在 <code>'uncaughtException'</code> 之后恢复正常操作是不安全的。</strong></p>
<p class="">为了以更可靠的方式重新启动崩溃的应用程序，无论 <code>'uncaughtException'</code> 是否触发，都应该在单独的进程中使用外部监视器来检测应用程序故障并根据需要恢复或重新启动。</p>
<h4><code>'uncaughtExceptionMonitor'</code> 事件<span><a class="mark" href="#event-uncaughtexceptionmonitor" id="event-uncaughtexceptionmonitor">#</a></span><a aria-hidden="true" class="legacy" id="process_event_uncaughtexceptionmonitor"></a></h4><p class="tip_wrap" data-show_trans="1" data-item_id="#event-uncaughtexceptionmonitor">
                <a href="process/event_uncaughtexceptionmonitor.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>新增于: v13.7.0, v12.17.0</span>
</div>
<ul class="">
<li><code>err</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error" rel="nofollow" class="type">&lt;Error&gt;</a> 未捕获的异常。</li>
<li><code>origin</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> 指示异常是源自未处理的拒绝还是源自同步错误。
可以是 <code>'uncaughtException'</code> 或 <code>'unhandledRejection'</code>。
后者用于在基于 <code>Promise</code> 的异步上下文中发生异常（或者如果 <code>Promise</code> 被拒绝）并且 <a href="cli.html#--unhandled-rejectionsmode"><code>--unhandled-rejections</code></a> 标志设置为 <code>strict</code> 或 <code>throw</code>（这是默认值）并且拒绝未处理，或者发生拒绝时 在命令行入口点的 ES 模块静态加载阶段。</li>
</ul>
<p><code>'uncaughtExceptionMonitor'</code> 事件在 <code>'uncaughtException'</code> 事件触发或通过 <a href="#processsetuncaughtexceptioncapturecallbackfn"><code>process.setUncaughtExceptionCaptureCallback()</code></a> 安装的钩子被调用之前触发。</p>
<p class="">一旦触发 <code>'uncaughtException'</code> 事件，则安装 <code>'uncaughtExceptionMonitor'</code> 监听器不会更改行为。
如果没有安装 <code>'uncaughtException'</code> 监听器，则进程仍然会崩溃。</p>

<pre class="with-35-chars"><input class="js-flavor-selector" type="checkbox" checked="" aria-label="Show modern ES modules syntax"><code class="language-js mjs"><span class="hljs-keyword">import</span> process <span class="hljs-keyword">from</span> <span class="hljs-string">'process'</span>;

process.<span class="hljs-title function_">on</span>(<span class="hljs-string">'uncaughtExceptionMonitor'</span>, <span class="hljs-function">(<span class="hljs-params">err, origin</span>) =&gt;</span> {
  <span class="hljs-title class_">MyMonitoringTool</span>.<span class="hljs-title function_">logSync</span>(err, origin);
});

<span class="hljs-comment">// 故意引发异常，但不捕获。</span>
<span class="hljs-title function_">nonexistentFunc</span>();
<span class="hljs-comment">// 仍然崩溃 Node.js</span></code><code class="language-js cjs"><span class="hljs-keyword">const</span> process = <span class="hljs-built_in">require</span>(<span class="hljs-string">'process'</span>);

process.<span class="hljs-title function_">on</span>(<span class="hljs-string">'uncaughtExceptionMonitor'</span>, <span class="hljs-function">(<span class="hljs-params">err, origin</span>) =&gt;</span> {
  <span class="hljs-title class_">MyMonitoringTool</span>.<span class="hljs-title function_">logSync</span>(err, origin);
});

<span class="hljs-comment">// 故意引发异常，但不捕获。</span>
<span class="hljs-title function_">nonexistentFunc</span>();
<span class="hljs-comment">// 仍然崩溃 Node.js</span></code></pre>
<h4><code>'unhandledRejection'</code> 事件<span><a class="mark" href="#event-unhandledrejection" id="event-unhandledrejection">#</a></span><a aria-hidden="true" class="legacy" id="process_event_unhandledrejection"></a></h4><p class="tip_wrap" data-show_trans="1" data-item_id="#event-unhandledrejection">
                <a href="process/event_unhandledrejection.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<details class="changelog"><summary>版本历史</summary>
<table>
<tbody><tr><th>版本</th><th>变更</th></tr>
<tr><td>v7.0.0</td>
<td><p>不处理 <code>Promise</code> 拒绝已被弃用。</p></td></tr>
<tr><td>v6.6.0</td>
<td><p>未处理的 <code>Promise</code> 拒绝现在将触发进程警告。</p></td></tr>
<tr><td>v1.4.1</td>
<td><p><span>新增于: v1.4.1</span></p></td></tr>
</tbody></table>
</details>
</div>
<ul class="">
<li><code>reason</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error" rel="nofollow" class="type">&lt;Error&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Data_types" rel="nofollow" class="type">&lt;any&gt;</a> Promise 被拒绝的对象（通常是 <a href="errors.html#class-error"><code>Error</code></a> 对象）。</li>
<li><code>promise</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" rel="nofollow" class="type">&lt;Promise&gt;</a> 被拒绝的 promise。</li>
</ul>
<p>每当 <code>Promise</code> 被拒绝并且在事件循环的一个轮询内没有错误句柄附加到承诺时，则会触发 <code>'unhandledRejection'</code> 事件。
使用 Promise 进行编程时，异常被封装为“被拒绝的 promise”。
拒绝可以使用 <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise/catch" rel="nofollow"><code>promise.catch()</code></a> 捕获和处理，并通过 <code>Promise</code> 链传播。
<code>'unhandledRejection'</code> 事件对于检测和跟踪尚未处理的被拒绝的 promise 很有用。</p>

<pre class="with-35-chars"><input class="js-flavor-selector" type="checkbox" checked="" aria-label="Show modern ES modules syntax"><code class="language-js mjs"><span class="hljs-keyword">import</span> process <span class="hljs-keyword">from</span> <span class="hljs-string">'process'</span>;

process.<span class="hljs-title function_">on</span>(<span class="hljs-string">'unhandledRejection'</span>, <span class="hljs-function">(<span class="hljs-params">reason, promise</span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Unhandled Rejection at:'</span>, promise, <span class="hljs-string">'reason:'</span>, reason);
  <span class="hljs-comment">// 应用程序特定的日志记录，在此处抛出错误或其他逻辑</span>
});

somePromise.<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">res</span>) =&gt;</span> {
  <span class="hljs-keyword">return</span> <span class="hljs-title function_">reportToUser</span>(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">pasre</span>(res)); <span class="hljs-comment">// 注意错别字 (`pasre`)</span>
}); <span class="hljs-comment">// 无 `.catch()` 或 `.then()`</span></code><code class="language-js cjs"><span class="hljs-keyword">const</span> process = <span class="hljs-built_in">require</span>(<span class="hljs-string">'process'</span>);

process.<span class="hljs-title function_">on</span>(<span class="hljs-string">'unhandledRejection'</span>, <span class="hljs-function">(<span class="hljs-params">reason, promise</span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Unhandled Rejection at:'</span>, promise, <span class="hljs-string">'reason:'</span>, reason);
  <span class="hljs-comment">// 应用程序特定的日志记录，在此处抛出错误或其他逻辑</span>
});

somePromise.<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">res</span>) =&gt;</span> {
  <span class="hljs-keyword">return</span> <span class="hljs-title function_">reportToUser</span>(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">pasre</span>(res)); <span class="hljs-comment">// 注意错别字 (`pasre`)</span>
}); <span class="hljs-comment">// 无 `.catch()` 或 `.then()`</span></code></pre>
<p class="">以下也将触发 <code>'unhandledRejection'</code> 事件被触发：</p>

<pre class="with-35-chars"><input class="js-flavor-selector" type="checkbox" checked="" aria-label="Show modern ES modules syntax"><code class="language-js mjs"><span class="hljs-keyword">import</span> process <span class="hljs-keyword">from</span> <span class="hljs-string">'process'</span>;

<span class="hljs-keyword">function</span> <span class="hljs-title function_">SomeResource</span>(<span class="hljs-params"></span>) {
  <span class="hljs-comment">// 最初将加载状态设置为被拒绝的 promise</span>
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">loaded</span> = <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">reject</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'Resource not yet loaded!'</span>));
}

<span class="hljs-keyword">const</span> resource = <span class="hljs-keyword">new</span> <span class="hljs-title class_">SomeResource</span>();
<span class="hljs-comment">// resource.loaded 上没有 .catch 或 .then</span></code><code class="language-js cjs"><span class="hljs-keyword">const</span> process = <span class="hljs-built_in">require</span>(<span class="hljs-string">'process'</span>);

<span class="hljs-keyword">function</span> <span class="hljs-title function_">SomeResource</span>(<span class="hljs-params"></span>) {
  <span class="hljs-comment">// 最初将加载状态设置为被拒绝的 promise</span>
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">loaded</span> = <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">reject</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'Resource not yet loaded!'</span>));
}

<span class="hljs-keyword">const</span> resource = <span class="hljs-keyword">new</span> <span class="hljs-title class_">SomeResource</span>();
<span class="hljs-comment">// resource.loaded 上没有 .catch 或 .then</span></code></pre>
<p class="">在此示例情况下，可以将拒绝作为开发人员错误进行跟踪，这通常是其他 <code>'unhandledRejection'</code> 事件的情况。
为了解决此类故障，可以将非操作 <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise/catch" rel="nofollow"><code>.catch(() =&gt; { })</code></a> 句柄附加到 <code>resource.loaded</code>，这将阻止触发 <code>'unhandledRejection'</code> 事件。</p>
<h4><code>'warning'</code> 事件<span><a class="mark" href="#event-warning" id="event-warning">#</a></span><a aria-hidden="true" class="legacy" id="process_event_warning"></a></h4><p class="tip_wrap" data-show_trans="1" data-item_id="#event-warning">
                <a href="process/event_warning.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>新增于: v6.0.0</span>
</div>
<ul class="">
<li><code>warning</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error" rel="nofollow" class="type">&lt;Error&gt;</a> 警告的主要属性是：
<ul>
<li><code>name</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> 警告的名称。 <strong>默认值:</strong> <code>'Warning'</code>。</li>
<li><code>message</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> 系统提供的警告描述。</li>
<li><code>stack</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> 代码中发出警告的位置的堆栈跟踪。</li>
</ul>
</li>
</ul>
<p>每当 Node.js 触发进程警告时，则会触发 <code>'warning'</code> 事件。</p>
<p class="">进程警告类似于错误，因为其描述了引起用户注意的异常情况。
但是，警告不是正常 Node.js 和 JavaScript 错误处理流程的一部分。
Node.js 可以在检测到可能导致次优应用程序性能、错误或安全漏洞的不良编码实践时触发警告。</p>

<pre class="with-35-chars"><input class="js-flavor-selector" type="checkbox" checked="" aria-label="Show modern ES modules syntax"><code class="language-js mjs"><span class="hljs-keyword">import</span> process <span class="hljs-keyword">from</span> <span class="hljs-string">'process'</span>;

process.<span class="hljs-title function_">on</span>(<span class="hljs-string">'warning'</span>, <span class="hljs-function">(<span class="hljs-params">warning</span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">warn</span>(warning.<span class="hljs-property">name</span>);    <span class="hljs-comment">// 打印警告名称</span>
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">warn</span>(warning.<span class="hljs-property">message</span>); <span class="hljs-comment">// 打印警告信息</span>
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">warn</span>(warning.<span class="hljs-property">stack</span>);   <span class="hljs-comment">// 打印堆栈跟踪</span>
});</code><code class="language-js cjs"><span class="hljs-keyword">const</span> process = <span class="hljs-built_in">require</span>(<span class="hljs-string">'process'</span>);

process.<span class="hljs-title function_">on</span>(<span class="hljs-string">'warning'</span>, <span class="hljs-function">(<span class="hljs-params">warning</span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">warn</span>(warning.<span class="hljs-property">name</span>);    <span class="hljs-comment">// 打印警告名称</span>
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">warn</span>(warning.<span class="hljs-property">message</span>); <span class="hljs-comment">// 打印警告信息</span>
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">warn</span>(warning.<span class="hljs-property">stack</span>);   <span class="hljs-comment">// 打印堆栈跟踪</span>
});</code></pre>
<p class="">默认情况下，Node.js 会将进程警告打印到 <code>stderr</code>。
<code>--no-warnings</code> 命令行选项可用于抑制默认控制台输出，但 <code>'warning'</code> 事件仍将由 <code>process</code> 对象触发。</p>
<p class="">以下示例说明了在向事件添加过多监听器时打印到 <code>stderr</code> 的警告：</p>
<pre class=""><code class="language-console"><span class="hljs-meta prompt_">$ </span><span class="language-bash">node</span>
<span class="hljs-meta prompt_">&gt; </span><span class="language-bash">events.defaultMaxListeners = 1;</span>
<span class="hljs-meta prompt_">&gt; </span><span class="language-bash">process.on(<span class="hljs-string">'foo'</span>, () =&gt; {});</span>
<span class="hljs-meta prompt_">&gt; </span><span class="language-bash">process.on(<span class="hljs-string">'foo'</span>, () =&gt; {});</span>
<span class="hljs-meta prompt_">&gt; </span><span class="language-bash">(node:38638) MaxListenersExceededWarning: Possible EventEmitter memory leak</span>
detected. 2 foo listeners added. Use emitter.setMaxListeners() to increase limit</code></pre>
<p class="">相比之下，以下示例关闭默认警告输出并向 <code>'warning'</code> 事件添加自定义句柄：</p>
<pre class=""><code class="language-console"><span class="hljs-meta prompt_">$ </span><span class="language-bash">node --no-warnings</span>
<span class="hljs-meta prompt_">&gt; </span><span class="language-bash">const p = process.on(<span class="hljs-string">'warning'</span>, (warning) =&gt; console.warn(<span class="hljs-string">'Do not do that!'</span>));</span>
<span class="hljs-meta prompt_">&gt; </span><span class="language-bash">events.defaultMaxListeners = 1;</span>
<span class="hljs-meta prompt_">&gt; </span><span class="language-bash">process.on(<span class="hljs-string">'foo'</span>, () =&gt; {});</span>
<span class="hljs-meta prompt_">&gt; </span><span class="language-bash">process.on(<span class="hljs-string">'foo'</span>, () =&gt; {});</span>
<span class="hljs-meta prompt_">&gt; </span><span class="language-bash">Do not <span class="hljs-keyword">do</span> that!</span></code></pre>
<p class=""><code>--trace-warnings</code> 命令行选项可用于使警告的默认控制台输出包括警告的完整堆栈跟踪。</p>
<p class="">使用 <code>--throw-deprecation</code> 命令行标志启动 Node.js 将导致自定义弃用警告作为异常抛出。</p>
<p class="">使用 <code>--trace-deprecation</code> 命令行标志将导致自定义弃用与堆栈跟踪一起打印到 <code>stderr</code>。</p>
<p class="">使用 <code>--no-deprecation</code> 命令行标志将抑制自定义弃用的所有报告。</p>
<p class=""><code>*-deprecation</code> 命令行标志仅影响使用名称 <code>'DeprecationWarning'</code> 的警告。</p>
<h4><code>'worker'</code> 事件<span><a class="mark" href="#event-worker" id="event-worker">#</a></span><a aria-hidden="true" class="legacy" id="process_event_worker"></a></h4><p class="tip_wrap" data-show_trans="1" data-item_id="#event-worker">
                <a href="process/event_worker.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>新增于: v16.2.0</span>
</div>
<ul class="">
<li><code>worker</code> <a href="worker_threads.html#class-worker" rel="nofollow" class="type">&lt;Worker&gt;</a> 创建的 <a href="worker_threads.html#class-worker" rel="nofollow" class="type">&lt;Worker&gt;</a>。</li>
</ul>
<p>创建新的 <a href="worker_threads.html#class-worker" rel="nofollow" class="type">&lt;Worker&gt;</a> 线程后会触发 <code>'worker'</code> 事件。</p>
<h5>触发自定义的告警<span><a class="mark" href="#emitting-custom-warnings" id="emitting-custom-warnings">#</a></span><a aria-hidden="true" class="legacy" id="process_emitting_custom_warnings"></a></h5><p class="tip_wrap" data-show_trans="1" data-item_id="#emitting-custom-warnings">
                <a href="process/emitting_custom_warnings.html" class="tip_trans">中英对照</a>
                </p>
<p>请参阅 <a href="#processemitwarningwarning-type-code-ctor"><code>process.emitWarning()</code></a> 方法以发出自定义或特定于应用程序的警告。</p>
<h5>Node.js 警告的名称<span><a class="mark" href="#nodejs-warning-names" id="nodejs-warning-names">#</a></span><a aria-hidden="true" class="legacy" id="process_node_js_warning_names"></a></h5><p class="tip_wrap" data-show_trans="1" data-item_id="#nodejs-warning-names">
                <a href="process/node_js_warning_names.html" class="tip_trans">中英对照</a>
                </p>
<p>Node.js 触发的警告类型（由 <code>name</code> 属性标识）没有严格的指导方针。
可以随时添加新类型的警告。
一些最常见的警告类型包括：</p>
<ul class="">
<li><code>'DeprecationWarning'</code> - 表示使用已弃用的 Node.js API 或功能。
此类警告必须包含标识<a href="deprecations.html">弃用代码</a>的 <code>'code'</code> 属性。</li>
<li><code>'ExperimentalWarning'</code> - 表示使用实验的 Node.js API 或功能。
必须谨慎使用此类功能，因为它们可能随时更改，并且不受与受支持功能相同的严格语义版本控制和长期支持政策的约束。</li>
<li><code>'MaxListenersExceededWarning'</code> - 表示在 <code>EventEmitter</code> 或 <code>EventTarget</code> 上注册了太多给定事件的监听器。
这通常表示内存泄漏。</li>
<li><code>'TimeoutOverflowWarning'</code> - 表示已向 <code>setTimeout()</code> 或 <code>setInterval()</code> 函数提供了无法容纳在 32 位有符号整数内的数值。</li>
<li><code>'UnsupportedWarning'</code> - 表示使用不受支持的选项或功能，这些选项或功能将被忽略而不是被视为错误。
一个示例是在使用 HTTP/2 兼容性 API 时使用 HTTP 响应状态消息。</li>
</ul>
<h4>信号事件<span><a class="mark" href="#signal-events" id="signal-events">#</a></span><a aria-hidden="true" class="legacy" id="process_signal_events"></a></h4><p class="tip_wrap" data-show_trans="1" data-item_id="#signal-events">
                <a href="process/signal_events.html" class="tip_trans">中英对照</a>
                </p>
<!--type=event-->
<!--name=SIGINT, SIGHUP, etc.-->
<p>当 Node.js 进程收到信号时，则将触发信号事件。
有关标准 POSIX 信号名称（例如 <code>'SIGINT'</code>、<code>'SIGHUP'</code> 等）的列表，请参阅 <a href="http://man7.org/linux/man-pages/man7/signal.7.html" rel="nofollow"><code>signal(7)</code></a>。</p>
<p class="">信号在 <a href="worker_threads.html#class-worker"><code>Worker</code></a> 线程上不可用。</p>
<p class="">信号句柄将接收信号的名称（<code>'SIGINT'</code>、<code>'SIGTERM'</code> 等）作为第一个参数。</p>
<p class="">每个事件的名称将是信号的大写通用名称（例如 <code>'SIGINT'</code> 表示 <code>SIGINT</code> 信号）。</p>

<pre class="with-35-chars"><input class="js-flavor-selector" type="checkbox" checked="" aria-label="Show modern ES modules syntax"><code class="language-js mjs"><span class="hljs-keyword">import</span> process <span class="hljs-keyword">from</span> <span class="hljs-string">'process'</span>;

<span class="hljs-comment">// 从标准输入开始读取，因此进程不会退出。</span>
process.<span class="hljs-property">stdin</span>.<span class="hljs-title function_">resume</span>();

process.<span class="hljs-title function_">on</span>(<span class="hljs-string">'SIGINT'</span>, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Received SIGINT. Press Control-D to exit.'</span>);
});

<span class="hljs-comment">// 使用单个函数处理多个信号</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">handle</span>(<span class="hljs-params">signal</span>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Received <span class="hljs-subst">${signal}</span>`</span>);
}

process.<span class="hljs-title function_">on</span>(<span class="hljs-string">'SIGINT'</span>, handle);
process.<span class="hljs-title function_">on</span>(<span class="hljs-string">'SIGTERM'</span>, handle);</code><code class="language-js cjs"><span class="hljs-keyword">const</span> process = <span class="hljs-built_in">require</span>(<span class="hljs-string">'process'</span>);

<span class="hljs-comment">// 从标准输入开始读取，因此进程不会退出。</span>
process.<span class="hljs-property">stdin</span>.<span class="hljs-title function_">resume</span>();

process.<span class="hljs-title function_">on</span>(<span class="hljs-string">'SIGINT'</span>, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Received SIGINT. Press Control-D to exit.'</span>);
});

<span class="hljs-comment">// 使用单个函数处理多个信号</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">handle</span>(<span class="hljs-params">signal</span>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Received <span class="hljs-subst">${signal}</span>`</span>);
}

process.<span class="hljs-title function_">on</span>(<span class="hljs-string">'SIGINT'</span>, handle);
process.<span class="hljs-title function_">on</span>(<span class="hljs-string">'SIGTERM'</span>, handle);</code></pre>
<ul class="">
<li><code>'SIGUSR1'</code> 由 Node.js 预留以启动<a href="debugger.html">调试器</a>。
可以安装监听器，但这样做可能会干扰调试器。</li>
<li><code>'SIGTERM'</code> 和 <code>'SIGINT'</code> 在非 Windows 平台上具有默认的句柄，其在使用代码 <code>128 + signal number</code> 退出之前重置终端模式。
如果这些信号之一安装了监听器，则其默认行为将被删除（Node.js 将不再退出）。</li>
<li><code>'SIGPIPE'</code> 默认情况下忽略。
它可以安装监听器。</li>
<li><code>'SIGHUP'</code> 在 Windows 上是在关闭控制台窗口时生成，在其他平台上是在各种类似条件下生成。
参见 <a href="http://man7.org/linux/man-pages/man7/signal.7.html" rel="nofollow"><code>signal(7)</code></a>。
它可以安装监听器，但是 Node.js 将在大约 10 秒后被 Windows 无条件地终止。
在非 Windows 平台上，<code>SIGHUP</code> 的默认行为是终止 Node.js，但一旦安装了监听器，则其默认行为将被删除。</li>
<li><code>'SIGTERM'</code> Windows 上不支持，可以监听。</li>
<li>所有平台都支持来自终端的 <code>'SIGINT'</code>，通常可以使用 <kbd>Ctrl</kbd>+<kbd>C</kbd> 生成（但是这是可配置的）。
当启用<a href="tty.html#readstreamsetrawmodemode">终端原始模式</a>并使用 <kbd>Ctrl</kbd>+<kbd>C</kbd> 时不会生成它。</li>
<li><code>'SIGBREAK'</code> 在 Windows 上，当按下 <kbd>Ctrl</kbd>+<kbd>Break</kbd> 时会发送。
在非 Windows 平台上，它可以被监听，但无法发送或生成它。</li>
<li><code>'SIGWINCH'</code> 当调整控制台大小时会发送。
在 Windows 上，这只会发生在当光标移动时写入控制台，或者当在原始模式下使用可读的终端时。</li>
<li><code>'SIGKILL'</code> 不能安装监听器，它会无条件地终止所有平台上的 Node.js。</li>
<li><code>'SIGSTOP'</code> 不能安装监听器。</li>
<li><code>'SIGBUS'</code>、<code>'SIGFPE'</code>、<code>'SIGSEGV'</code> 和 <code>'SIGILL'</code>，当没有使用 <a href="http://man7.org/linux/man-pages/man2/kill.2.html" rel="nofollow"><code>kill(2)</code></a> 人为引发时，本质上会使进程处于调用 JS 监听器不安全的状态。
这样做可能会导致进程停止响应。</li>
<li><code>0</code> 可以发送来测试进程是否存在，如果进程存在则没影响，如果进程不存在则抛出错误。</li>
</ul>
<p class="">Windows 不支持信号，因此没有等价的使用信号来终止，但 Node.js 提供了一些对 <a href="#processkillpid-signal"><code>process.kill()</code></a> 和 <a href="child_process.html#subprocesskillsignal"><code>subprocess.kill()</code></a> 的模拟：</p>
<ul class="">
<li>发送 <code>SIGINT</code>、<code>SIGTERM</code>、和 <code>SIGKILL</code> 会导致目标进程无条件的终止，之后子进程会报告进程被信号终止。</li>
<li>发送信号 <code>0</code> 可以作为独立于平台的方式来测试进程是否存在。</li>
</ul>
</section><section><h3><code>process.abort()</code><span><a class="mark" href="#processabort" id="processabort">#</a></span><a aria-hidden="true" class="legacy" id="process_process_abort"></a></h3><p class="tip_wrap" data-show_trans="1" data-item_id="#processabort">
                <a href="process/process_abort.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>新增于: v0.7.0</span>
</div>
<p><code>process.abort()</code> 方法会导致 Node.js 进程立即退出并生成一个核心文件。</p>
<p class="">此特性在 <a href="worker_threads.html#class-worker"><code>Worker</code></a> 线程中不可用。</p>
</section><section><h3><code>process.allowedNodeEnvironmentFlags</code><span><a class="mark" href="#processallowednodeenvironmentflags" id="processallowednodeenvironmentflags">#</a></span><a aria-hidden="true" class="legacy" id="process_process_allowednodeenvironmentflags"></a></h3><p class="tip_wrap" data-show_trans="1" data-item_id="#processallowednodeenvironmentflags">
                <a href="process/process_allowednodeenvironmentflags.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>新增于: v10.10.0</span>
</div>
<ul class="">
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Set" rel="nofollow" class="type">&lt;Set&gt;</a></li>
</ul>
<p><code>process.allowedNodeEnvironmentFlags</code> 属性是 <a href="cli.html#node_optionsoptions"><code>NODE_OPTIONS</code></a> 环境变量中允许的特殊的只读 <code>Set</code> 标志。</p>
<p class=""><code>process.allowedNodeEnvironmentFlags</code> 继承了 <code>Set</code>，但覆盖了 <code>Set.prototype.has</code> 以识别几种不同的可能标志表示。
在以下情况下，<code>process.allowedNodeEnvironmentFlags.has()</code> 将返回 <code>true</code>：</p>
<ul class="">
<li>标志可以省略前导单（<code>-</code>）或双（<code>--</code>）破折号；例如，<code>inspect-brk</code> 代表 <code>--inspect-brk</code>，或 <code>r</code> 代表 <code>-r</code>。</li>
<li>传给 V8 的标志（如 <code>--v8-options</code> 中所列）可能会替换一个或多个_非前导_破折号作为下划线，反之亦然；例如，<code>--perf_basic_prof</code>、<code>--perf-basic-prof</code>、<code>--perf_basic-prof</code> 等。</li>
<li>标志可能包含一个或多个等于 (<code>=</code>) 字符；在第一个等号之后并包括在内的所有字符都将被忽略；例如，<code>--stack-trace-limit=100</code>。</li>
<li>标志_必须_在 <a href="cli.html#node_optionsoptions"><code>NODE_OPTIONS</code></a> 中是允许的。</li>
</ul>
<p class="">在 <code>process.allowedNodeEnvironmentFlags</code> 上迭代时，标志只会出现_一次_；每个都以一个或多个破折号开头。
传给 V8 的标志将包含下划线而不是非前导破折号：</p>

<pre class="with-59-chars"><input class="js-flavor-selector" type="checkbox" checked="" aria-label="Show modern ES modules syntax"><code class="language-js mjs"><span class="hljs-keyword">import</span> { allowedNodeEnvironmentFlags } <span class="hljs-keyword">from</span> <span class="hljs-string">'process'</span>;

allowedNodeEnvironmentFlags.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">flag</span>) =&gt;</span> {
  <span class="hljs-comment">// -r</span>
  <span class="hljs-comment">// --inspect-brk</span>
  <span class="hljs-comment">// --abort_on_uncaught_exception</span>
  <span class="hljs-comment">// ...</span>
});</code><code class="language-js cjs"><span class="hljs-keyword">const</span> { allowedNodeEnvironmentFlags } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'process'</span>);

allowedNodeEnvironmentFlags.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">flag</span>) =&gt;</span> {
  <span class="hljs-comment">// -r</span>
  <span class="hljs-comment">// --inspect-brk</span>
  <span class="hljs-comment">// --abort_on_uncaught_exception</span>
  <span class="hljs-comment">// ...</span>
});</code></pre>
<p class=""><code>process.allowedNodeEnvironmentFlags</code> 的方法 <code>add()</code>、<code>clear()</code> 和 <code>delete()</code> 什么都不做，会静默失败。</p>
<p class="">如果 Node.js 编译时_没有_ <a href="cli.html#node_optionsoptions"><code>NODE_OPTIONS</code></a> 支持（显示在 <a href="#processconfig"><code>process.config</code></a> 中），那么 <code>process.allowedNodeEnvironmentFlags</code> 将包含_本来_允许的内容。</p>
</section><section><h3><code>process.arch</code><span><a class="mark" href="#processarch" id="processarch">#</a></span><a aria-hidden="true" class="legacy" id="process_process_arch"></a></h3><p class="tip_wrap" data-show_trans="1" data-item_id="#processarch">
                <a href="process/process_arch.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>新增于: v0.5.0</span>
</div>
<ul class="">
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a></li>
</ul>
<p>为其编译 Node.js 二进制文件的操作系统 CPU 架构。
可能的值为：<code>'arm'</code>、<code>'arm64'</code>、<code>'ia32'</code>、<code>'mips'</code>、<code>'mipsel'</code>、<code>'ppc'</code>、<code>'ppc64'</code>、<code>'s390'</code>、<code>'s390x'</code>、以及 <code>'x64'</code>。</p>

<pre class="with-36-chars"><input class="js-flavor-selector" type="checkbox" checked="" aria-label="Show modern ES modules syntax"><code class="language-js mjs"><span class="hljs-keyword">import</span> { arch } <span class="hljs-keyword">from</span> <span class="hljs-string">'process'</span>;

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`This processor architecture is <span class="hljs-subst">${arch}</span>`</span>);</code><code class="language-js cjs"><span class="hljs-keyword">const</span> { arch } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'process'</span>);

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`This processor architecture is <span class="hljs-subst">${arch}</span>`</span>);</code></pre>
</section><section><h3><code>process.argv</code><span><a class="mark" href="#processargv" id="processargv">#</a></span><a aria-hidden="true" class="legacy" id="process_process_argv"></a></h3><p class="tip_wrap" data-show_trans="1" data-item_id="#processargv">
                <a href="process/process_argv.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>新增于: v0.1.27</span>
</div>
<ul class="">
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string[]&gt;</a></li>
</ul>
<p><code>process.argv</code> 属性返回数组，其中包含启动 Node.js 进程时传入的命令行参数。
第一个元素将是 <a href="#processexecpath"><code>process.execPath</code></a>。
如果需要访问 <code>argv[0]</code> 的原始值，请参阅 <code>process.argv0</code>。
第二个元素将是正在执行的 JavaScript 文件的路径。
其余元素将是任何其他命令行参数。</p>
<p class="">例如，假设 <code>process-args.js</code> 有以下脚本：</p>

<pre class="with-36-chars"><input class="js-flavor-selector" type="checkbox" checked="" aria-label="Show modern ES modules syntax"><code class="language-js mjs"><span class="hljs-keyword">import</span> { argv } <span class="hljs-keyword">from</span> <span class="hljs-string">'process'</span>;

<span class="hljs-comment">// 打印 process.argv</span>
argv.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">val, index</span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`<span class="hljs-subst">${index}</span>: <span class="hljs-subst">${val}</span>`</span>);
});</code><code class="language-js cjs"><span class="hljs-keyword">const</span> { argv } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'process'</span>);

<span class="hljs-comment">// 打印 process.argv</span>
argv.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">val, index</span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`<span class="hljs-subst">${index}</span>: <span class="hljs-subst">${val}</span>`</span>);
});</code></pre>
<p class="">以如下方式启动 Node.js 进程：</p>
<pre class=""><code class="language-console"><span class="hljs-meta prompt_">$ </span><span class="language-bash">node process-args.js one two=three four</span></code></pre>
<p class="">将生成输出：</p>
<pre class=""><code class="language-text">0: /usr/local/bin/node
1: /Users/mjr/work/node/process-args.js
2: one
3: two=three
4: four</code></pre>
</section><section><h3><code>process.argv0</code><span><a class="mark" href="#processargv0" id="processargv0">#</a></span><a aria-hidden="true" class="legacy" id="process_process_argv0"></a></h3><p class="tip_wrap" data-show_trans="1" data-item_id="#processargv0">
                <a href="process/process_argv0.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>新增于: v6.4.0</span>
</div>
<ul class="">
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a></li>
</ul>
<p><code>process.argv0</code> 属性存储了 Node.js 启动时传入的 <code>argv[0]</code> 原始值的只读副本。</p>
<pre class=""><code class="language-console"><span class="hljs-meta prompt_">$ </span><span class="language-bash">bash -c <span class="hljs-string">'exec -a customArgv0 ./node'</span></span>
<span class="hljs-meta prompt_">&gt; </span><span class="language-bash">process.argv[0]</span>
'/Volumes/code/external/node/out/Release/node'
<span class="hljs-meta prompt_">&gt; </span><span class="language-bash">process.argv0</span>
'customArgv0'</code></pre>
</section><section><h3><code>process.channel</code><span><a class="mark" href="#processchannel" id="processchannel">#</a></span><a aria-hidden="true" class="legacy" id="process_process_channel"></a></h3><p class="tip_wrap" data-show_trans="1" data-item_id="#processchannel">
                <a href="process/process_channel.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<details class="changelog"><summary>版本历史</summary>
<table>
<tbody><tr><th>版本</th><th>变更</th></tr>
<tr><td>v14.0.0</td>
<td><p>该对象不再意外暴露原生 C++ 绑定。</p></td></tr>
<tr><td>v7.1.0</td>
<td><p><span>新增于: v7.1.0</span></p></td></tr>
</tbody></table>
</details>
</div>
<ul class="">
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" rel="nofollow" class="type">&lt;Object&gt;</a></li>
</ul>
<p>如果 Node.js 进程是使用 IPC 通道衍生（参见<a href="child_process.html">子进程</a>文档），则 <code>process.channel</code> 属性是对 IPC 通道的引用。
如果不存在 IPC 通道，则此属性为 <code>undefined</code>。</p>
<h4><code>process.channel.ref()</code><span><a class="mark" href="#processchannelref" id="processchannelref">#</a></span><a aria-hidden="true" class="legacy" id="process_process_channel_ref"></a></h4><p class="tip_wrap" data-show_trans="1" data-item_id="#processchannelref">
                <a href="process/process_channel_ref.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>新增于: v7.1.0</span>
</div>
<p>如果之前已调用过 <code>.unref()</code>，则此方法使 IPC 通道保持进程的事件循环运行。</p>
<p class="">通常，这是通过 <code>process</code> 对象上的 <code>'disconnect'</code> 和 <code>'message'</code> 监听器的数量来管理的。
但是，此方法可用于显式请求特定行为。</p>
<h4><code>process.channel.unref()</code><span><a class="mark" href="#processchannelunref" id="processchannelunref">#</a></span><a aria-hidden="true" class="legacy" id="process_process_channel_unref"></a></h4><p class="tip_wrap" data-show_trans="1" data-item_id="#processchannelunref">
                <a href="process/process_channel_unref.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>新增于: v7.1.0</span>
</div>
<p>此方法使 IPC 通道不会保持进程的事件循环运行，并且即使在通道打开时也让它完成。</p>
<p class="">通常，这是通过 <code>process</code> 对象上的 <code>'disconnect'</code> 和 <code>'message'</code> 监听器的数量来管理的。
但是，此方法可用于显式请求特定行为。</p>
</section><section><h3><code>process.chdir(directory)</code><span><a class="mark" href="#processchdirdirectory" id="processchdirdirectory">#</a></span><a aria-hidden="true" class="legacy" id="process_process_chdir_directory"></a></h3><p class="tip_wrap" data-show_trans="1" data-item_id="#processchdirdirectory">
                <a href="process/process_chdir_directory.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>新增于: v0.1.17</span>
</div>
<ul class="">
<li><code>directory</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a></li>
</ul>
<p><code>process.chdir()</code> 方法更改 Node.js 进程的当前工作目录，如果失败则抛出异常（例如，如果指定的 <code>directory</code> 不存在）。</p>

<pre class="with-42-chars"><input class="js-flavor-selector" type="checkbox" checked="" aria-label="Show modern ES modules syntax"><code class="language-js mjs"><span class="hljs-keyword">import</span> { chdir, cwd } <span class="hljs-keyword">from</span> <span class="hljs-string">'process'</span>;

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Starting directory: <span class="hljs-subst">${cwd()}</span>`</span>);
<span class="hljs-keyword">try</span> {
  <span class="hljs-title function_">chdir</span>(<span class="hljs-string">'/tmp'</span>);
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`New directory: <span class="hljs-subst">${cwd()}</span>`</span>);
} <span class="hljs-keyword">catch</span> (err) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`chdir: <span class="hljs-subst">${err}</span>`</span>);
}</code><code class="language-js cjs"><span class="hljs-keyword">const</span> { chdir, cwd } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'process'</span>);

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Starting directory: <span class="hljs-subst">${cwd()}</span>`</span>);
<span class="hljs-keyword">try</span> {
  <span class="hljs-title function_">chdir</span>(<span class="hljs-string">'/tmp'</span>);
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`New directory: <span class="hljs-subst">${cwd()}</span>`</span>);
} <span class="hljs-keyword">catch</span> (err) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`chdir: <span class="hljs-subst">${err}</span>`</span>);
}</code></pre>
<p class="">此特性在 <a href="worker_threads.html#class-worker"><code>Worker</code></a> 线程中不可用。</p>
</section><section><h3><code>process.config</code><span><a class="mark" href="#processconfig" id="processconfig">#</a></span><a aria-hidden="true" class="legacy" id="process_process_config"></a></h3><p class="tip_wrap" data-show_trans="1" data-item_id="#processconfig">
                <a href="process/process_config.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<details class="changelog"><summary>版本历史</summary>
<table>
<tbody><tr><th>版本</th><th>变更</th></tr>
<tr><td>v16.0.0</td>
<td><p>修改 process.config 已被弃用。</p></td></tr>
<tr><td>v0.7.7</td>
<td><p><span>新增于: v0.7.7</span></p></td></tr>
</tbody></table>
</details>
</div>
<ul class="">
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" rel="nofollow" class="type">&lt;Object&gt;</a></li>
</ul>
<p><code>process.config</code> 属性返回 <code>Object</code>，其中包含用于编译当前 Node.js 可执行文件的配置选项的 JavaScript 表示。
这与运行 <code>./configure</code> 脚本时生成的 <code>config.gypi</code> 文件相同。</p>
<p class="">可能的输出示例如下所示：</p>
<!-- eslint-skip -->
<pre class=""><code class="language-js">{
  <span class="hljs-attr">target_defaults</span>:
   { <span class="hljs-attr">cflags</span>: [],
     <span class="hljs-attr">default_configuration</span>: <span class="hljs-string">'Release'</span>,
     <span class="hljs-attr">defines</span>: [],
     <span class="hljs-attr">include_dirs</span>: [],
     <span class="hljs-attr">libraries</span>: [] },
  <span class="hljs-attr">variables</span>:
   {
     <span class="hljs-attr">host_arch</span>: <span class="hljs-string">'x64'</span>,
     <span class="hljs-attr">napi_build_version</span>: <span class="hljs-number">5</span>,
     <span class="hljs-attr">node_install_npm</span>: <span class="hljs-string">'true'</span>,
     <span class="hljs-attr">node_prefix</span>: <span class="hljs-string">''</span>,
     <span class="hljs-attr">node_shared_cares</span>: <span class="hljs-string">'false'</span>,
     <span class="hljs-attr">node_shared_http_parser</span>: <span class="hljs-string">'false'</span>,
     <span class="hljs-attr">node_shared_libuv</span>: <span class="hljs-string">'false'</span>,
     <span class="hljs-attr">node_shared_zlib</span>: <span class="hljs-string">'false'</span>,
     <span class="hljs-attr">node_use_dtrace</span>: <span class="hljs-string">'false'</span>,
     <span class="hljs-attr">node_use_openssl</span>: <span class="hljs-string">'true'</span>,
     <span class="hljs-attr">node_shared_openssl</span>: <span class="hljs-string">'false'</span>,
     <span class="hljs-attr">strict_aliasing</span>: <span class="hljs-string">'true'</span>,
     <span class="hljs-attr">target_arch</span>: <span class="hljs-string">'x64'</span>,
     <span class="hljs-attr">v8_use_snapshot</span>: <span class="hljs-number">1</span>
   }
}</code></pre>
<p class=""><code>process.config</code> 属性是<strong>非</strong>只读的，并且生态系统中存在已知扩展、修改或完全替换 <code>process.config</code> 值的现有模块。</p>
<p class="">修改 <code>process.config</code> 属性或 <code>process.config</code> 对象的任何子属性已被弃用。
在未来的版本中，<code>process.config</code> 将变为只读。</p>
</section><section><h3><code>process.connected</code><span><a class="mark" href="#processconnected" id="processconnected">#</a></span><a aria-hidden="true" class="legacy" id="process_process_connected"></a></h3><p class="tip_wrap" data-show_trans="1" data-item_id="#processconnected">
                <a href="process/process_connected.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>新增于: v0.7.2</span>
</div>
<ul class="">
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" rel="nofollow" class="type">&lt;boolean&gt;</a></li>
</ul>
<p>如果 Node.js 进程使用 IPC 通道衍生（参见<a href="child_process.html">子进程</a>和<a href="cluster.html">集群</a>文档），则只要 IPC 通道连接，<code>process.connected</code> 属性将返回 <code>true</code>，并在调用 <code>process.disconnect()</code> 后返回 <code>false</code>。</p>
<p class="">一旦 <code>process.connected</code> 为 <code>false</code>，就不能再使用 <code>process.send()</code> 通过 IPC 通道发送消息。</p>
</section><section><h3><code>process.cpuUsage([previousValue])</code><span><a class="mark" href="#processcpuusagepreviousvalue" id="processcpuusagepreviousvalue">#</a></span><a aria-hidden="true" class="legacy" id="process_process_cpuusage_previousvalue"></a></h3><p class="tip_wrap" data-show_trans="1" data-item_id="#processcpuusagepreviousvalue">
                <a href="process/process_cpuusage_previousvalue.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>新增于: v6.1.0</span>
</div>
<ul class="">
<li><code>previousValue</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" rel="nofollow" class="type">&lt;Object&gt;</a> 先前调用 <code>process.cpuUsage()</code> 的返回值</li>
<li>返回: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" rel="nofollow" class="type">&lt;Object&gt;</a>
<ul>
<li><code>user</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a></li>
<li><code>system</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a></li>
</ul>
</li>
</ul>
<p><code>process.cpuUsage()</code> 方法在具有属性 <code>user</code> 和 <code>system</code> 的对象中返回当前进程的用户和系统 CPU 时间使用情况，其值为微秒值（百万分之一秒）。
这些值分别测量在用户和系统代码中花费的时间，如果多个 CPU 内核为此进程执行工作，则最终可能会大于实际经过的时间。</p>
<p class="">先前调用 <code>process.cpuUsage()</code> 的结果可以作为参数传给函数，以获取差异读数。</p>

<pre class="with-40-chars"><input class="js-flavor-selector" type="checkbox" checked="" aria-label="Show modern ES modules syntax"><code class="language-js mjs"><span class="hljs-keyword">import</span> { cpuUsage } <span class="hljs-keyword">from</span> <span class="hljs-string">'process'</span>;

<span class="hljs-keyword">const</span> startUsage = <span class="hljs-title function_">cpuUsage</span>();
<span class="hljs-comment">// { user: 38579, system: 6986 }</span>

<span class="hljs-comment">// 使 CPU 旋转 500 毫秒</span>
<span class="hljs-keyword">const</span> now = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>();
<span class="hljs-keyword">while</span> (<span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>() - now &lt; <span class="hljs-number">500</span>);

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">cpuUsage</span>(startUsage));
<span class="hljs-comment">// { user: 514883, system: 11226 }</span></code><code class="language-js cjs"><span class="hljs-keyword">const</span> { cpuUsage } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'process'</span>);

<span class="hljs-keyword">const</span> startUsage = <span class="hljs-title function_">cpuUsage</span>();
<span class="hljs-comment">// { user: 38579, system: 6986 }</span>

<span class="hljs-comment">// 使 CPU 旋转 500 毫秒</span>
<span class="hljs-keyword">const</span> now = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>();
<span class="hljs-keyword">while</span> (<span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>() - now &lt; <span class="hljs-number">500</span>);

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">cpuUsage</span>(startUsage));
<span class="hljs-comment">// { user: 514883, system: 11226 }</span></code></pre>
</section><section><h3><code>process.cwd()</code><span><a class="mark" href="#processcwd" id="processcwd">#</a></span><a aria-hidden="true" class="legacy" id="process_process_cwd"></a></h3><p class="tip_wrap" data-show_trans="1" data-item_id="#processcwd">
                <a href="process/process_cwd.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>新增于: v0.1.8</span>
</div>
<ul class="">
<li>返回: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a></li>
</ul>
<p><code>process.cwd()</code> 方法返回 Node.js 进程的当前工作目录。</p>

<pre class="with-35-chars"><input class="js-flavor-selector" type="checkbox" checked="" aria-label="Show modern ES modules syntax"><code class="language-js mjs"><span class="hljs-keyword">import</span> { cwd } <span class="hljs-keyword">from</span> <span class="hljs-string">'process'</span>;

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Current directory: <span class="hljs-subst">${cwd()}</span>`</span>);</code><code class="language-js cjs"><span class="hljs-keyword">const</span> { cwd } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'process'</span>);

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Current directory: <span class="hljs-subst">${cwd()}</span>`</span>);</code></pre>
</section><section><h3><code>process.debugPort</code><span><a class="mark" href="#processdebugport" id="processdebugport">#</a></span><a aria-hidden="true" class="legacy" id="process_process_debugport"></a></h3><p class="tip_wrap" data-show_trans="1" data-item_id="#processdebugport">
                <a href="process/process_debugport.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>新增于: v0.7.2</span>
</div>
<ul class="">
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;number&gt;</a></li>
</ul>
<p>启用时 Node.js 调试器使用的端口。</p>

<pre class="with-35-chars"><input class="js-flavor-selector" type="checkbox" checked="" aria-label="Show modern ES modules syntax"><code class="language-js mjs"><span class="hljs-keyword">import</span> process <span class="hljs-keyword">from</span> <span class="hljs-string">'process'</span>;

process.<span class="hljs-property">debugPort</span> = <span class="hljs-number">5858</span>;</code><code class="language-js cjs"><span class="hljs-keyword">const</span> process = <span class="hljs-built_in">require</span>(<span class="hljs-string">'process'</span>);

process.<span class="hljs-property">debugPort</span> = <span class="hljs-number">5858</span>;</code></pre>
</section><section><h3><code>process.disconnect()</code><span><a class="mark" href="#processdisconnect" id="processdisconnect">#</a></span><a aria-hidden="true" class="legacy" id="process_process_disconnect"></a></h3><p class="tip_wrap" data-show_trans="1" data-item_id="#processdisconnect">
                <a href="process/process_disconnect.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>新增于: v0.7.2</span>
</div>
<p>如果 Node.js 进程是使用 IPC 通道衍生（参见<a href="child_process.html">子进程</a>和<a href="cluster.html">集群</a>文档），则 <code>process.disconnect()</code> 方法将关闭通往父进程的 IPC 通道，一旦没有其他连接使其保持活动状态，则允许子进程正常退出。</p>
<p class="">调用 <code>process.disconnect()</code> 的效果和从父进程调用 <a href="child_process.html#subprocessdisconnect"><code>ChildProcess.disconnect()</code></a> 是一样的。</p>
<p class="">如果 Node.js 进程不是使用 IPC 通道衍生，则 <code>process.disconnect()</code> 将是 <code>undefined</code>。</p>
</section><section><h3><code>process.dlopen(module, filename[, flags])</code><span><a class="mark" href="#processdlopenmodule-filename-flags" id="processdlopenmodule-filename-flags">#</a></span><a aria-hidden="true" class="legacy" id="process_process_dlopen_module_filename_flags"></a></h3><p class="tip_wrap" data-show_trans="1" data-item_id="#processdlopenmodule-filename-flags">
                <a href="process/process_dlopen_module_filename_flags.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<details class="changelog"><summary>版本历史</summary>
<table>
<tbody><tr><th>版本</th><th>变更</th></tr>
<tr><td>v9.0.0</td>
<td><p>添加了对 <code>flags</code> 参数的支持。</p></td></tr>
<tr><td>v0.1.16</td>
<td><p><span>新增于: v0.1.16</span></p></td></tr>
</tbody></table>
</details>
</div>
<ul class="">
<li><code>module</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" rel="nofollow" class="type">&lt;Object&gt;</a></li>
<li><code>filename</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a></li>
<li><code>flags</code> <a href="os.html#dlopen-constants" rel="nofollow" class="type">&lt;os.constants.dlopen&gt;</a> <strong>默认值:</strong> <code>os.constants.dlopen.RTLD_LAZY</code></li>
</ul>
<p><code>process.dlopen()</code> 方法允许动态加载共享对象。
<code>require()</code> 主要用于加载 C++ 插件，除非特殊情况，否则不应直接使用。
换句话说，<a href="globals.html#require"><code>require()</code></a> 应该优先于 <code>process.dlopen()</code>，除非有特定的原因，例如自定义 dlopen 标志或从 ES 模块加载。</p>
<p class=""><code>flags</code> 参数是整数，允许指定 dlopen 行为。
有关详细信息，请参阅 <a href="os.html#dlopen-constants"><code>os.constants.dlopen</code></a> 文档。</p>
<p class="">调用 <code>process.dlopen()</code> 时的一个重要要求是必须传入 <code>module</code> 实例。
然后可以通过 <code>module.exports</code> 访问由 C++ 插件导出的函数。</p>
<p class="">下面的示例显示了如何加载名为 <code>local.node</code> 的 C++ 插件，该插件导出 <code>foo</code> 函数。
通过传入 <code>RTLD_NOW</code> 常量，在调用返回之前加载所有符号。
在此示例中，假定常量可用。</p>

<pre class="with-38-chars"><input class="js-flavor-selector" type="checkbox" checked="" aria-label="Show modern ES modules syntax"><code class="language-js mjs"><span class="hljs-keyword">import</span> { dlopen } <span class="hljs-keyword">from</span> <span class="hljs-string">'process'</span>;
<span class="hljs-keyword">import</span> { constants } <span class="hljs-keyword">from</span> <span class="hljs-string">'os'</span>;
<span class="hljs-keyword">import</span> { fileURLToPath } <span class="hljs-keyword">from</span> <span class="hljs-string">'url'</span>;

<span class="hljs-keyword">const</span> <span class="hljs-variable language_">module</span> = { <span class="hljs-attr">exports</span>: {} };
<span class="hljs-title function_">dlopen</span>(<span class="hljs-variable language_">module</span>, <span class="hljs-title function_">fileURLToPath</span>(<span class="hljs-keyword">new</span> <span class="hljs-title function_">URL</span>(<span class="hljs-string">'local.node'</span>, <span class="hljs-keyword">import</span>.<span class="hljs-property">meta</span>.<span class="hljs-property">url</span>)),
       constants.<span class="hljs-property">dlopen</span>.<span class="hljs-property">RTLD_NOW</span>);
<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span>.<span class="hljs-title function_">foo</span>();</code><code class="language-js cjs"><span class="hljs-keyword">const</span> { dlopen } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'process'</span>);
<span class="hljs-keyword">const</span> { constants } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'os'</span>);
<span class="hljs-keyword">const</span> { join } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'path'</span>);

<span class="hljs-keyword">const</span> <span class="hljs-variable language_">module</span> = { <span class="hljs-attr">exports</span>: {} };
<span class="hljs-title function_">dlopen</span>(<span class="hljs-variable language_">module</span>, <span class="hljs-title function_">join</span>(__dirname, <span class="hljs-string">'local.node'</span>), constants.<span class="hljs-property">dlopen</span>.<span class="hljs-property">RTLD_NOW</span>);
<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span>.<span class="hljs-title function_">foo</span>();</code></pre>
</section><section><h3><code>process.emitWarning(warning[, options])</code><span><a class="mark" href="#processemitwarningwarning-options" id="processemitwarningwarning-options">#</a></span><a aria-hidden="true" class="legacy" id="process_process_emitwarning_warning_options"></a></h3><p class="tip_wrap" data-show_trans="1" data-item_id="#processemitwarningwarning-options">
                <a href="process/process_emitwarning_warning_options.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>新增于: v8.0.0</span>
</div>
<ul class="">
<li><code>warning</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error" rel="nofollow" class="type">&lt;Error&gt;</a> 要触发的警告。</li>
<li><code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" rel="nofollow" class="type">&lt;Object&gt;</a>
<ul>
<li><code>type</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> 当 <code>warning</code> 是 <code>String</code> 时，<code>type</code> 是用于触发警告的 <em>type</em> 的名称。 <strong>默认值:</strong> <code>'Warning'</code>。</li>
<li><code>code</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> 触发的警告实例的唯一标识符。</li>
<li><code>ctor</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" rel="nofollow" class="type">&lt;Function&gt;</a> 当 <code>warning</code> 为 <code>String</code> 时，<code>ctor</code> 是可选函数，用于限制生成的堆栈跟踪。 <strong>默认值:</strong> <code>process.emitWarning</code>。</li>
<li><code>detail</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> 要包含在错误中的额外文本。</li>
</ul>
</li>
</ul>
<p><code>process.emitWarning()</code> 方法可用于触发自定义或特定于应用程序的进程警告。
这些可以通过向 <a href="#event-warning"><code>'warning'</code></a> 事件添加句柄来监听。</p>

<pre class="with-43-chars"><input class="js-flavor-selector" type="checkbox" checked="" aria-label="Show modern ES modules syntax"><code class="language-js mjs"><span class="hljs-keyword">import</span> { emitWarning } <span class="hljs-keyword">from</span> <span class="hljs-string">'process'</span>;

<span class="hljs-comment">// 触发带有代码和其他详细信息的警告。</span>
<span class="hljs-title function_">emitWarning</span>(<span class="hljs-string">'Something happened!'</span>, {
  <span class="hljs-attr">code</span>: <span class="hljs-string">'MY_WARNING'</span>,
  <span class="hljs-attr">detail</span>: <span class="hljs-string">'This is some additional information'</span>
});
<span class="hljs-comment">// 触发:</span>
<span class="hljs-comment">// (node:56338) [MY_WARNING] Warning: Something happened!</span>
<span class="hljs-comment">// This is some additional information</span></code><code class="language-js cjs"><span class="hljs-keyword">const</span> { emitWarning } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'process'</span>);

<span class="hljs-comment">// 触发带有代码和其他详细信息的警告。</span>
<span class="hljs-title function_">emitWarning</span>(<span class="hljs-string">'Something happened!'</span>, {
  <span class="hljs-attr">code</span>: <span class="hljs-string">'MY_WARNING'</span>,
  <span class="hljs-attr">detail</span>: <span class="hljs-string">'This is some additional information'</span>
});
<span class="hljs-comment">// 触发:</span>
<span class="hljs-comment">// (node:56338) [MY_WARNING] Warning: Something happened!</span>
<span class="hljs-comment">// This is some additional information</span></code></pre>
<p class="">在此示例中，<code>Error</code> 对象由 <code>process.emitWarning()</code> 在内部生成并传给 <a href="#event-warning"><code>'warning'</code></a> 句柄。</p>

<pre class="with-35-chars"><input class="js-flavor-selector" type="checkbox" checked="" aria-label="Show modern ES modules syntax"><code class="language-js mjs"><span class="hljs-keyword">import</span> process <span class="hljs-keyword">from</span> <span class="hljs-string">'process'</span>;

process.<span class="hljs-title function_">on</span>(<span class="hljs-string">'warning'</span>, <span class="hljs-function">(<span class="hljs-params">warning</span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">warn</span>(warning.<span class="hljs-property">name</span>);    <span class="hljs-comment">// 'Warning'</span>
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">warn</span>(warning.<span class="hljs-property">message</span>); <span class="hljs-comment">// 'Something happened!'</span>
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">warn</span>(warning.<span class="hljs-property">code</span>);    <span class="hljs-comment">// 'MY_WARNING'</span>
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">warn</span>(warning.<span class="hljs-property">stack</span>);   <span class="hljs-comment">// Stack trace</span>
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">warn</span>(warning.<span class="hljs-property">detail</span>);  <span class="hljs-comment">// 'This is some additional information'</span>
});</code><code class="language-js cjs"><span class="hljs-keyword">const</span> process = <span class="hljs-built_in">require</span>(<span class="hljs-string">'process'</span>);

process.<span class="hljs-title function_">on</span>(<span class="hljs-string">'warning'</span>, <span class="hljs-function">(<span class="hljs-params">warning</span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">warn</span>(warning.<span class="hljs-property">name</span>);    <span class="hljs-comment">// 'Warning'</span>
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">warn</span>(warning.<span class="hljs-property">message</span>); <span class="hljs-comment">// 'Something happened!'</span>
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">warn</span>(warning.<span class="hljs-property">code</span>);    <span class="hljs-comment">// 'MY_WARNING'</span>
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">warn</span>(warning.<span class="hljs-property">stack</span>);   <span class="hljs-comment">// Stack trace</span>
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">warn</span>(warning.<span class="hljs-property">detail</span>);  <span class="hljs-comment">// 'This is some additional information'</span>
});</code></pre>
<p class="">如果 <code>warning</code> 作为 <code>Error</code> 对象传入，则忽略 <code>options</code> 参数。</p>
</section><section><h3><code>process.emitWarning(warning[, type[, code]][, ctor])</code><span><a class="mark" href="#processemitwarningwarning-type-code-ctor" id="processemitwarningwarning-type-code-ctor">#</a></span><a aria-hidden="true" class="legacy" id="process_process_emitwarning_warning_type_code_ctor"></a></h3><p class="tip_wrap" data-show_trans="1" data-item_id="#processemitwarningwarning-type-code-ctor">
                <a href="process/process_emitwarning_warning_type_code_ctor.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>新增于: v6.0.0</span>
</div>
<ul class="">
<li><code>warning</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error" rel="nofollow" class="type">&lt;Error&gt;</a> 要触发的警告。</li>
<li><code>type</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> 当 <code>warning</code> 是 <code>String</code> 时，<code>type</code> 是用于触发警告的 <em>type</em> 的名称。 <strong>默认值:</strong> <code>'Warning'</code>。</li>
<li><code>code</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> 触发的警告实例的唯一标识符。</li>
<li><code>ctor</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" rel="nofollow" class="type">&lt;Function&gt;</a> 当 <code>warning</code> 为 <code>String</code> 时，<code>ctor</code> 是可选函数，用于限制生成的堆栈跟踪。 <strong>默认值:</strong> <code>process.emitWarning</code>。</li>
</ul>
<p><code>process.emitWarning()</code> 方法可用于触发自定义或特定于应用程序的进程警告。
这些可以通过向 <a href="#event-warning"><code>'warning'</code></a> 事件添加句柄来监听。</p>

<pre class="with-43-chars"><input class="js-flavor-selector" type="checkbox" checked="" aria-label="Show modern ES modules syntax"><code class="language-js mjs"><span class="hljs-keyword">import</span> { emitWarning } <span class="hljs-keyword">from</span> <span class="hljs-string">'process'</span>;

<span class="hljs-comment">// 使用字符串触发警告。</span>
<span class="hljs-title function_">emitWarning</span>(<span class="hljs-string">'Something happened!'</span>);
<span class="hljs-comment">// 触发: (node: 56338) Warning: Something happened!</span></code><code class="language-js cjs"><span class="hljs-keyword">const</span> { emitWarning } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'process'</span>);

<span class="hljs-comment">// 使用字符串触发警告。</span>
<span class="hljs-title function_">emitWarning</span>(<span class="hljs-string">'Something happened!'</span>);
<span class="hljs-comment">// 触发: (node: 56338) Warning: Something happened!</span></code></pre>

<pre class="with-43-chars"><input class="js-flavor-selector" type="checkbox" checked="" aria-label="Show modern ES modules syntax"><code class="language-js mjs"><span class="hljs-keyword">import</span> { emitWarning } <span class="hljs-keyword">from</span> <span class="hljs-string">'process'</span>;

<span class="hljs-comment">// 使用字符串和类型触发警告。</span>
<span class="hljs-title function_">emitWarning</span>(<span class="hljs-string">'Something Happened!'</span>, <span class="hljs-string">'CustomWarning'</span>);
<span class="hljs-comment">// 触发: (node:56338) CustomWarning: Something Happened!</span></code><code class="language-js cjs"><span class="hljs-keyword">const</span> { emitWarning } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'process'</span>);

<span class="hljs-comment">// 使用字符串和类型触发警告。</span>
<span class="hljs-title function_">emitWarning</span>(<span class="hljs-string">'Something Happened!'</span>, <span class="hljs-string">'CustomWarning'</span>);
<span class="hljs-comment">// 触发: (node:56338) CustomWarning: Something Happened!</span></code></pre>

<pre class="with-43-chars"><input class="js-flavor-selector" type="checkbox" checked="" aria-label="Show modern ES modules syntax"><code class="language-js mjs"><span class="hljs-keyword">import</span> { emitWarning } <span class="hljs-keyword">from</span> <span class="hljs-string">'process'</span>;

<span class="hljs-title function_">emitWarning</span>(<span class="hljs-string">'Something happened!'</span>, <span class="hljs-string">'CustomWarning'</span>, <span class="hljs-string">'WARN001'</span>);
<span class="hljs-comment">// 触发: (node:56338) [WARN001] CustomWarning: Something happened!</span></code><code class="language-js cjs"><span class="hljs-keyword">const</span> { emitWarning } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'process'</span>);

process.<span class="hljs-title function_">emitWarning</span>(<span class="hljs-string">'Something happened!'</span>, <span class="hljs-string">'CustomWarning'</span>, <span class="hljs-string">'WARN001'</span>);
<span class="hljs-comment">// 触发: (node:56338) [WARN001] CustomWarning: Something happened!</span></code></pre>
<p class="">在前面的每个示例中，<code>Error</code> 对象由 <code>process.emitWarning()</code> 在内部生成并传给 <a href="#event-warning"><code>'warning'</code></a> 句柄。</p>

<pre class="with-35-chars"><input class="js-flavor-selector" type="checkbox" checked="" aria-label="Show modern ES modules syntax"><code class="language-js mjs"><span class="hljs-keyword">import</span> process <span class="hljs-keyword">from</span> <span class="hljs-string">'process'</span>;

process.<span class="hljs-title function_">on</span>(<span class="hljs-string">'warning'</span>, <span class="hljs-function">(<span class="hljs-params">warning</span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">warn</span>(warning.<span class="hljs-property">name</span>);
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">warn</span>(warning.<span class="hljs-property">message</span>);
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">warn</span>(warning.<span class="hljs-property">code</span>);
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">warn</span>(warning.<span class="hljs-property">stack</span>);
});</code><code class="language-js cjs"><span class="hljs-keyword">const</span> process = <span class="hljs-built_in">require</span>(<span class="hljs-string">'process'</span>);

process.<span class="hljs-title function_">on</span>(<span class="hljs-string">'warning'</span>, <span class="hljs-function">(<span class="hljs-params">warning</span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">warn</span>(warning.<span class="hljs-property">name</span>);
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">warn</span>(warning.<span class="hljs-property">message</span>);
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">warn</span>(warning.<span class="hljs-property">code</span>);
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">warn</span>(warning.<span class="hljs-property">stack</span>);
});</code></pre>
<p class="">如果 <code>warning</code> 作为 <code>Error</code> 对象传入，则它将被不加修改地传给 <code>'warning'</code> 事件句柄（并且可选的 <code>type</code>、<code>code</code> 和 <code>ctor</code> 参数将被忽略）：</p>

<pre class="with-43-chars"><input class="js-flavor-selector" type="checkbox" checked="" aria-label="Show modern ES modules syntax"><code class="language-js mjs"><span class="hljs-keyword">import</span> { emitWarning } <span class="hljs-keyword">from</span> <span class="hljs-string">'process'</span>;

<span class="hljs-comment">// 使用 Error 对象触发警告。</span>
<span class="hljs-keyword">const</span> myWarning = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'Something happened!'</span>);
<span class="hljs-comment">// 使用错误名称属性指定类型名称</span>
myWarning.<span class="hljs-property">name</span> = <span class="hljs-string">'CustomWarning'</span>;
myWarning.<span class="hljs-property">code</span> = <span class="hljs-string">'WARN001'</span>;

<span class="hljs-title function_">emitWarning</span>(myWarning);
<span class="hljs-comment">// 触发: (node:56338) [WARN001] CustomWarning: Something happened!</span></code><code class="language-js cjs"><span class="hljs-keyword">const</span> { emitWarning } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'process'</span>);

<span class="hljs-comment">// 使用 Error 对象触发警告。</span>
<span class="hljs-keyword">const</span> myWarning = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'Something happened!'</span>);
<span class="hljs-comment">// 使用错误名称属性指定类型名称</span>
myWarning.<span class="hljs-property">name</span> = <span class="hljs-string">'CustomWarning'</span>;
myWarning.<span class="hljs-property">code</span> = <span class="hljs-string">'WARN001'</span>;

<span class="hljs-title function_">emitWarning</span>(myWarning);
<span class="hljs-comment">// 触发: (node:56338) [WARN001] CustomWarning: Something happened!</span></code></pre>
<p class="">如果 <code>warning</code> 不是字符串或 <code>Error</code> 对象，则抛出 <code>TypeError</code>。</p>
<p class="">虽然进程警告使用 <code>Error</code> 对象，但进程警告机制<strong>不是</strong>替代正常错误处理机制。</p>
<p class="">如果警告 <code>type</code> 为 <code>'DeprecationWarning'</code>，则执行以下额外处理：</p>
<ul class="">
<li>如果使用 <code>--throw-deprecation</code> 命令行标志，则弃用警告将作为异常抛出，而不是作为事件触发。</li>
<li>如果使用 <code>--no-deprecation</code> 命令行标志，则会取消弃用警告。</li>
<li>如果使用 <code>--trace-deprecation</code> 命令行标志，则弃用警告将与完整堆栈跟踪一起打印到 <code>stderr</code>。</li>
</ul>
<h4>避免重复警告<span><a class="mark" href="#avoiding-duplicate-warnings" id="avoiding-duplicate-warnings">#</a></span><a aria-hidden="true" class="legacy" id="process_avoiding_duplicate_warnings"></a></h4><p class="tip_wrap" data-show_trans="1" data-item_id="#avoiding-duplicate-warnings">
                <a href="process/avoiding_duplicate_warnings.html" class="tip_trans">中英对照</a>
                </p>
<p>作为最佳实践，每个进程只应触发一次警告。
为此，建议将 <code>emitWarning()</code> 放在一个简单的布尔标志后面，如下例所示：</p>

<pre class="with-43-chars"><input class="js-flavor-selector" type="checkbox" checked="" aria-label="Show modern ES modules syntax"><code class="language-js mjs"><span class="hljs-keyword">import</span> { emitWarning } <span class="hljs-keyword">from</span> <span class="hljs-string">'process'</span>;

<span class="hljs-keyword">function</span> <span class="hljs-title function_">emitMyWarning</span>(<span class="hljs-params"></span>) {
  <span class="hljs-keyword">if</span> (!emitMyWarning.<span class="hljs-property">warned</span>) {
    emitMyWarning.<span class="hljs-property">warned</span> = <span class="hljs-literal">true</span>;
    <span class="hljs-title function_">emitWarning</span>(<span class="hljs-string">'Only warn once!'</span>);
  }
}
<span class="hljs-title function_">emitMyWarning</span>();
<span class="hljs-comment">// 触发: (node: 56339) Warning: Only warn once!</span>
<span class="hljs-title function_">emitMyWarning</span>();
<span class="hljs-comment">// 什么都不触发</span></code><code class="language-js cjs"><span class="hljs-keyword">const</span> { emitWarning } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'process'</span>);

<span class="hljs-keyword">function</span> <span class="hljs-title function_">emitMyWarning</span>(<span class="hljs-params"></span>) {
  <span class="hljs-keyword">if</span> (!emitMyWarning.<span class="hljs-property">warned</span>) {
    emitMyWarning.<span class="hljs-property">warned</span> = <span class="hljs-literal">true</span>;
    <span class="hljs-title function_">emitWarning</span>(<span class="hljs-string">'Only warn once!'</span>);
  }
}
<span class="hljs-title function_">emitMyWarning</span>();
<span class="hljs-comment">// 触发: (node: 56339) Warning: Only warn once!</span>
<span class="hljs-title function_">emitMyWarning</span>();
<span class="hljs-comment">// 什么都不触发</span></code></pre>
</section><section><h3><code>process.env</code><span><a class="mark" href="#processenv" id="processenv">#</a></span><a aria-hidden="true" class="legacy" id="process_process_env"></a></h3><p class="tip_wrap" data-show_trans="1" data-item_id="#processenv">
                <a href="process/process_env.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<details class="changelog"><summary>版本历史</summary>
<table>
<tbody><tr><th>版本</th><th>变更</th></tr>
<tr><td>v11.14.0</td>
<td><p>工作线程现在默认使用父线程 <code>process.env</code> 的副本，可通过 <code>Worker</code> 构造函数的 <code>env</code> 选项进行配置。</p></td></tr>
<tr><td>v10.0.0</td>
<td><p>不推荐将变量值隐式转换为字符串。</p></td></tr>
<tr><td>v0.1.27</td>
<td><p><span>新增于: v0.1.27</span></p></td></tr>
</tbody></table>
</details>
</div>
<ul class="">
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" rel="nofollow" class="type">&lt;Object&gt;</a></li>
</ul>
<p><code>process.env</code> 属性返回包含用户环境的对象。
参见 <a href="http://man7.org/linux/man-pages/man7/environ.7.html" rel="nofollow"><code>environ(7)</code></a>。</p>
<p class="">此对象的示例如下所示：</p>
<!-- eslint-skip -->
<pre class=""><code class="language-js">{
  <span class="hljs-attr">TERM</span>: <span class="hljs-string">'xterm-256color'</span>,
  <span class="hljs-attr">SHELL</span>: <span class="hljs-string">'/usr/local/bin/bash'</span>,
  <span class="hljs-attr">USER</span>: <span class="hljs-string">'maciej'</span>,
  <span class="hljs-attr">PATH</span>: <span class="hljs-string">'~/.bin/:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin'</span>,
  <span class="hljs-attr">PWD</span>: <span class="hljs-string">'/Users/maciej'</span>,
  <span class="hljs-attr">EDITOR</span>: <span class="hljs-string">'vim'</span>,
  <span class="hljs-attr">SHLVL</span>: <span class="hljs-string">'1'</span>,
  <span class="hljs-attr">HOME</span>: <span class="hljs-string">'/Users/maciej'</span>,
  <span class="hljs-attr">LOGNAME</span>: <span class="hljs-string">'maciej'</span>,
  <span class="hljs-attr">_</span>: <span class="hljs-string">'/usr/local/bin/node'</span>
}</code></pre>
<p class="">可以修改此对象，但此类修改不会反映在 Node.js 进程之外，或反映到其他 <a href="worker_threads.html#class-worker"><code>Worker</code></a> 线程（除非显示请求）。
换句话说，以下示例将不起作用：</p>
<pre class=""><code class="language-console"><span class="hljs-meta prompt_">$ </span><span class="language-bash">node -e <span class="hljs-string">'process.env.foo = "bar"'</span> &amp;&amp; <span class="hljs-built_in">echo</span> <span class="hljs-variable">$foo</span></span></code></pre>
<p class="">但是以下示例则将起作用：</p>

<pre class="with-35-chars"><input class="js-flavor-selector" type="checkbox" checked="" aria-label="Show modern ES modules syntax"><code class="language-js mjs"><span class="hljs-keyword">import</span> { env } <span class="hljs-keyword">from</span> <span class="hljs-string">'process'</span>;

env.<span class="hljs-property">foo</span> = <span class="hljs-string">'bar'</span>;
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(env.<span class="hljs-property">foo</span>);</code><code class="language-js cjs"><span class="hljs-keyword">const</span> { env } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'process'</span>);

env.<span class="hljs-property">foo</span> = <span class="hljs-string">'bar'</span>;
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(env.<span class="hljs-property">foo</span>);</code></pre>
<p class="">在 <code>process.env</code> 上分配属性会将值隐式转换为字符串。
<strong>此行为已弃用。</strong> 当值不是字符串、数字或布尔值时，Node.js 的未来版本可能会抛出错误。</p>

<pre class="with-35-chars"><input class="js-flavor-selector" type="checkbox" checked="" aria-label="Show modern ES modules syntax"><code class="language-js mjs"><span class="hljs-keyword">import</span> { env } <span class="hljs-keyword">from</span> <span class="hljs-string">'process'</span>;

env.<span class="hljs-property">test</span> = <span class="hljs-literal">null</span>;
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(env.<span class="hljs-property">test</span>);
<span class="hljs-comment">// =&gt; 'null'</span>
env.<span class="hljs-property">test</span> = <span class="hljs-literal">undefined</span>;
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(env.<span class="hljs-property">test</span>);
<span class="hljs-comment">// =&gt; 'undefined'</span></code><code class="language-js cjs"><span class="hljs-keyword">const</span> { env } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'process'</span>);

env.<span class="hljs-property">test</span> = <span class="hljs-literal">null</span>;
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(env.<span class="hljs-property">test</span>);
<span class="hljs-comment">// =&gt; 'null'</span>
env.<span class="hljs-property">test</span> = <span class="hljs-literal">undefined</span>;
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(env.<span class="hljs-property">test</span>);
<span class="hljs-comment">// =&gt; 'undefined'</span></code></pre>
<p class="">使用 <code>delete</code> 从 <code>process.env</code> 中删除属性。</p>

<pre class="with-35-chars"><input class="js-flavor-selector" type="checkbox" checked="" aria-label="Show modern ES modules syntax"><code class="language-js mjs"><span class="hljs-keyword">import</span> { env } <span class="hljs-keyword">from</span> <span class="hljs-string">'process'</span>;

env.<span class="hljs-property">TEST</span> = <span class="hljs-number">1</span>;
<span class="hljs-keyword">delete</span> env.<span class="hljs-property">TEST</span>;
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(env.<span class="hljs-property">TEST</span>);
<span class="hljs-comment">// =&gt; undefined</span></code><code class="language-js cjs"><span class="hljs-keyword">const</span> { env } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'process'</span>);

env.<span class="hljs-property">TEST</span> = <span class="hljs-number">1</span>;
<span class="hljs-keyword">delete</span> env.<span class="hljs-property">TEST</span>;
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(env.<span class="hljs-property">TEST</span>);
<span class="hljs-comment">// =&gt; undefined</span></code></pre>
<p class="">在 Windows 操作系统上，环境变量不区分大小写。</p>

<pre class="with-35-chars"><input class="js-flavor-selector" type="checkbox" checked="" aria-label="Show modern ES modules syntax"><code class="language-js mjs"><span class="hljs-keyword">import</span> { env } <span class="hljs-keyword">from</span> <span class="hljs-string">'process'</span>;

env.<span class="hljs-property">TEST</span> = <span class="hljs-number">1</span>;
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(env.<span class="hljs-property">test</span>);
<span class="hljs-comment">// =&gt; 1</span></code><code class="language-js cjs"><span class="hljs-keyword">const</span> { env } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'process'</span>);

env.<span class="hljs-property">TEST</span> = <span class="hljs-number">1</span>;
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(env.<span class="hljs-property">test</span>);
<span class="hljs-comment">// =&gt; 1</span></code></pre>
<p class="">除非在创建 <a href="worker_threads.html#class-worker"><code>Worker</code></a> 实例时显式指定，否则每个 <a href="worker_threads.html#class-worker"><code>Worker</code></a> 线程都有自己的 <code>process.env</code> 副本，基于其父线程的 <code>process.env</code> 或指定为 <a href="worker_threads.html#class-worker"><code>Worker</code></a> 构造函数的 <code>env</code> 选项的任何内容。
对 <code>process.env</code> 的更改不会跨 <a href="worker_threads.html#class-worker"><code>Worker</code></a> 线程可见，只有主线程可以进行对操作系统或原生插件可见的更改。</p>
</section><section><h3><code>process.execArgv</code><span><a class="mark" href="#processexecargv" id="processexecargv">#</a></span><a aria-hidden="true" class="legacy" id="process_process_execargv"></a></h3><p class="tip_wrap" data-show_trans="1" data-item_id="#processexecargv">
                <a href="process/process_execargv.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>新增于: v0.7.7</span>
</div>
<ul class="">
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string[]&gt;</a></li>
</ul>
<p><code>process.execArgv</code> 属性返回 Node.js 进程启动时传入的一组特定于 Node.js 的命令行选项。
这些选项不会出现在 <a href="#processargv"><code>process.argv</code></a> 属性返回的数组中，也不包括 Node.js 可执行文件、脚本名称或脚本名称后面的任何选项。
这些选项可用于衍生与父进程具有相同执行环境的子进程。</p>
<pre class=""><code class="language-console"><span class="hljs-meta prompt_">$ </span><span class="language-bash">node --harmony script.js --version</span></code></pre>
<p class=""><code>process.execArgv</code> 的结果：</p>
<!-- eslint-disable semi -->
<pre class=""><code class="language-js">[<span class="hljs-string">'--harmony'</span>]</code></pre>
<p class=""><code>process.argv</code> 的结果：</p>
<!-- eslint-disable semi -->
<pre class=""><code class="language-js">[<span class="hljs-string">'/usr/local/bin/node'</span>, <span class="hljs-string">'script.js'</span>, <span class="hljs-string">'--version'</span>]</code></pre>
<p class="">有关具有此属性的工作线程的详细行为，请参阅 <a href="worker_threads.html#new-workerfilename-options"><code>Worker</code> 构造函数</a>。</p>
</section><section><h3><code>process.execPath</code><span><a class="mark" href="#processexecpath" id="processexecpath">#</a></span><a aria-hidden="true" class="legacy" id="process_process_execpath"></a></h3><p class="tip_wrap" data-show_trans="1" data-item_id="#processexecpath">
                <a href="process/process_execpath.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>新增于: v0.1.100</span>
</div>
<ul class="">
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a></li>
</ul>
<p><code>process.execPath</code> 属性返回启动 Node.js 进程的可执行文件的绝对路径名。
符号链接（如果有）会被解析。</p>
<!-- eslint-disable semi -->
<pre class=""><code class="language-js"><span class="hljs-string">'/usr/local/bin/node'</span></code></pre>
</section><section><h3><code>process.exit([code])</code><span><a class="mark" href="#processexitcode" id="processexitcode">#</a></span><a aria-hidden="true" class="legacy" id="process_process_exit_code"></a></h3><p class="tip_wrap" data-show_trans="1" data-item_id="#processexitcode">
                <a href="process/process_exit_code.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>新增于: v0.1.13</span>
</div>
<ul class="">
<li><code>code</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a> 退出码。 <strong>默认值:</strong> <code>0</code>。</li>
</ul>
<p><code>process.exit()</code> 方法指示 Node.js 以 <code>code</code> 的退出状态同步终止进程。
如果省略 <code>code</code>，则退出将使用“成功”代码 <code>0</code> 或 <code>process.exitCode</code> 的值（如果已设置）。
直到所有 <a href="#event-exit"><code>'exit'</code></a> 事件监听器都被调用，Node.js 才会终止。</p>
<p class="">以“失败”代码退出：</p>

<pre class="with-36-chars"><input class="js-flavor-selector" type="checkbox" checked="" aria-label="Show modern ES modules syntax"><code class="language-js mjs"><span class="hljs-keyword">import</span> { exit } <span class="hljs-keyword">from</span> <span class="hljs-string">'process'</span>;

<span class="hljs-title function_">exit</span>(<span class="hljs-number">1</span>);</code><code class="language-js cjs"><span class="hljs-keyword">const</span> { exit } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'process'</span>);

<span class="hljs-title function_">exit</span>(<span class="hljs-number">1</span>);</code></pre>
<p class="">执行 Node.js 的 shell 应该看到退出码为 <code>1</code>。</p>
<p class="">调用 <code>process.exit()</code> 将强制进程尽快退出，即使仍有未完全完成的异步操作挂起，包括对 <code>process.stdout</code> 和 <code>process.stderr</code> 的 I/O 操作。</p>
<p class="">在大多数情况下，实际上没有必要显式调用 <code>process.exit()</code>。
如果事件循环中没有其他待处理的工作，则 Node.js 进程将自行退出。
可以设置 <code>process.exitCode</code> 属性来告诉进程在进程正常退出时使用哪个退出码。</p>
<p class="">例如，以下示例说明了 <code>process.exit()</code> 方法的误用，其可能导致打印到标准输出的数据被截断和丢失：</p>

<pre class="with-36-chars"><input class="js-flavor-selector" type="checkbox" checked="" aria-label="Show modern ES modules syntax"><code class="language-js mjs"><span class="hljs-keyword">import</span> { exit } <span class="hljs-keyword">from</span> <span class="hljs-string">'process'</span>;

<span class="hljs-comment">// 这是不该做的示例：</span>
<span class="hljs-keyword">if</span> (<span class="hljs-title function_">someConditionNotMet</span>()) {
  <span class="hljs-title function_">printUsageToStdout</span>();
  <span class="hljs-title function_">exit</span>(<span class="hljs-number">1</span>);
}</code><code class="language-js cjs"><span class="hljs-keyword">const</span> { exit } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'process'</span>);

<span class="hljs-comment">// 这是不该做的示例：</span>
<span class="hljs-keyword">if</span> (<span class="hljs-title function_">someConditionNotMet</span>()) {
  <span class="hljs-title function_">printUsageToStdout</span>();
  <span class="hljs-title function_">exit</span>(<span class="hljs-number">1</span>);
}</code></pre>
<p class="">这是有问题的原因是因为在 Node.js 中写入 <code>process.stdout</code> 有时是异步的，并且可能发生在 Node.js 事件循环的多个滴答上。
但是，调用 <code>process.exit()</code> 会强制进程在执行对 <code>stdout</code> 的其他写入之前退出。</p>
<p class="">代码应该设置 <code>process.exitCode</code> 并通过避免为事件循环安排任何额外工作来允许进程自然退出，而不是直接调用 <code>process.exit()</code>：</p>

<pre class="with-35-chars"><input class="js-flavor-selector" type="checkbox" checked="" aria-label="Show modern ES modules syntax"><code class="language-js mjs"><span class="hljs-keyword">import</span> process <span class="hljs-keyword">from</span> <span class="hljs-string">'process'</span>;

<span class="hljs-comment">// 如何正确设置退出码，同时让进程正常退出。</span>
<span class="hljs-keyword">if</span> (<span class="hljs-title function_">someConditionNotMet</span>()) {
  <span class="hljs-title function_">printUsageToStdout</span>();
  process.<span class="hljs-property">exitCode</span> = <span class="hljs-number">1</span>;
}</code><code class="language-js cjs"><span class="hljs-keyword">const</span> process = <span class="hljs-built_in">require</span>(<span class="hljs-string">'process'</span>);

<span class="hljs-comment">// 如何正确设置退出码，同时让进程正常退出。</span>
<span class="hljs-keyword">if</span> (<span class="hljs-title function_">someConditionNotMet</span>()) {
  <span class="hljs-title function_">printUsageToStdout</span>();
  process.<span class="hljs-property">exitCode</span> = <span class="hljs-number">1</span>;
}</code></pre>
<p class="">如果由于错误情况需要终止 Node.js 进程，则抛出未捕获的错误并允许进程相应地终止比调用 <code>process.exit()</code> 更安全。</p>
<p class="">在 <a href="worker_threads.html#class-worker"><code>Worker</code></a> 线程中，该函数停止当前线程而不是当前进程。</p>
</section><section><h3><code>process.exitCode</code><span><a class="mark" href="#processexitcode_1" id="processexitcode_1">#</a></span><a aria-hidden="true" class="legacy" id="process_process_exitcode"></a></h3><p class="tip_wrap" data-show_trans="1" data-item_id="#processexitcode_1">
                <a href="process/process_exitcode.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>新增于: v0.11.8</span>
</div>
<ul class="">
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a></li>
</ul>
<p>当进程正常退出或通过 <a href="#processexitcode"><code>process.exit()</code></a> 退出而不指定代码时，将作为进程退出码的数字。</p>
<p class="">将代码指定为 <a href="#processexitcode"><code>process.exit(code)</code></a> 将覆盖 <code>process.exitCode</code> 的任何先前设置。</p>
</section><section><h3><code>process.getActiveResourcesInfo()</code><span><a class="mark" href="#processgetactiveresourcesinfo" id="processgetactiveresourcesinfo">#</a></span><a aria-hidden="true" class="legacy" id="process_process_getactiveresourcesinfo"></a></h3><p class="tip_wrap" data-show_trans="1" data-item_id="#processgetactiveresourcesinfo">
                <a href="process/process_getactiveresourcesinfo.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>新增于: v16.14.0</span>
</div>
<p></p><div class="api_stability api_stability_1"><a href="documentation.html#stability-index">稳定性: 1</a> - 实验</div><p></p>
<ul class="">
<li>返回: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string[]&gt;</a></li>
</ul>
<p><code>process.getActiveResourcesInfo()</code> 方法返回字符串数组，其中包含当前保持事件循环活动的活动资源的类型。</p>

<pre class="with-54-chars"><input class="js-flavor-selector" type="checkbox" checked="" aria-label="Show modern ES modules syntax"><code class="language-js mjs"><span class="hljs-keyword">import</span> { getActiveResourcesInfo } <span class="hljs-keyword">from</span> <span class="hljs-string">'process'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-built_in">setTimeout</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'timers'</span>;

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Before:'</span>, <span class="hljs-title function_">getActiveResourcesInfo</span>());
<span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {}, <span class="hljs-number">1000</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'After:'</span>, <span class="hljs-title function_">getActiveResourcesInfo</span>());
<span class="hljs-comment">// 打印:</span>
<span class="hljs-comment">//   Before: [ 'CloseReq', 'TTYWrap', 'TTYWrap', 'TTYWrap' ]</span>
<span class="hljs-comment">//   After: [ 'CloseReq', 'TTYWrap', 'TTYWrap', 'TTYWrap', 'Timeout' ]</span></code><code class="language-js cjs"><span class="hljs-keyword">const</span> { getActiveResourcesInfo } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'process'</span>);
<span class="hljs-keyword">const</span> { <span class="hljs-built_in">setTimeout</span> } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'timers'</span>);

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Before:'</span>, <span class="hljs-title function_">getActiveResourcesInfo</span>());
<span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {}, <span class="hljs-number">1000</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'After:'</span>, <span class="hljs-title function_">getActiveResourcesInfo</span>());
<span class="hljs-comment">// 打印:</span>
<span class="hljs-comment">//   Before: [ 'TTYWrap', 'TTYWrap', 'TTYWrap' ]</span>
<span class="hljs-comment">//   After: [ 'TTYWrap', 'TTYWrap', 'TTYWrap', 'Timeout' ]</span></code></pre>
</section><section><h3><code>process.getegid()</code><span><a class="mark" href="#processgetegid" id="processgetegid">#</a></span><a aria-hidden="true" class="legacy" id="process_process_getegid"></a></h3><p class="tip_wrap" data-show_trans="1" data-item_id="#processgetegid">
                <a href="process/process_getegid.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>新增于: v2.0.0</span>
</div>
<p><code>process.getegid()</code> 方法返回 Node.js 进程的数字有效群组标识。
（见 <a href="http://man7.org/linux/man-pages/man2/getegid.2.html" rel="nofollow"><code>getegid(2)</code></a>。）</p>

<pre class="with-35-chars"><input class="js-flavor-selector" type="checkbox" checked="" aria-label="Show modern ES modules syntax"><code class="language-js mjs"><span class="hljs-keyword">import</span> process <span class="hljs-keyword">from</span> <span class="hljs-string">'process'</span>;

<span class="hljs-keyword">if</span> (process.<span class="hljs-property">getegid</span>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Current gid: <span class="hljs-subst">${process.getegid()}</span>`</span>);
}</code><code class="language-js cjs"><span class="hljs-keyword">const</span> process = <span class="hljs-built_in">require</span>(<span class="hljs-string">'process'</span>);

<span class="hljs-keyword">if</span> (process.<span class="hljs-property">getegid</span>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Current gid: <span class="hljs-subst">${process.getegid()}</span>`</span>);
}</code></pre>
<p class="">此功能仅适用于 POSIX 平台（即不适用于 Windows 或安卓）。</p>
</section><section><h3><code>process.geteuid()</code><span><a class="mark" href="#processgeteuid" id="processgeteuid">#</a></span><a aria-hidden="true" class="legacy" id="process_process_geteuid"></a></h3><p class="tip_wrap" data-show_trans="1" data-item_id="#processgeteuid">
                <a href="process/process_geteuid.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>新增于: v2.0.0</span>
</div>
<ul class="">
<li>返回: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" rel="nofollow" class="type">&lt;Object&gt;</a></li>
</ul>
<p><code>process.geteuid()</code> 方法返回进程的数字有效用户身份。
（见 <a href="http://man7.org/linux/man-pages/man2/geteuid.2.html" rel="nofollow"><code>geteuid(2)</code></a>。）</p>

<pre class="with-35-chars"><input class="js-flavor-selector" type="checkbox" checked="" aria-label="Show modern ES modules syntax"><code class="language-js mjs"><span class="hljs-keyword">import</span> process <span class="hljs-keyword">from</span> <span class="hljs-string">'process'</span>;

<span class="hljs-keyword">if</span> (process.<span class="hljs-property">geteuid</span>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Current uid: <span class="hljs-subst">${process.geteuid()}</span>`</span>);
}</code><code class="language-js cjs"><span class="hljs-keyword">const</span> process = <span class="hljs-built_in">require</span>(<span class="hljs-string">'process'</span>);

<span class="hljs-keyword">if</span> (process.<span class="hljs-property">geteuid</span>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Current uid: <span class="hljs-subst">${process.geteuid()}</span>`</span>);
}</code></pre>
<p class="">此功能仅适用于 POSIX 平台（即不适用于 Windows 或安卓）。</p>
</section><section><h3><code>process.getgid()</code><span><a class="mark" href="#processgetgid" id="processgetgid">#</a></span><a aria-hidden="true" class="legacy" id="process_process_getgid"></a></h3><p class="tip_wrap" data-show_trans="1" data-item_id="#processgetgid">
                <a href="process/process_getgid.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>新增于: v0.1.31</span>
</div>
<ul class="">
<li>返回: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" rel="nofollow" class="type">&lt;Object&gt;</a></li>
</ul>
<p><code>process.getgid()</code> 方法返回进程的数字群组标识。
（见 <a href="http://man7.org/linux/man-pages/man2/getgid.2.html" rel="nofollow"><code>getgid(2)</code></a>。）</p>

<pre class="with-35-chars"><input class="js-flavor-selector" type="checkbox" checked="" aria-label="Show modern ES modules syntax"><code class="language-js mjs"><span class="hljs-keyword">import</span> process <span class="hljs-keyword">from</span> <span class="hljs-string">'process'</span>;

<span class="hljs-keyword">if</span> (process.<span class="hljs-property">getgid</span>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Current gid: <span class="hljs-subst">${process.getgid()}</span>`</span>);
}</code><code class="language-js cjs"><span class="hljs-keyword">const</span> process = <span class="hljs-built_in">require</span>(<span class="hljs-string">'process'</span>);

<span class="hljs-keyword">if</span> (process.<span class="hljs-property">getgid</span>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Current gid: <span class="hljs-subst">${process.getgid()}</span>`</span>);
}</code></pre>
<p class="">此功能仅适用于 POSIX 平台（即不适用于 Windows 或安卓）。</p>
</section><section><h3><code>process.getgroups()</code><span><a class="mark" href="#processgetgroups" id="processgetgroups">#</a></span><a aria-hidden="true" class="legacy" id="process_process_getgroups"></a></h3><p class="tip_wrap" data-show_trans="1" data-item_id="#processgetgroups">
                <a href="process/process_getgroups.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>新增于: v0.9.4</span>
</div>
<ul class="">
<li>返回: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer[]&gt;</a></li>
</ul>
<p><code>process.getgroups()</code> 方法返回带有补充组 ID 的数组。
POSIX 不指定是否包含有效组 ID，但 Node.js 确保它始终包含。</p>

<pre class="with-35-chars"><input class="js-flavor-selector" type="checkbox" checked="" aria-label="Show modern ES modules syntax"><code class="language-js mjs"><span class="hljs-keyword">import</span> process <span class="hljs-keyword">from</span> <span class="hljs-string">'process'</span>;

<span class="hljs-keyword">if</span> (process.<span class="hljs-property">getgroups</span>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(process.<span class="hljs-title function_">getgroups</span>()); <span class="hljs-comment">// [ 16, 21, 297 ]</span>
}</code><code class="language-js cjs"><span class="hljs-keyword">const</span> process = <span class="hljs-built_in">require</span>(<span class="hljs-string">'process'</span>);

<span class="hljs-keyword">if</span> (process.<span class="hljs-property">getgroups</span>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(process.<span class="hljs-title function_">getgroups</span>()); <span class="hljs-comment">// [ 16, 21, 297 ]</span>
}</code></pre>
<p class="">此功能仅适用于 POSIX 平台（即不适用于 Windows 或安卓）。</p>
</section><section><h3><code>process.getuid()</code><span><a class="mark" href="#processgetuid" id="processgetuid">#</a></span><a aria-hidden="true" class="legacy" id="process_process_getuid"></a></h3><p class="tip_wrap" data-show_trans="1" data-item_id="#processgetuid">
                <a href="process/process_getuid.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>新增于: v0.1.28</span>
</div>
<ul class="">
<li>返回: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a></li>
</ul>
<p><code>process.getuid()</code> 方法返回进程的数字用户标识。
（见 <a href="http://man7.org/linux/man-pages/man2/getuid.2.html" rel="nofollow"><code>getuid(2)</code></a>。）</p>

<pre class="with-35-chars"><input class="js-flavor-selector" type="checkbox" checked="" aria-label="Show modern ES modules syntax"><code class="language-js mjs"><span class="hljs-keyword">import</span> process <span class="hljs-keyword">from</span> <span class="hljs-string">'process'</span>;

<span class="hljs-keyword">if</span> (process.<span class="hljs-property">getuid</span>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Current uid: <span class="hljs-subst">${process.getuid()}</span>`</span>);
}</code><code class="language-js cjs"><span class="hljs-keyword">const</span> process = <span class="hljs-built_in">require</span>(<span class="hljs-string">'process'</span>);

<span class="hljs-keyword">if</span> (process.<span class="hljs-property">getuid</span>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Current uid: <span class="hljs-subst">${process.getuid()}</span>`</span>);
}</code></pre>
<p class="">此功能仅适用于 POSIX 平台（即不适用于 Windows 或安卓）。</p>
</section><section><h3><code>process.hasUncaughtExceptionCaptureCallback()</code><span><a class="mark" href="#processhasuncaughtexceptioncapturecallback" id="processhasuncaughtexceptioncapturecallback">#</a></span><a aria-hidden="true" class="legacy" id="process_process_hasuncaughtexceptioncapturecallback"></a></h3><p class="tip_wrap" data-show_trans="1" data-item_id="#processhasuncaughtexceptioncapturecallback">
                <a href="process/process_hasuncaughtexceptioncapturecallback.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>新增于: v9.3.0</span>
</div>
<ul class="">
<li>返回: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" rel="nofollow" class="type">&lt;boolean&gt;</a></li>
</ul>
<p>指示是否已使用 <a href="#processsetuncaughtexceptioncapturecallbackfn"><code>process.setUncaughtExceptionCaptureCallback()</code></a> 设置回调。</p>
</section><section><h3><code>process.hrtime([time])</code><span><a class="mark" href="#processhrtimetime" id="processhrtimetime">#</a></span><a aria-hidden="true" class="legacy" id="process_process_hrtime_time"></a></h3><p class="tip_wrap" data-show_trans="1" data-item_id="#processhrtimetime">
                <a href="process/process_hrtime_time.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>新增于: v0.7.6</span>
</div>
<p></p><div class="api_stability api_stability_3"><a href="documentation.html#stability-index">稳定性: 3</a> - 旧版. 改为使用 <a href="#processhrtimebigint"><code>process.hrtime.bigint()</code></a> 。</div><p></p>
<ul class="">
<li><code>time</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer[]&gt;</a> 先前调用 <code>process.hrtime()</code> 的结果</li>
<li>返回: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer[]&gt;</a></li>
</ul>
<p>这是 <a href="#processhrtimebigint"><code>process.hrtime.bigint()</code></a> 在 JavaScript 中引入 <code>bigint</code> 之前的旧版本。</p>
<p class=""><code>process.hrtime()</code> 方法在 <code>[seconds, nanoseconds]</code> 元组 <code>Array</code> 中返回当前高解析度实时，其中 <code>nanoseconds</code> 是无法以秒精度表示的实时剩余部分。</p>
<p class=""><code>time</code> 是可选参数，它必须是先前 <code>process.hrtime()</code> 调用 diff 与当前时间的结果。
如果传入的参数不是元组 <code>Array</code>，则会抛出 <code>TypeError</code>。
传入用户定义的数组而不是先前调用 <code>process.hrtime()</code> 的结果将导致未定义的行为。</p>
<p class="">这些时间相对于过去的任意时间，与一天中的时间无关，因此不受时钟漂移的影响。
主要用途是测量间隔之间的性能：</p>

<pre class="with-38-chars"><input class="js-flavor-selector" type="checkbox" checked="" aria-label="Show modern ES modules syntax"><code class="language-js mjs"><span class="hljs-keyword">import</span> { hrtime } <span class="hljs-keyword">from</span> <span class="hljs-string">'process'</span>;

<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">NS_PER_SEC</span> = <span class="hljs-number">1e9</span>;
<span class="hljs-keyword">const</span> time = <span class="hljs-title function_">hrtime</span>();
<span class="hljs-comment">// [ 1800216, 25 ]</span>

<span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">const</span> diff = <span class="hljs-title function_">hrtime</span>(time);
  <span class="hljs-comment">// [ 1, 552 ]</span>

  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Benchmark took <span class="hljs-subst">${diff[<span class="hljs-number">0</span>] * NS_PER_SEC + diff[<span class="hljs-number">1</span>]}</span> nanoseconds`</span>);
  <span class="hljs-comment">// 基准测试耗时 1000000552 纳秒</span>
}, <span class="hljs-number">1000</span>);</code><code class="language-js cjs"><span class="hljs-keyword">const</span> { hrtime } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'process'</span>);

<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">NS_PER_SEC</span> = <span class="hljs-number">1e9</span>;
<span class="hljs-keyword">const</span> time = <span class="hljs-title function_">hrtime</span>();
<span class="hljs-comment">// [ 1800216, 25 ]</span>

<span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">const</span> diff = <span class="hljs-title function_">hrtime</span>(time);
  <span class="hljs-comment">// [ 1, 552 ]</span>

  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Benchmark took <span class="hljs-subst">${diff[<span class="hljs-number">0</span>] * NS_PER_SEC + diff[<span class="hljs-number">1</span>]}</span> nanoseconds`</span>);
  <span class="hljs-comment">// 基准测试耗时 1000000552 纳秒</span>
}, <span class="hljs-number">1000</span>);</code></pre>
</section><section><h3><code>process.hrtime.bigint()</code><span><a class="mark" href="#processhrtimebigint" id="processhrtimebigint">#</a></span><a aria-hidden="true" class="legacy" id="process_process_hrtime_bigint"></a></h3><p class="tip_wrap" data-show_trans="1" data-item_id="#processhrtimebigint">
                <a href="process/process_hrtime_bigint.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>新增于: v10.7.0</span>
</div>
<ul class="">
<li>返回: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/BigInt" rel="nofollow" class="type">&lt;bigint&gt;</a></li>
</ul>
<p><a href="#processhrtimetime"><code>process.hrtime()</code></a> 方法的 <code>bigint</code> 版本以纳秒为单位返回当前高解析度实时作为 <code>bigint</code>。</p>
<p class="">与 <a href="#processhrtimetime"><code>process.hrtime()</code></a> 不同，它不支持额外的 <code>time</code> 参数，因为可以直接通过减去两个 <code>bigint</code> 来计算差异。</p>

<pre class="with-38-chars"><input class="js-flavor-selector" type="checkbox" checked="" aria-label="Show modern ES modules syntax"><code class="language-js mjs"><span class="hljs-keyword">import</span> { hrtime } <span class="hljs-keyword">from</span> <span class="hljs-string">'process'</span>;

<span class="hljs-keyword">const</span> start = hrtime.<span class="hljs-title function_">bigint</span>();
<span class="hljs-comment">// 191051479007711n</span>

<span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">const</span> end = hrtime.<span class="hljs-title function_">bigint</span>();
  <span class="hljs-comment">// 191052633396993n</span>

  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Benchmark took <span class="hljs-subst">${end - start}</span> nanoseconds`</span>);
  <span class="hljs-comment">// 基准测试耗时 1154389282 纳秒</span>
}, <span class="hljs-number">1000</span>);</code><code class="language-js cjs"><span class="hljs-keyword">const</span> { hrtime } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'process'</span>);

<span class="hljs-keyword">const</span> start = hrtime.<span class="hljs-title function_">bigint</span>();
<span class="hljs-comment">// 191051479007711n</span>

<span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">const</span> end = hrtime.<span class="hljs-title function_">bigint</span>();
  <span class="hljs-comment">// 191052633396993n</span>

  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Benchmark took <span class="hljs-subst">${end - start}</span> nanoseconds`</span>);
  <span class="hljs-comment">// 基准测试耗时 1154389282 纳秒</span>
}, <span class="hljs-number">1000</span>);</code></pre>
</section><section><h3><code>process.initgroups(user, extraGroup)</code><span><a class="mark" href="#processinitgroupsuser-extragroup" id="processinitgroupsuser-extragroup">#</a></span><a aria-hidden="true" class="legacy" id="process_process_initgroups_user_extragroup"></a></h3><p class="tip_wrap" data-show_trans="1" data-item_id="#processinitgroupsuser-extragroup">
                <a href="process/process_initgroups_user_extragroup.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>新增于: v0.9.4</span>
</div>
<ul class="">
<li><code>user</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;number&gt;</a> 用户名或数字标识符。</li>
<li><code>extraGroup</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;number&gt;</a> 群组名或数字标识符。</li>
</ul>
<p><code>process.initgroups()</code> 方法读取 <code>/etc/group</code> 文件并使用用户所属的所有组初始化组访问列表。
这是一个特权操作，要求 Node.js 进程具有 <code>root</code> 访问权限或 <code>CAP_SETGID</code> 能力。</p>
<p class="">删除权限时要小心：</p>

<pre class="with-61-chars"><input class="js-flavor-selector" type="checkbox" checked="" aria-label="Show modern ES modules syntax"><code class="language-js mjs"><span class="hljs-keyword">import</span> { getgroups, initgroups, setgid } <span class="hljs-keyword">from</span> <span class="hljs-string">'process'</span>;

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">getgroups</span>());         <span class="hljs-comment">// [ 0 ]</span>
<span class="hljs-title function_">initgroups</span>(<span class="hljs-string">'nodeuser'</span>, <span class="hljs-number">1000</span>);     <span class="hljs-comment">// 切换用户</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">getgroups</span>());         <span class="hljs-comment">// [ 27, 30, 46, 1000, 0 ]</span>
<span class="hljs-title function_">setgid</span>(<span class="hljs-number">1000</span>);                     <span class="hljs-comment">// 删除 root 的 gid</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">getgroups</span>());         <span class="hljs-comment">// [ 27, 30, 46, 1000 ]</span></code><code class="language-js cjs"><span class="hljs-keyword">const</span> { getgroups, initgroups, setgid } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'process'</span>);

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">getgroups</span>());         <span class="hljs-comment">// [ 0 ]</span>
<span class="hljs-title function_">initgroups</span>(<span class="hljs-string">'nodeuser'</span>, <span class="hljs-number">1000</span>);     <span class="hljs-comment">// 切换用户</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">getgroups</span>());         <span class="hljs-comment">// [ 27, 30, 46, 1000, 0 ]</span>
<span class="hljs-title function_">setgid</span>(<span class="hljs-number">1000</span>);                     <span class="hljs-comment">// 删除 root 的 gid</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">getgroups</span>());         <span class="hljs-comment">// [ 27, 30, 46, 1000 ]</span></code></pre>
<p class="">此功能仅适用于 POSIX 平台（即不适用于 Windows 或安卓）。
此特性在 <a href="worker_threads.html#class-worker"><code>Worker</code></a> 线程中不可用。</p>
</section><section><h3><code>process.kill(pid[, signal])</code><span><a class="mark" href="#processkillpid-signal" id="processkillpid-signal">#</a></span><a aria-hidden="true" class="legacy" id="process_process_kill_pid_signal"></a></h3><p class="tip_wrap" data-show_trans="1" data-item_id="#processkillpid-signal">
                <a href="process/process_kill_pid_signal.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>新增于: v0.0.6</span>
</div>
<ul class="">
<li><code>pid</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;number&gt;</a> 进程标识</li>
<li><code>signal</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;number&gt;</a> 要发送的信号，可以是字符串或数字。
<strong>默认值:</strong> <code>'SIGTERM'</code>。</li>
</ul>
<p><code>process.kill()</code> 方法将 <code>signal</code> 发送到由 <code>pid</code> 标识的进程。</p>
<p class="">信号名称是字符串，例如 <code>'SIGINT'</code> 或 <code>'SIGHUP'</code>。
有关详细信息，请参阅<a href="#signal-events">信号事件</a>和 <a href="http://man7.org/linux/man-pages/man2/kill.2.html" rel="nofollow"><code>kill(2)</code></a>。</p>
<p class="">如果目标 <code>pid</code> 不存在，则此方法将抛出错误。
作为特殊情况，可以使用信号 <code>0</code> 来测试进程是否存在。
如果使用 <code>pid</code> 来杀死进程组，则 Windows 平台将抛出错误。</p>
<p class="">尽管此函数的名字是 <code>process.kill()</code>，但它实际上只是信号发送者，就像 <code>kill</code> 系统调用。
发送的信号可能会做其他事情而不是杀死目标进程。</p>

<pre class="with-40-chars"><input class="js-flavor-selector" type="checkbox" checked="" aria-label="Show modern ES modules syntax"><code class="language-js mjs"><span class="hljs-keyword">import</span> process, { kill } <span class="hljs-keyword">from</span> <span class="hljs-string">'process'</span>;

process.<span class="hljs-title function_">on</span>(<span class="hljs-string">'SIGHUP'</span>, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Got SIGHUP signal.'</span>);
});

<span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Exiting.'</span>);
  process.<span class="hljs-title function_">exit</span>(<span class="hljs-number">0</span>);
}, <span class="hljs-number">100</span>);

<span class="hljs-title function_">kill</span>(process.<span class="hljs-property">pid</span>, <span class="hljs-string">'SIGHUP'</span>);</code><code class="language-js cjs"><span class="hljs-keyword">const</span> process = <span class="hljs-built_in">require</span>(<span class="hljs-string">'process'</span>);

process.<span class="hljs-title function_">on</span>(<span class="hljs-string">'SIGHUP'</span>, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Got SIGHUP signal.'</span>);
});

<span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Exiting.'</span>);
  process.<span class="hljs-title function_">exit</span>(<span class="hljs-number">0</span>);
}, <span class="hljs-number">100</span>);

process.<span class="hljs-title function_">kill</span>(process.<span class="hljs-property">pid</span>, <span class="hljs-string">'SIGHUP'</span>);</code></pre>
<p class="">当 Node.js 进程收到 <code>SIGUSR1</code> 时，Node.js 将启动调试器。
参见<a href="#signal-events">信号事件</a>。</p>
</section><section><h3><code>process.mainModule</code><span><a class="mark" href="#processmainmodule" id="processmainmodule">#</a></span><a aria-hidden="true" class="legacy" id="process_process_mainmodule"></a></h3><p class="tip_wrap" data-show_trans="1" data-item_id="#processmainmodule">
                <a href="process/process_mainmodule.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>新增于: v0.1.17</span><span>弃用于: v14.0.0</span>
</div>
<p></p><div class="api_stability api_stability_0"><a href="documentation.html#stability-index">稳定性: 0</a> - 弃用: 改为使用 <a href="modules.html#accessing-the-main-module"><code>require.main</code></a> 。</div><p></p>
<ul class="">
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" rel="nofollow" class="type">&lt;Object&gt;</a></li>
</ul>
<p><code>process.mainModule</code> 属性提供了另一种检索 <a href="modules.html#accessing-the-main-module"><code>require.main</code></a> 的方法。
不同之处在于，如果主模块在运行时发生更改，则 <a href="modules.html#accessing-the-main-module"><code>require.main</code></a> 可能仍会引用更改发生前所需模块中的原始主模块。
通常，可以安全地假设两者指的是同一个模块。</p>
<p class="">与 <a href="modules.html#accessing-the-main-module"><code>require.main</code></a> 一样，如果没有入口脚本，则 <code>process.mainModule</code> 将是 <code>undefined</code>。</p>
</section><section><h3><code>process.memoryUsage()</code><span><a class="mark" href="#processmemoryusage" id="processmemoryusage">#</a></span><a aria-hidden="true" class="legacy" id="process_process_memoryusage"></a></h3><p class="tip_wrap" data-show_trans="1" data-item_id="#processmemoryusage">
                <a href="process/process_memoryusage.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<details class="changelog"><summary>版本历史</summary>
<table>
<tbody><tr><th>版本</th><th>变更</th></tr>
<tr><td>v13.9.0, v12.17.0</td>
<td><p>将 <code>arrayBuffers</code> 添加到返回的对象中。</p></td></tr>
<tr><td>v7.2.0</td>
<td><p>将 <code>external</code> 添加到返回的对象中。</p></td></tr>
<tr><td>v0.1.16</td>
<td><p><span>新增于: v0.1.16</span></p></td></tr>
</tbody></table>
</details>
</div>
<ul class="">
<li>返回: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" rel="nofollow" class="type">&lt;Object&gt;</a>
<ul>
<li><code>rss</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a></li>
<li><code>heapTotal</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a></li>
<li><code>heapUsed</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a></li>
<li><code>external</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a></li>
<li><code>arrayBuffers</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a></li>
</ul>
</li>
</ul>
<p>返回描述 Node.js 进程的内存使用量（以字节为单位）的对象。</p>

<pre class="with-43-chars"><input class="js-flavor-selector" type="checkbox" checked="" aria-label="Show modern ES modules syntax"><code class="language-js mjs"><span class="hljs-keyword">import</span> { memoryUsage } <span class="hljs-keyword">from</span> <span class="hljs-string">'process'</span>;

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">memoryUsage</span>());
<span class="hljs-comment">// 打印:</span>
<span class="hljs-comment">// {</span>
<span class="hljs-comment">//  rss: 4935680,</span>
<span class="hljs-comment">//  heapTotal: 1826816,</span>
<span class="hljs-comment">//  heapUsed: 650472,</span>
<span class="hljs-comment">//  external: 49879,</span>
<span class="hljs-comment">//  arrayBuffers: 9386</span>
<span class="hljs-comment">// }</span></code><code class="language-js cjs"><span class="hljs-keyword">const</span> { memoryUsage } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'process'</span>);

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">memoryUsage</span>());
<span class="hljs-comment">// 打印:</span>
<span class="hljs-comment">// {</span>
<span class="hljs-comment">//  rss: 4935680,</span>
<span class="hljs-comment">//  heapTotal: 1826816,</span>
<span class="hljs-comment">//  heapUsed: 650472,</span>
<span class="hljs-comment">//  external: 49879,</span>
<span class="hljs-comment">//  arrayBuffers: 9386</span>
<span class="hljs-comment">// }</span></code></pre>
<ul class="">
<li><code>heapTotal</code> 和 <code>heapUsed</code> 指的是 V8 的内存使用量。</li>
<li><code>external</code> 指的是绑定到 V8 管理的 JavaScript 对象的 C++ 对象的内存使用量。</li>
<li><code>rss</code>，常驻集大小，是进程在主内存设备（即总分配内存的子集）中占用的空间量，包括所有 C++ 和 JavaScript 对象和代码。</li>
<li><code>arrayBuffers</code> 是指为 <code>ArrayBuffer</code> 和 <code>SharedArrayBuffer</code> 分配的内存，包括所有 Node.js <a href="buffer.html"><code>Buffer</code></a>。
这也包含在 <code>external</code> 值中。
当 Node.js 被用作嵌入式库时，此值可能为 <code>0</code>，因为在这种情况下可能不会跟踪 <code>ArrayBuffer</code> 的分配。</li>
</ul>
<p class="">当使用 <a href="worker_threads.html#class-worker"><code>Worker</code></a> 线程时，则 <code>rss</code> 将是对整个进程都有效的值，而其他字段仅涉及当前线程。</p>
<p class=""><code>process.memoryUsage()</code> 方法遍历每个页面以收集有关内存使用情况的信息，这可能会根据程序内存分配而变慢。</p>
</section><section><h3><code>process.memoryUsage.rss()</code><span><a class="mark" href="#processmemoryusagerss" id="processmemoryusagerss">#</a></span><a aria-hidden="true" class="legacy" id="process_process_memoryusage_rss"></a></h3><p class="tip_wrap" data-show_trans="1" data-item_id="#processmemoryusagerss">
                <a href="process/process_memoryusage_rss.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>新增于: v15.6.0</span>
</div>
<ul class="">
<li>返回: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a></li>
</ul>
<p><code>process.memoryUsage.rss()</code> 方法返回以字节为单位表示驻留集大小的整数 (RSS)。</p>
<p class="">驻留集大小是进程在主内存设备（即总分配内存的子集）中占用的空间量，包括所有 C++ 和 JavaScript 对象和代码。</p>
<p class="">这与 <code>process.memoryUsage()</code> 提供的 <code>rss</code> 属性值相同，但 <code>process.memoryUsage.rss()</code> 更快。</p>

<pre class="with-38-chars"><input class="js-flavor-selector" type="checkbox" checked="" aria-label="Show modern ES modules syntax"><code class="language-js mjs"><span class="hljs-keyword">import</span> { memoryUsage } <span class="hljs-keyword">from</span> <span class="hljs-string">'process'</span>;

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(memoryUsage.<span class="hljs-title function_">rss</span>());
<span class="hljs-comment">// 35655680</span></code><code class="language-js cjs"><span class="hljs-keyword">const</span> { rss } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'process'</span>);

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(memoryUsage.<span class="hljs-title function_">rss</span>());
<span class="hljs-comment">// 35655680</span></code></pre>
</section><section><h3><code>process.nextTick(callback[, ...args])</code><span><a class="mark" href="#processnexttickcallback-args" id="processnexttickcallback-args">#</a></span><a aria-hidden="true" class="legacy" id="process_process_nexttick_callback_args"></a></h3><p class="tip_wrap" data-show_trans="1" data-item_id="#processnexttickcallback-args">
                <a href="process/process_nexttick_callback_args.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<details class="changelog"><summary>版本历史</summary>
<table>
<tbody><tr><th>版本</th><th>变更</th></tr>
<tr><td>v1.8.1</td>
<td><p>现在支持 <code>callback</code> 之后的额外参数。</p></td></tr>
<tr><td>v0.1.26</td>
<td><p><span>新增于: v0.1.26</span></p></td></tr>
</tbody></table>
</details>
</div>
<ul class="">
<li><code>callback</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" rel="nofollow" class="type">&lt;Function&gt;</a></li>
<li><code>...args</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Data_types" rel="nofollow" class="type">&lt;any&gt;</a> 当调用 <code>callback</code> 时要传入的额外参数</li>
</ul>
<p><code>process.nextTick()</code> 将 <code>callback</code> 添加到"下一个滴答队列"。
在 JavaScript 堆栈上的当前操作运行完成之后，且在允许事件循环继续之前，此队列将被完全排空。
如果递归地调用 <code>process.nextTick()</code>，则可能会创建无限的循环。
有关更多背景信息，请参阅<a href="https://nodejs.org/en/docs/guides/event-loop-timers-and-nexttick/#process-nexttick" rel="nofollow">事件循环</a>指南。</p>

<pre class="with-40-chars"><input class="js-flavor-selector" type="checkbox" checked="" aria-label="Show modern ES modules syntax"><code class="language-js mjs"><span class="hljs-keyword">import</span> { nextTick } <span class="hljs-keyword">from</span> <span class="hljs-string">'process'</span>;

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'start'</span>);
<span class="hljs-title function_">nextTick</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'nextTick callback'</span>);
});
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'scheduled'</span>);
<span class="hljs-comment">// 输出：</span>
<span class="hljs-comment">// start</span>
<span class="hljs-comment">// scheduled</span>
<span class="hljs-comment">// nextTick callback</span></code><code class="language-js cjs"><span class="hljs-keyword">const</span> { nextTick } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'process'</span>);

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'start'</span>);
<span class="hljs-title function_">nextTick</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'nextTick callback'</span>);
});
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'scheduled'</span>);
<span class="hljs-comment">// 输出：</span>
<span class="hljs-comment">// start</span>
<span class="hljs-comment">// scheduled</span>
<span class="hljs-comment">// nextTick callback</span></code></pre>
<p class="">这在开发 API 时很重要，以便让用户有机会在对象构建之后但在任何 I/O 发生之前分配事件句柄：</p>

<pre class="with-40-chars"><input class="js-flavor-selector" type="checkbox" checked="" aria-label="Show modern ES modules syntax"><code class="language-js mjs"><span class="hljs-keyword">import</span> { nextTick } <span class="hljs-keyword">from</span> <span class="hljs-string">'process'</span>;

<span class="hljs-keyword">function</span> <span class="hljs-title function_">MyThing</span>(<span class="hljs-params">options</span>) {
  <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setupOptions</span>(options);

  <span class="hljs-title function_">nextTick</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">startDoingStuff</span>();
  });
}

<span class="hljs-keyword">const</span> thing = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyThing</span>();
thing.<span class="hljs-title function_">getReadyForStuff</span>();

<span class="hljs-comment">// thing.startDoingStuff() 现在被调用，而不是之前。</span></code><code class="language-js cjs"><span class="hljs-keyword">const</span> { nextTick } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'process'</span>);

<span class="hljs-keyword">function</span> <span class="hljs-title function_">MyThing</span>(<span class="hljs-params">options</span>) {
  <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setupOptions</span>(options);

  <span class="hljs-title function_">nextTick</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">startDoingStuff</span>();
  });
}

<span class="hljs-keyword">const</span> thing = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyThing</span>();
thing.<span class="hljs-title function_">getReadyForStuff</span>();

<span class="hljs-comment">// thing.startDoingStuff() 现在被调用，而不是之前。</span></code></pre>
<p class="">这对于要 100% 同步或 100% 异步的 API 非常重要。
设想这个示例：</p>
<pre class=""><code class="language-js"><span class="hljs-comment">// 警告！不要使用！不安全的危险！</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">maybeSync</span>(<span class="hljs-params">arg, cb</span>) {
  <span class="hljs-keyword">if</span> (arg) {
    <span class="hljs-title function_">cb</span>();
    <span class="hljs-keyword">return</span>;
  }

  fs.<span class="hljs-title function_">stat</span>(<span class="hljs-string">'file'</span>, cb);
}</code></pre>
<p class="">此 API 是危险的，因为在以下情况下：</p>
<pre class=""><code class="language-js"><span class="hljs-keyword">const</span> maybeTrue = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>() &gt; <span class="hljs-number">0.5</span>;

<span class="hljs-title function_">maybeSync</span>(maybeTrue, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-title function_">foo</span>();
});

<span class="hljs-title function_">bar</span>();</code></pre>
<p class="">并不清楚是先调用 <code>foo()</code> 还是 <code>bar()</code>。</p>
<p class="">以下方法要好得多：</p>

<pre class="with-40-chars"><input class="js-flavor-selector" type="checkbox" checked="" aria-label="Show modern ES modules syntax"><code class="language-js mjs"><span class="hljs-keyword">import</span> { nextTick } <span class="hljs-keyword">from</span> <span class="hljs-string">'process'</span>;

<span class="hljs-keyword">function</span> <span class="hljs-title function_">definitelyAsync</span>(<span class="hljs-params">arg, cb</span>) {
  <span class="hljs-keyword">if</span> (arg) {
    <span class="hljs-title function_">nextTick</span>(cb);
    <span class="hljs-keyword">return</span>;
  }

  fs.<span class="hljs-title function_">stat</span>(<span class="hljs-string">'file'</span>, cb);
}</code><code class="language-js cjs"><span class="hljs-keyword">const</span> { nextTick } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'process'</span>);

<span class="hljs-keyword">function</span> <span class="hljs-title function_">definitelyAsync</span>(<span class="hljs-params">arg, cb</span>) {
  <span class="hljs-keyword">if</span> (arg) {
    <span class="hljs-title function_">nextTick</span>(cb);
    <span class="hljs-keyword">return</span>;
  }

  fs.<span class="hljs-title function_">stat</span>(<span class="hljs-string">'file'</span>, cb);
}</code></pre>
<h4>何时使用 queueMicrotask() 与 process.nextTick()<span><a class="mark" href="#when-to-use-queuemicrotask-vs-processnexttick" id="when-to-use-queuemicrotask-vs-processnexttick">#</a></span><a aria-hidden="true" class="legacy" id="process_when_to_use_queuemicrotask_vs_process_nexttick"></a></h4><p class="tip_wrap" data-show_trans="1" data-item_id="#when-to-use-queuemicrotask-vs-processnexttick">
                <a href="process/when_to_use_queuemicrotask_vs_process_nexttick.html" class="tip_trans">中英对照</a>
                </p>
<p><a href="globals.html#queuemicrotaskcallback"><code>queueMicrotask()</code></a> API 是 <code>process.nextTick()</code> 的替代方案，它还使用用于执行 then、catch 和 finally 处理程序的相同微任务队列来延迟函数的执行。
在 Node.js 中，每次“下一个滴答队列”被排空时，微任务队列也会立即排空。</p>

<pre class="with-40-chars"><input class="js-flavor-selector" type="checkbox" checked="" aria-label="Show modern ES modules syntax"><code class="language-js mjs"><span class="hljs-keyword">import</span> { nextTick } <span class="hljs-keyword">from</span> <span class="hljs-string">'process'</span>;

<span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-number">2</span>));
<span class="hljs-title function_">queueMicrotask</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-number">3</span>));
<span class="hljs-title function_">nextTick</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-number">1</span>));
<span class="hljs-comment">// 输出：</span>
<span class="hljs-comment">// 1</span>
<span class="hljs-comment">// 2</span>
<span class="hljs-comment">// 3</span></code><code class="language-js cjs"><span class="hljs-keyword">const</span> { nextTick } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'process'</span>);

<span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-number">2</span>));
<span class="hljs-title function_">queueMicrotask</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-number">3</span>));
<span class="hljs-title function_">nextTick</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-number">1</span>));
<span class="hljs-comment">// 输出：</span>
<span class="hljs-comment">// 1</span>
<span class="hljs-comment">// 2</span>
<span class="hljs-comment">// 3</span></code></pre>
<p class="">对于_大多数_用户空间用例，<code>queueMicrotask()</code> API 提供了一种可移植且可靠的延迟执行机制，该机制适用于多个 JavaScript 平台环境，应该比 <code>process.nextTick()</code> 更受青睐。
在简单的场景中，<code>queueMicrotask()</code> 可以直接替代 <code>process.nextTick()</code>。</p>
<pre class=""><code class="language-js"><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'start'</span>);
<span class="hljs-title function_">queueMicrotask</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'microtask callback'</span>);
});
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'scheduled'</span>);
<span class="hljs-comment">// 输出：</span>
<span class="hljs-comment">// start</span>
<span class="hljs-comment">// scheduled</span>
<span class="hljs-comment">// microtask callback</span></code></pre>
<p class="">两个 API 之间一个值得注意的区别是 <code>process.nextTick()</code> 允许指定额外值，这些值将在调用时作为参数传递给延迟函数。
使用 <code>queueMicrotask()</code> 实现相同的结果需要使用闭包或绑定函数：</p>
<pre class=""><code class="language-js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">deferred</span>(<span class="hljs-params">a, b</span>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'microtask'</span>, a + b);
}

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'start'</span>);
<span class="hljs-title function_">queueMicrotask</span>(deferred.<span class="hljs-title function_">bind</span>(<span class="hljs-literal">undefined</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>));
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'scheduled'</span>);
<span class="hljs-comment">// 输出：</span>
<span class="hljs-comment">// start</span>
<span class="hljs-comment">// scheduled</span>
<span class="hljs-comment">// microtask 3</span></code></pre>
<p class="">从下一个滴答队列和微任务队列中引发的错误的处理方式存在细微差别。
在排队的微任务回调中抛出的错误应该在可能的情况下在排队的回调中处理。
如果不是，则可以使用 <code>process.on('uncaughtException')</code> 事件句柄来捕获和处理错误。</p>
<p class="">如有疑问，除非需要 <code>process.nextTick()</code> 的特定功能，否则请使用 <code>queueMicrotask()</code>。</p>
</section><section><h3><code>process.noDeprecation</code><span><a class="mark" href="#processnodeprecation" id="processnodeprecation">#</a></span><a aria-hidden="true" class="legacy" id="process_process_nodeprecation"></a></h3><p class="tip_wrap" data-show_trans="1" data-item_id="#processnodeprecation">
                <a href="process/process_nodeprecation.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>新增于: v0.8.0</span>
</div>
<ul class="">
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" rel="nofollow" class="type">&lt;boolean&gt;</a></li>
</ul>
<p><code>process.noDeprecation</code> 属性指示是否在当前 Node.js 进程上设置了 <code>--no-deprecation</code> 标志。
有关此标志行为的更多信息，请参阅 <a href="#event-warning"><code>'warning'</code> 事件</a>和 <a href="#processemitwarningwarning-type-code-ctor"><code>emitWarning()</code> 方法</a>的文档。</p>
</section><section><h3><code>process.pid</code><span><a class="mark" href="#processpid" id="processpid">#</a></span><a aria-hidden="true" class="legacy" id="process_process_pid"></a></h3><p class="tip_wrap" data-show_trans="1" data-item_id="#processpid">
                <a href="process/process_pid.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>新增于: v0.1.15</span>
</div>
<ul class="">
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a></li>
</ul>
<p><code>process.pid</code> 属性返回进程的 PID。</p>

<pre class="with-35-chars"><input class="js-flavor-selector" type="checkbox" checked="" aria-label="Show modern ES modules syntax"><code class="language-js mjs"><span class="hljs-keyword">import</span> { pid } <span class="hljs-keyword">from</span> <span class="hljs-string">'process'</span>;

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`This process is pid <span class="hljs-subst">${pid}</span>`</span>);</code><code class="language-js cjs"><span class="hljs-keyword">const</span> { pid } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'process'</span>);

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`This process is pid <span class="hljs-subst">${pid}</span>`</span>);</code></pre>
</section><section><h3><code>process.platform</code><span><a class="mark" href="#processplatform" id="processplatform">#</a></span><a aria-hidden="true" class="legacy" id="process_process_platform"></a></h3><p class="tip_wrap" data-show_trans="1" data-item_id="#processplatform">
                <a href="process/process_platform.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>新增于: v0.1.16</span>
</div>
<ul class="">
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a></li>
</ul>
<p><code>process.platform</code> 属性返回用于标识编译 Node.js 二进制文件的操作系统平台的字符串。</p>
<p class="">目前可能的值是：</p>
<ul class="">
<li><code>'aix'</code></li>
<li><code>'darwin'</code></li>
<li><code>'freebsd'</code></li>
<li><code>'linux'</code></li>
<li><code>'openbsd'</code></li>
<li><code>'sunos'</code></li>
<li><code>'win32'</code></li>
</ul>

<pre class="with-40-chars"><input class="js-flavor-selector" type="checkbox" checked="" aria-label="Show modern ES modules syntax"><code class="language-js mjs"><span class="hljs-keyword">import</span> { platform } <span class="hljs-keyword">from</span> <span class="hljs-string">'process'</span>;

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`This platform is <span class="hljs-subst">${platform}</span>`</span>);</code><code class="language-js cjs"><span class="hljs-keyword">const</span> { platform } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'process'</span>);

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`This platform is <span class="hljs-subst">${platform}</span>`</span>);</code></pre>
<p class="">如果 Node.js 是在安卓操作系统上构建的，则也可能返回值 <code>'android'</code>。
但是，Node.js 中的安卓支持<a href="https://github.com/nodejs/node/blob/HEAD/BUILDING.md#androidandroid-based-devices-eg-firefox-os" rel="nofollow">是实验的</a>。</p>
</section><section><h3><code>process.ppid</code><span><a class="mark" href="#processppid" id="processppid">#</a></span><a aria-hidden="true" class="legacy" id="process_process_ppid"></a></h3><p class="tip_wrap" data-show_trans="1" data-item_id="#processppid">
                <a href="process/process_ppid.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>新增于: v9.2.0, v8.10.0, v6.13.0</span>
</div>
<ul class="">
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a></li>
</ul>
<p><code>process.ppid</code> 属性返回当前进程的父进程的 PID。</p>

<pre class="with-36-chars"><input class="js-flavor-selector" type="checkbox" checked="" aria-label="Show modern ES modules syntax"><code class="language-js mjs"><span class="hljs-keyword">import</span> { ppid } <span class="hljs-keyword">from</span> <span class="hljs-string">'process'</span>;

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`The parent process is pid <span class="hljs-subst">${ppid}</span>`</span>);</code><code class="language-js cjs"><span class="hljs-keyword">const</span> { ppid } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'process'</span>);

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`The parent process is pid <span class="hljs-subst">${ppid}</span>`</span>);</code></pre>
</section><section><h3><code>process.release</code><span><a class="mark" href="#processrelease" id="processrelease">#</a></span><a aria-hidden="true" class="legacy" id="process_process_release"></a></h3><p class="tip_wrap" data-show_trans="1" data-item_id="#processrelease">
                <a href="process/process_release.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<details class="changelog"><summary>版本历史</summary>
<table>
<tbody><tr><th>版本</th><th>变更</th></tr>
<tr><td>v4.2.0</td>
<td><p>现在支持 <code>lts</code> 属性。</p></td></tr>
<tr><td>v3.0.0</td>
<td><p><span>新增于: v3.0.0</span></p></td></tr>
</tbody></table>
</details>
</div>
<ul class="">
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" rel="nofollow" class="type">&lt;Object&gt;</a></li>
</ul>
<p><code>process.release</code> 属性返回 <code>Object</code>，其中包含与当前版本相关的元数据，包括源 tarball 和 headers-only tarball 的网址。</p>
<p class=""><code>process.release</code> 包含以下属性：</p>
<ul class="">
<li><code>name</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> 始终为 <code>'node'</code> 的值。</li>
<li><code>sourceUrl</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> 指向包含当前版本源代码的 <em><code>.tar.gz</code></em> 文件的绝对网址。</li>
<li><code>headersUrl</code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> 指向 <em><code>.tar.gz</code></em> 文件的绝对网址，该文件仅包含当前版本的源头文件。
该文件比完整的源文件小得多，可用于编译 Node.js 原生插件。</li>
<li><code>libUrl</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> 指向与当前版本的体系结构和版本匹配的 <em><code>node.lib</code></em> 文件的绝对网址。
此文件用于编译 Node.js 原生插件。
<em>此属性仅存在于 Windows 构建的 Node.js 中，在所有其他平台上将缺失。</em></li>
<li><code>lts</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> 标识此版本的 <a href="https://github.com/nodejs/Release" rel="nofollow">LTS</a> 标签的字符串标签。
此属性仅适用于 LTS 版本，对于所有其他版本类型（包括 <em>Current</em> 版本）为 <code>undefined</code>。
有效值包括 LTS 版本代码名称（包括不再受支持的代码名称）。
<ul>
<li><code>'Dubnium'</code> 表示以 10.13.0 开头的 10.x LTS 行。</li>
<li><code>'Erbium'</code> 表示以 12.13.0 开头的 12.x LTS 行。其他 LTS 版本代码名称，请参见 <a href="https://github.com/nodejs/node/blob/HEAD/doc/changelogs/CHANGELOG_ARCHIVE.md" rel="nofollow">Node.js 更新日志存档</a></li>
</ul>
</li>
</ul>
<!-- eslint-skip -->
<pre class=""><code class="language-js">{
  <span class="hljs-attr">name</span>: <span class="hljs-string">'node'</span>,
  <span class="hljs-attr">lts</span>: <span class="hljs-string">'Erbium'</span>,
  <span class="hljs-attr">sourceUrl</span>: <span class="hljs-string">'https://nodejs.org/download/release/v12.18.1/node-v12.18.1.tar.gz'</span>,
  <span class="hljs-attr">headersUrl</span>: <span class="hljs-string">'https://nodejs.org/download/release/v12.18.1/node-v12.18.1-headers.tar.gz'</span>,
  <span class="hljs-attr">libUrl</span>: <span class="hljs-string">'https://nodejs.org/download/release/v12.18.1/win-x64/node.lib'</span>
}</code></pre>
<p class="">在源代码树的非发布版本的自定义构建中，可能只存在 <code>name</code> 属性。
不应依赖附加属性的存在。</p>
</section><section><h3><code>process.report</code><span><a class="mark" href="#processreport" id="processreport">#</a></span><a aria-hidden="true" class="legacy" id="process_process_report"></a></h3><p class="tip_wrap" data-show_trans="1" data-item_id="#processreport">
                <a href="process/process_report.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<details class="changelog"><summary>版本历史</summary>
<table>
<tbody><tr><th>版本</th><th>变更</th></tr>
<tr><td>v13.12.0, v12.17.0</td>
<td><p>此 API 不再是实验的。</p></td></tr>
<tr><td>v11.8.0</td>
<td><p><span>新增于: v11.8.0</span></p></td></tr>
</tbody></table>
</details>
</div>
<ul class="">
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" rel="nofollow" class="type">&lt;Object&gt;</a></li>
</ul>
<p><code>process.report</code> 是一个对象，其方法用于为当前进程生成诊断报告。
<a href="report.html">报告文档</a>中提供了额外文档。</p>
<h4><code>process.report.compact</code><span><a class="mark" href="#processreportcompact" id="processreportcompact">#</a></span><a aria-hidden="true" class="legacy" id="process_process_report_compact"></a></h4><p class="tip_wrap" data-show_trans="1" data-item_id="#processreportcompact">
                <a href="process/process_report_compact.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>新增于: v13.12.0, v12.17.0</span>
</div>
<ul class="">
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" rel="nofollow" class="type">&lt;boolean&gt;</a></li>
</ul>
<p>以紧凑的单行 JSON 格式编写报告，与专为人类使用而设计的默认多行格式相比，日志处理系统更易于使用。</p>

<pre class="with-38-chars"><input class="js-flavor-selector" type="checkbox" checked="" aria-label="Show modern ES modules syntax"><code class="language-js mjs"><span class="hljs-keyword">import</span> { report } <span class="hljs-keyword">from</span> <span class="hljs-string">'process'</span>;

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Reports are compact? <span class="hljs-subst">${report.compact}</span>`</span>);</code><code class="language-js cjs"><span class="hljs-keyword">const</span> { report } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'process'</span>);

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Reports are compact? <span class="hljs-subst">${report.compact}</span>`</span>);</code></pre>
<h4><code>process.report.directory</code><span><a class="mark" href="#processreportdirectory" id="processreportdirectory">#</a></span><a aria-hidden="true" class="legacy" id="process_process_report_directory"></a></h4><p class="tip_wrap" data-show_trans="1" data-item_id="#processreportdirectory">
                <a href="process/process_report_directory.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<details class="changelog"><summary>版本历史</summary>
<table>
<tbody><tr><th>版本</th><th>变更</th></tr>
<tr><td>v13.12.0, v12.17.0</td>
<td><p>此 API 不再是实验的。</p></td></tr>
<tr><td>v11.12.0</td>
<td><p><span>新增于: v11.12.0</span></p></td></tr>
</tbody></table>
</details>
</div>
<ul class="">
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a></li>
</ul>
<p>写入报告的目录。
默认值为空字符串，表示将报告写入 Node.js 进程的当前工作目录。</p>

<pre class="with-38-chars"><input class="js-flavor-selector" type="checkbox" checked="" aria-label="Show modern ES modules syntax"><code class="language-js mjs"><span class="hljs-keyword">import</span> { report } <span class="hljs-keyword">from</span> <span class="hljs-string">'process'</span>;

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Report directory is <span class="hljs-subst">${report.directory}</span>`</span>);</code><code class="language-js cjs"><span class="hljs-keyword">const</span> { report } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'process'</span>);

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Report directory is <span class="hljs-subst">${report.directory}</span>`</span>);</code></pre>
<h4><code>process.report.filename</code><span><a class="mark" href="#processreportfilename" id="processreportfilename">#</a></span><a aria-hidden="true" class="legacy" id="process_process_report_filename"></a></h4><p class="tip_wrap" data-show_trans="1" data-item_id="#processreportfilename">
                <a href="process/process_report_filename.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<details class="changelog"><summary>版本历史</summary>
<table>
<tbody><tr><th>版本</th><th>变更</th></tr>
<tr><td>v13.12.0, v12.17.0</td>
<td><p>此 API 不再是实验的。</p></td></tr>
<tr><td>v11.12.0</td>
<td><p><span>新增于: v11.12.0</span></p></td></tr>
</tbody></table>
</details>
</div>
<ul class="">
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a></li>
</ul>
<p>写入报告的文件名。
如果设置为空字符串，则输出文件名将由时间戳、PID 和序列号组成。
默认值为空字符串。</p>

<pre class="with-38-chars"><input class="js-flavor-selector" type="checkbox" checked="" aria-label="Show modern ES modules syntax"><code class="language-js mjs"><span class="hljs-keyword">import</span> { report } <span class="hljs-keyword">from</span> <span class="hljs-string">'process'</span>;

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Report filename is <span class="hljs-subst">${report.filename}</span>`</span>);</code><code class="language-js cjs"><span class="hljs-keyword">const</span> { report } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'process'</span>);

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Report filename is <span class="hljs-subst">${report.filename}</span>`</span>);</code></pre>
<h4><code>process.report.getReport([err])</code><span><a class="mark" href="#processreportgetreporterr" id="processreportgetreporterr">#</a></span><a aria-hidden="true" class="legacy" id="process_process_report_getreport_err"></a></h4><p class="tip_wrap" data-show_trans="1" data-item_id="#processreportgetreporterr">
                <a href="process/process_report_getreport_err.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<details class="changelog"><summary>版本历史</summary>
<table>
<tbody><tr><th>版本</th><th>变更</th></tr>
<tr><td>v13.12.0, v12.17.0</td>
<td><p>此 API 不再是实验的。</p></td></tr>
<tr><td>v11.8.0</td>
<td><p><span>新增于: v11.8.0</span></p></td></tr>
</tbody></table>
</details>
</div>
<ul class="">
<li><code>err</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error" rel="nofollow" class="type">&lt;Error&gt;</a> 用于报告 JavaScript 堆栈的自定义错误。</li>
<li>返回: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" rel="nofollow" class="type">&lt;Object&gt;</a></li>
</ul>
<p>返回正在运行的进程的诊断报告的 JavaScript 对象表示形式。
报告的 JavaScript 堆栈跟踪取自 <code>err</code>（如果存在）。</p>

<pre class="with-38-chars"><input class="js-flavor-selector" type="checkbox" checked="" aria-label="Show modern ES modules syntax"><code class="language-js mjs"><span class="hljs-keyword">import</span> { report } <span class="hljs-keyword">from</span> <span class="hljs-string">'process'</span>;

<span class="hljs-keyword">const</span> data = report.<span class="hljs-title function_">getReport</span>();
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(data.<span class="hljs-property">header</span>.<span class="hljs-property">nodejsVersion</span>);

<span class="hljs-comment">// 类似于 process.report.writeReport()</span>
<span class="hljs-keyword">import</span> fs <span class="hljs-keyword">from</span> <span class="hljs-string">'fs'</span>;
fs.<span class="hljs-title function_">writeFileSync</span>(<span class="hljs-string">'my-report.log'</span>, util.<span class="hljs-title function_">inspect</span>(data), <span class="hljs-string">'utf8'</span>);</code><code class="language-js cjs"><span class="hljs-keyword">const</span> { report } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'process'</span>);

<span class="hljs-keyword">const</span> data = report.<span class="hljs-title function_">getReport</span>();
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(data.<span class="hljs-property">header</span>.<span class="hljs-property">nodejsVersion</span>);

<span class="hljs-comment">// 类似于 process.report.writeReport()</span>
<span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">'fs'</span>);
fs.<span class="hljs-title function_">writeFileSync</span>(<span class="hljs-string">'my-report.log'</span>, util.<span class="hljs-title function_">inspect</span>(data), <span class="hljs-string">'utf8'</span>);</code></pre>
<p class=""><a href="report.html">报告文档</a>中提供了额外文档。</p>
<h4><code>process.report.reportOnFatalError</code><span><a class="mark" href="#processreportreportonfatalerror" id="processreportreportonfatalerror">#</a></span><a aria-hidden="true" class="legacy" id="process_process_report_reportonfatalerror"></a></h4><p class="tip_wrap" data-show_trans="1" data-item_id="#processreportreportonfatalerror">
                <a href="process/process_report_reportonfatalerror.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<details class="changelog"><summary>版本历史</summary>
<table>
<tbody><tr><th>版本</th><th>变更</th></tr>
<tr><td>v15.0.0</td>
<td><p>此 API 不再是实验的。</p></td></tr>
<tr><td>v11.12.0</td>
<td><p><span>新增于: v11.12.0</span></p></td></tr>
</tbody></table>
</details>
</div>
<ul class="">
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" rel="nofollow" class="type">&lt;boolean&gt;</a></li>
</ul>
<p>如果为 <code>true</code>，则会生成有关致命错误（例如内存不足错误或 C++ 断言失败）的诊断报告。</p>

<pre class="with-38-chars"><input class="js-flavor-selector" type="checkbox" checked="" aria-label="Show modern ES modules syntax"><code class="language-js mjs"><span class="hljs-keyword">import</span> { report } <span class="hljs-keyword">from</span> <span class="hljs-string">'process'</span>;

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Report on fatal error: <span class="hljs-subst">${report.reportOnFatalError}</span>`</span>);</code><code class="language-js cjs"><span class="hljs-keyword">const</span> { report } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'process'</span>);

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Report on fatal error: <span class="hljs-subst">${report.reportOnFatalError}</span>`</span>);</code></pre>
<h4><code>process.report.reportOnSignal</code><span><a class="mark" href="#processreportreportonsignal" id="processreportreportonsignal">#</a></span><a aria-hidden="true" class="legacy" id="process_process_report_reportonsignal"></a></h4><p class="tip_wrap" data-show_trans="1" data-item_id="#processreportreportonsignal">
                <a href="process/process_report_reportonsignal.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<details class="changelog"><summary>版本历史</summary>
<table>
<tbody><tr><th>版本</th><th>变更</th></tr>
<tr><td>v13.12.0, v12.17.0</td>
<td><p>此 API 不再是实验的。</p></td></tr>
<tr><td>v11.12.0</td>
<td><p><span>新增于: v11.12.0</span></p></td></tr>
</tbody></table>
</details>
</div>
<ul class="">
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" rel="nofollow" class="type">&lt;boolean&gt;</a></li>
</ul>
<p>如果为 <code>true</code>，则当进程接收到 <code>process.report.signal</code> 指定的信号时生成诊断报告。</p>

<pre class="with-38-chars"><input class="js-flavor-selector" type="checkbox" checked="" aria-label="Show modern ES modules syntax"><code class="language-js mjs"><span class="hljs-keyword">import</span> { report } <span class="hljs-keyword">from</span> <span class="hljs-string">'process'</span>;

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Report on signal: <span class="hljs-subst">${report.reportOnSignal}</span>`</span>);</code><code class="language-js cjs"><span class="hljs-keyword">const</span> { report } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'process'</span>);

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Report on signal: <span class="hljs-subst">${report.reportOnSignal}</span>`</span>);</code></pre>
<h4><code>process.report.reportOnUncaughtException</code><span><a class="mark" href="#processreportreportonuncaughtexception" id="processreportreportonuncaughtexception">#</a></span><a aria-hidden="true" class="legacy" id="process_process_report_reportonuncaughtexception"></a></h4><p class="tip_wrap" data-show_trans="1" data-item_id="#processreportreportonuncaughtexception">
                <a href="process/process_report_reportonuncaughtexception.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<details class="changelog"><summary>版本历史</summary>
<table>
<tbody><tr><th>版本</th><th>变更</th></tr>
<tr><td>v13.12.0, v12.17.0</td>
<td><p>此 API 不再是实验的。</p></td></tr>
<tr><td>v11.12.0</td>
<td><p><span>新增于: v11.12.0</span></p></td></tr>
</tbody></table>
</details>
</div>
<ul class="">
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" rel="nofollow" class="type">&lt;boolean&gt;</a></li>
</ul>
<p>如果为 <code>true</code>，则针对未捕获的异常生成诊断报告。</p>

<pre class="with-38-chars"><input class="js-flavor-selector" type="checkbox" checked="" aria-label="Show modern ES modules syntax"><code class="language-js mjs"><span class="hljs-keyword">import</span> { report } <span class="hljs-keyword">from</span> <span class="hljs-string">'process'</span>;

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Report on exception: <span class="hljs-subst">${report.reportOnUncaughtException}</span>`</span>);</code><code class="language-js cjs"><span class="hljs-keyword">const</span> { report } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'process'</span>);

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Report on exception: <span class="hljs-subst">${report.reportOnUncaughtException}</span>`</span>);</code></pre>
<h4><code>process.report.signal</code><span><a class="mark" href="#processreportsignal" id="processreportsignal">#</a></span><a aria-hidden="true" class="legacy" id="process_process_report_signal"></a></h4><p class="tip_wrap" data-show_trans="1" data-item_id="#processreportsignal">
                <a href="process/process_report_signal.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<details class="changelog"><summary>版本历史</summary>
<table>
<tbody><tr><th>版本</th><th>变更</th></tr>
<tr><td>v13.12.0, v12.17.0</td>
<td><p>此 API 不再是实验的。</p></td></tr>
<tr><td>v11.12.0</td>
<td><p><span>新增于: v11.12.0</span></p></td></tr>
</tbody></table>
</details>
</div>
<ul class="">
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a></li>
</ul>
<p>用于触发诊断报告创建的信号。
默认为 <code>'SIGUSR2'</code>。</p>

<pre class="with-38-chars"><input class="js-flavor-selector" type="checkbox" checked="" aria-label="Show modern ES modules syntax"><code class="language-js mjs"><span class="hljs-keyword">import</span> { report } <span class="hljs-keyword">from</span> <span class="hljs-string">'process'</span>;

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Report signal: <span class="hljs-subst">${report.signal}</span>`</span>);</code><code class="language-js cjs"><span class="hljs-keyword">const</span> { report } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'process'</span>);

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Report signal: <span class="hljs-subst">${report.signal}</span>`</span>);</code></pre>
<h4><code>process.report.writeReport([filename][, err])</code><span><a class="mark" href="#processreportwritereportfilename-err" id="processreportwritereportfilename-err">#</a></span><a aria-hidden="true" class="legacy" id="process_process_report_writereport_filename_err"></a></h4><p class="tip_wrap" data-show_trans="1" data-item_id="#processreportwritereportfilename-err">
                <a href="process/process_report_writereport_filename_err.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<details class="changelog"><summary>版本历史</summary>
<table>
<tbody><tr><th>版本</th><th>变更</th></tr>
<tr><td>v13.12.0, v12.17.0</td>
<td><p>此 API 不再是实验的。</p></td></tr>
<tr><td>v11.8.0</td>
<td><p><span>新增于: v11.8.0</span></p></td></tr>
</tbody></table>
</details>
</div>
<ul class="">
<li>
<p><code>filename</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> 写入报告的文件的名称。
这应该是相对路径，如果未指定，它将附加到 <code>process.report.directory</code> 中指定的目录或 Node.js 进程的当前工作目录。</p>
</li>
<li>
<p><code>err</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error" rel="nofollow" class="type">&lt;Error&gt;</a> 用于报告 JavaScript 堆栈的自定义错误。</p>
</li>
<li>
<p>返回: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> 返回生成的报告的文件名。</p>
</li>
</ul>
<p>将诊断报告写入文件。
如果未提供 <code>filename</code>，则默认文件名包括日期、时间、PID 和序列号。
报告的 JavaScript 堆栈跟踪取自 <code>err</code>（如果存在）。</p>

<pre class="with-38-chars"><input class="js-flavor-selector" type="checkbox" checked="" aria-label="Show modern ES modules syntax"><code class="language-js mjs"><span class="hljs-keyword">import</span> { report } <span class="hljs-keyword">from</span> <span class="hljs-string">'process'</span>;

report.<span class="hljs-title function_">writeReport</span>();</code><code class="language-js cjs"><span class="hljs-keyword">const</span> { report } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'process'</span>);

report.<span class="hljs-title function_">writeReport</span>();</code></pre>
<p class=""><a href="report.html">报告文档</a>中提供了额外文档。</p>
</section><section><h3><code>process.resourceUsage()</code><span><a class="mark" href="#processresourceusage" id="processresourceusage">#</a></span><a aria-hidden="true" class="legacy" id="process_process_resourceusage"></a></h3><p class="tip_wrap" data-show_trans="1" data-item_id="#processresourceusage">
                <a href="process/process_resourceusage.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>新增于: v12.6.0</span>
</div>
<ul class="">
<li>返回: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" rel="nofollow" class="type">&lt;Object&gt;</a> 当前进程的资源使用情况。
所有这些值都来自返回 <a href="https://docs.libuv.org/en/v1.x/misc.html#c.uv_rusage_t" rel="nofollow"><code>uv_rusage_t</code> struct</a> 的 <code>uv_getrusage</code> 调用。
<ul>
<li><code>userCPUTime</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a> 映射到以微秒计算的 <code>ru_utime</code>。
它与 <a href="#processcpuusagepreviousvalue"><code>process.cpuUsage().user</code></a> 的值相同。</li>
<li><code>systemCPUTime</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a> 映射到以微秒计算的 <code>ru_stime</code>。
它与 <a href="#processcpuusagepreviousvalue"><code>process.cpuUsage().system</code></a> 的值相同。</li>
<li><code>maxRSS</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a> 映射到 <code>ru_maxrss</code>，其以千字节为单位使用的最大驻留集大小。</li>
<li><code>sharedMemorySize</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a> 映射到 <code>ru_ixrss</code> 但不受任何平台支持。</li>
<li><code>unsharedDataSize</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a> 映射到 <code>ru_idrss</code> 但不受任何平台支持。</li>
<li><code>unsharedStackSize</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a> 映射到 <code>ru_isrss</code> 但不受任何平台支持。</li>
<li><code>minorPageFault</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a> 映射到 <code>ru_minflt</code>，这是进程的次要页面错误的数量，请参阅<a href="https://en.wikipedia.org/wiki/Page_fault#Minor" rel="nofollow">这篇文章了解更多详情</a>。</li>
<li><code>majorPageFault</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a> 映射到 <code>ru_majflt</code>，这是进程的主要页面错误的数量，请参阅<a href="https://en.wikipedia.org/wiki/Page_fault#Major" rel="nofollow">这篇文章了解更多详情</a>。
Windows 不支持此字段。</li>
<li><code>swappedOut</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a> 映射到 <code>ru_nswap</code> 但不受任何平台支持。</li>
<li><code>fsRead</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a> 映射到 <code>ru_inblock</code>，这是文件系统必须执行输入的次数。</li>
<li><code>fsWrite</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a> 映射到 <code>ru_oublock</code>，这是文件系统必须执行输出的次数。</li>
<li><code>ipcSent</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a> 映射到 <code>ru_msgsnd</code> 但不受任何平台支持。</li>
<li><code>ipcReceived</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a> 映射到 <code>ru_msgrcv</code> 但不受任何平台支持。</li>
<li><code>signalsCount</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a> 映射到 <code>ru_nsignals</code> 但不受任何平台支持。</li>
<li><code>voluntaryContextSwitches</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a> 映射到 <code>ru_nvcsw</code>，这是由于进程在其时间片完成之前自愿放弃处理器而导致 CPU 上下文切换的次数（通常是为了等待资源的可用性）。
Windows 不支持此字段。</li>
<li><code>involuntaryContextSwitches</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a> 映射到 <code>ru_nivcsw</code>，这是由于更高优先级的进程变得可运行或当前进程超过其时间片而导致 CPU 上下文切换的次数。
Windows 不支持此字段。</li>
</ul>
</li>
</ul>

<pre class="with-45-chars"><input class="js-flavor-selector" type="checkbox" checked="" aria-label="Show modern ES modules syntax"><code class="language-js mjs"><span class="hljs-keyword">import</span> { resourceUsage } <span class="hljs-keyword">from</span> <span class="hljs-string">'process'</span>;

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">resourceUsage</span>());
<span class="hljs-comment">/*
  Will output:
  {
    userCPUTime: 82872,
    systemCPUTime: 4143,
    maxRSS: 33164,
    sharedMemorySize: 0,
    unsharedDataSize: 0,
    unsharedStackSize: 0,
    minorPageFault: 2469,
    majorPageFault: 0,
    swappedOut: 0,
    fsRead: 0,
    fsWrite: 8,
    ipcSent: 0,
    ipcReceived: 0,
    signalsCount: 0,
    voluntaryContextSwitches: 79,
    involuntaryContextSwitches: 1
  }
*/</span></code><code class="language-js cjs"><span class="hljs-keyword">const</span> { resourceUsage } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'process'</span>);

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">resourceUsage</span>());
<span class="hljs-comment">/*
  Will output:
  {
    userCPUTime: 82872,
    systemCPUTime: 4143,
    maxRSS: 33164,
    sharedMemorySize: 0,
    unsharedDataSize: 0,
    unsharedStackSize: 0,
    minorPageFault: 2469,
    majorPageFault: 0,
    swappedOut: 0,
    fsRead: 0,
    fsWrite: 8,
    ipcSent: 0,
    ipcReceived: 0,
    signalsCount: 0,
    voluntaryContextSwitches: 79,
    involuntaryContextSwitches: 1
  }
*/</span></code></pre>
</section><section><h3><code>process.send(message[, sendHandle[, options]][, callback])</code><span><a class="mark" href="#processsendmessage-sendhandle-options-callback" id="processsendmessage-sendhandle-options-callback">#</a></span><a aria-hidden="true" class="legacy" id="process_process_send_message_sendhandle_options_callback"></a></h3><p class="tip_wrap" data-show_trans="1" data-item_id="#processsendmessage-sendhandle-options-callback">
                <a href="process/process_send_message_sendhandle_options_callback.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>新增于: v0.5.9</span>
</div>
<ul class="">
<li><code>message</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" rel="nofollow" class="type">&lt;Object&gt;</a></li>
<li><code>sendHandle</code> <a href="net.html#class-netserver" rel="nofollow" class="type">&lt;net.Server&gt;</a> | <a href="net.html#class-netsocket" rel="nofollow" class="type">&lt;net.Socket&gt;</a></li>
<li><code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" rel="nofollow" class="type">&lt;Object&gt;</a> 用于参数化某些类型句柄的发送。<code>options</code> 支持以下属性：
<ul>
<li><code>keepOpen</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" rel="nofollow" class="type">&lt;boolean&gt;</a> 当传入 <code>net.Socket</code> 实例时可以使用的值。
当为 <code>true</code> 时，套接字在发送过程中保持打开状态。
<strong>默认值:</strong> <code>false</code>。</li>
</ul>
</li>
<li><code>callback</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" rel="nofollow" class="type">&lt;Function&gt;</a></li>
<li>返回: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" rel="nofollow" class="type">&lt;boolean&gt;</a></li>
</ul>
<p>如果使用 IPC 通道衍生 Node.js，则可以使用 <code>process.send()</code> 方法向父进程发送消息。
消息将作为父对象 <a href="child_process.html#class-childprocess"><code>ChildProcess</code></a> 对象上的 <a href="child_process.html#event-message"><code>'message'</code></a> 事件接收。</p>
<p class="">如果 Node.js 没有使用 IPC 通道衍生，则 <code>process.send</code> 将是 <code>undefined</code>。</p>
<p class="">消息经过序列化和解析。
结果消息可能与最初发送的消息不同。</p>
</section><section><h3><code>process.setegid(id)</code><span><a class="mark" href="#processsetegidid" id="processsetegidid">#</a></span><a aria-hidden="true" class="legacy" id="process_process_setegid_id"></a></h3><p class="tip_wrap" data-show_trans="1" data-item_id="#processsetegidid">
                <a href="process/process_setegid_id.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>新增于: v2.0.0</span>
</div>
<ul class="">
<li><code>id</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;number&gt;</a> 群组名或 ID</li>
</ul>
<p><code>process.setegid()</code> 方法设置进程的有效群组标识。
（请参阅 <a href="http://man7.org/linux/man-pages/man2/setegid.2.html" rel="nofollow"><code>setegid(2)</code></a>。）<code>id</code> 可以作为数字 ID 或群组名称字符串传入。
如果指定了群组名，则此方法在解析关联的数字 ID 时会阻塞。</p>

<pre class="with-35-chars"><input class="js-flavor-selector" type="checkbox" checked="" aria-label="Show modern ES modules syntax"><code class="language-js mjs"><span class="hljs-keyword">import</span> process <span class="hljs-keyword">from</span> <span class="hljs-string">'process'</span>;

<span class="hljs-keyword">if</span> (process.<span class="hljs-property">getegid</span> &amp;&amp; process.<span class="hljs-property">setegid</span>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Current gid: <span class="hljs-subst">${process.getegid()}</span>`</span>);
  <span class="hljs-keyword">try</span> {
    process.<span class="hljs-title function_">setegid</span>(<span class="hljs-number">501</span>);
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`New gid: <span class="hljs-subst">${process.getegid()}</span>`</span>);
  } <span class="hljs-keyword">catch</span> (err) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Failed to set gid: <span class="hljs-subst">${err}</span>`</span>);
  }
}</code><code class="language-js cjs"><span class="hljs-keyword">const</span> process = <span class="hljs-built_in">require</span>(<span class="hljs-string">'process'</span>);

<span class="hljs-keyword">if</span> (process.<span class="hljs-property">getegid</span> &amp;&amp; process.<span class="hljs-property">setegid</span>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Current gid: <span class="hljs-subst">${process.getegid()}</span>`</span>);
  <span class="hljs-keyword">try</span> {
    process.<span class="hljs-title function_">setegid</span>(<span class="hljs-number">501</span>);
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`New gid: <span class="hljs-subst">${process.getegid()}</span>`</span>);
  } <span class="hljs-keyword">catch</span> (err) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Failed to set gid: <span class="hljs-subst">${err}</span>`</span>);
  }
}</code></pre>
<p class="">此功能仅适用于 POSIX 平台（即不适用于 Windows 或安卓）。
此特性在 <a href="worker_threads.html#class-worker"><code>Worker</code></a> 线程中不可用。</p>
</section><section><h3><code>process.seteuid(id)</code><span><a class="mark" href="#processseteuidid" id="processseteuidid">#</a></span><a aria-hidden="true" class="legacy" id="process_process_seteuid_id"></a></h3><p class="tip_wrap" data-show_trans="1" data-item_id="#processseteuidid">
                <a href="process/process_seteuid_id.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>新增于: v2.0.0</span>
</div>
<ul class="">
<li><code>id</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;number&gt;</a> 用户名或 ID</li>
</ul>
<p><code>process.seteuid()</code> 方法设置进程的有效用户身份。
（请参阅 <a href="http://man7.org/linux/man-pages/man2/seteuid.2.html" rel="nofollow"><code>seteuid(2)</code></a>。） <code>id</code> 可以作为数字 ID 或用户名字符串传入。
如果指定了用户名，则该方法在解析关联的数字 ID 时会阻塞。</p>

<pre class="with-35-chars"><input class="js-flavor-selector" type="checkbox" checked="" aria-label="Show modern ES modules syntax"><code class="language-js mjs"><span class="hljs-keyword">import</span> process <span class="hljs-keyword">from</span> <span class="hljs-string">'process'</span>;

<span class="hljs-keyword">if</span> (process.<span class="hljs-property">geteuid</span> &amp;&amp; process.<span class="hljs-property">seteuid</span>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Current uid: <span class="hljs-subst">${process.geteuid()}</span>`</span>);
  <span class="hljs-keyword">try</span> {
    process.<span class="hljs-title function_">seteuid</span>(<span class="hljs-number">501</span>);
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`New uid: <span class="hljs-subst">${process.geteuid()}</span>`</span>);
  } <span class="hljs-keyword">catch</span> (err) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Failed to set uid: <span class="hljs-subst">${err}</span>`</span>);
  }
}</code><code class="language-js cjs"><span class="hljs-keyword">const</span> process = <span class="hljs-built_in">require</span>(<span class="hljs-string">'process'</span>);

<span class="hljs-keyword">if</span> (process.<span class="hljs-property">geteuid</span> &amp;&amp; process.<span class="hljs-property">seteuid</span>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Current uid: <span class="hljs-subst">${process.geteuid()}</span>`</span>);
  <span class="hljs-keyword">try</span> {
    process.<span class="hljs-title function_">seteuid</span>(<span class="hljs-number">501</span>);
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`New uid: <span class="hljs-subst">${process.geteuid()}</span>`</span>);
  } <span class="hljs-keyword">catch</span> (err) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Failed to set uid: <span class="hljs-subst">${err}</span>`</span>);
  }
}</code></pre>
<p class="">此功能仅适用于 POSIX 平台（即不适用于 Windows 或安卓）。
此特性在 <a href="worker_threads.html#class-worker"><code>Worker</code></a> 线程中不可用。</p>
</section><section><h3><code>process.setgid(id)</code><span><a class="mark" href="#processsetgidid" id="processsetgidid">#</a></span><a aria-hidden="true" class="legacy" id="process_process_setgid_id"></a></h3><p class="tip_wrap" data-show_trans="1" data-item_id="#processsetgidid">
                <a href="process/process_setgid_id.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>新增于: v0.1.31</span>
</div>
<ul class="">
<li><code>id</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;number&gt;</a> 群组名或 ID</li>
</ul>
<p><code>process.setgid()</code> 方法设置进程的群组标识。
（请参阅 <a href="http://man7.org/linux/man-pages/man2/setgid.2.html" rel="nofollow"><code>setgid(2)</code></a>。）<code>id</code> 可以作为数字 ID 或群组名称字符串传入。
如果指定了群组名，则此方法在解析关联的数字 ID 时会阻塞。</p>

<pre class="with-35-chars"><input class="js-flavor-selector" type="checkbox" checked="" aria-label="Show modern ES modules syntax"><code class="language-js mjs"><span class="hljs-keyword">import</span> process <span class="hljs-keyword">from</span> <span class="hljs-string">'process'</span>;

<span class="hljs-keyword">if</span> (process.<span class="hljs-property">getgid</span> &amp;&amp; process.<span class="hljs-property">setgid</span>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Current gid: <span class="hljs-subst">${process.getgid()}</span>`</span>);
  <span class="hljs-keyword">try</span> {
    process.<span class="hljs-title function_">setgid</span>(<span class="hljs-number">501</span>);
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`New gid: <span class="hljs-subst">${process.getgid()}</span>`</span>);
  } <span class="hljs-keyword">catch</span> (err) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Failed to set gid: <span class="hljs-subst">${err}</span>`</span>);
  }
}</code><code class="language-js cjs"><span class="hljs-keyword">const</span> process = <span class="hljs-built_in">require</span>(<span class="hljs-string">'process'</span>);

<span class="hljs-keyword">if</span> (process.<span class="hljs-property">getgid</span> &amp;&amp; process.<span class="hljs-property">setgid</span>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Current gid: <span class="hljs-subst">${process.getgid()}</span>`</span>);
  <span class="hljs-keyword">try</span> {
    process.<span class="hljs-title function_">setgid</span>(<span class="hljs-number">501</span>);
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`New gid: <span class="hljs-subst">${process.getgid()}</span>`</span>);
  } <span class="hljs-keyword">catch</span> (err) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Failed to set gid: <span class="hljs-subst">${err}</span>`</span>);
  }
}</code></pre>
<p class="">此功能仅适用于 POSIX 平台（即不适用于 Windows 或安卓）。
此特性在 <a href="worker_threads.html#class-worker"><code>Worker</code></a> 线程中不可用。</p>
</section><section><h3><code>process.setgroups(groups)</code><span><a class="mark" href="#processsetgroupsgroups" id="processsetgroupsgroups">#</a></span><a aria-hidden="true" class="legacy" id="process_process_setgroups_groups"></a></h3><p class="tip_wrap" data-show_trans="1" data-item_id="#processsetgroupsgroups">
                <a href="process/process_setgroups_groups.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>新增于: v0.9.4</span>
</div>
<ul class="">
<li><code>groups</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer[]&gt;</a></li>
</ul>
<p><code>process.setgroups()</code> 方法为 Node.js 进程设置补充群组 ID。
这是一个特权操作，需要 Node.js 进程具有 <code>root</code> 或 <code>CAP_SETGID</code> 能力。</p>
<p class=""><code>groups</code> 数组可以包含数字群组 ID、群组名称或两者。</p>

<pre class="with-35-chars"><input class="js-flavor-selector" type="checkbox" checked="" aria-label="Show modern ES modules syntax"><code class="language-js mjs"><span class="hljs-keyword">import</span> process <span class="hljs-keyword">from</span> <span class="hljs-string">'process'</span>;

<span class="hljs-keyword">if</span> (process.<span class="hljs-property">getgroups</span> &amp;&amp; process.<span class="hljs-property">setgroups</span>) {
  <span class="hljs-keyword">try</span> {
    process.<span class="hljs-title function_">setgroups</span>([<span class="hljs-number">501</span>]);
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(process.<span class="hljs-title function_">getgroups</span>()); <span class="hljs-comment">// 新组</span>
  } <span class="hljs-keyword">catch</span> (err) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Failed to set groups: <span class="hljs-subst">${err}</span>`</span>);
  }
}</code><code class="language-js cjs"><span class="hljs-keyword">const</span> process = <span class="hljs-built_in">require</span>(<span class="hljs-string">'process'</span>);

<span class="hljs-keyword">if</span> (process.<span class="hljs-property">getgroups</span> &amp;&amp; process.<span class="hljs-property">setgroups</span>) {
  <span class="hljs-keyword">try</span> {
    process.<span class="hljs-title function_">setgroups</span>([<span class="hljs-number">501</span>]);
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(process.<span class="hljs-title function_">getgroups</span>()); <span class="hljs-comment">// 新组</span>
  } <span class="hljs-keyword">catch</span> (err) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Failed to set groups: <span class="hljs-subst">${err}</span>`</span>);
  }
}</code></pre>
<p class="">此功能仅适用于 POSIX 平台（即不适用于 Windows 或安卓）。
此特性在 <a href="worker_threads.html#class-worker"><code>Worker</code></a> 线程中不可用。</p>
</section><section><h3><code>process.setuid(id)</code><span><a class="mark" href="#processsetuidid" id="processsetuidid">#</a></span><a aria-hidden="true" class="legacy" id="process_process_setuid_id"></a></h3><p class="tip_wrap" data-show_trans="1" data-item_id="#processsetuidid">
                <a href="process/process_setuid_id.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>新增于: v0.1.28</span>
</div>
<ul class="">
<li><code>id</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a></li>
</ul>
<p><code>process.setuid(id)</code> 方法设置进程的用户身份。
（请参阅 <a href="http://man7.org/linux/man-pages/man2/setuid.2.html" rel="nofollow"><code>setuid(2)</code></a>。） <code>id</code> 可以作为数字 ID 或用户名字符串传入。
如果指定了用户名，则该方法在解析关联的数字 ID 时会阻塞。</p>

<pre class="with-35-chars"><input class="js-flavor-selector" type="checkbox" checked="" aria-label="Show modern ES modules syntax"><code class="language-js mjs"><span class="hljs-keyword">import</span> process <span class="hljs-keyword">from</span> <span class="hljs-string">'process'</span>;

<span class="hljs-keyword">if</span> (process.<span class="hljs-property">getuid</span> &amp;&amp; process.<span class="hljs-property">setuid</span>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Current uid: <span class="hljs-subst">${process.getuid()}</span>`</span>);
  <span class="hljs-keyword">try</span> {
    process.<span class="hljs-title function_">setuid</span>(<span class="hljs-number">501</span>);
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`New uid: <span class="hljs-subst">${process.getuid()}</span>`</span>);
  } <span class="hljs-keyword">catch</span> (err) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Failed to set uid: <span class="hljs-subst">${err}</span>`</span>);
  }
}</code><code class="language-js cjs"><span class="hljs-keyword">const</span> process = <span class="hljs-built_in">require</span>(<span class="hljs-string">'process'</span>);

<span class="hljs-keyword">if</span> (process.<span class="hljs-property">getuid</span> &amp;&amp; process.<span class="hljs-property">setuid</span>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Current uid: <span class="hljs-subst">${process.getuid()}</span>`</span>);
  <span class="hljs-keyword">try</span> {
    process.<span class="hljs-title function_">setuid</span>(<span class="hljs-number">501</span>);
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`New uid: <span class="hljs-subst">${process.getuid()}</span>`</span>);
  } <span class="hljs-keyword">catch</span> (err) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Failed to set uid: <span class="hljs-subst">${err}</span>`</span>);
  }
}</code></pre>
<p class="">此功能仅适用于 POSIX 平台（即不适用于 Windows 或安卓）。
此特性在 <a href="worker_threads.html#class-worker"><code>Worker</code></a> 线程中不可用。</p>
</section><section><h3><code>process.setSourceMapsEnabled(val)</code><span><a class="mark" href="#processsetsourcemapsenabledval" id="processsetsourcemapsenabledval">#</a></span><a aria-hidden="true" class="legacy" id="process_process_setsourcemapsenabled_val"></a></h3><p class="tip_wrap" data-show_trans="1" data-item_id="#processsetsourcemapsenabledval">
                <a href="process/process_setsourcemapsenabled_val.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>新增于: v16.6.0</span>
</div>
<p></p><div class="api_stability api_stability_1"><a href="documentation.html#stability-index">稳定性: 1</a> - 实验</div><p></p>
<ul class="">
<li><code>val</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" rel="nofollow" class="type">&lt;boolean&gt;</a></li>
</ul>
<p>此函数启用或禁用对堆栈跟踪的 <a href="https://sourcemaps.info/spec.html" rel="nofollow">Source Map v3</a> 的支持。</p>
<p class="">它提供与使用命令行选项 <code>--enable-source-maps</code> 启动 Node.js 进程相同的功能。</p>
<p class="">只有在启用源映射后加载的 JavaScript 文件中的源映射才会被解析和加载。</p>
</section><section><h3><code>process.setUncaughtExceptionCaptureCallback(fn)</code><span><a class="mark" href="#processsetuncaughtexceptioncapturecallbackfn" id="processsetuncaughtexceptioncapturecallbackfn">#</a></span><a aria-hidden="true" class="legacy" id="process_process_setuncaughtexceptioncapturecallback_fn"></a></h3><p class="tip_wrap" data-show_trans="1" data-item_id="#processsetuncaughtexceptioncapturecallbackfn">
                <a href="process/process_setuncaughtexceptioncapturecallback_fn.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>新增于: v9.3.0</span>
</div>
<ul class="">
<li><code>fn</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" rel="nofollow" class="type">&lt;Function&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Null_type" rel="nofollow" class="type">&lt;null&gt;</a></li>
</ul>
<p><code>process.setUncaughtExceptionCaptureCallback()</code> 函数设置一个函数，当发生未捕获的异常时将调用该函数，该函数将接收异常值本身作为其第一个参数。</p>
<p class="">如果设置了这样的函数，则不会触发 <a href="#event-uncaughtexception"><code>'uncaughtException'</code></a> 事件。
如果 <code>--abort-on-uncaught-exception</code> 是从命令行传入的或通过 <a href="v8.html#v8setflagsfromstringflags"><code>v8.setFlagsFromString()</code></a> 设置的，则进程不会中止。
配置为对异常执行的操作（例如报告生成）也将受到影响</p>
<p class="">要取消捕获功能，可以使用 <code>process.setUncaughtExceptionCaptureCallback(null)</code>。
在设置另一个捕获函数时使用非 <code>null</code> 参数调用此方法将引发错误。</p>
<p class="">使用此函数与使用已弃用的 <a href="domain.html"><code>domain</code></a> 内置模块是相互排斥的。</p>
</section><section><h3><code>process.stderr</code><span><a class="mark" href="#processstderr" id="processstderr">#</a></span><a aria-hidden="true" class="legacy" id="process_process_stderr"></a></h3><p class="tip_wrap" data-show_trans="1" data-item_id="#processstderr">
                <a href="process/process_stderr.html" class="tip_trans">中英对照</a>
                </p>
<ul class="">
<li><a href="stream.html#stream" rel="nofollow" class="type">&lt;Stream&gt;</a></li>
</ul>
<p><code>process.stderr</code> 属性返回连接到 <code>stderr</code> (文件描述符 <code>2</code>) 的流。
它是 <a href="net.html#class-netsocket"><code>net.Socket</code></a>（也就是 <a href="stream.html#duplex-and-transform-streams">Duplex</a> 流），除非文件描述符 <code>2</code> 指向文件，在这种情况下它是 <a href="stream.html#writable-streams">Writable</a> 流。</p>
<p class=""><code>process.stderr</code> 在一些重要的方面不同于其他 Node.js 流。
有关更多信息，请参阅<a href="#a-note-on-process-io">进程 I/O 的注意事项</a>。</p>
<h4><code>process.stderr.fd</code><span><a class="mark" href="#processstderrfd" id="processstderrfd">#</a></span><a aria-hidden="true" class="legacy" id="process_process_stderr_fd"></a></h4><p class="tip_wrap" data-show_trans="1" data-item_id="#processstderrfd">
                <a href="process/process_stderr_fd.html" class="tip_trans">中英对照</a>
                </p>
<ul class="">
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;number&gt;</a></li>
</ul>
<p>该属性指的是 <code>process.stderr</code> 的底层文件描述符的值。
该值固定为 <code>2</code>。
在 <a href="worker_threads.html#class-worker"><code>Worker</code></a> 线程中，该字段不存在。</p>
</section><section><h3><code>process.stdin</code><span><a class="mark" href="#processstdin" id="processstdin">#</a></span><a aria-hidden="true" class="legacy" id="process_process_stdin"></a></h3><p class="tip_wrap" data-show_trans="1" data-item_id="#processstdin">
                <a href="process/process_stdin.html" class="tip_trans">中英对照</a>
                </p>
<ul class="">
<li><a href="stream.html#stream" rel="nofollow" class="type">&lt;Stream&gt;</a></li>
</ul>
<p><code>process.stdin</code> 属性返回连接到 <code>stdin</code> (文件描述符 <code>0</code>) 的流。
它是 <a href="net.html#class-netsocket"><code>net.Socket</code></a>（也就是 <a href="stream.html#duplex-and-transform-streams">Duplex</a> 流），除非文件描述符 <code>0</code> 指向文件，在这种情况下它是 <a href="stream.html#readable-streams">Readable</a> 流。</p>
<p class="">有关如何从 <code>stdin</code> 读取的详细信息，请参阅 <a href="stream.html#readablereadsize"><code>readable.read()</code></a>。</p>
<p class="">作为 <a href="stream.html#duplex-and-transform-streams">Duplex</a> 流，<code>process.stdin</code> 还可以在为 Node.js v0.10 之前编写的脚本兼容的“旧”模式下使用。
有关更多信息，请参阅<a href="stream.html#compatibility-with-older-nodejs-versions">流的兼容</a>。</p>
<p class="">在“旧”流模式下，<code>stdin</code> 流默认是暂停的，所以必须调用 <code>process.stdin.resume()</code> 来读取它。
另请注意，调用 <code>process.stdin.resume()</code> 本身会将流切换到“旧”模式。</p>
<h4><code>process.stdin.fd</code><span><a class="mark" href="#processstdinfd" id="processstdinfd">#</a></span><a aria-hidden="true" class="legacy" id="process_process_stdin_fd"></a></h4><p class="tip_wrap" data-show_trans="1" data-item_id="#processstdinfd">
                <a href="process/process_stdin_fd.html" class="tip_trans">中英对照</a>
                </p>
<ul class="">
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;number&gt;</a></li>
</ul>
<p>该属性指的是 <code>process.stdin</code> 的底层文件描述符的值。
该值固定为 <code>0</code>。
在 <a href="worker_threads.html#class-worker"><code>Worker</code></a> 线程中，该字段不存在。</p>
</section><section><h3><code>process.stdout</code><span><a class="mark" href="#processstdout" id="processstdout">#</a></span><a aria-hidden="true" class="legacy" id="process_process_stdout"></a></h3><p class="tip_wrap" data-show_trans="1" data-item_id="#processstdout">
                <a href="process/process_stdout.html" class="tip_trans">中英对照</a>
                </p>
<ul class="">
<li><a href="stream.html#stream" rel="nofollow" class="type">&lt;Stream&gt;</a></li>
</ul>
<p><code>process.stdout</code> 属性返回连接到 <code>stdout</code> (文件描述符 <code>1</code>) 的流。
它是 <a href="net.html#class-netsocket"><code>net.Socket</code></a>（也就是 <a href="stream.html#duplex-and-transform-streams">Duplex</a> 流），除非文件描述符 <code>1</code> 指向文件，在这种情况下它是 <a href="stream.html#writable-streams">Writable</a> 流。</p>
<p class="">例如，要将 <code>process.stdin</code> 复制到 <code>process.stdout</code>：</p>

<pre class="with-45-chars"><input class="js-flavor-selector" type="checkbox" checked="" aria-label="Show modern ES modules syntax"><code class="language-js mjs"><span class="hljs-keyword">import</span> { stdin, stdout } <span class="hljs-keyword">from</span> <span class="hljs-string">'process'</span>;

stdin.<span class="hljs-title function_">pipe</span>(stdout);</code><code class="language-js cjs"><span class="hljs-keyword">const</span> { stdin, stdout } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'process'</span>);

stdin.<span class="hljs-title function_">pipe</span>(stdout);</code></pre>
<p class=""><code>process.stdout</code> 在一些重要的方面不同于其他 Node.js 流。
有关更多信息，请参阅<a href="#a-note-on-process-io">进程 I/O 的注意事项</a>。</p>
<h4><code>process.stdout.fd</code><span><a class="mark" href="#processstdoutfd" id="processstdoutfd">#</a></span><a aria-hidden="true" class="legacy" id="process_process_stdout_fd"></a></h4><p class="tip_wrap" data-show_trans="1" data-item_id="#processstdoutfd">
                <a href="process/process_stdout_fd.html" class="tip_trans">中英对照</a>
                </p>
<ul class="">
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;number&gt;</a></li>
</ul>
<p>该属性指的是 <code>process.stdout</code> 的底层文件描述符的值。
该值固定为 <code>1</code>。
在 <a href="worker_threads.html#class-worker"><code>Worker</code></a> 线程中，该字段不存在。</p>
<h4>进程 I/O 的注意事项<span><a class="mark" href="#a-note-on-process-io" id="a-note-on-process-io">#</a></span><a aria-hidden="true" class="legacy" id="process_a_note_on_process_i_o"></a></h4><p class="tip_wrap" data-show_trans="1" data-item_id="#a-note-on-process-io">
                <a href="process/a_note_on_process_i_o.html" class="tip_trans">中英对照</a>
                </p>
<p><code>process.stdout</code> 和 <code>process.stderr</code> 在重要方面与其他 Node.js 流不同：</p>
<ol class="">
<li>它们分别由 <a href="console.html#consolelogdata-args"><code>console.log()</code></a> 和 <a href="console.html#consoleerrordata-args"><code>console.error()</code></a> 内部使用。</li>
<li>Writes may be synchronous depending on what the stream is connected to
and whether the system is Windows or POSIX:
<ul>
<li>文件：在 Windows 和 POSIX 上是_同步的_</li>
<li>TTY（终端）: 在 Windows 上是_异步的_，在 POSIX 上是_同步的_</li>
<li>管道（和套接字）: 在 Windows 上是_同步的_，在 POSIX 上是_异步的_</li>
</ul>
</li>
</ol>
<p class="">这些行为部分是出于历史原因，因为更改它们会导致向后不兼容，但某些用户也期望它们。</p>
<p class="">同步写入避免了诸如使用 <code>console.log()</code> 或 <code>console.error()</code> 写入的输出意外交错的问题，或者如果在异步写入完成之前调用 <code>process.exit()</code> 则根本不写入。
有关详细信息，请参阅 <a href="#processexitcode"><code>process.exit()</code></a>。</p>
<p class=""><em><strong>警告</strong></em>：同步写入会阻塞事件循环，直到写入完成。
在输出到文件的情况下，这可能几乎是瞬时的，但在系统负载高、接收端未读取管道或终端或文件系统速度较慢的情况下，事件循环可能经常被阻塞足够长，足以对性能产生严重的负面影响。
这在写入交互式终端会话时可能不是问题，但在对流程输出流进行生产日志记录时要特别小心。</p>
<p class="">要检查流是否连接到 <a href="tty.html#tty">TTY</a> 上下文，请检查 <code>isTTY</code> 属性。</p>
<p class="">例如：</p>
<pre class=""><code class="language-console"><span class="hljs-meta prompt_">$ </span><span class="language-bash">node -p <span class="hljs-string">"Boolean(process.stdin.isTTY)"</span></span>
true
<span class="hljs-meta prompt_">$ </span><span class="language-bash"><span class="hljs-built_in">echo</span> <span class="hljs-string">"foo"</span> | node -p <span class="hljs-string">"Boolean(process.stdin.isTTY)"</span></span>
false
<span class="hljs-meta prompt_">$ </span><span class="language-bash">node -p <span class="hljs-string">"Boolean(process.stdout.isTTY)"</span></span>
true
<span class="hljs-meta prompt_">$ </span><span class="language-bash">node -p <span class="hljs-string">"Boolean(process.stdout.isTTY)"</span> | <span class="hljs-built_in">cat</span></span>
false</code></pre>
<p class="">有关更多信息，请参阅 <a href="tty.html#tty">TTY</a> 文档。</p>
</section><section><h3><code>process.throwDeprecation</code><span><a class="mark" href="#processthrowdeprecation" id="processthrowdeprecation">#</a></span><a aria-hidden="true" class="legacy" id="process_process_throwdeprecation"></a></h3><p class="tip_wrap" data-show_trans="1" data-item_id="#processthrowdeprecation">
                <a href="process/process_throwdeprecation.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>新增于: v0.9.12</span>
</div>
<ul class="">
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" rel="nofollow" class="type">&lt;boolean&gt;</a></li>
</ul>
<p><code>process.throwDeprecation</code> 的初始值表示当前 Node.js 进程是否设置了 <code>--throw-deprecation</code> 标志。
<code>process.throwDeprecation</code> 是可变的，因此可能会在运行时更改弃用警告是否导致错误。
有关更多信息，请参阅 <a href="#event-warning"><code>'warning'</code> 事件</a>和 <a href="#processemitwarningwarning-type-code-ctor"><code>emitWarning()</code> 方法</a>的文档。</p>
<pre class=""><code class="language-console"><span class="hljs-meta prompt_">$ </span><span class="language-bash">node --throw-deprecation -p <span class="hljs-string">"process.throwDeprecation"</span></span>
true
<span class="hljs-meta prompt_">$ </span><span class="language-bash">node -p <span class="hljs-string">"process.throwDeprecation"</span></span>
undefined
<span class="hljs-meta prompt_">$ </span><span class="language-bash">node</span>
<span class="hljs-meta prompt_">&gt; </span><span class="language-bash">process.emitWarning(<span class="hljs-string">'test'</span>, <span class="hljs-string">'DeprecationWarning'</span>);</span>
undefined
<span class="hljs-meta prompt_">&gt; </span><span class="language-bash">(node:26598) DeprecationWarning: <span class="hljs-built_in">test</span></span>
<span class="hljs-meta prompt_">&gt; </span><span class="language-bash">process.throwDeprecation = <span class="hljs-literal">true</span>;</span>
true
<span class="hljs-meta prompt_">&gt; </span><span class="language-bash">process.emitWarning(<span class="hljs-string">'test'</span>, <span class="hljs-string">'DeprecationWarning'</span>);</span>
Thrown:
[DeprecationWarning: test] { name: 'DeprecationWarning' }</code></pre>
</section><section><h3><code>process.title</code><span><a class="mark" href="#processtitle" id="processtitle">#</a></span><a aria-hidden="true" class="legacy" id="process_process_title"></a></h3><p class="tip_wrap" data-show_trans="1" data-item_id="#processtitle">
                <a href="process/process_title.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>新增于: v0.1.104</span>
</div>
<ul class="">
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a></li>
</ul>
<p><code>process.title</code> 属性返回当前进程标题（即返回 <code>ps</code> 的当前值）。
为 <code>process.title</code> 分配一个新值会修改 <code>ps</code> 的当前值。</p>
<p class="">分配新值时，不同平台会对标题施加不同的最大长度限制。
通常这种限制是相当有限的。
例如，在 Linux 和 macOS 上，<code>process.title</code> 被限制为二进制名称的大小加上命令行参数的长度，因为设置 <code>process.title</code> 会覆盖进程的 <code>argv</code> 内存。
Node.js v0.8 通过覆盖 <code>environ</code> 内存允许更长的进程标题字符串，但这在某些（相当模糊的）情况下可能不安全和混乱。</p>
<p class="">将值分配给 <code>process.title</code> 可能不会在进程管理器应用程序（例如 macOS 活动监视器或 Windows 服务管理器）中产生准确的标签。</p>
</section><section><h3><code>process.traceDeprecation</code><span><a class="mark" href="#processtracedeprecation" id="processtracedeprecation">#</a></span><a aria-hidden="true" class="legacy" id="process_process_tracedeprecation"></a></h3><p class="tip_wrap" data-show_trans="1" data-item_id="#processtracedeprecation">
                <a href="process/process_tracedeprecation.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>新增于: v0.8.0</span>
</div>
<ul class="">
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" rel="nofollow" class="type">&lt;boolean&gt;</a></li>
</ul>
<p><code>process.traceDeprecation</code> 属性指示是否在当前 Node.js 进程上设置了 <code>--trace-deprecation</code> 标志。
有关此标志行为的更多信息，请参阅 <a href="#event-warning"><code>'warning'</code> 事件</a>和 <a href="#processemitwarningwarning-type-code-ctor"><code>emitWarning()</code> 方法</a>的文档。</p>
</section><section><h3><code>process.umask()</code><span><a class="mark" href="#processumask" id="processumask">#</a></span><a aria-hidden="true" class="legacy" id="process_process_umask"></a></h3><p class="tip_wrap" data-show_trans="1" data-item_id="#processumask">
                <a href="process/process_umask.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<details class="changelog"><summary>版本历史</summary>
<table>
<tbody><tr><th>版本</th><th>变更</th></tr>
<tr><td>v14.0.0, v12.19.0</td>
<td><p>不推荐使用不带参数调用 <code>process.umask()</code>。</p></td></tr>
<tr><td>v0.1.19</td>
<td><p><span>新增于: v0.1.19</span></p></td></tr>
</tbody></table>
</details>
</div>
<p></p><div class="api_stability api_stability_0"><a href="documentation.html#stability-index">稳定性: 0</a> - 弃用. 不带参数调用 process.umask() 会导致进程范围的 umask 被写入两次。 这会在线程之间引入竞争条件，并且是一个潜在的安全漏洞。 没有安全的、跨平台的替代 API。</div><p></p>
<p><code>process.umask()</code> 返回 Node.js 进程的文件模式创建掩码。
子进程从父进程继承掩码。</p>
</section><section><h3><code>process.umask(mask)</code><span><a class="mark" href="#processumaskmask" id="processumaskmask">#</a></span><a aria-hidden="true" class="legacy" id="process_process_umask_mask"></a></h3><p class="tip_wrap" data-show_trans="1" data-item_id="#processumaskmask">
                <a href="process/process_umask_mask.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>新增于: v0.1.19</span>
</div>
<ul class="">
<li><code>mask</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a></li>
</ul>
<p><code>process.umask(mask)</code> 设置 Node.js 进程的文件模式创建掩码。
子进程从父进程继承掩码。
返回上一个掩码。</p>

<pre class="with-37-chars"><input class="js-flavor-selector" type="checkbox" checked="" aria-label="Show modern ES modules syntax"><code class="language-js mjs"><span class="hljs-keyword">import</span> { umask } <span class="hljs-keyword">from</span> <span class="hljs-string">'process'</span>;

<span class="hljs-keyword">const</span> newmask = <span class="hljs-number">0o022</span>;
<span class="hljs-keyword">const</span> oldmask = <span class="hljs-title function_">umask</span>(newmask);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(
  <span class="hljs-string">`Changed umask from <span class="hljs-subst">${oldmask.toString(<span class="hljs-number">8</span>)}</span> to <span class="hljs-subst">${newmask.toString(<span class="hljs-number">8</span>)}</span>`</span>
);</code><code class="language-js cjs"><span class="hljs-keyword">const</span> { umask } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'process'</span>);

<span class="hljs-keyword">const</span> newmask = <span class="hljs-number">0o022</span>;
<span class="hljs-keyword">const</span> oldmask = <span class="hljs-title function_">umask</span>(newmask);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(
  <span class="hljs-string">`Changed umask from <span class="hljs-subst">${oldmask.toString(<span class="hljs-number">8</span>)}</span> to <span class="hljs-subst">${newmask.toString(<span class="hljs-number">8</span>)}</span>`</span>
);</code></pre>
<p class="">在 <a href="worker_threads.html#class-worker"><code>Worker</code></a> 线程中，<code>process.umask(mask)</code> 会抛出异常。</p>
</section><section><h3><code>process.uptime()</code><span><a class="mark" href="#processuptime" id="processuptime">#</a></span><a aria-hidden="true" class="legacy" id="process_process_uptime"></a></h3><p class="tip_wrap" data-show_trans="1" data-item_id="#processuptime">
                <a href="process/process_uptime.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>新增于: v0.5.0</span>
</div>
<ul class="">
<li>返回: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;number&gt;</a></li>
</ul>
<p><code>process.uptime()</code> 方法返回当前 Node.js 进程已经运行的秒数。</p>
<p class="">返回值包括几分之一秒。
使用 <code>Math.floor()</code> 获得整秒。</p>
</section><section><h3><code>process.version</code><span><a class="mark" href="#processversion" id="processversion">#</a></span><a aria-hidden="true" class="legacy" id="process_process_version"></a></h3><p class="tip_wrap" data-show_trans="1" data-item_id="#processversion">
                <a href="process/process_version.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>新增于: v0.1.3</span>
</div>
<ul class="">
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a></li>
</ul>
<p><code>process.version</code> 属性包含 Node.js 版本字符串。</p>

<pre class="with-39-chars"><input class="js-flavor-selector" type="checkbox" checked="" aria-label="Show modern ES modules syntax"><code class="language-js mjs"><span class="hljs-keyword">import</span> { version } <span class="hljs-keyword">from</span> <span class="hljs-string">'process'</span>;

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Version: <span class="hljs-subst">${version}</span>`</span>);
<span class="hljs-comment">// Version: v14.8.0</span></code><code class="language-js cjs"><span class="hljs-keyword">const</span> { version } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'process'</span>);

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Version: <span class="hljs-subst">${version}</span>`</span>);
<span class="hljs-comment">// Version: v14.8.0</span></code></pre>
<p class="">要获取不带 <em>v</em> 的版本字符串，则使用 <code>process.versions.node</code>。</p>
</section><section><h3><code>process.versions</code><span><a class="mark" href="#processversions" id="processversions">#</a></span><a aria-hidden="true" class="legacy" id="process_process_versions"></a></h3><p class="tip_wrap" data-show_trans="1" data-item_id="#processversions">
                <a href="process/process_versions.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<details class="changelog"><summary>版本历史</summary>
<table>
<tbody><tr><th>版本</th><th>变更</th></tr>
<tr><td>v9.0.0</td>
<td><p>属性 <code>v8</code> 现在包含 Node.js 特定的后缀。</p></td></tr>
<tr><td>v4.2.0</td>
<td><p>现在支持 <code>icu</code> 属性。</p></td></tr>
<tr><td>v0.2.0</td>
<td><p><span>新增于: v0.2.0</span></p></td></tr>
</tbody></table>
</details>
</div>
<ul class="">
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" rel="nofollow" class="type">&lt;Object&gt;</a></li>
</ul>
<p><code>process.versions</code> 属性返回对象，其中列出了 Node.js 的版本字符串及其依赖项。
<code>process.versions.modules</code> 表示当前的 ABI 版本，每当 C++ API 更改时都会增加。
Node.js 将拒绝加载针对不同模块 ABI 版本编译的模块。</p>

<pre class="with-40-chars"><input class="js-flavor-selector" type="checkbox" checked="" aria-label="Show modern ES modules syntax"><code class="language-js mjs"><span class="hljs-keyword">import</span> { versions } <span class="hljs-keyword">from</span> <span class="hljs-string">'process'</span>;

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(versions);</code><code class="language-js cjs"><span class="hljs-keyword">const</span> { versions } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'process'</span>);

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(versions);</code></pre>
<p class="">将生成类似于以下内容的对象：</p>
<pre class=""><code class="language-console">{ node: '11.13.0',
  v8: '7.0.276.38-node.18',
  uv: '1.27.0',
  zlib: '1.2.11',
  brotli: '1.0.7',
  ares: '1.15.0',
  modules: '67',
  nghttp2: '1.34.0',
  napi: '4',
  llhttp: '1.1.1',
  openssl: '1.1.1b',
  cldr: '34.0',
  icu: '63.1',
  tz: '2018e',
  unicode: '11.0' }</code></pre>
</section><section><h3>退出码<span><a class="mark" href="#exit-codes" id="exit-codes">#</a></span><a aria-hidden="true" class="legacy" id="process_exit_codes"></a></h3><p class="tip_wrap" data-show_trans="1" data-item_id="#exit-codes">
                <a href="process/exit_codes.html" class="tip_trans">中英对照</a>
                </p>
<p>当没有更多异步操作挂起时，Node.js 通常会以 <code>0</code> 状态代码退出。
在其他情况下使用以下状态代码：</p>
<ul class="">
<li><code>1</code> <strong>未捕获的致命异常</strong>：存在未捕获的异常，并且其没有被域或 <a href="#event-uncaughtexception"><code>'uncaughtException'</code></a> 事件句柄处理。</li>
<li><code>2</code>: 未使用（由 Bash 预留用于内置误用）</li>
<li><code>3</code> <strong>内部 JavaScript 解析错误</strong>：Node.js 引导过程中的内部 JavaScript 源代码导致解析错误。
这是极其罕见的，通常只能在 Node.js 本身的开发过程中发生。</li>
<li><code>4</code> <strong>内部 JavaScript 评估失败</strong>：Node.js 引导过程中的内部 JavaScript 源代码在评估时未能返回函数值。
这是极其罕见的，通常只能在 Node.js 本身的开发过程中发生。</li>
<li><code>5</code> <strong>致命错误</strong>：V8 中存在不可恢复的致命错误。
通常将打印带有前缀 <code>FATAL ERROR</code> 的消息到标准错误。</li>
<li><code>6</code> <strong>非函数的内部异常句柄</strong>：存在未捕获的异常，但内部致命异常句柄不知何故设置为非函数，无法调用。</li>
<li><code>7</code> <strong>内部异常句柄运行时失败</strong>：存在未捕获的异常，并且内部致命异常句柄函数本身在尝试处理时抛出错误。
例如，如果 <a href="#event-uncaughtexception"><code>'uncaughtException'</code></a> 或 <code>domain.on('error')</code> 句柄抛出错误，就会发生这种情况。</li>
<li><code>8</code>: 未使用。
在以前版本的 Node.js 中，退出码 8 有时表示未捕获的异常。</li>
<li><code>9</code> <strong>无效参数</strong>：指定了未知选项，或者提供了需要值的选项而没有值。</li>
<li><code>10</code> <strong>内部 JavaScript 运行时失败</strong>：Node.js 引导过程中的内部 JavaScript 源代码在调用引导函数时抛出错误。
这是极其罕见的，通常只能在 Node.js 本身的开发过程中发生。</li>
<li><code>12</code> <strong>无效的调试参数</strong>：设置了 <code>--inspect</code> 和/或 <code>--inspect-brk</code> 选项，但选择的端口号无效或不可用。</li>
<li><code>13</code> <strong>未完成的顶层等待</strong>：在顶层代码中的函数外使用了 <code>await</code>，但传入的 <code>Promise</code> 从未解决。</li>
<li><code>&gt;128</code> <strong>信号退出</strong>：如果 Node.js 收到致命的信号，例如 <code>SIGKILL</code> 或 <code>SIGHUP</code>，则其退出码将是 <code>128</code> 加上信号代码的值。
这是标准的 POSIX 实践，因为退出码被定义为 7 位整数，并且信号退出设置高位，然后包含信号代码的值。
例如，信号 <code>SIGABRT</code> 的值是 <code>6</code>，因此预期的退出码将是 <code>128</code> + <code>6</code> 或 <code>134</code>。</li>
</ul></section>
        <!-- API END -->
      </div>
    </div>
  </div>
  <div id="scroll_top" onclick="window.scrollTo(0,0);">返回顶部</div>
  
  <div id="wxpaycode_box" style="display: none;">
    <div id="wxpaycode_img_box">
      <div id="wxpaycode_vip_tips">
        因经营维护成本巨大，
        <br>为了能提供更高质量的中文文档，
        <br>即日起将只对VIP会员开放。
        <br>扫码成为VIP会员，会员费用为<span id="wxpaycode_vip_money">199</span>元/年
      </div>
      <img id="wxpaycode_img">
    </div>
  </div>
  
  



    <script src="../api/static/inject.js" defer=""></script></body></html>