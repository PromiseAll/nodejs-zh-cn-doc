<!DOCTYPE html><html lang="zh-CN"><head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width">
  <title>性能考量 | Node.js API 文档</title>
  
  

    <link href="../../api/static/inject.css" rel="stylesheet"><link rel="icon" sizes="32x32" type="image/png" href="../../api/static/favicon.png"></head>

<body class="alt apidoc" id="page_api_item">
  <div id="api-section-fs">
    <div id="content" class="clearfix">

      <div id="column1" data-id="__ID__" class="interior">
        <header>
          <h1>性能考量</h1>
          <div id="gtoc">
            <ul>
              <li>v16.16.0</li>
              <li>
                <a href="../fs.html#fs_performance_considerations" name="toc">返回上层文档</a>
              </li>

              <li class="picker-header">
    <a href="#">
        <span class="collapsed-arrow">►</span><span class="expanded-arrow">▼</span>
        其他版本
      </a>
    <div class="picker"><ol id="alt-docs">
    <li><a href="../../api/fs/performance_considerations.html">18.6.0</a></li><li><a href="">16.16.0</a></li><li><a href="../../api-v14/fs/performance_considerations.html">14.20.0</a></li>
</ol></div>
  </li>

              <li>
                <a href="http://api.nodejs.cn/" class="link-to-search">搜索</a>
              </li>
              <li>
                
                
              </li>

              <!-- <li>
                <a href="https://github.com/nodejscn/node-api-cn/edit/master/fs/#performance-considerations.md" rel="nofollow">提交修改</a>
              </li> -->
              <!-- <li>
                <a href="/gzh/">公众号</a>
              </li> -->
              <!-- <li class="biz_wrap" data-biz="api_item_nav">
                <a target="_blank" class="biz_title biz_link"></a>
              </li> -->
            </ul>
          </div>
          <hr>
        </header>

        <div id="apicontent">
          <div id="content_left"><p><code>fs.readFile()</code> 方法每次一块地异步读取文件内容到内存中，允许事件循环在每个块之间转换。
这允许读取操作对可能使用底层 libuv 线程池的其他活动的影响较小，但意味着将完整文件读入内存需要更长的时间。</p><p class="">额外的读取开销在不同的系统上可能会有很大差异，并且取决于正在读取的文件类型。
如果文件类型不是常规的文件（例如管道），并且 Node.js 无法确定实际的文件大小，则每次读取操作将加载 64 KB 的数据。
对于常规的文件，每次读取将处理 512 KB 的数据。</p><p class="">对于需要尽可能快地读取文件内容的应用程序，最好直接使用 <code>fs.read()</code> 并让应用程序代码管理读取文件本身的全部内容。</p><p class="">Node.js GitHub 问题 <a href="https://github.com/nodejs/node/issues/25741" rel="nofollow">#25741</a> 提供了有关不同 Node.js 版本中多个文件大小的 <code>fs.readFile()</code> 性能的详细信息和详细分析。</p></div>
          <div id="content_right"><p>The <code>fs.readFile()</code> method asynchronously reads the contents of a file into
memory one chunk at a time, allowing the event loop to turn between each chunk.
This allows the read operation to have less impact on other activity that may
be using the underlying libuv thread pool but means that it will take longer
to read a complete file into memory.</p><p>The additional read overhead can vary broadly on different systems and depends
on the type of file being read. If the file type is not a regular file (a pipe
for instance) and Node.js is unable to determine an actual file size, each read
operation will load on 64 KB of data. For regular files, each read will process
512 KB of data.</p><p>For applications that require as-fast-as-possible reading of file contents, it
is better to use <code>fs.read()</code> directly and for application code to manage
reading the full contents of the file itself.</p><p>The Node.js GitHub issue <a href="https://github.com/nodejs/node/issues/25741" rel="nofollow">#25741</a> provides more information and a detailed
analysis on the performance of <code>fs.readFile()</code> for multiple file sizes in
different Node.js versions.</p></div>
          <div></div>
        </div>

        <!-- <div id="biz_item" class="biz_wrap" data-biz="api_item">
          <a target="_blank" class="biz_link">
            <img class="biz_img" />
          </a>
        </div> -->
      </div>
    </div>
  </div>
  
  <div id="wxpaycode_box" style="display: none;">
    <div id="wxpaycode_img_box">
      <div id="wxpaycode_vip_tips">
        因经营维护成本巨大，
        <br>为了能提供更高质量的中文文档，
        <br>即日起将只对VIP会员开放。
        <br>扫码成为VIP会员，会员费用为<span id="wxpaycode_vip_money">199</span>元/年
      </div>
      <img id="wxpaycode_img">
    </div>
  </div>
  
  
  



    <script src="../../api/static/inject.js" defer=""></script></body></html>