<!DOCTYPE html><html lang="zh-CN"><head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width">
  <title>readline 逐行读取 | Node.js API 文档</title>
  
  
  

    <link href="../api/static/inject.css" rel="stylesheet"><link rel="icon" sizes="32x32" type="image/png" href="../api/static/favicon.png"></head>

<body class="alt apidoc api_page_readline" id="page_api">
  <div id="content" class="clearfix">
    <div id="column2" class="interior">
      <div id="intro" class="interior">
        

      </div>
      <!-- <ul>
          <li><a href="./" class="nav-documentation">v16.16.0</a></li>
        </ul> -->
      <!-- <div id="biz_nav" class="biz_wrap" data-biz="api_nav"><a target="_blank" class="biz_link"><img
            class="biz_img"></a>
      </div> -->
      <div class="line"></div>
      <ul>
<li><a href="documentation.html" class="nav-documentation" rel="nofollow">关于本文档</a></li>
<li><a href="synopsis.html" class="nav-synopsis" rel="nofollow">用法与示例</a></li>
</ul>
<hr class="line">
<ul>
<li><a href="assert.html" class="nav-assert" rel="nofollow">assert<span class="api_nav_cn_name">断言</span></a></li>
<li><a href="async_hooks.html" class="nav-async_hooks" rel="nofollow">async_hooks<span class="api_nav_cn_name">异步钩子</span></a></li>
<li><a href="async_context.html" class="nav-async_context" rel="nofollow"><span style="font-size:11px;">async_hooks/context</span><span class="api_nav_cn_name" style="font-size:12px;padding-left:1px;">异步上下文</span></a></li>
<li><a href="buffer.html" class="nav-buffer" rel="nofollow">buffer<span class="api_nav_cn_name">缓冲区</span></a></li>
<li><a href="addons.html" class="nav-addons" rel="nofollow">C++插件</a></li>
<li><a href="n-api.html" class="nav-n-api" rel="nofollow"><span style="font-size:14px;">C/C++插件(使用Node-API)</span></a></li>
<li><a href="embedding.html" class="nav-embedding" rel="nofollow">C++嵌入器</a></li>
<li><a href="child_process.html" class="nav-child_process" rel="nofollow">child_process<span class="api_nav_cn_name">子进程</span></a></li>
<li><a href="cluster.html" class="nav-cluster" rel="nofollow">cluster<span class="api_nav_cn_name">集群</span></a></li>
<li><a href="cli.html" class="nav-cli" rel="nofollow">CLI<span class="api_nav_cn_name">命令行</span></a></li>
<li><a href="console.html" class="nav-console" rel="nofollow">console<span class="api_nav_cn_name">控制台</span></a></li>
<li><a href="corepack.html" class="nav-corepack" rel="nofollow">Corepack<span class="api_nav_cn_name">核心包</span></a></li>
<li><a href="crypto.html" class="nav-crypto" rel="nofollow">crypto<span class="api_nav_cn_name">加密</span></a></li>
<li><a href="webcrypto.html" class="nav-webcrypto" rel="nofollow"><span style="font-size:14px;">crypto/webcrypto</span><span class="api_nav_cn_name" style="font-size:12px;padding-left:2px;">网络加密</span></a></li>
<li><a href="debugger.html" class="nav-debugger" rel="nofollow">debugger<span class="api_nav_cn_name">调试器</span></a></li>
<li><a href="deprecations.html" class="nav-deprecations" rel="nofollow">deprecation<span class="api_nav_cn_name">弃用</span></a></li>
<li><a href="dgram.html" class="nav-dgram" rel="nofollow">dgram<span class="api_nav_cn_name">数据报</span></a></li>
<li><a href="diagnostics_channel.html" class="nav-diagnostics_channel" rel="nofollow"><span style="font-size:14px;">diagnostics_channel</span><span class="api_nav_cn_name" style="font-size:12px;padding-left:2px;">诊断通道</span></a></li>
<li><a href="dns.html" class="nav-dns" rel="nofollow">dns<span class="api_nav_cn_name">域名服务器</span></a></li>
<li><a href="domain.html" class="nav-domain" rel="nofollow">domain<span class="api_nav_cn_name">域</span></a></li>
<li><a href="errors.html" class="nav-errors" rel="nofollow">Error<span class="api_nav_cn_name">错误</span></a></li>
<li><a href="events.html" class="nav-events" rel="nofollow">events<span class="api_nav_cn_name">事件触发器</span></a></li>
<li><a href="fs.html" class="nav-fs" rel="nofollow">fs<span class="api_nav_cn_name">文件系统</span></a></li>
<li><a href="globals.html" class="nav-globals" rel="nofollow">global<span class="api_nav_cn_name">全局变量</span></a></li>
<li><a href="http.html" class="nav-http" rel="nofollow">http<span class="api_nav_cn_name">超文本传输协议</span></a></li>
<li><a href="http2.html" class="nav-http2" rel="nofollow">http2<span class="api_nav_cn_name">超文本传输协议2.0</span></a></li>
<li><a href="https.html" class="nav-https" rel="nofollow">https<span class="api_nav_cn_name">安全超文本传输协议</span></a></li>
<li><a href="inspector.html" class="nav-inspector" rel="nofollow">inspector<span class="api_nav_cn_name">检查器</span></a></li>
<li><a href="intl.html" class="nav-intl" rel="nofollow">Intl<span class="api_nav_cn_name">国际化</span></a></li>
<li><a href="module.html" class="nav-module" rel="nofollow">module<span class="api_nav_cn_name">模块</span></a></li>
<li><a href="modules.html" class="nav-modules" rel="nofollow"><span style="font-size:14px;">module/cjs</span><span class="api_nav_cn_name" style="font-size:12px;padding-left:2px;">CommonJS模块</span></a></li>
<li><a href="esm.html" class="nav-esm" rel="nofollow"><span style="font-size:14px;">module/esm</span><span class="api_nav_cn_name" style="font-size:12px;padding-left:2px;">ECMAScript模块</span></a></li>
<li><a href="packages.html" class="nav-packages" rel="nofollow"><span style="font-size:14px;">module/package</span><span class="api_nav_cn_name" style="font-size:12px;padding-left:2px;">包模块</span></a></li>
<li><a href="net.html" class="nav-net" rel="nofollow">net<span class="api_nav_cn_name">网络</span></a></li>
<li><a href="os.html" class="nav-os" rel="nofollow">os<span class="api_nav_cn_name">操作系统</span></a></li>
<li><a href="path.html" class="nav-path" rel="nofollow">path<span class="api_nav_cn_name">路径</span></a></li>
<li><a href="perf_hooks.html" class="nav-perf_hooks" rel="nofollow">perf_hooks<span class="api_nav_cn_name">性能钩子</span></a></li>
<li><a href="policy.html" class="nav-policy" rel="nofollow">policy<span class="api_nav_cn_name">安全策略</span></a></li>
<li><a href="process.html" class="nav-process" rel="nofollow">process<span class="api_nav_cn_name">进程</span></a></li>
<li><a href="punycode.html" class="nav-punycode" rel="nofollow">punycode<span class="api_nav_cn_name">域名代码</span></a></li>
<li><a href="querystring.html" class="nav-querystring" rel="nofollow">querystring<span class="api_nav_cn_name">查询字符串</span></a></li>
<li><a href="" class="nav-readline active" rel="nofollow">readline<span class="api_nav_cn_name">逐行读取</span></a></li>
<li><a href="repl.html" class="nav-repl" rel="nofollow">repl<span class="api_nav_cn_name">交互式解释器</span></a></li>
<li><a href="report.html" class="nav-report" rel="nofollow">report<span class="api_nav_cn_name">诊断报告</span></a></li>
<li><a href="stream.html" class="nav-stream" rel="nofollow">stream<span class="api_nav_cn_name">流</span></a></li>
<li><a href="webstreams.html" class="nav-webstreams" rel="nofollow">stream/web<span class="api_nav_cn_name">网络流</span></a></li>
<li><a href="string_decoder.html" class="nav-string_decoder" rel="nofollow"><span style="font-size:15px;">string_decoder</span><span class="api_nav_cn_name" style="font-size:12px;padding-left:6px;">字符串解码器</span></a></li>
<li><a href="timers.html" class="nav-timers" rel="nofollow">timers<span class="api_nav_cn_name">定时器</span></a></li>
<li><a href="tls.html" class="nav-tls" rel="nofollow">tls<span class="api_nav_cn_name">安全传输层</span></a></li>
<li><a href="tracing.html" class="nav-tracing" rel="nofollow">trace_events<span class="api_nav_cn_name">跟踪事件</span></a></li>
<li><a href="tty.html" class="nav-tty" rel="nofollow">tty<span class="api_nav_cn_name">终端</span></a></li>
<li><a href="url.html" class="nav-url" rel="nofollow">url<span class="api_nav_cn_name">网址</span></a></li>
<li><a href="util.html" class="nav-util" rel="nofollow">util<span class="api_nav_cn_name">实用工具</span></a></li>
<li><a href="v8.html" class="nav-v8" rel="nofollow">v8<span class="api_nav_cn_name">引擎</span></a></li>
<li><a href="vm.html" class="nav-vm" rel="nofollow">vm<span class="api_nav_cn_name">虚拟机</span></a></li>
<li><a href="wasi.html" class="nav-wasi" rel="nofollow">wasi<span class="api_nav_cn_name">网络汇编系统接口</span></a></li>
<li><a href="worker_threads.html" class="nav-worker_threads" rel="nofollow">worker_threads<span class="api_nav_cn_name">工作线程</span></a></li>
<li><a href="zlib.html" class="nav-zlib" rel="nofollow">zlib<span class="api_nav_cn_name">压缩</span></a></li>
</ul>

    </div>

    <div id="column1" data-id="readline" class="interior">
      <header class="header">
        <div class="header-container">
          <h1>Node.js v16.16.0 文档</h1>
          <button class="theme-toggle-btn" id="theme-toggle-btn" title="Toggle dark mode/light mode" aria-label="Toggle dark mode/light mode" hidden="">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon dark-icon" height="24" width="24">
              <path fill="none" d="M0 0h24v24H0z"></path>
              <path d="M11.1 12.08c-2.33-4.51-.5-8.48.53-10.07C6.27 2.2 1.98 6.59 1.98 12c0 .14.02.28.02.42.62-.27 1.29-.42 2-.42 1.66 0 3.18.83 4.1 2.15A4.01 4.01 0 0111 18c0 1.52-.87 2.83-2.12 3.51.98.32 2.03.5 3.11.5 3.5 0 6.58-1.8 8.37-4.52-2.36.23-6.98-.97-9.26-5.41z"></path>
              <path d="M7 16h-.18C6.4 14.84 5.3 14 4 14c-1.66 0-3 1.34-3 3s1.34 3 3 3h3c1.1 0 2-.9 2-2s-.9-2-2-2z"></path>
            </svg>
            <svg xmlns="http://www.w3.org/2000/svg" class="icon light-icon" height="24" width="24">
              <path d="M0 0h24v24H0z" fill="none"></path>
              <path d="M6.76 4.84l-1.8-1.79-1.41 1.41 1.79 1.79 1.42-1.41zM4 10.5H1v2h3v-2zm9-9.95h-2V3.5h2V.55zm7.45 3.91l-1.41-1.41-1.79 1.79 1.41 1.41 1.79-1.79zm-3.21 13.7l1.79 1.8 1.41-1.41-1.8-1.79-1.4 1.4zM20 10.5v2h3v-2h-3zm-8-5c-3.31 0-6 2.69-6 6s2.69 6 6 6 6-2.69 6-6-2.69-6-6-6zm-1 16.95h2V19.5h-2v2.95zm-7.45-3.91l1.41 1.41 1.79-1.8-1.41-1.41-1.79 1.8z"></path>
            </svg>
          </button>
        </div>
        <div id="gtoc">
          <ul>
            <li class="pinned-header">Node.js 16.16.0</li>
            <!-- <li>
              <a href="./">返回文档首页</a>
            </li> -->
            
    <li class="picker-header" id="header_toc">
      <a href="#">
        <span class="collapsed-arrow">►</span><span class="expanded-arrow">▼</span>
        目录
      </a>

      <div class="picker"><div class="toc"><ul>
<li><span class="stability_2"><a href="#readline">readline 逐行读取</a></span>
<ul>
<li><a href="#class-interface"><code>Interface</code> 类</a>
<ul>
<li><a href="#event-close"><code>'close'</code> 事件</a></li>
<li><a href="#event-line"><code>'line'</code> 事件</a></li>
<li><a href="#event-history"><code>'history'</code> 事件</a></li>
<li><a href="#event-pause"><code>'pause'</code> 事件</a></li>
<li><a href="#event-resume"><code>'resume'</code> 事件</a></li>
<li><a href="#event-sigcont"><code>'SIGCONT'</code> 事件</a></li>
<li><a href="#event-sigint"><code>'SIGINT'</code> 事件</a></li>
<li><a href="#event-sigtstp"><code>'SIGTSTP'</code> 事件</a></li>
<li><a href="#rlclose"><code>rl.close()</code></a></li>
<li><a href="#rlpause"><code>rl.pause()</code></a></li>
<li><a href="#rlpromptpreservecursor"><code>rl.prompt([preserveCursor])</code></a></li>
<li><a href="#rlquestionquery-options-callback"><code>rl.question(query[, options], callback)</code></a></li>
<li><a href="#rlresume"><code>rl.resume()</code></a></li>
<li><a href="#rlsetpromptprompt"><code>rl.setPrompt(prompt)</code></a></li>
<li><a href="#rlgetprompt"><code>rl.getPrompt()</code></a></li>
<li><a href="#rlwritedata-key"><code>rl.write(data[, key])</code></a></li>
<li><a href="#rlsymbolasynciterator"><code>rl[Symbol.asyncIterator]()</code></a></li>
<li><a href="#rlline"><code>rl.line</code></a></li>
<li><a href="#rlcursor"><code>rl.cursor</code></a></li>
<li><a href="#rlgetcursorpos"><code>rl.getCursorPos()</code></a></li>
</ul>
</li>
<li><a href="#readlineclearlinestream-dir-callback"><code>readline.clearLine(stream, dir[, callback])</code></a></li>
<li><a href="#readlineclearscreendownstream-callback"><code>readline.clearScreenDown(stream[, callback])</code></a></li>
<li><a href="#readlinecreateinterfaceoptions"><code>readline.createInterface(options)</code></a>
<ul>
<li><a href="#use-of-the-completer-function">completer 函数的使用</a></li>
</ul>
</li>
<li><a href="#readlinecursortostream-x-y-callback"><code>readline.cursorTo(stream, x[, y][, callback])</code></a></li>
<li><a href="#readlineemitkeypresseventsstream-interface"><code>readline.emitKeypressEvents(stream[, interface])</code></a></li>
<li><a href="#readlinemovecursorstream-dx-dy-callback"><code>readline.moveCursor(stream, dx, dy[, callback])</code></a></li>
<li><a href="#example-tiny-cli">示例：微型 CLI</a></li>
<li><a href="#example-read-file-stream-line-by-line">示例：逐行读取文件流</a></li>
<li><a href="#tty-keybindings">TTY 快捷键</a></li>
</ul>
</li>
</ul></div></div>
    </li>
  
            
    <li class="picker-header">
      <a href="#">
        <span class="collapsed-arrow">►</span><span class="expanded-arrow">▼</span>
        索引
      </a>

      <div class="picker"><ul>
<li><a href="documentation.html" class="nav-documentation">关于本文档</a></li>
<li><a href="synopsis.html" class="nav-synopsis">用法与示例</a></li>

      <li>
        <a href="index.html">首页</a>
      </li>
    </ul>
  
<hr class="line">
<ul>
<li><a href="assert.html" class="nav-assert">assert 断言</a></li>
<li><a href="async_hooks.html" class="nav-async_hooks">async_hooks 异步钩子</a></li>
<li><a href="async_context.html" class="nav-async_context">async_hooks/context 异步上下文</a></li>
<li><a href="buffer.html" class="nav-buffer">buffer 缓冲区</a></li>
<li><a href="addons.html" class="nav-addons">C++插件</a></li>
<li><a href="n-api.html" class="nav-n-api">C/C++插件(使用Node-API)</a></li>
<li><a href="embedding.html" class="nav-embedding">C++嵌入器</a></li>
<li><a href="child_process.html" class="nav-child_process">child_process 子进程</a></li>
<li><a href="cluster.html" class="nav-cluster">cluster 集群</a></li>
<li><a href="cli.html" class="nav-cli">CLI 命令行</a></li>
<li><a href="console.html" class="nav-console">console 控制台</a></li>
<li><a href="corepack.html" class="nav-corepack">Corepack 核心包</a></li>
<li><a href="crypto.html" class="nav-crypto">crypto 加密</a></li>
<li><a href="webcrypto.html" class="nav-webcrypto">crypto/webcrypto 网络加密</a></li>
<li><a href="debugger.html" class="nav-debugger">debugger 调试器</a></li>
<li><a href="deprecations.html" class="nav-deprecations">deprecation 弃用</a></li>
<li><a href="dgram.html" class="nav-dgram">dgram 数据报</a></li>
<li><a href="diagnostics_channel.html" class="nav-diagnostics_channel">diagnostics_channel 诊断通道</a></li>
<li><a href="dns.html" class="nav-dns">dns 域名服务器</a></li>
<li><a href="domain.html" class="nav-domain">domain 域</a></li>
<li><a href="errors.html" class="nav-errors">Error 错误</a></li>
<li><a href="events.html" class="nav-events">events 事件触发器</a></li>
<li><a href="fs.html" class="nav-fs">fs 文件系统</a></li>
<li><a href="globals.html" class="nav-globals">global 全局变量</a></li>
<li><a href="http.html" class="nav-http">http 超文本传输协议</a></li>
<li><a href="http2.html" class="nav-http2">http2 超文本传输协议2.0</a></li>
<li><a href="https.html" class="nav-https">https 安全超文本传输协议</a></li>
<li><a href="inspector.html" class="nav-inspector">inspector 检查器</a></li>
<li><a href="intl.html" class="nav-intl">Intl 国际化</a></li>
<li><a href="module.html" class="nav-module">module 模块</a></li>
<li><a href="modules.html" class="nav-modules">module/cjs CommonJS模块</a></li>
<li><a href="esm.html" class="nav-esm">module/esm ECMAScript模块</a></li>
<li><a href="packages.html" class="nav-packages">module/package 包模块</a></li>
<li><a href="net.html" class="nav-net">net 网络</a></li>
<li><a href="os.html" class="nav-os">os 操作系统</a></li>
<li><a href="path.html" class="nav-path">path 路径</a></li>
<li><a href="perf_hooks.html" class="nav-perf_hooks">perf_hooks 性能钩子</a></li>
<li><a href="policy.html" class="nav-policy">policy 安全策略</a></li>
<li><a href="process.html" class="nav-process">process 进程</a></li>
<li><a href="punycode.html" class="nav-punycode">punycode 域名代码</a></li>
<li><a href="querystring.html" class="nav-querystring">querystring 查询字符串</a></li>
<li><a href="" class="nav-readline active">readline 逐行读取</a></li>
<li><a href="repl.html" class="nav-repl">repl 交互式解释器</a></li>
<li><a href="report.html" class="nav-report">report 诊断报告</a></li>
<li><a href="stream.html" class="nav-stream">stream 流</a></li>
<li><a href="webstreams.html" class="nav-webstreams">stream/web 网络流</a></li>
<li><a href="string_decoder.html" class="nav-string_decoder">string_decoder 字符串解码器</a></li>
<li><a href="timers.html" class="nav-timers">timers 定时器</a></li>
<li><a href="tls.html" class="nav-tls">tls 安全传输层</a></li>
<li><a href="tracing.html" class="nav-tracing">trace_events 跟踪事件</a></li>
<li><a href="tty.html" class="nav-tty">tty 终端</a></li>
<li><a href="url.html" class="nav-url">url 网址</a></li>
<li><a href="util.html" class="nav-util">util 实用工具</a></li>
<li><a href="v8.html" class="nav-v8">v8 引擎</a></li>
<li><a href="vm.html" class="nav-vm">vm 虚拟机</a></li>
<li><a href="wasi.html" class="nav-wasi">wasi 网络汇编系统接口</a></li>
<li><a href="worker_threads.html" class="nav-worker_threads">worker_threads 工作线程</a></li>
<li><a href="zlib.html" class="nav-zlib">zlib 压缩</a></li>
</ul></div>
    </li>
  
            <li class="picker-header">
    <a href="#">
        <span class="collapsed-arrow">►</span><span class="expanded-arrow">▼</span>
        其他版本
      </a>
    <div class="picker"><ol id="alt-docs">
    <li><a href="../api/readline.html">18.6.0</a></li><li><a href="">16.16.0</a></li><li><a href="../api-v14/readline.html">14.20.0</a></li>
</ol></div>
  </li>
            <li>
              <a href="http://api.nodejs.cn/" class="link-to-search">搜索</a>
            </li>
            <li>
              
              
            </li>
          </ul>
        </div>
        <hr>
      </header>

      <details id="toc" open=""><summary>目录</summary><ul>
<li><span class="stability_2"><a href="#readline">readline 逐行读取</a></span>
<ul>
<li><a href="#class-interface"><code>Interface</code> 类</a>
<ul>
<li><a href="#event-close"><code>'close'</code> 事件</a></li>
<li><a href="#event-line"><code>'line'</code> 事件</a></li>
<li><a href="#event-history"><code>'history'</code> 事件</a></li>
<li><a href="#event-pause"><code>'pause'</code> 事件</a></li>
<li><a href="#event-resume"><code>'resume'</code> 事件</a></li>
<li><a href="#event-sigcont"><code>'SIGCONT'</code> 事件</a></li>
<li><a href="#event-sigint"><code>'SIGINT'</code> 事件</a></li>
<li><a href="#event-sigtstp"><code>'SIGTSTP'</code> 事件</a></li>
<li><a href="#rlclose"><code>rl.close()</code></a></li>
<li><a href="#rlpause"><code>rl.pause()</code></a></li>
<li><a href="#rlpromptpreservecursor"><code>rl.prompt([preserveCursor])</code></a></li>
<li><a href="#rlquestionquery-options-callback"><code>rl.question(query[, options], callback)</code></a></li>
<li><a href="#rlresume"><code>rl.resume()</code></a></li>
<li><a href="#rlsetpromptprompt"><code>rl.setPrompt(prompt)</code></a></li>
<li><a href="#rlgetprompt"><code>rl.getPrompt()</code></a></li>
<li><a href="#rlwritedata-key"><code>rl.write(data[, key])</code></a></li>
<li><a href="#rlsymbolasynciterator"><code>rl[Symbol.asyncIterator]()</code></a></li>
<li><a href="#rlline"><code>rl.line</code></a></li>
<li><a href="#rlcursor"><code>rl.cursor</code></a></li>
<li><a href="#rlgetcursorpos"><code>rl.getCursorPos()</code></a></li>
</ul>
</li>
<li><a href="#readlineclearlinestream-dir-callback"><code>readline.clearLine(stream, dir[, callback])</code></a></li>
<li><a href="#readlineclearscreendownstream-callback"><code>readline.clearScreenDown(stream[, callback])</code></a></li>
<li><a href="#readlinecreateinterfaceoptions"><code>readline.createInterface(options)</code></a>
<ul>
<li><a href="#use-of-the-completer-function">completer 函数的使用</a></li>
</ul>
</li>
<li><a href="#readlinecursortostream-x-y-callback"><code>readline.cursorTo(stream, x[, y][, callback])</code></a></li>
<li><a href="#readlineemitkeypresseventsstream-interface"><code>readline.emitKeypressEvents(stream[, interface])</code></a></li>
<li><a href="#readlinemovecursorstream-dx-dy-callback"><code>readline.moveCursor(stream, dx, dy[, callback])</code></a></li>
<li><a href="#example-tiny-cli">示例：微型 CLI</a></li>
<li><a href="#example-read-file-stream-line-by-line">示例：逐行读取文件流</a></li>
<li><a href="#tty-keybindings">TTY 快捷键</a></li>
</ul>
</li>
</ul></details>

      <div id="apicontent">
        <h2>readline 逐行读取<span><a class="mark" href="#readline" id="readline">#</a></span><a aria-hidden="true" class="legacy" id="readline_readline"></a></h2><p class="tip_wrap" data-show_trans="1" data-item_id="">
                <a href="readline/readline.html" class="tip_trans">中英对照</a>
                </p>
<!--introduced_in=v0.10.0-->
<p></p><div class="api_stability api_stability_2"><a href="documentation.html#stability-index">稳定性: 2</a> - 稳定</div><p></p>
<p class=""><strong>源代码:</strong> <a rel="nofollow" href="https://github.com/nodejs/node/blob/v16.16.0/lib/readline.js">lib/readline.js</a></p>
<p><code>readline</code> 模块提供了用于从<a href="stream.html#readable-streams">可读</a>流（例如 <a href="process.html#processstdin"><code>process.stdin</code></a>）每次一行地读取数据的接口。
可以使用以下方式访问它：</p>
<pre class=""><code class="language-js"><span class="hljs-keyword">const</span> readline = <span class="hljs-built_in">require</span>(<span class="hljs-string">'readline'</span>);</code></pre>
<p class="">下面的简单示例阐明了 <code>readline</code> 模块的基本用法。</p>
<pre class=""><code class="language-js"><span class="hljs-keyword">const</span> readline = <span class="hljs-built_in">require</span>(<span class="hljs-string">'readline'</span>);

<span class="hljs-keyword">const</span> rl = readline.<span class="hljs-title function_">createInterface</span>({
  <span class="hljs-attr">input</span>: process.<span class="hljs-property">stdin</span>,
  <span class="hljs-attr">output</span>: process.<span class="hljs-property">stdout</span>
});

rl.<span class="hljs-title function_">question</span>(<span class="hljs-string">'What do you think of Node.js? '</span>, <span class="hljs-function">(<span class="hljs-params">answer</span>) =&gt;</span> {
  <span class="hljs-comment">// TODO：记录答案到数据库中</span>
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Thank you for your valuable feedback: <span class="hljs-subst">${answer}</span>`</span>);

  rl.<span class="hljs-title function_">close</span>();
});</code></pre>
<p class="">一旦调用此代码，则 Node.js 应用程序将不会终止，直到 <code>readline.Interface</code> 关闭，因为接口在 <code>input</code> 流上等待接收数据。</p>
<section><h3><code>Interface</code> 类<span><a class="mark" href="#class-interface" id="class-interface">#</a></span><a aria-hidden="true" class="legacy" id="readline_class_interface"></a></h3><p class="tip_wrap" data-show_trans="1" data-item_id="#class-interface">
                <a href="readline/class_interface.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>新增于: v0.1.104</span>
</div>
<ul class="">
<li>继承自: <a href="events.html#class-eventemitter" rel="nofollow" class="type">&lt;EventEmitter&gt;</a></li>
</ul>
<p><code>readline.Interface</code> 类的实例是使用 <code>readline.createInterface()</code> 方法构造的。
每个实例都与单个 <code>input</code> <a href="stream.html#readable-streams">可读</a>流和单个 <code>output</code> <a href="stream.html#writable-streams">可写</a>流相关联。
<code>output</code> 流用于打印到达并从 <code>input</code> 流中读取的用户输入的提示。</p>
<h4><code>'close'</code> 事件<span><a class="mark" href="#event-close" id="event-close">#</a></span><a aria-hidden="true" class="legacy" id="readline_event_close"></a></h4><p class="tip_wrap" data-show_trans="1" data-item_id="#event-close">
                <a href="readline/event_close.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>新增于: v0.1.98</span>
</div>
<p>发生以下情况之一时会触发 <code>'close'</code> 事件：</p>
<ul class="">
<li><code>rl.close()</code> 方法被调用，<code>readline.Interface</code> 实例放弃了对 <code>input</code> 和 <code>output</code> 流的控制；</li>
<li><code>input</code> 流接收到它的 <code>'end'</code> 事件；</li>
<li><code>input</code> 流接收 <kbd>Ctrl</kbd>+<kbd>D</kbd> 以发出传输结束（EOT）的信号；</li>
<li><code>input</code> 流接收 <kbd>Ctrl</kbd>+<kbd>C</kbd> 以发出 <code>SIGINT</code> 信号，并且在 <code>readline.Interface</code> 实例上没有注册 <code>'SIGINT'</code> 事件监听器。</li>
</ul>
<p class="">调用监听器函数时不传入任何参数。</p>
<p class="">一旦触发 <code>'close'</code> 事件，则 <code>readline.Interface</code> 实例就完成了。</p>
<h4><code>'line'</code> 事件<span><a class="mark" href="#event-line" id="event-line">#</a></span><a aria-hidden="true" class="legacy" id="readline_event_line"></a></h4><p class="tip_wrap" data-show_trans="1" data-item_id="#event-line">
                <a href="readline/event_line.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>新增于: v0.1.98</span>
</div>
<p>每当 <code>input</code> 流接收到行尾输入（<code>\n</code>、<code>\r</code> 或 <code>\r\n</code>）时，则会触发 <code>'line'</code> 事件。
这通常发生在用户按下 <kbd>回车</kbd> 或 <kbd>返回</kbd> 时。</p>
<p class="">如果从流中读取了新数据并且该流在没有最终行尾标记的情况下结束，也会触发 <code>'line'</code> 事件。</p>
<p class="">使用包含单行接收输入的字符串调用监听器函数。</p>
<pre class=""><code class="language-js">rl.<span class="hljs-title function_">on</span>(<span class="hljs-string">'line'</span>, <span class="hljs-function">(<span class="hljs-params">input</span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Received: <span class="hljs-subst">${input}</span>`</span>);
});</code></pre>
<h4><code>'history'</code> 事件<span><a class="mark" href="#event-history" id="event-history">#</a></span><a aria-hidden="true" class="legacy" id="readline_event_history"></a></h4><p class="tip_wrap" data-show_trans="1" data-item_id="#event-history">
                <a href="readline/event_history.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>新增于: v15.8.0</span>
</div>
<p>每当历史数组发生更改时，则会触发 <code>'history'</code> 事件。</p>
<p class="">使用包含历史数组的数组调用监听器函数。
它将反映由于 <code>historySize</code> 和 <code>removeHistoryDuplicates</code> 引起的所有更改、添加的行和删除的行。</p>
<p class="">主要目的是允许监听器保留历史记录。
监听器也可以更改历史对象。
这可能有助于防止将某些行添加到历史记录中，例如密码。</p>
<pre class=""><code class="language-js">rl.<span class="hljs-title function_">on</span>(<span class="hljs-string">'history'</span>, <span class="hljs-function">(<span class="hljs-params">history</span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Received: <span class="hljs-subst">${history}</span>`</span>);
});</code></pre>
<h4><code>'pause'</code> 事件<span><a class="mark" href="#event-pause" id="event-pause">#</a></span><a aria-hidden="true" class="legacy" id="readline_event_pause"></a></h4><p class="tip_wrap" data-show_trans="1" data-item_id="#event-pause">
                <a href="readline/event_pause.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>新增于: v0.7.5</span>
</div>
<p>发生以下情况之一时会触发 <code>'pause'</code> 事件：</p>
<ul class="">
<li><code>input</code> 流已暂停。</li>
<li><code>input</code> 流没有暂停并接收 <code>'SIGCONT'</code> 事件。
（参见事件 <a href="#event-sigtstp"><code>'SIGTSTP'</code></a> 和 <a href="#event-sigcont"><code>'SIGCONT'</code></a>。）</li>
</ul>
<p class="">调用监听器函数时不传入任何参数。</p>
<pre class=""><code class="language-js">rl.<span class="hljs-title function_">on</span>(<span class="hljs-string">'pause'</span>, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Readline paused.'</span>);
});</code></pre>
<h4><code>'resume'</code> 事件<span><a class="mark" href="#event-resume" id="event-resume">#</a></span><a aria-hidden="true" class="legacy" id="readline_event_resume"></a></h4><p class="tip_wrap" data-show_trans="1" data-item_id="#event-resume">
                <a href="readline/event_resume.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>新增于: v0.7.5</span>
</div>
<p>每当 <code>input</code> 流恢复时，则会触发 <code>'resume'</code> 事件。</p>
<p class="">调用监听器函数时不传入任何参数。</p>
<pre class=""><code class="language-js">rl.<span class="hljs-title function_">on</span>(<span class="hljs-string">'resume'</span>, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Readline resumed.'</span>);
});</code></pre>
<h4><code>'SIGCONT'</code> 事件<span><a class="mark" href="#event-sigcont" id="event-sigcont">#</a></span><a aria-hidden="true" class="legacy" id="readline_event_sigcont"></a></h4><p class="tip_wrap" data-show_trans="1" data-item_id="#event-sigcont">
                <a href="readline/event_sigcont.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>新增于: v0.7.5</span>
</div>
<p>当之前使用 <kbd>Ctrl</kbd>+<kbd>Z</kbd>（即 <code>SIGTSTP</code>）移动到后台的 Node.js 进程然后使用 <a href="http://man7.org/linux/man-pages/man1/fg.1p.html" rel="nofollow"><code>fg(1p)</code></a> 返回到前台时，则会触发 <code>'SIGCONT'</code> 事件。</p>
<p class="">如果 <code>input</code> 流在 <code>SIGTSTP</code> 请求之前暂停，则不会触发此事件。</p>
<p class="">调用监听器函数时不传入任何参数。</p>
<pre class=""><code class="language-js">rl.<span class="hljs-title function_">on</span>(<span class="hljs-string">'SIGCONT'</span>, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-comment">// `prompt` 会自动恢复流</span>
  rl.<span class="hljs-title function_">prompt</span>();
});</code></pre>
<p class="">Windows 不支持 <code>'SIGCONT'</code> 事件。</p>
<h4><code>'SIGINT'</code> 事件<span><a class="mark" href="#event-sigint" id="event-sigint">#</a></span><a aria-hidden="true" class="legacy" id="readline_event_sigint"></a></h4><p class="tip_wrap" data-show_trans="1" data-item_id="#event-sigint">
                <a href="readline/event_sigint.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>新增于: v0.3.0</span>
</div>
<p>每当 <code>input</code> 流接收到 <kbd>Ctrl+C</kbd> 输入（通常称为 <code>SIGINT</code>）时，则会触发 <code>'SIGINT'</code> 事件。
如果在 <code>input</code> 流接收到 <code>SIGINT</code> 时没有注册 <code>'SIGINT'</code> 事件监听器，则将触发 <code>'pause'</code> 事件。</p>
<p class="">调用监听器函数时不传入任何参数。</p>
<pre class=""><code class="language-js">rl.<span class="hljs-title function_">on</span>(<span class="hljs-string">'SIGINT'</span>, <span class="hljs-function">() =&gt;</span> {
  rl.<span class="hljs-title function_">question</span>(<span class="hljs-string">'Are you sure you want to exit? '</span>, <span class="hljs-function">(<span class="hljs-params">answer</span>) =&gt;</span> {
    <span class="hljs-keyword">if</span> (answer.<span class="hljs-title function_">match</span>(<span class="hljs-regexp">/^y(es)?$/i</span>)) rl.<span class="hljs-title function_">pause</span>();
  });
});</code></pre>
<h4><code>'SIGTSTP'</code> 事件<span><a class="mark" href="#event-sigtstp" id="event-sigtstp">#</a></span><a aria-hidden="true" class="legacy" id="readline_event_sigtstp"></a></h4><p class="tip_wrap" data-show_trans="1" data-item_id="#event-sigtstp">
                <a href="readline/event_sigtstp.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>新增于: v0.7.5</span>
</div>
<p>当 <code>input</code> 流接收到 <kbd>Ctrl</kbd>+<kbd>Z</kbd> 输入（通常称为 <code>SIGTSTP</code>）时，则会触发 <code>'SIGTSTP'</code> 事件。
如果 <code>input</code> 流接收到 <code>SIGTSTP</code> 时没有注册 <code>'SIGTSTP'</code> 事件监听器，则 Node.js 进程将被发送到后台。</p>
<p class="">当使用 <a href="http://man7.org/linux/man-pages/man1/fg.1p.html" rel="nofollow"><code>fg(1p)</code></a> 恢复程序时，则将触发 <code>'pause'</code> 和 <code>'SIGCONT'</code> 事件。
这些可用于恢复 <code>input</code> 流。</p>
<p class="">如果 <code>input</code> 在进程发送到后台之前暂停，则不会触发 <code>'pause'</code> 和 <code>'SIGCONT'</code> 事件。</p>
<p class="">调用监听器函数时不传入任何参数。</p>
<pre class=""><code class="language-js">rl.<span class="hljs-title function_">on</span>(<span class="hljs-string">'SIGTSTP'</span>, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-comment">// 这将覆盖 SIGTSTP </span>
  <span class="hljs-comment">// 并且阻止程序进入后台。</span>
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Caught SIGTSTP.'</span>);
});</code></pre>
<p class="">Windows 不支持 <code>'SIGTSTP'</code> 事件。</p>
<h4><code>rl.close()</code><span><a class="mark" href="#rlclose" id="rlclose">#</a></span><a aria-hidden="true" class="legacy" id="readline_rl_close"></a></h4><p class="tip_wrap" data-show_trans="1" data-item_id="#rlclose">
                <a href="readline/rl_close.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>新增于: v0.1.98</span>
</div>
<p><code>rl.close()</code> 方法关闭 <code>readline.Interface</code> 实例并放弃对 <code>input</code> 和 <code>output</code> 流的控制。
当调用时，将触发 <code>'close'</code> 事件。</p>
<p class="">调用 <code>rl.close()</code> 不会立即阻止其他由 <code>readline.Interface</code> 实例触发的事件（包括 <code>'line'</code>）。</p>
<h4><code>rl.pause()</code><span><a class="mark" href="#rlpause" id="rlpause">#</a></span><a aria-hidden="true" class="legacy" id="readline_rl_pause"></a></h4><p class="tip_wrap" data-show_trans="1" data-item_id="#rlpause">
                <a href="readline/rl_pause.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>新增于: v0.3.4</span>
</div>
<p><code>rl.pause()</code> 方法暂停 <code>input</code> 流，允许它稍后在必要时恢复。</p>
<p class="">调用 <code>rl.pause()</code> 不会立即暂停其他由 <code>readline.Interface</code> 实例触发的事件（包括 <code>'line'</code>）。</p>
<h4><code>rl.prompt([preserveCursor])</code><span><a class="mark" href="#rlpromptpreservecursor" id="rlpromptpreservecursor">#</a></span><a aria-hidden="true" class="legacy" id="readline_rl_prompt_preservecursor"></a></h4><p class="tip_wrap" data-show_trans="1" data-item_id="#rlpromptpreservecursor">
                <a href="readline/rl_prompt_preservecursor.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>新增于: v0.1.98</span>
</div>
<ul class="">
<li><code>preserveCursor</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" rel="nofollow" class="type">&lt;boolean&gt;</a> 如果为 <code>true</code>，则防止光标位置重置为 <code>0</code>。</li>
</ul>
<p><code>rl.prompt()</code> 方法将配置为 <code>prompt</code> 的 <code>readline.Interface</code> 实例写入 <code>output</code> 中的新行，以便为用户提供用于提供输入的新位置。</p>
<p class="">当调用时，如果 <code>rl.prompt()</code> 流已暂停，则 <code>rl.prompt()</code> 将恢复 <code>input</code> 流。</p>
<p class="">如果 <code>readline.Interface</code> 是在 <code>output</code> 设置为 <code>null</code> 或 <code>undefined</code> 的情况下创建的，则不会写入提示。</p>
<h4><code>rl.question(query[, options], callback)</code><span><a class="mark" href="#rlquestionquery-options-callback" id="rlquestionquery-options-callback">#</a></span><a aria-hidden="true" class="legacy" id="readline_rl_question_query_options_callback"></a></h4><p class="tip_wrap" data-show_trans="1" data-item_id="#rlquestionquery-options-callback">
                <a href="readline/rl_question_query_options_callback.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>新增于: v0.3.3</span>
</div>
<ul class="">
<li><code>query</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> 要写入 <code>output</code> 的语句或查询，位于提示之前。</li>
<li><code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" rel="nofollow" class="type">&lt;Object&gt;</a>
<ul>
<li><code>signal</code> <a href="globals.html#class-abortsignal" rel="nofollow" class="type">&lt;AbortSignal&gt;</a> 可选择允许使用 <code>AbortController</code> 取消 <code>question()</code>。</li>
</ul>
</li>
<li><code>callback</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" rel="nofollow" class="type">&lt;Function&gt;</a> 使用用户输入调用的回调函数以响应 <code>query</code>。</li>
</ul>
<p><code>rl.question()</code> 方法通过将 <code>query</code> 写入 <code>output</code> 来显示 <code>query</code>，等待在 <code>input</code> 上提供用户输入，然后调用 <code>callback</code> 函数，将提供的输入作为第一个参数传入。</p>
<p class="">当调用时，如果 <code>rl.question()</code> 流已暂停，则 <code>rl.question()</code> 将恢复 <code>input</code> 流。</p>
<p class="">如果 <code>readline.Interface</code> 是在 <code>output</code> 设置为 <code>null</code> 或 <code>undefined</code> 的情况下创建的，则不会写入 <code>query</code>。</p>
<p class="">传给 <code>rl.question()</code> 的 <code>callback</code> 函数不遵循接受 <code>Error</code> 对象或 <code>null</code> 作为第一个参数的典型模式。
以提供的答案作为唯一参数调用 <code>callback</code>。</p>
<p class="">用法示例：</p>
<pre class=""><code class="language-js">rl.<span class="hljs-title function_">question</span>(<span class="hljs-string">'What is your favorite food? '</span>, <span class="hljs-function">(<span class="hljs-params">answer</span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Oh, so your favorite food is <span class="hljs-subst">${answer}</span>`</span>);
});</code></pre>
<p class="">使用 <code>AbortController</code> 取消问题。</p>
<pre class=""><code class="language-js"><span class="hljs-keyword">const</span> ac = <span class="hljs-keyword">new</span> <span class="hljs-title class_">AbortController</span>();
<span class="hljs-keyword">const</span> signal = ac.<span class="hljs-property">signal</span>;

rl.<span class="hljs-title function_">question</span>(<span class="hljs-string">'What is your favorite food? '</span>, { signal }, <span class="hljs-function">(<span class="hljs-params">answer</span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Oh, so your favorite food is <span class="hljs-subst">${answer}</span>`</span>);
});

signal.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'abort'</span>, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'The food question timed out'</span>);
}, { <span class="hljs-attr">once</span>: <span class="hljs-literal">true</span> });

<span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> ac.<span class="hljs-title function_">abort</span>(), <span class="hljs-number">10000</span>);</code></pre>
<p class="">如果此方法被调用为 util.promisify() 的版本，则它会返回使用答案履行的 Promise。
如果使用 <code>AbortController</code> 取消问题，则它将使用 <code>AbortError</code> 拒绝。</p>
<pre class=""><code class="language-js"><span class="hljs-keyword">const</span> util = <span class="hljs-built_in">require</span>(<span class="hljs-string">'util'</span>);
<span class="hljs-keyword">const</span> question = util.<span class="hljs-title function_">promisify</span>(rl.<span class="hljs-property">question</span>).<span class="hljs-title function_">bind</span>(rl);

<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">questionExample</span>(<span class="hljs-params"></span>) {
  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">const</span> answer = <span class="hljs-keyword">await</span> <span class="hljs-title function_">question</span>(<span class="hljs-string">'What is you favorite food? '</span>);
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Oh, so your favorite food is <span class="hljs-subst">${answer}</span>`</span>);
  } <span class="hljs-keyword">catch</span> (err) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'Question rejected'</span>, err);
  }
}
<span class="hljs-title function_">questionExample</span>();</code></pre>
<h4><code>rl.resume()</code><span><a class="mark" href="#rlresume" id="rlresume">#</a></span><a aria-hidden="true" class="legacy" id="readline_rl_resume"></a></h4><p class="tip_wrap" data-show_trans="1" data-item_id="#rlresume">
                <a href="readline/rl_resume.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>新增于: v0.3.4</span>
</div>
<p>如果 <code>input</code> 流已暂停，则 <code>rl.resume()</code> 方法会恢复该流。</p>
<h4><code>rl.setPrompt(prompt)</code><span><a class="mark" href="#rlsetpromptprompt" id="rlsetpromptprompt">#</a></span><a aria-hidden="true" class="legacy" id="readline_rl_setprompt_prompt"></a></h4><p class="tip_wrap" data-show_trans="1" data-item_id="#rlsetpromptprompt">
                <a href="readline/rl_setprompt_prompt.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>新增于: v0.1.98</span>
</div>
<ul class="">
<li><code>prompt</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a></li>
</ul>
<p><code>rl.setPrompt()</code> 方法设置了在调用 <code>rl.prompt()</code> 时将写入 <code>output</code> 的提示。</p>
<h4><code>rl.getPrompt()</code><span><a class="mark" href="#rlgetprompt" id="rlgetprompt">#</a></span><a aria-hidden="true" class="legacy" id="readline_rl_getprompt"></a></h4><p class="tip_wrap" data-show_trans="1" data-item_id="#rlgetprompt">
                <a href="readline/rl_getprompt.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>新增于: v15.3.0</span>
</div>
<ul class="">
<li>返回: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> 当前的提示字符串</li>
</ul>
<p><code>rl.getPrompt()</code> 方法返回 <code>rl.prompt()</code> 使用的当前提示。</p>
<h4><code>rl.write(data[, key])</code><span><a class="mark" href="#rlwritedata-key" id="rlwritedata-key">#</a></span><a aria-hidden="true" class="legacy" id="readline_rl_write_data_key"></a></h4><p class="tip_wrap" data-show_trans="1" data-item_id="#rlwritedata-key">
                <a href="readline/rl_write_data_key.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>新增于: v0.1.98</span>
</div>
<ul class="">
<li><code>data</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a></li>
<li><code>key</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" rel="nofollow" class="type">&lt;Object&gt;</a>
<ul>
<li><code>ctrl</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" rel="nofollow" class="type">&lt;boolean&gt;</a> <code>true</code> 表示 <kbd>Ctrl</kbd> 键。</li>
<li><code>meta</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" rel="nofollow" class="type">&lt;boolean&gt;</a> <code>true</code> 表示 <kbd>Meta</kbd> 键。</li>
<li><code>shift</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" rel="nofollow" class="type">&lt;boolean&gt;</a> <code>true</code> 表示 <kbd>Shift</kbd> 键。</li>
<li><code>name</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> 键的名称。</li>
</ul>
</li>
</ul>
<p><code>rl.write()</code> 方法会将 <code>data</code> 或由 <code>key</code> 标识的键序列写入 <code>output</code>。
仅当 <code>output</code> 是 <a href="tty.html">TTY</a> 文本终端时才支持 <code>key</code> 参数。
有关组合键的列表，请参阅 <a href="#tty-keybindings">TTY 快捷键</a>。</p>
<p class="">如果指定了 <code>key</code>，则忽略 <code>data</code>。</p>
<p class="">当调用时，如果 <code>rl.write()</code> 流已暂停，则 <code>rl.write()</code> 将恢复 <code>input</code> 流。</p>
<p class="">如果 <code>readline.Interface</code> 是在 <code>output</code> 设置为 <code>null</code> 或 <code>undefined</code> 的情况下创建的，则不会写入 <code>data</code> 和 <code>key</code>。</p>
<pre class=""><code class="language-js">rl.<span class="hljs-title function_">write</span>(<span class="hljs-string">'Delete this!'</span>);
<span class="hljs-comment">// 模拟 Ctrl+U 删除之前写的行</span>
rl.<span class="hljs-title function_">write</span>(<span class="hljs-literal">null</span>, { <span class="hljs-attr">ctrl</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'u'</span> });</code></pre>
<p class=""><code>rl.write()</code> 方法将数据写入 <code>readline</code> <code>Interface</code> 的 <code>input</code>，就好像它是由用户提供的一样。</p>
<h4><code>rl[Symbol.asyncIterator]()</code><span><a class="mark" href="#rlsymbolasynciterator" id="rlsymbolasynciterator">#</a></span><a aria-hidden="true" class="legacy" id="readline_rl_symbol_asynciterator"></a></h4><p class="tip_wrap" data-show_trans="1" data-item_id="#rlsymbolasynciterator">
                <a href="readline/rl_symbol_asynciterator.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<details class="changelog"><summary>版本历史</summary>
<table>
<tbody><tr><th>版本</th><th>变更</th></tr>
<tr><td>v11.4.0, v10.16.0</td>
<td><p><span>新增于: v11.4.0, v10.16.0</span></p></td></tr>
<tr><td>v11.14.0, v10.17.0</td>
<td><p>Symbol.asyncIterator 支持不再是实验的。</p></td></tr>
</tbody></table>
</details>
</div>
<ul class="">
<li>返回: <a href="https://tc39.github.io/ecma262/#sec-asynciterator-interface" rel="nofollow" class="type">&lt;AsyncIterator&gt;</a></li>
</ul>
<p>创建 <code>AsyncIterator</code> 对象，该对象遍历输入流中的每一行作为字符串。
此方法允许通过 <code>for await...of</code> 循环异步迭代 <code>readline.Interface</code> 对象。</p>
<p class="">输入流中的错误不会被转发。</p>
<p class="">如果循环以 <code>break</code>、<code>throw</code> 或 <code>return</code> 终止，则将调用 <a href="#rlclose"><code>rl.close()</code></a>。
换句话说，迭代 <code>readline.Interface</code> 将始终完全消费输入流。</p>
<p class="">性能无法与传统的 <code>'line'</code> 事件 API 相提并论。
对于性能敏感的应用程序，请改用 <code>'line'</code>。</p>
<pre class=""><code class="language-js"><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">processLineByLine</span>(<span class="hljs-params"></span>) {
  <span class="hljs-keyword">const</span> rl = readline.<span class="hljs-title function_">createInterface</span>({
    <span class="hljs-comment">// ...</span>
  });

  <span class="hljs-keyword">for</span> <span class="hljs-keyword">await</span> (<span class="hljs-keyword">const</span> line <span class="hljs-keyword">of</span> rl) {
    <span class="hljs-comment">// 逐行读取输入中的每一行</span>
    <span class="hljs-comment">// 都将在此处作为 `line` 连续可用。</span>
  }
}</code></pre>
<p class=""><code>readline.createInterface()</code> 将在调用后开始使用输入流。
在接口创建和异步迭代之间进行异步操作可能会导致丢失行。</p>
<h4><code>rl.line</code><span><a class="mark" href="#rlline" id="rlline">#</a></span><a aria-hidden="true" class="legacy" id="readline_rl_line"></a></h4><p class="tip_wrap" data-show_trans="1" data-item_id="#rlline">
                <a href="readline/rl_line.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<details class="changelog"><summary>版本历史</summary>
<table>
<tbody><tr><th>版本</th><th>变更</th></tr>
<tr><td>v15.8.0</td>
<td><p>值将始终是字符串，永远不会未定义。</p></td></tr>
<tr><td>v0.1.98</td>
<td><p><span>新增于: v0.1.98</span></p></td></tr>
</tbody></table>
</details>
</div>
<ul class="">
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a></li>
</ul>
<p>节点正在处理的当前输入数据。</p>
<p class="">这可用于从 TTY 流中收集输入以检索迄今为止（在 <code>line</code> 事件触发之前）已处理的当前值。
一旦触发 <code>line</code> 事件，则此属性将是空字符串。</p>
<p class="">请注意，如果 <code>rl.cursor</code> 也不受控制，则在实例运行时修改该值可能会产生意想不到的后果。</p>
<p class=""><strong>如果不使用 TTY 流进行输入，则使用 <a href="#event-line"><code>'line'</code></a> 事件。</strong></p>
<p class="">一个可能的用例如下：</p>
<pre class=""><code class="language-js"><span class="hljs-keyword">const</span> values = [<span class="hljs-string">'lorem ipsum'</span>, <span class="hljs-string">'dolor sit amet'</span>];
<span class="hljs-keyword">const</span> rl = readline.<span class="hljs-title function_">createInterface</span>(process.<span class="hljs-property">stdin</span>);
<span class="hljs-keyword">const</span> showResults = <span class="hljs-title function_">debounce</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(
    <span class="hljs-string">'\n'</span>,
    values.<span class="hljs-title function_">filter</span>(<span class="hljs-function">(<span class="hljs-params">val</span>) =&gt;</span> val.<span class="hljs-title function_">startsWith</span>(rl.<span class="hljs-property">line</span>)).<span class="hljs-title function_">join</span>(<span class="hljs-string">' '</span>)
  );
}, <span class="hljs-number">300</span>);
process.<span class="hljs-property">stdin</span>.<span class="hljs-title function_">on</span>(<span class="hljs-string">'keypress'</span>, <span class="hljs-function">(<span class="hljs-params">c, k</span>) =&gt;</span> {
  <span class="hljs-title function_">showResults</span>();
});</code></pre>
<h4><code>rl.cursor</code><span><a class="mark" href="#rlcursor" id="rlcursor">#</a></span><a aria-hidden="true" class="legacy" id="readline_rl_cursor"></a></h4><p class="tip_wrap" data-show_trans="1" data-item_id="#rlcursor">
                <a href="readline/rl_cursor.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>新增于: v0.1.98</span>
</div>
<ul class="">
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;number&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Undefined_type" rel="nofollow" class="type">&lt;undefined&gt;</a></li>
</ul>
<p>相对于 <code>rl.line</code> 的光标位置。</p>
<p class="">当从 TTY 流读取输入时，这将跟踪当前光标在输入字符串中的位置。
光标的位置决定了在处理输入时将被修改的输入字符串部分，以及将呈现终端插入符号的列。</p>
<h4><code>rl.getCursorPos()</code><span><a class="mark" href="#rlgetcursorpos" id="rlgetcursorpos">#</a></span><a aria-hidden="true" class="legacy" id="readline_rl_getcursorpos"></a></h4><p class="tip_wrap" data-show_trans="1" data-item_id="#rlgetcursorpos">
                <a href="readline/rl_getcursorpos.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>新增于: v13.5.0, v12.16.0</span>
</div>
<ul class="">
<li>返回: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" rel="nofollow" class="type">&lt;Object&gt;</a>
<ul>
<li><code>rows</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;number&gt;</a> 光标当前所在的提示行</li>
<li><code>cols</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;number&gt;</a> 光标当前所在的屏幕列</li>
</ul>
</li>
</ul>
<p>返回光标相对于输入提示 + 字符串的实际位置。
长输入（换行）字符串以及多行提示都包含在计算中。</p>
</section><section><h3><code>readline.clearLine(stream, dir[, callback])</code><span><a class="mark" href="#readlineclearlinestream-dir-callback" id="readlineclearlinestream-dir-callback">#</a></span><a aria-hidden="true" class="legacy" id="readline_readline_clearline_stream_dir_callback"></a></h3><p class="tip_wrap" data-show_trans="1" data-item_id="#readlineclearlinestream-dir-callback">
                <a href="readline/readline_clearline_stream_dir_callback.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<details class="changelog"><summary>版本历史</summary>
<table>
<tbody><tr><th>版本</th><th>变更</th></tr>
<tr><td>v12.7.0</td>
<td><p>流的 write() 回调和返回值是公开的。</p></td></tr>
<tr><td>v0.7.7</td>
<td><p><span>新增于: v0.7.7</span></p></td></tr>
</tbody></table>
</details>
</div>
<ul class="">
<li><code>stream</code> <a href="stream.html#class-streamwritable" rel="nofollow" class="type">&lt;stream.Writable&gt;</a></li>
<li><code>dir</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;number&gt;</a>
<ul>
<li><code>-1</code>: 从光标向左</li>
<li><code>1</code>: 从光标向右</li>
<li><code>0</code>: 整行</li>
</ul>
</li>
<li><code>callback</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" rel="nofollow" class="type">&lt;Function&gt;</a> 操作完成后调用。</li>
<li>返回: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" rel="nofollow" class="type">&lt;boolean&gt;</a> 如果 <code>stream</code> 希望调用代码在继续写入额外的数据之前等待 <code>'drain'</code> 事件被触发，则为 <code>false</code>；否则为 <code>true</code>。</li>
</ul>
<p><code>readline.clearLine()</code> 方法在 <code>dir</code> 标识的指定方向上清除给定 TTY 流的当前行。</p>
</section><section><h3><code>readline.clearScreenDown(stream[, callback])</code><span><a class="mark" href="#readlineclearscreendownstream-callback" id="readlineclearscreendownstream-callback">#</a></span><a aria-hidden="true" class="legacy" id="readline_readline_clearscreendown_stream_callback"></a></h3><p class="tip_wrap" data-show_trans="1" data-item_id="#readlineclearscreendownstream-callback">
                <a href="readline/readline_clearscreendown_stream_callback.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<details class="changelog"><summary>版本历史</summary>
<table>
<tbody><tr><th>版本</th><th>变更</th></tr>
<tr><td>v12.7.0</td>
<td><p>流的 write() 回调和返回值是公开的。</p></td></tr>
<tr><td>v0.7.7</td>
<td><p><span>新增于: v0.7.7</span></p></td></tr>
</tbody></table>
</details>
</div>
<ul class="">
<li><code>stream</code> <a href="stream.html#class-streamwritable" rel="nofollow" class="type">&lt;stream.Writable&gt;</a></li>
<li><code>callback</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" rel="nofollow" class="type">&lt;Function&gt;</a> 操作完成后调用。</li>
<li>返回: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" rel="nofollow" class="type">&lt;boolean&gt;</a> 如果 <code>stream</code> 希望调用代码在继续写入额外的数据之前等待 <code>'drain'</code> 事件被触发，则为 <code>false</code>；否则为 <code>true</code>。</li>
</ul>
<p><code>readline.clearScreenDown()</code> 方法从光标的当前位置向下清除给定的 <a href="tty.html">TTY</a> 流。</p>
</section><section><h3><code>readline.createInterface(options)</code><span><a class="mark" href="#readlinecreateinterfaceoptions" id="readlinecreateinterfaceoptions">#</a></span><a aria-hidden="true" class="legacy" id="readline_readline_createinterface_options"></a></h3><p class="tip_wrap" data-show_trans="1" data-item_id="#readlinecreateinterfaceoptions">
                <a href="readline/readline_createinterface_options.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<details class="changelog"><summary>版本历史</summary>
<table>
<tbody><tr><th>版本</th><th>变更</th></tr>
<tr><td>v15.14.0</td>
<td><p>现在支持 <code>signal</code> 选项。</p></td></tr>
<tr><td>v15.8.0</td>
<td><p>现在支持 <code>history</code> 选项。</p></td></tr>
<tr><td>v13.9.0</td>
<td><p>现在支持 <code>tabSize</code> 选项。</p></td></tr>
<tr><td>v8.3.0, v6.11.4</td>
<td><p>删除 <code>crlfDelay</code> 选项的最大限制。</p></td></tr>
<tr><td>v6.6.0</td>
<td><p>现在支持 <code>crlfDelay</code> 选项。</p></td></tr>
<tr><td>v6.3.0</td>
<td><p>现在支持 <code>prompt</code> 选项。</p></td></tr>
<tr><td>v6.0.0</td>
<td><p>选项 <code>historySize</code> 现在可以是 <code>0</code>。</p></td></tr>
<tr><td>v0.1.98</td>
<td><p><span>新增于: v0.1.98</span></p></td></tr>
</tbody></table>
</details>
</div>
<ul class="">
<li><code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" rel="nofollow" class="type">&lt;Object&gt;</a>
<ul>
<li><code>input</code> <a href="stream.html#class-streamreadable" rel="nofollow" class="type">&lt;stream.Readable&gt;</a> 要监听的<a href="stream.html#readable-streams">可读</a>流。
此选项是必需的。</li>
<li><code>output</code> <a href="stream.html#class-streamwritable" rel="nofollow" class="type">&lt;stream.Writable&gt;</a> 要将逐行读取的数据写入的<a href="stream.html#writable-streams">可写</a>流。</li>
<li><code>completer</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" rel="nofollow" class="type">&lt;Function&gt;</a> 可选的用于制表符自动补全的函数。</li>
<li><code>terminal</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" rel="nofollow" class="type">&lt;boolean&gt;</a> 如果 <code>input</code> 和 <code>output</code> 流应该被视为终端，并且写入了 ANSI/VT100 转义码，则为 <code>true</code>。
<strong>默认值:</strong> 在实例化时检查 <code>output</code> 流上的 <code>isTTY</code>。</li>
<li><code>history</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string[]&gt;</a> 历史行的初始列表。
仅当 <code>terminal</code> 由用户或内部的 <code>output</code> 检查设置为 <code>true</code> 时，此选项才有意义，否则历史缓存机制根本不会初始化。
<strong>默认值:</strong> <code>[]</code>。</li>
<li><code>historySize</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;number&gt;</a> 保留的最大历史行数。
要禁用历史记录，则将此值设置为 <code>0</code>。
仅当 <code>terminal</code> 由用户或内部的 <code>output</code> 检查设置为 <code>true</code> 时，此选项才有意义，否则历史缓存机制根本不会初始化。
<strong>默认值:</strong> <code>30</code>。</li>
<li><code>removeHistoryDuplicates</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" rel="nofollow" class="type">&lt;boolean&gt;</a> 如果为 <code>true</code>，则当添加到历史列表的新输入行与旧输入行重复时，这将从列表中删除旧行。 <strong>默认值:</strong> <code>false</code>。</li>
<li><code>prompt</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> 要使用的提示字符串。 <strong>默认值:</strong> <code>'&gt; '</code>。</li>
<li><code>crlfDelay</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;number&gt;</a> 如果 <code>\r</code> 和 <code>\n</code> 之间的延迟超过 <code>crlfDelay</code> 毫秒，则 <code>\r</code> 和 <code>\n</code> 都将被视为单独的行尾输入。
<code>crlfDelay</code> 将被强制为不小于 <code>100</code> 的数字。
它可以设置为 <code>Infinity</code>，在这种情况下，<code>\r</code> 后跟 <code>\n</code> 将始终被视为单个换行符（这对于具有 <code>\r\n</code> 行分隔符的<a href="#example-read-file-stream-line-by-line">文件读取</a>可能是合理的）。 <strong>默认值:</strong> <code>100</code>。</li>
<li><code>escapeCodeTimeout</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;number&gt;</a> <code>readline</code> 将等待字符的时长（当以毫秒为单位读取不明确的键序列时，既可以使用目前读取的输入形成完整的键序列，又可以采用额外的输入来完成更长的键序列）。
<strong>默认值:</strong> <code>500</code>。</li>
<li><code>tabSize</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a> 一个制表符等于的空格数（最小为 1）。
<strong>默认值:</strong> <code>8</code>。</li>
<li><code>signal</code> <a href="globals.html#class-abortsignal" rel="nofollow" class="type">&lt;AbortSignal&gt;</a> 允许使用中止信号关闭接口。
中止信号将在内部调用接口上的 <code>close</code>。</li>
</ul>
</li>
<li>返回: <a href="#class-readlineinterface" rel="nofollow" class="type">&lt;readline.Interface&gt;</a></li>
</ul>
<p><code>readline.createInterface()</code> 方法创建新的 <code>readline.Interface</code> 实例。</p>
<pre class=""><code class="language-js"><span class="hljs-keyword">const</span> readline = <span class="hljs-built_in">require</span>(<span class="hljs-string">'readline'</span>);
<span class="hljs-keyword">const</span> rl = readline.<span class="hljs-title function_">createInterface</span>({
  <span class="hljs-attr">input</span>: process.<span class="hljs-property">stdin</span>,
  <span class="hljs-attr">output</span>: process.<span class="hljs-property">stdout</span>
});</code></pre>
<p class="">一旦创建了 <code>readline.Interface</code> 实例，则最常见的场景就是监听 <code>'line'</code> 事件：</p>
<pre class=""><code class="language-js">rl.<span class="hljs-title function_">on</span>(<span class="hljs-string">'line'</span>, <span class="hljs-function">(<span class="hljs-params">line</span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Received: <span class="hljs-subst">${line}</span>`</span>);
});</code></pre>
<p class="">如果此实例的 <code>terminal</code> 是 <code>true</code>，则如果它定义了 <code>output.columns</code> 属性，并且如果或当列发生变化时（<a href="process.html#processstdout"><code>process.stdout</code></a> 会当其是终端时自动执行此操作）在 <code>output</code> 上触发 <code>'resize'</code> 事件，则 <code>output</code> 流将获得最佳的兼容性。</p>
<p class="">当使用 <code>stdin</code> 作为输入创建 <code>readline.Interface</code> 时，则程序在收到 <a href="https://en.wikipedia.org/wiki/End-of-file#EOF_character">EOF 字符</a>之前不会终止。
要在不等待用户输入的情况下退出，则调用 <code>process.stdin.unref()</code>。</p>
<h4>completer 函数的使用<span><a class="mark" href="#use-of-the-completer-function" id="use-of-the-completer-function">#</a></span><a aria-hidden="true" class="legacy" id="readline_use_of_the_completer_function"></a></h4><p class="tip_wrap" data-show_trans="1" data-item_id="#use-of-the-completer-function">
                <a href="readline/use_of_the_completer_function.html" class="tip_trans">中英对照</a>
                </p>
<p><code>completer</code> 函数将用户输入的当前行作为参数，并返回包含 2 个条目的 <code>Array</code>：</p>
<ul class="">
<li>使用匹配条目的 <code>Array</code> 补全。</li>
<li>用于匹配的子字符串。</li>
</ul>
<p class="">例如：<code>[[substr1, substr2, ...], originalsubstring]</code>。</p>
<pre class=""><code class="language-js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">completer</span>(<span class="hljs-params">line</span>) {
  <span class="hljs-keyword">const</span> completions = <span class="hljs-string">'.help .error .exit .quit .q'</span>.<span class="hljs-title function_">split</span>(<span class="hljs-string">' '</span>);
  <span class="hljs-keyword">const</span> hits = completions.<span class="hljs-title function_">filter</span>(<span class="hljs-function">(<span class="hljs-params">c</span>) =&gt;</span> c.<span class="hljs-title function_">startsWith</span>(line));
  <span class="hljs-comment">// 如果没有找到，则显示所有补全</span>
  <span class="hljs-keyword">return</span> [hits.<span class="hljs-property">length</span> ? hits : completions, line];
}</code></pre>
<p class="">如果 <code>completer</code> 函数接受两个参数，则可以异步地调用它：</p>
<pre class=""><code class="language-js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">completer</span>(<span class="hljs-params">linePartial, callback</span>) {
  <span class="hljs-title function_">callback</span>(<span class="hljs-literal">null</span>, [[<span class="hljs-string">'123'</span>], linePartial]);
}</code></pre>
</section><section><h3><code>readline.cursorTo(stream, x[, y][, callback])</code><span><a class="mark" href="#readlinecursortostream-x-y-callback" id="readlinecursortostream-x-y-callback">#</a></span><a aria-hidden="true" class="legacy" id="readline_readline_cursorto_stream_x_y_callback"></a></h3><p class="tip_wrap" data-show_trans="1" data-item_id="#readlinecursortostream-x-y-callback">
                <a href="readline/readline_cursorto_stream_x_y_callback.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<details class="changelog"><summary>版本历史</summary>
<table>
<tbody><tr><th>版本</th><th>变更</th></tr>
<tr><td>v12.7.0</td>
<td><p>流的 write() 回调和返回值是公开的。</p></td></tr>
<tr><td>v0.7.7</td>
<td><p><span>新增于: v0.7.7</span></p></td></tr>
</tbody></table>
</details>
</div>
<ul class="">
<li><code>stream</code> <a href="stream.html#class-streamwritable" rel="nofollow" class="type">&lt;stream.Writable&gt;</a></li>
<li><code>x</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;number&gt;</a></li>
<li><code>y</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;number&gt;</a></li>
<li><code>callback</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" rel="nofollow" class="type">&lt;Function&gt;</a> 操作完成后调用。</li>
<li>返回: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" rel="nofollow" class="type">&lt;boolean&gt;</a> 如果 <code>stream</code> 希望调用代码在继续写入额外的数据之前等待 <code>'drain'</code> 事件被触发，则为 <code>false</code>；否则为 <code>true</code>。</li>
</ul>
<p><code>readline.cursorTo()</code> 方法将光标移动到给定的 <a href="tty.html">TTY</a> <code>stream</code> 中的指定位置。</p>
</section><section><h3><code>readline.emitKeypressEvents(stream[, interface])</code><span><a class="mark" href="#readlineemitkeypresseventsstream-interface" id="readlineemitkeypresseventsstream-interface">#</a></span><a aria-hidden="true" class="legacy" id="readline_readline_emitkeypressevents_stream_interface"></a></h3><p class="tip_wrap" data-show_trans="1" data-item_id="#readlineemitkeypresseventsstream-interface">
                <a href="readline/readline_emitkeypressevents_stream_interface.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>新增于: v0.7.7</span>
</div>
<ul class="">
<li><code>stream</code> <a href="stream.html#class-streamreadable" rel="nofollow" class="type">&lt;stream.Readable&gt;</a></li>
<li><code>interface</code> <a href="#class-readlineinterface" rel="nofollow" class="type">&lt;readline.Interface&gt;</a></li>
</ul>
<p><code>readline.emitKeypressEvents()</code> 方法使给定的<a href="stream.html#readable-streams">可读</a>流开始触发与接收到的输入相对应的 <code>'keypress'</code> 事件。</p>
<p class="">可选地，<code>interface</code> 指定 <code>readline.Interface</code> 实例，当检测到复制粘贴输入时禁用自动完成。</p>
<p class="">如果 <code>stream</code> 是 <a href="tty.html">TTY</a>，则它必须处于原始模式。</p>
<p class="">如果 <code>input</code> 是终端，则它会被其 <code>input</code> 上的任何逐行读取实例自动调用。
关闭 <code>readline</code> 实例不会阻止 <code>input</code> 触发 <code>'keypress'</code> 事件。</p>
<pre class=""><code class="language-js">readline.<span class="hljs-title function_">emitKeypressEvents</span>(process.<span class="hljs-property">stdin</span>);
<span class="hljs-keyword">if</span> (process.<span class="hljs-property">stdin</span>.<span class="hljs-property">isTTY</span>)
  process.<span class="hljs-property">stdin</span>.<span class="hljs-title function_">setRawMode</span>(<span class="hljs-literal">true</span>);</code></pre>
</section><section><h3><code>readline.moveCursor(stream, dx, dy[, callback])</code><span><a class="mark" href="#readlinemovecursorstream-dx-dy-callback" id="readlinemovecursorstream-dx-dy-callback">#</a></span><a aria-hidden="true" class="legacy" id="readline_readline_movecursor_stream_dx_dy_callback"></a></h3><p class="tip_wrap" data-show_trans="1" data-item_id="#readlinemovecursorstream-dx-dy-callback">
                <a href="readline/readline_movecursor_stream_dx_dy_callback.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<details class="changelog"><summary>版本历史</summary>
<table>
<tbody><tr><th>版本</th><th>变更</th></tr>
<tr><td>v12.7.0</td>
<td><p>流的 write() 回调和返回值是公开的。</p></td></tr>
<tr><td>v0.7.7</td>
<td><p><span>新增于: v0.7.7</span></p></td></tr>
</tbody></table>
</details>
</div>
<ul class="">
<li><code>stream</code> <a href="stream.html#class-streamwritable" rel="nofollow" class="type">&lt;stream.Writable&gt;</a></li>
<li><code>dx</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;number&gt;</a></li>
<li><code>dy</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;number&gt;</a></li>
<li><code>callback</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" rel="nofollow" class="type">&lt;Function&gt;</a> 操作完成后调用。</li>
<li>返回: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" rel="nofollow" class="type">&lt;boolean&gt;</a> 如果 <code>stream</code> 希望调用代码在继续写入额外的数据之前等待 <code>'drain'</code> 事件被触发，则为 <code>false</code>；否则为 <code>true</code>。</li>
</ul>
<p><code>readline.moveCursor()</code> 方法相对于它在给定的 <a href="tty.html">TTY</a> <code>stream</code> 中的当前位置移动光标。</p>
</section><section><h3>示例：微型 CLI<span><a class="mark" href="#example-tiny-cli" id="example-tiny-cli">#</a></span><a aria-hidden="true" class="legacy" id="readline_example_tiny_cli"></a></h3><p class="tip_wrap" data-show_trans="1" data-item_id="#example-tiny-cli">
                <a href="readline/example_tiny_cli.html" class="tip_trans">中英对照</a>
                </p>
<p>下面的例子说明了使用 <code>readline.Interface</code> 类来实现一个微型的命令行界面：</p>
<pre class=""><code class="language-js"><span class="hljs-keyword">const</span> readline = <span class="hljs-built_in">require</span>(<span class="hljs-string">'readline'</span>);
<span class="hljs-keyword">const</span> rl = readline.<span class="hljs-title function_">createInterface</span>({
  <span class="hljs-attr">input</span>: process.<span class="hljs-property">stdin</span>,
  <span class="hljs-attr">output</span>: process.<span class="hljs-property">stdout</span>,
  <span class="hljs-attr">prompt</span>: <span class="hljs-string">'OHAI&gt; '</span>
});

rl.<span class="hljs-title function_">prompt</span>();

rl.<span class="hljs-title function_">on</span>(<span class="hljs-string">'line'</span>, <span class="hljs-function">(<span class="hljs-params">line</span>) =&gt;</span> {
  <span class="hljs-keyword">switch</span> (line.<span class="hljs-title function_">trim</span>()) {
    <span class="hljs-keyword">case</span> <span class="hljs-string">'hello'</span>:
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'world!'</span>);
      <span class="hljs-keyword">break</span>;
    <span class="hljs-attr">default</span>:
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Say what? I might have heard '<span class="hljs-subst">${line.trim()}</span>'`</span>);
      <span class="hljs-keyword">break</span>;
  }
  rl.<span class="hljs-title function_">prompt</span>();
}).<span class="hljs-title function_">on</span>(<span class="hljs-string">'close'</span>, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Have a great day!'</span>);
  process.<span class="hljs-title function_">exit</span>(<span class="hljs-number">0</span>);
});</code></pre>
</section><section><h3>示例：逐行读取文件流<span><a class="mark" href="#example-read-file-stream-line-by-line" id="example-read-file-stream-line-by-line">#</a></span><a aria-hidden="true" class="legacy" id="readline_example_read_file_stream_line_by_line"></a></h3><p class="tip_wrap" data-show_trans="1" data-item_id="#example-read-file-stream-line-by-line">
                <a href="readline/example_read_file_stream_line_by_line.html" class="tip_trans">中英对照</a>
                </p>
<p><code>readline</code> 的一个常见用例是每次一行地消费输入文件。
最简单的方式是利用 <a href="fs.html#class-fsreadstream"><code>fs.ReadStream</code></a> API 和 <code>for await...of</code> 循环：</p>
<pre class=""><code class="language-js"><span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">'fs'</span>);
<span class="hljs-keyword">const</span> readline = <span class="hljs-built_in">require</span>(<span class="hljs-string">'readline'</span>);

<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">processLineByLine</span>(<span class="hljs-params"></span>) {
  <span class="hljs-keyword">const</span> fileStream = fs.<span class="hljs-title function_">createReadStream</span>(<span class="hljs-string">'input.txt'</span>);

  <span class="hljs-keyword">const</span> rl = readline.<span class="hljs-title function_">createInterface</span>({
    <span class="hljs-attr">input</span>: fileStream,
    <span class="hljs-attr">crlfDelay</span>: <span class="hljs-title class_">Infinity</span>
  });
  <span class="hljs-comment">// 注意：使用 crlfDelay 选项</span>
  <span class="hljs-comment">// 将 input.txt 中的所有 CR LF ('\r\n') 实例识别为单个换行符。</span>

  <span class="hljs-keyword">for</span> <span class="hljs-keyword">await</span> (<span class="hljs-keyword">const</span> line <span class="hljs-keyword">of</span> rl) {
    <span class="hljs-comment">// input.txt 中的每一行都将在此处作为 `line` 连续可用。</span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Line from file: <span class="hljs-subst">${line}</span>`</span>);
  }
}

<span class="hljs-title function_">processLineByLine</span>();</code></pre>
<p class="">或者，可以使用 <a href="#event-line"><code>'line'</code></a> 事件：</p>
<pre class=""><code class="language-js"><span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">'fs'</span>);
<span class="hljs-keyword">const</span> readline = <span class="hljs-built_in">require</span>(<span class="hljs-string">'readline'</span>);

<span class="hljs-keyword">const</span> rl = readline.<span class="hljs-title function_">createInterface</span>({
  <span class="hljs-attr">input</span>: fs.<span class="hljs-title function_">createReadStream</span>(<span class="hljs-string">'sample.txt'</span>),
  <span class="hljs-attr">crlfDelay</span>: <span class="hljs-title class_">Infinity</span>
});

rl.<span class="hljs-title function_">on</span>(<span class="hljs-string">'line'</span>, <span class="hljs-function">(<span class="hljs-params">line</span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Line from file: <span class="hljs-subst">${line}</span>`</span>);
});</code></pre>
<p class="">目前，<code>for await...of</code> 循环可能会慢一点。
如果 <code>async</code> / <code>await</code> 流量和速度都必不可少，则可以应用混合方法：</p>
<pre class=""><code class="language-js"><span class="hljs-keyword">const</span> { once } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'events'</span>);
<span class="hljs-keyword">const</span> { createReadStream } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'fs'</span>);
<span class="hljs-keyword">const</span> { createInterface } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'readline'</span>);

(<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">processLineByLine</span>(<span class="hljs-params"></span>) {
  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">const</span> rl = <span class="hljs-title function_">createInterface</span>({
      <span class="hljs-attr">input</span>: <span class="hljs-title function_">createReadStream</span>(<span class="hljs-string">'big-file.txt'</span>),
      <span class="hljs-attr">crlfDelay</span>: <span class="hljs-title class_">Infinity</span>
    });

    rl.<span class="hljs-title function_">on</span>(<span class="hljs-string">'line'</span>, <span class="hljs-function">(<span class="hljs-params">line</span>) =&gt;</span> {
      <span class="hljs-comment">// 处理行。</span>
    });

    <span class="hljs-keyword">await</span> <span class="hljs-title function_">once</span>(rl, <span class="hljs-string">'close'</span>);

    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'File processed.'</span>);
  } <span class="hljs-keyword">catch</span> (err) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(err);
  }
})();</code></pre>
</section><section><h3>TTY 快捷键<span><a class="mark" href="#tty-keybindings" id="tty-keybindings">#</a></span><a aria-hidden="true" class="legacy" id="readline_tty_keybindings"></a></h3><p class="tip_wrap" data-show_trans="1" data-item_id="#tty-keybindings">
                <a href="readline/tty_keybindings.html" class="tip_trans">中英对照</a>
                </p>
<table class="">
  <tbody><tr>
    <th>快捷键</th>
    <th>描述</th>
    <th>注意事项</th>
  </tr>
  <tr>
    <td><kbd>Ctrl</kbd>+<kbd>Shift</kbd>+<kbd>Backspace</kbd></td>
    <td>删除行左</td>
    <td>不适用于 Linux、Mac 和 Windows</td>
  </tr>
  <tr>
    <td><kbd>Ctrl</kbd>+<kbd>Shift</kbd>+<kbd>Delete</kbd></td>
    <td>删除行右</td>
    <td>不适用于 Mac</td>
  </tr>
  <tr>
    <td><kbd>Ctrl</kbd>+<kbd>C</kbd></td>
    <td>触发 <code>SIGINT</code> 或关闭逐行读取实例</td>
    <td></td>
  </tr>
  <tr>
    <td><kbd>Ctrl</kbd>+<kbd>H</kbd></td>
    <td>删除左边</td>
    <td></td>
  </tr>
  <tr>
    <td><kbd>Ctrl</kbd>+<kbd>D</kbd></td>
    <td>如果当前行为空或 EOF，则向右删除或关闭逐行读取实例</td>
    <td>不适用于 Windows</td>
  </tr>
  <tr>
    <td><kbd>Ctrl</kbd>+<kbd>U</kbd></td>
    <td>从当前位置删除到行首</td>
    <td></td>
  </tr>
  <tr>
    <td><kbd>Ctrl</kbd>+<kbd>K</kbd></td>
    <td>从当前位置删除到行尾</td>
    <td></td>
  </tr>
  <tr>
    <td><kbd>Ctrl</kbd>+<kbd>A</kbd></td>
    <td>转到行首</td>
    <td></td>
  </tr>
  <tr>
    <td><kbd>Ctrl</kbd>+<kbd>E</kbd></td>
    <td>跳到行尾</td>
    <td></td>
  </tr>
  <tr>
    <td><kbd>Ctrl</kbd>+<kbd>B</kbd></td>
    <td>后退一个字符</td>
    <td></td>
  </tr>
  <tr>
    <td><kbd>Ctrl</kbd>+<kbd>F</kbd></td>
    <td>前进一个字符</td>
    <td></td>
  </tr>
  <tr>
    <td><kbd>Ctrl</kbd>+<kbd>L</kbd></td>
    <td>清屏</td>
    <td></td>
  </tr>
  <tr>
    <td><kbd>Ctrl</kbd>+<kbd>N</kbd></td>
    <td>下一个历史子项</td>
    <td></td>
  </tr>
  <tr>
    <td><kbd>Ctrl</kbd>+<kbd>P</kbd></td>
    <td>上一个历史子项</td>
    <td></td>
  </tr>
  <tr>
    <td><kbd>Ctrl</kbd>+<kbd>Z</kbd></td>
    <td>将正在运行的进程移到后台。
输入 <code>fg</code> 并按 <kbd>回车键</kbd> 返回。</td>
    <td>不适用于 Windows</td>
  </tr>
  <tr>
    <td><kbd>Ctrl</kbd>+<kbd>W</kbd> 或 <kbd>Ctrl</kbd> +<kbd>退格键</kbd></td>
    <td>向后删除到单词边界</td>
    <td><kbd>Ctrl</kbd>+<kbd>退格键</kbd> 不适用于 Linux、Mac 和 Windows</td>
  </tr>
  <tr>
    <td><kbd>Ctrl</kbd>+<kbd>Delete</kbd></td>
    <td>向前删除到单词边界</td>
    <td>不适用于 Mac</td>
  </tr>
  <tr>
    <td><kbd>Ctrl</kbd>+<kbd>左箭头</kbd> 或 <kbd>Meta</kbd>+<kbd>B</kbd></td>
    <td>左边的单词</td>
    <td><kbd>Ctrl</kbd>+<kbd>左箭头</kbd> 不适用于 Mac</td>
  </tr>
  <tr>
    <td><kbd>Ctrl</kbd>+<kbd>右箭头</kbd> 或 <kbd>Meta</kbd>+<kbd>F</kbd></td>
    <td>右边的单词</td>
    <td><kbd>Ctrl</kbd>+<kbd>右箭头</kbd> 不适用于 Mac</td>
  </tr>
  <tr>
    <td><kbd>Meta</kbd>+<kbd>D</kbd> 或 <kbd>Meta</kbd> +<kbd>删除键</kbd></td>
    <td>删除右边的单词</td>
    <td><kbd>Meta</kbd>+<kbd>删除键</kbd> 不适用于 Windows</td>
  </tr>
  <tr>
    <td><kbd>Meta</kbd>+<kbd>退格键</kbd></td>
    <td>删除左边的单词</td>
    <td>不适用于 Mac</td>
  </tr>
</tbody></table></section>
        <!-- API END -->
      </div>
    </div>
  </div>
  <div id="scroll_top" onclick="window.scrollTo(0,0);">返回顶部</div>
  
  <div id="wxpaycode_box" style="display: none;">
    <div id="wxpaycode_img_box">
      <div id="wxpaycode_vip_tips">
        因经营维护成本巨大，
        <br>为了能提供更高质量的中文文档，
        <br>即日起将只对VIP会员开放。
        <br>扫码成为VIP会员，会员费用为<span id="wxpaycode_vip_money">199</span>元/年
      </div>
      <img id="wxpaycode_img">
    </div>
  </div>
  
  



    <script src="../api/static/inject.js" defer=""></script></body></html>