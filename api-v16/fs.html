<!DOCTYPE html><html lang="zh-CN"><head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width">
  <title>fs 文件系统 | Node.js API 文档</title>
  
  
  <style>@media(max-width:494px){.with-34-chars>.js-flavor-selector{float:none;margin:0 0 1em auto;}}@media(max-width:422px){.with-25-chars>.js-flavor-selector{float:none;margin:0 0 1em auto;}}@media(max-width:558px){.with-42-chars>.js-flavor-selector{float:none;margin:0 0 1em auto;}}@media(max-width:486px){.with-33-chars>.js-flavor-selector{float:none;margin:0 0 1em auto;}}@media(max-width:518px){.with-37-chars>.js-flavor-selector{float:none;margin:0 0 1em auto;}}@media(max-width:502px){.with-35-chars>.js-flavor-selector{float:none;margin:0 0 1em auto;}}@media(max-width:606px){.with-48-chars>.js-flavor-selector{float:none;margin:0 0 1em auto;}}</style>

    <link href="../api/static/inject.css" rel="stylesheet"><link rel="icon" sizes="32x32" type="image/png" href="../api/static/favicon.png"></head>

<body class="alt apidoc api_page_fs" id="page_api">
  <div id="content" class="clearfix">
    <div id="column2" class="interior">
      <div id="intro" class="interior">
        

      </div>
      <!-- <ul>
          <li><a href="./" class="nav-documentation">v16.16.0</a></li>
        </ul> -->
      <!-- <div id="biz_nav" class="biz_wrap" data-biz="api_nav"><a target="_blank" class="biz_link"><img
            class="biz_img"></a>
      </div> -->
      <div class="line"></div>
      <ul>
<li><a href="documentation.html" class="nav-documentation" rel="nofollow">关于本文档</a></li>
<li><a href="synopsis.html" class="nav-synopsis" rel="nofollow">用法与示例</a></li>
</ul>
<hr class="line">
<ul>
<li><a href="assert.html" class="nav-assert" rel="nofollow">assert<span class="api_nav_cn_name">断言</span></a></li>
<li><a href="async_hooks.html" class="nav-async_hooks" rel="nofollow">async_hooks<span class="api_nav_cn_name">异步钩子</span></a></li>
<li><a href="async_context.html" class="nav-async_context" rel="nofollow"><span style="font-size:11px;">async_hooks/context</span><span class="api_nav_cn_name" style="font-size:12px;padding-left:1px;">异步上下文</span></a></li>
<li><a href="buffer.html" class="nav-buffer" rel="nofollow">buffer<span class="api_nav_cn_name">缓冲区</span></a></li>
<li><a href="addons.html" class="nav-addons" rel="nofollow">C++插件</a></li>
<li><a href="n-api.html" class="nav-n-api" rel="nofollow"><span style="font-size:14px;">C/C++插件(使用Node-API)</span></a></li>
<li><a href="embedding.html" class="nav-embedding" rel="nofollow">C++嵌入器</a></li>
<li><a href="child_process.html" class="nav-child_process" rel="nofollow">child_process<span class="api_nav_cn_name">子进程</span></a></li>
<li><a href="cluster.html" class="nav-cluster" rel="nofollow">cluster<span class="api_nav_cn_name">集群</span></a></li>
<li><a href="cli.html" class="nav-cli" rel="nofollow">CLI<span class="api_nav_cn_name">命令行</span></a></li>
<li><a href="console.html" class="nav-console" rel="nofollow">console<span class="api_nav_cn_name">控制台</span></a></li>
<li><a href="corepack.html" class="nav-corepack" rel="nofollow">Corepack<span class="api_nav_cn_name">核心包</span></a></li>
<li><a href="crypto.html" class="nav-crypto" rel="nofollow">crypto<span class="api_nav_cn_name">加密</span></a></li>
<li><a href="webcrypto.html" class="nav-webcrypto" rel="nofollow"><span style="font-size:14px;">crypto/webcrypto</span><span class="api_nav_cn_name" style="font-size:12px;padding-left:2px;">网络加密</span></a></li>
<li><a href="debugger.html" class="nav-debugger" rel="nofollow">debugger<span class="api_nav_cn_name">调试器</span></a></li>
<li><a href="deprecations.html" class="nav-deprecations" rel="nofollow">deprecation<span class="api_nav_cn_name">弃用</span></a></li>
<li><a href="dgram.html" class="nav-dgram" rel="nofollow">dgram<span class="api_nav_cn_name">数据报</span></a></li>
<li><a href="diagnostics_channel.html" class="nav-diagnostics_channel" rel="nofollow"><span style="font-size:14px;">diagnostics_channel</span><span class="api_nav_cn_name" style="font-size:12px;padding-left:2px;">诊断通道</span></a></li>
<li><a href="dns.html" class="nav-dns" rel="nofollow">dns<span class="api_nav_cn_name">域名服务器</span></a></li>
<li><a href="domain.html" class="nav-domain" rel="nofollow">domain<span class="api_nav_cn_name">域</span></a></li>
<li><a href="errors.html" class="nav-errors" rel="nofollow">Error<span class="api_nav_cn_name">错误</span></a></li>
<li><a href="events.html" class="nav-events" rel="nofollow">events<span class="api_nav_cn_name">事件触发器</span></a></li>
<li><a href="" class="nav-fs active" rel="nofollow">fs<span class="api_nav_cn_name">文件系统</span></a></li>
<li><a href="globals.html" class="nav-globals" rel="nofollow">global<span class="api_nav_cn_name">全局变量</span></a></li>
<li><a href="http.html" class="nav-http" rel="nofollow">http<span class="api_nav_cn_name">超文本传输协议</span></a></li>
<li><a href="http2.html" class="nav-http2" rel="nofollow">http2<span class="api_nav_cn_name">超文本传输协议2.0</span></a></li>
<li><a href="https.html" class="nav-https" rel="nofollow">https<span class="api_nav_cn_name">安全超文本传输协议</span></a></li>
<li><a href="inspector.html" class="nav-inspector" rel="nofollow">inspector<span class="api_nav_cn_name">检查器</span></a></li>
<li><a href="intl.html" class="nav-intl" rel="nofollow">Intl<span class="api_nav_cn_name">国际化</span></a></li>
<li><a href="module.html" class="nav-module" rel="nofollow">module<span class="api_nav_cn_name">模块</span></a></li>
<li><a href="modules.html" class="nav-modules" rel="nofollow"><span style="font-size:14px;">module/cjs</span><span class="api_nav_cn_name" style="font-size:12px;padding-left:2px;">CommonJS模块</span></a></li>
<li><a href="esm.html" class="nav-esm" rel="nofollow"><span style="font-size:14px;">module/esm</span><span class="api_nav_cn_name" style="font-size:12px;padding-left:2px;">ECMAScript模块</span></a></li>
<li><a href="packages.html" class="nav-packages" rel="nofollow"><span style="font-size:14px;">module/package</span><span class="api_nav_cn_name" style="font-size:12px;padding-left:2px;">包模块</span></a></li>
<li><a href="net.html" class="nav-net" rel="nofollow">net<span class="api_nav_cn_name">网络</span></a></li>
<li><a href="os.html" class="nav-os" rel="nofollow">os<span class="api_nav_cn_name">操作系统</span></a></li>
<li><a href="path.html" class="nav-path" rel="nofollow">path<span class="api_nav_cn_name">路径</span></a></li>
<li><a href="perf_hooks.html" class="nav-perf_hooks" rel="nofollow">perf_hooks<span class="api_nav_cn_name">性能钩子</span></a></li>
<li><a href="policy.html" class="nav-policy" rel="nofollow">policy<span class="api_nav_cn_name">安全策略</span></a></li>
<li><a href="process.html" class="nav-process" rel="nofollow">process<span class="api_nav_cn_name">进程</span></a></li>
<li><a href="punycode.html" class="nav-punycode" rel="nofollow">punycode<span class="api_nav_cn_name">域名代码</span></a></li>
<li><a href="querystring.html" class="nav-querystring" rel="nofollow">querystring<span class="api_nav_cn_name">查询字符串</span></a></li>
<li><a href="readline.html" class="nav-readline" rel="nofollow">readline<span class="api_nav_cn_name">逐行读取</span></a></li>
<li><a href="repl.html" class="nav-repl" rel="nofollow">repl<span class="api_nav_cn_name">交互式解释器</span></a></li>
<li><a href="report.html" class="nav-report" rel="nofollow">report<span class="api_nav_cn_name">诊断报告</span></a></li>
<li><a href="stream.html" class="nav-stream" rel="nofollow">stream<span class="api_nav_cn_name">流</span></a></li>
<li><a href="webstreams.html" class="nav-webstreams" rel="nofollow">stream/web<span class="api_nav_cn_name">网络流</span></a></li>
<li><a href="string_decoder.html" class="nav-string_decoder" rel="nofollow"><span style="font-size:15px;">string_decoder</span><span class="api_nav_cn_name" style="font-size:12px;padding-left:6px;">字符串解码器</span></a></li>
<li><a href="timers.html" class="nav-timers" rel="nofollow">timers<span class="api_nav_cn_name">定时器</span></a></li>
<li><a href="tls.html" class="nav-tls" rel="nofollow">tls<span class="api_nav_cn_name">安全传输层</span></a></li>
<li><a href="tracing.html" class="nav-tracing" rel="nofollow">trace_events<span class="api_nav_cn_name">跟踪事件</span></a></li>
<li><a href="tty.html" class="nav-tty" rel="nofollow">tty<span class="api_nav_cn_name">终端</span></a></li>
<li><a href="url.html" class="nav-url" rel="nofollow">url<span class="api_nav_cn_name">网址</span></a></li>
<li><a href="util.html" class="nav-util" rel="nofollow">util<span class="api_nav_cn_name">实用工具</span></a></li>
<li><a href="v8.html" class="nav-v8" rel="nofollow">v8<span class="api_nav_cn_name">引擎</span></a></li>
<li><a href="vm.html" class="nav-vm" rel="nofollow">vm<span class="api_nav_cn_name">虚拟机</span></a></li>
<li><a href="wasi.html" class="nav-wasi" rel="nofollow">wasi<span class="api_nav_cn_name">网络汇编系统接口</span></a></li>
<li><a href="worker_threads.html" class="nav-worker_threads" rel="nofollow">worker_threads<span class="api_nav_cn_name">工作线程</span></a></li>
<li><a href="zlib.html" class="nav-zlib" rel="nofollow">zlib<span class="api_nav_cn_name">压缩</span></a></li>
</ul>

    </div>

    <div id="column1" data-id="fs" class="interior">
      <header class="header">
        <div class="header-container">
          <h1>Node.js v16.16.0 文档</h1>
          <button class="theme-toggle-btn" id="theme-toggle-btn" title="Toggle dark mode/light mode" aria-label="Toggle dark mode/light mode" hidden="">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon dark-icon" height="24" width="24">
              <path fill="none" d="M0 0h24v24H0z"></path>
              <path d="M11.1 12.08c-2.33-4.51-.5-8.48.53-10.07C6.27 2.2 1.98 6.59 1.98 12c0 .14.02.28.02.42.62-.27 1.29-.42 2-.42 1.66 0 3.18.83 4.1 2.15A4.01 4.01 0 0111 18c0 1.52-.87 2.83-2.12 3.51.98.32 2.03.5 3.11.5 3.5 0 6.58-1.8 8.37-4.52-2.36.23-6.98-.97-9.26-5.41z"></path>
              <path d="M7 16h-.18C6.4 14.84 5.3 14 4 14c-1.66 0-3 1.34-3 3s1.34 3 3 3h3c1.1 0 2-.9 2-2s-.9-2-2-2z"></path>
            </svg>
            <svg xmlns="http://www.w3.org/2000/svg" class="icon light-icon" height="24" width="24">
              <path d="M0 0h24v24H0z" fill="none"></path>
              <path d="M6.76 4.84l-1.8-1.79-1.41 1.41 1.79 1.79 1.42-1.41zM4 10.5H1v2h3v-2zm9-9.95h-2V3.5h2V.55zm7.45 3.91l-1.41-1.41-1.79 1.79 1.41 1.41 1.79-1.79zm-3.21 13.7l1.79 1.8 1.41-1.41-1.8-1.79-1.4 1.4zM20 10.5v2h3v-2h-3zm-8-5c-3.31 0-6 2.69-6 6s2.69 6 6 6 6-2.69 6-6-2.69-6-6-6zm-1 16.95h2V19.5h-2v2.95zm-7.45-3.91l1.41 1.41 1.79-1.8-1.41-1.41-1.79 1.8z"></path>
            </svg>
          </button>
        </div>
        <div id="gtoc">
          <ul>
            <li class="pinned-header">Node.js 16.16.0</li>
            <!-- <li>
              <a href="./">返回文档首页</a>
            </li> -->
            
    <li class="picker-header" id="header_toc">
      <a href="#">
        <span class="collapsed-arrow">►</span><span class="expanded-arrow">▼</span>
        目录
      </a>

      <div class="picker"><div class="toc"><ul>
<li><span class="stability_2"><a href="#file-system">fs 文件系统</a></span>
<ul>
<li><a href="#promise-example">Promise 的示例</a></li>
<li><a href="#callback-example">回调的示例</a></li>
<li><a href="#synchronous-example">同步的示例</a></li>
<li><a href="#promises-api">Promise 的 API</a>
<ul>
<li><a href="#class-filehandle"><code>FileHandle</code> 类</a>
<ul>
<li><a href="#event-close"><code>'close'</code> 事件</a></li>
<li><a href="#filehandleappendfiledata-options"><code>filehandle.appendFile(data[, options])</code></a></li>
<li><a href="#filehandlechmodmode"><code>filehandle.chmod(mode)</code></a></li>
<li><a href="#filehandlechownuid-gid"><code>filehandle.chown(uid, gid)</code></a></li>
<li><a href="#filehandleclose"><code>filehandle.close()</code></a></li>
<li><a href="#filehandlecreatereadstreamoptions"><code>filehandle.createReadStream([options])</code></a></li>
<li><a href="#filehandlecreatewritestreamoptions"><code>filehandle.createWriteStream([options])</code></a></li>
<li><a href="#filehandledatasync"><code>filehandle.datasync()</code></a></li>
<li><a href="#filehandlefd"><code>filehandle.fd</code></a></li>
<li><a href="#filehandlereadbuffer-offset-length-position"><code>filehandle.read(buffer, offset, length, position)</code></a></li>
<li><a href="#filehandlereadoptions"><code>filehandle.read([options])</code></a></li>
<li><a href="#filehandlereadfileoptions"><code>filehandle.readFile(options)</code></a></li>
<li><a href="#filehandlereadvbuffers-position"><code>filehandle.readv(buffers[, position])</code></a></li>
<li><a href="#filehandlestatoptions"><code>filehandle.stat([options])</code></a></li>
<li><a href="#filehandlesync"><code>filehandle.sync()</code></a></li>
<li><a href="#filehandletruncatelen"><code>filehandle.truncate(len)</code></a></li>
<li><a href="#filehandleutimesatime-mtime"><code>filehandle.utimes(atime, mtime)</code></a></li>
<li><a href="#filehandlewritebuffer-offset-length-position"><code>filehandle.write(buffer[, offset[, length[, position]]])</code></a></li>
<li><a href="#filehandlewritestring-position-encoding"><code>filehandle.write(string[, position[, encoding]])</code></a></li>
<li><a href="#filehandlewritefiledata-options"><code>filehandle.writeFile(data, options)</code></a></li>
<li><a href="#filehandlewritevbuffers-position"><code>filehandle.writev(buffers[, position])</code></a></li>
</ul>
</li>
<li><a href="#fspromisesaccesspath-mode"><code>fsPromises.access(path[, mode])</code></a></li>
<li><a href="#fspromisesappendfilepath-data-options"><code>fsPromises.appendFile(path, data[, options])</code></a></li>
<li><a href="#fspromiseschmodpath-mode"><code>fsPromises.chmod(path, mode)</code></a></li>
<li><a href="#fspromiseschownpath-uid-gid"><code>fsPromises.chown(path, uid, gid)</code></a></li>
<li><a href="#fspromisescopyfilesrc-dest-mode"><code>fsPromises.copyFile(src, dest[, mode])</code></a></li>
<li><span class="stability_1"><a href="#fspromisescpsrc-dest-options"><code>fsPromises.cp(src, dest[, options])</code></a></span></li>
<li><a href="#fspromiseslchmodpath-mode"><code>fsPromises.lchmod(path, mode)</code></a></li>
<li><a href="#fspromiseslchownpath-uid-gid"><code>fsPromises.lchown(path, uid, gid)</code></a></li>
<li><a href="#fspromiseslutimespath-atime-mtime"><code>fsPromises.lutimes(path, atime, mtime)</code></a></li>
<li><a href="#fspromiseslinkexistingpath-newpath"><code>fsPromises.link(existingPath, newPath)</code></a></li>
<li><a href="#fspromiseslstatpath-options"><code>fsPromises.lstat(path[, options])</code></a></li>
<li><a href="#fspromisesmkdirpath-options"><code>fsPromises.mkdir(path[, options])</code></a></li>
<li><a href="#fspromisesmkdtempprefix-options"><code>fsPromises.mkdtemp(prefix[, options])</code></a></li>
<li><a href="#fspromisesopenpath-flags-mode"><code>fsPromises.open(path, flags[, mode])</code></a></li>
<li><a href="#fspromisesopendirpath-options"><code>fsPromises.opendir(path[, options])</code></a></li>
<li><a href="#fspromisesreaddirpath-options"><code>fsPromises.readdir(path[, options])</code></a></li>
<li><a href="#fspromisesreadfilepath-options"><code>fsPromises.readFile(path[, options])</code></a></li>
<li><a href="#fspromisesreadlinkpath-options"><code>fsPromises.readlink(path[, options])</code></a></li>
<li><a href="#fspromisesrealpathpath-options"><code>fsPromises.realpath(path[, options])</code></a></li>
<li><a href="#fspromisesrenameoldpath-newpath"><code>fsPromises.rename(oldPath, newPath)</code></a></li>
<li><a href="#fspromisesrmdirpath-options"><code>fsPromises.rmdir(path[, options])</code></a></li>
<li><a href="#fspromisesrmpath-options"><code>fsPromises.rm(path[, options])</code></a></li>
<li><a href="#fspromisesstatpath-options"><code>fsPromises.stat(path[, options])</code></a></li>
<li><a href="#fspromisessymlinktarget-path-type"><code>fsPromises.symlink(target, path[, type])</code></a></li>
<li><a href="#fspromisestruncatepath-len"><code>fsPromises.truncate(path[, len])</code></a></li>
<li><a href="#fspromisesunlinkpath"><code>fsPromises.unlink(path)</code></a></li>
<li><a href="#fspromisesutimespath-atime-mtime"><code>fsPromises.utimes(path, atime, mtime)</code></a></li>
<li><a href="#fspromiseswatchfilename-options"><code>fsPromises.watch(filename[, options])</code></a></li>
<li><a href="#fspromiseswritefilefile-data-options"><code>fsPromises.writeFile(file, data[, options])</code></a></li>
</ul>
</li>
<li><a href="#callback-api">回调的 API</a>
<ul>
<li><a href="#fsaccesspath-mode-callback"><code>fs.access(path[, mode], callback)</code></a></li>
<li><a href="#fsappendfilepath-data-options-callback"><code>fs.appendFile(path, data[, options], callback)</code></a></li>
<li><a href="#fschmodpath-mode-callback"><code>fs.chmod(path, mode, callback)</code></a>
<ul>
<li><a href="#file-modes">文件的模式</a></li>
</ul>
</li>
<li><a href="#fschownpath-uid-gid-callback"><code>fs.chown(path, uid, gid, callback)</code></a></li>
<li><a href="#fsclosefd-callback"><code>fs.close(fd[, callback])</code></a></li>
<li><a href="#fscopyfilesrc-dest-mode-callback"><code>fs.copyFile(src, dest[, mode], callback)</code></a></li>
<li><span class="stability_1"><a href="#fscpsrc-dest-options-callback"><code>fs.cp(src, dest[, options], callback)</code></a></span></li>
<li><a href="#fscreatereadstreampath-options"><code>fs.createReadStream(path[, options])</code></a></li>
<li><a href="#fscreatewritestreampath-options"><code>fs.createWriteStream(path[, options])</code></a></li>
<li><span class="stability_0"><a href="#fsexistspath-callback"><code>fs.exists(path, callback)</code></a></span></li>
<li><a href="#fsfchmodfd-mode-callback"><code>fs.fchmod(fd, mode, callback)</code></a></li>
<li><a href="#fsfchownfd-uid-gid-callback"><code>fs.fchown(fd, uid, gid, callback)</code></a></li>
<li><a href="#fsfdatasyncfd-callback"><code>fs.fdatasync(fd, callback)</code></a></li>
<li><a href="#fsfstatfd-options-callback"><code>fs.fstat(fd[, options], callback)</code></a></li>
<li><a href="#fsfsyncfd-callback"><code>fs.fsync(fd, callback)</code></a></li>
<li><a href="#fsftruncatefd-len-callback"><code>fs.ftruncate(fd[, len], callback)</code></a></li>
<li><a href="#fsfutimesfd-atime-mtime-callback"><code>fs.futimes(fd, atime, mtime, callback)</code></a></li>
<li><a href="#fslchmodpath-mode-callback"><code>fs.lchmod(path, mode, callback)</code></a></li>
<li><a href="#fslchownpath-uid-gid-callback"><code>fs.lchown(path, uid, gid, callback)</code></a></li>
<li><a href="#fslutimespath-atime-mtime-callback"><code>fs.lutimes(path, atime, mtime, callback)</code></a></li>
<li><a href="#fslinkexistingpath-newpath-callback"><code>fs.link(existingPath, newPath, callback)</code></a></li>
<li><a href="#fslstatpath-options-callback"><code>fs.lstat(path[, options], callback)</code></a></li>
<li><a href="#fsmkdirpath-options-callback"><code>fs.mkdir(path[, options], callback)</code></a></li>
<li><a href="#fsmkdtempprefix-options-callback"><code>fs.mkdtemp(prefix[, options], callback)</code></a></li>
<li><a href="#fsopenpath-flags-mode-callback"><code>fs.open(path[, flags[, mode]], callback)</code></a></li>
<li><a href="#fsopendirpath-options-callback"><code>fs.opendir(path[, options], callback)</code></a></li>
<li><a href="#fsreadfd-buffer-offset-length-position-callback"><code>fs.read(fd, buffer, offset, length, position, callback)</code></a></li>
<li><a href="#fsreadfd-options-callback"><code>fs.read(fd, [options,] callback)</code></a></li>
<li><a href="#fsreaddirpath-options-callback"><code>fs.readdir(path[, options], callback)</code></a></li>
<li><a href="#fsreadfilepath-options-callback"><code>fs.readFile(path[, options], callback)</code></a>
<ul>
<li><a href="#file-descriptors">文件描述符</a></li>
<li><a href="#performance-considerations">性能考量</a></li>
</ul>
</li>
<li><a href="#fsreadlinkpath-options-callback"><code>fs.readlink(path[, options], callback)</code></a></li>
<li><a href="#fsreadvfd-buffers-position-callback"><code>fs.readv(fd, buffers[, position], callback)</code></a></li>
<li><a href="#fsrealpathpath-options-callback"><code>fs.realpath(path[, options], callback)</code></a></li>
<li><a href="#fsrealpathnativepath-options-callback"><code>fs.realpath.native(path[, options], callback)</code></a></li>
<li><a href="#fsrenameoldpath-newpath-callback"><code>fs.rename(oldPath, newPath, callback)</code></a></li>
<li><a href="#fsrmdirpath-options-callback"><code>fs.rmdir(path[, options], callback)</code></a></li>
<li><a href="#fsrmpath-options-callback"><code>fs.rm(path[, options], callback)</code></a></li>
<li><a href="#fsstatpath-options-callback"><code>fs.stat(path[, options], callback)</code></a></li>
<li><a href="#fssymlinktarget-path-type-callback"><code>fs.symlink(target, path[, type], callback)</code></a></li>
<li><a href="#fstruncatepath-len-callback"><code>fs.truncate(path[, len], callback)</code></a></li>
<li><a href="#fsunlinkpath-callback"><code>fs.unlink(path, callback)</code></a></li>
<li><a href="#fsunwatchfilefilename-listener"><code>fs.unwatchFile(filename[, listener])</code></a></li>
<li><a href="#fsutimespath-atime-mtime-callback"><code>fs.utimes(path, atime, mtime, callback)</code></a></li>
<li><a href="#fswatchfilename-options-listener"><code>fs.watch(filename[, options][, listener])</code></a>
<ul>
<li><a href="#caveats">注意事项</a>
<ul>
<li><a href="#availability">可用性</a></li>
<li><a href="#inodes">索引节点</a></li>
<li><a href="#filename-argument">文件名参数</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#fswatchfilefilename-options-listener"><code>fs.watchFile(filename[, options], listener)</code></a></li>
<li><a href="#fswritefd-buffer-offset-length-position-callback"><code>fs.write(fd, buffer[, offset[, length[, position]]], callback)</code></a></li>
<li><a href="#fswritefd-string-position-encoding-callback"><code>fs.write(fd, string[, position[, encoding]], callback)</code></a></li>
<li><a href="#fswritefilefile-data-options-callback"><code>fs.writeFile(file, data[, options], callback)</code></a>
<ul>
<li><a href="#using-fswritefile-with-file-descriptors">将 fs.writeFile() 与文件描述符一起使用</a></li>
</ul>
</li>
<li><a href="#fswritevfd-buffers-position-callback"><code>fs.writev(fd, buffers[, position], callback)</code></a></li>
</ul>
</li>
<li><a href="#synchronous-api">同步的 API</a>
<ul>
<li><a href="#fsaccesssyncpath-mode"><code>fs.accessSync(path[, mode])</code></a></li>
<li><a href="#fsappendfilesyncpath-data-options"><code>fs.appendFileSync(path, data[, options])</code></a></li>
<li><a href="#fschmodsyncpath-mode"><code>fs.chmodSync(path, mode)</code></a></li>
<li><a href="#fschownsyncpath-uid-gid"><code>fs.chownSync(path, uid, gid)</code></a></li>
<li><a href="#fsclosesyncfd"><code>fs.closeSync(fd)</code></a></li>
<li><a href="#fscopyfilesyncsrc-dest-mode"><code>fs.copyFileSync(src, dest[, mode])</code></a></li>
<li><span class="stability_1"><a href="#fscpsyncsrc-dest-options"><code>fs.cpSync(src, dest[, options])</code></a></span></li>
<li><a href="#fsexistssyncpath"><code>fs.existsSync(path)</code></a></li>
<li><a href="#fsfchmodsyncfd-mode"><code>fs.fchmodSync(fd, mode)</code></a></li>
<li><a href="#fsfchownsyncfd-uid-gid"><code>fs.fchownSync(fd, uid, gid)</code></a></li>
<li><a href="#fsfdatasyncsyncfd"><code>fs.fdatasyncSync(fd)</code></a></li>
<li><a href="#fsfstatsyncfd-options"><code>fs.fstatSync(fd[, options])</code></a></li>
<li><a href="#fsfsyncsyncfd"><code>fs.fsyncSync(fd)</code></a></li>
<li><a href="#fsftruncatesyncfd-len"><code>fs.ftruncateSync(fd[, len])</code></a></li>
<li><a href="#fsfutimessyncfd-atime-mtime"><code>fs.futimesSync(fd, atime, mtime)</code></a></li>
<li><a href="#fslchmodsyncpath-mode"><code>fs.lchmodSync(path, mode)</code></a></li>
<li><a href="#fslchownsyncpath-uid-gid"><code>fs.lchownSync(path, uid, gid)</code></a></li>
<li><a href="#fslutimessyncpath-atime-mtime"><code>fs.lutimesSync(path, atime, mtime)</code></a></li>
<li><a href="#fslinksyncexistingpath-newpath"><code>fs.linkSync(existingPath, newPath)</code></a></li>
<li><a href="#fslstatsyncpath-options"><code>fs.lstatSync(path[, options])</code></a></li>
<li><a href="#fsmkdirsyncpath-options"><code>fs.mkdirSync(path[, options])</code></a></li>
<li><a href="#fsmkdtempsyncprefix-options"><code>fs.mkdtempSync(prefix[, options])</code></a></li>
<li><a href="#fsopendirsyncpath-options"><code>fs.opendirSync(path[, options])</code></a></li>
<li><a href="#fsopensyncpath-flags-mode"><code>fs.openSync(path[, flags[, mode]])</code></a></li>
<li><a href="#fsreaddirsyncpath-options"><code>fs.readdirSync(path[, options])</code></a></li>
<li><a href="#fsreadfilesyncpath-options"><code>fs.readFileSync(path[, options])</code></a></li>
<li><a href="#fsreadlinksyncpath-options"><code>fs.readlinkSync(path[, options])</code></a></li>
<li><a href="#fsreadsyncfd-buffer-offset-length-position"><code>fs.readSync(fd, buffer, offset, length, position)</code></a></li>
<li><a href="#fsreadsyncfd-buffer-options"><code>fs.readSync(fd, buffer[, options])</code></a></li>
<li><a href="#fsreadvsyncfd-buffers-position"><code>fs.readvSync(fd, buffers[, position])</code></a></li>
<li><a href="#fsrealpathsyncpath-options"><code>fs.realpathSync(path[, options])</code></a></li>
<li><a href="#fsrealpathsyncnativepath-options"><code>fs.realpathSync.native(path[, options])</code></a></li>
<li><a href="#fsrenamesyncoldpath-newpath"><code>fs.renameSync(oldPath, newPath)</code></a></li>
<li><a href="#fsrmdirsyncpath-options"><code>fs.rmdirSync(path[, options])</code></a></li>
<li><a href="#fsrmsyncpath-options"><code>fs.rmSync(path[, options])</code></a></li>
<li><a href="#fsstatsyncpath-options"><code>fs.statSync(path[, options])</code></a></li>
<li><a href="#fssymlinksynctarget-path-type"><code>fs.symlinkSync(target, path[, type])</code></a></li>
<li><a href="#fstruncatesyncpath-len"><code>fs.truncateSync(path[, len])</code></a></li>
<li><a href="#fsunlinksyncpath"><code>fs.unlinkSync(path)</code></a></li>
<li><a href="#fsutimessyncpath-atime-mtime"><code>fs.utimesSync(path, atime, mtime)</code></a></li>
<li><a href="#fswritefilesyncfile-data-options"><code>fs.writeFileSync(file, data[, options])</code></a></li>
<li><a href="#fswritesyncfd-buffer-offset-length-position"><code>fs.writeSync(fd, buffer[, offset[, length[, position]]])</code></a></li>
<li><a href="#fswritesyncfd-string-position-encoding"><code>fs.writeSync(fd, string[, position[, encoding]])</code></a></li>
<li><a href="#fswritevsyncfd-buffers-position"><code>fs.writevSync(fd, buffers[, position])</code></a></li>
</ul>
</li>
<li><a href="#common-objects">公共对象</a>
<ul>
<li><a href="#class-fsdir"><code>fs.Dir</code> 类</a>
<ul>
<li><a href="#dirclose"><code>dir.close()</code></a></li>
<li><a href="#dirclosecallback"><code>dir.close(callback)</code></a></li>
<li><a href="#dirclosesync"><code>dir.closeSync()</code></a></li>
<li><a href="#dirpath"><code>dir.path</code></a></li>
<li><a href="#dirread"><code>dir.read()</code></a></li>
<li><a href="#dirreadcallback"><code>dir.read(callback)</code></a></li>
<li><a href="#dirreadsync"><code>dir.readSync()</code></a></li>
<li><a href="#dirsymbolasynciterator"><code>dir[Symbol.asyncIterator]()</code></a></li>
</ul>
</li>
<li><a href="#class-fsdirent"><code>fs.Dirent</code> 类</a>
<ul>
<li><a href="#direntisblockdevice"><code>dirent.isBlockDevice()</code></a></li>
<li><a href="#direntischaracterdevice"><code>dirent.isCharacterDevice()</code></a></li>
<li><a href="#direntisdirectory"><code>dirent.isDirectory()</code></a></li>
<li><a href="#direntisfifo"><code>dirent.isFIFO()</code></a></li>
<li><a href="#direntisfile"><code>dirent.isFile()</code></a></li>
<li><a href="#direntissocket"><code>dirent.isSocket()</code></a></li>
<li><a href="#direntissymboliclink"><code>dirent.isSymbolicLink()</code></a></li>
<li><a href="#direntname"><code>dirent.name</code></a></li>
</ul>
</li>
<li><a href="#class-fsfswatcher"><code>fs.FSWatcher</code> 类</a>
<ul>
<li><a href="#event-change"><code>'change'</code> 事件</a></li>
<li><a href="#event-close_1"><code>'close'</code> 事件</a></li>
<li><a href="#event-error"><code>'error'</code> 事件</a></li>
<li><a href="#watcherclose"><code>watcher.close()</code></a></li>
<li><a href="#watcherref"><code>watcher.ref()</code></a></li>
<li><a href="#watcherunref"><code>watcher.unref()</code></a></li>
</ul>
</li>
<li><a href="#class-fsstatwatcher"><code>fs.StatWatcher</code> 类</a>
<ul>
<li><a href="#watcherref_1"><code>watcher.ref()</code></a></li>
<li><a href="#watcherunref_1"><code>watcher.unref()</code></a></li>
</ul>
</li>
<li><a href="#class-fsreadstream"><code>fs.ReadStream</code> 类</a>
<ul>
<li><a href="#event-close_2"><code>'close'</code> 事件</a></li>
<li><a href="#event-open"><code>'open'</code> 事件</a></li>
<li><a href="#event-ready"><code>'ready'</code> 事件</a></li>
<li><a href="#readstreambytesread"><code>readStream.bytesRead</code></a></li>
<li><a href="#readstreampath"><code>readStream.path</code></a></li>
<li><a href="#readstreampending"><code>readStream.pending</code></a></li>
</ul>
</li>
<li><a href="#class-fsstats"><code>fs.Stats</code> 类</a>
<ul>
<li><a href="#statsisblockdevice"><code>stats.isBlockDevice()</code></a></li>
<li><a href="#statsischaracterdevice"><code>stats.isCharacterDevice()</code></a></li>
<li><a href="#statsisdirectory"><code>stats.isDirectory()</code></a></li>
<li><a href="#statsisfifo"><code>stats.isFIFO()</code></a></li>
<li><a href="#statsisfile"><code>stats.isFile()</code></a></li>
<li><a href="#statsissocket"><code>stats.isSocket()</code></a></li>
<li><a href="#statsissymboliclink"><code>stats.isSymbolicLink()</code></a></li>
<li><a href="#statsdev"><code>stats.dev</code></a></li>
<li><a href="#statsino"><code>stats.ino</code></a></li>
<li><a href="#statsmode"><code>stats.mode</code></a></li>
<li><a href="#statsnlink"><code>stats.nlink</code></a></li>
<li><a href="#statsuid"><code>stats.uid</code></a></li>
<li><a href="#statsgid"><code>stats.gid</code></a></li>
<li><a href="#statsrdev"><code>stats.rdev</code></a></li>
<li><a href="#statssize"><code>stats.size</code></a></li>
<li><a href="#statsblksize"><code>stats.blksize</code></a></li>
<li><a href="#statsblocks"><code>stats.blocks</code></a></li>
<li><a href="#statsatimems"><code>stats.atimeMs</code></a></li>
<li><a href="#statsmtimems"><code>stats.mtimeMs</code></a></li>
<li><a href="#statsctimems"><code>stats.ctimeMs</code></a></li>
<li><a href="#statsbirthtimems"><code>stats.birthtimeMs</code></a></li>
<li><a href="#statsatimens"><code>stats.atimeNs</code></a></li>
<li><a href="#statsmtimens"><code>stats.mtimeNs</code></a></li>
<li><a href="#statsctimens"><code>stats.ctimeNs</code></a></li>
<li><a href="#statsbirthtimens"><code>stats.birthtimeNs</code></a></li>
<li><a href="#statsatime"><code>stats.atime</code></a></li>
<li><a href="#statsmtime"><code>stats.mtime</code></a></li>
<li><a href="#statsctime"><code>stats.ctime</code></a></li>
<li><a href="#statsbirthtime"><code>stats.birthtime</code></a></li>
<li><a href="#stat-time-values">统计的时间值</a></li>
</ul>
</li>
<li><a href="#class-fswritestream"><code>fs.WriteStream</code> 类</a>
<ul>
<li><a href="#event-close_3"><code>'close'</code> 事件</a></li>
<li><a href="#event-open_1"><code>'open'</code> 事件</a></li>
<li><a href="#event-ready_1"><code>'ready'</code> 事件</a></li>
<li><a href="#writestreambyteswritten"><code>writeStream.bytesWritten</code></a></li>
<li><a href="#writestreamclosecallback"><code>writeStream.close([callback])</code></a></li>
<li><a href="#writestreampath"><code>writeStream.path</code></a></li>
<li><a href="#writestreampending"><code>writeStream.pending</code></a></li>
</ul>
</li>
<li><a href="#fsconstants"><code>fs.constants</code></a>
<ul>
<li><a href="#fs-constants">FS 常量</a>
<ul>
<li><a href="#file-access-constants">文件访问的常量</a></li>
<li><a href="#file-copy-constants">文件复制的常量</a></li>
<li><a href="#file-open-constants">文件打开的常量</a></li>
<li><a href="#file-type-constants">文件类型的常量</a></li>
<li><a href="#file-mode-constants">文件模式的常量</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><a href="#notes">注意事项</a>
<ul>
<li><a href="#ordering-of-callback-and-promise-based-operations">回调与基于 promise 的操作的顺序</a></li>
<li><a href="#file-paths">文件路径</a>
<ul>
<li><a href="#string-paths">字符串路径</a></li>
<li><a href="#file-url-paths">文件 URL 路径</a>
<ul>
<li><a href="#platform-specific-considerations">平台特定的注意事项</a></li>
</ul>
</li>
<li><a href="#buffer-paths">Buffer 路径</a></li>
<li><a href="#per-drive-working-directories-on-windows">Windows 上的独立驱动器工作目录</a></li>
</ul>
</li>
<li><a href="#file-descriptors_1">文件描述符</a></li>
<li><a href="#threadpool-usage">线程池的使用</a></li>
<li><a href="#file-system-flags">文件系统标志</a></li>
</ul>
</li>
</ul>
</li>
</ul></div></div>
    </li>
  
            
    <li class="picker-header">
      <a href="#">
        <span class="collapsed-arrow">►</span><span class="expanded-arrow">▼</span>
        索引
      </a>

      <div class="picker"><ul>
<li><a href="documentation.html" class="nav-documentation">关于本文档</a></li>
<li><a href="synopsis.html" class="nav-synopsis">用法与示例</a></li>

      <li>
        <a href="index.html">首页</a>
      </li>
    </ul>
  
<hr class="line">
<ul>
<li><a href="assert.html" class="nav-assert">assert 断言</a></li>
<li><a href="async_hooks.html" class="nav-async_hooks">async_hooks 异步钩子</a></li>
<li><a href="async_context.html" class="nav-async_context">async_hooks/context 异步上下文</a></li>
<li><a href="buffer.html" class="nav-buffer">buffer 缓冲区</a></li>
<li><a href="addons.html" class="nav-addons">C++插件</a></li>
<li><a href="n-api.html" class="nav-n-api">C/C++插件(使用Node-API)</a></li>
<li><a href="embedding.html" class="nav-embedding">C++嵌入器</a></li>
<li><a href="child_process.html" class="nav-child_process">child_process 子进程</a></li>
<li><a href="cluster.html" class="nav-cluster">cluster 集群</a></li>
<li><a href="cli.html" class="nav-cli">CLI 命令行</a></li>
<li><a href="console.html" class="nav-console">console 控制台</a></li>
<li><a href="corepack.html" class="nav-corepack">Corepack 核心包</a></li>
<li><a href="crypto.html" class="nav-crypto">crypto 加密</a></li>
<li><a href="webcrypto.html" class="nav-webcrypto">crypto/webcrypto 网络加密</a></li>
<li><a href="debugger.html" class="nav-debugger">debugger 调试器</a></li>
<li><a href="deprecations.html" class="nav-deprecations">deprecation 弃用</a></li>
<li><a href="dgram.html" class="nav-dgram">dgram 数据报</a></li>
<li><a href="diagnostics_channel.html" class="nav-diagnostics_channel">diagnostics_channel 诊断通道</a></li>
<li><a href="dns.html" class="nav-dns">dns 域名服务器</a></li>
<li><a href="domain.html" class="nav-domain">domain 域</a></li>
<li><a href="errors.html" class="nav-errors">Error 错误</a></li>
<li><a href="events.html" class="nav-events">events 事件触发器</a></li>
<li><a href="" class="nav-fs active">fs 文件系统</a></li>
<li><a href="globals.html" class="nav-globals">global 全局变量</a></li>
<li><a href="http.html" class="nav-http">http 超文本传输协议</a></li>
<li><a href="http2.html" class="nav-http2">http2 超文本传输协议2.0</a></li>
<li><a href="https.html" class="nav-https">https 安全超文本传输协议</a></li>
<li><a href="inspector.html" class="nav-inspector">inspector 检查器</a></li>
<li><a href="intl.html" class="nav-intl">Intl 国际化</a></li>
<li><a href="module.html" class="nav-module">module 模块</a></li>
<li><a href="modules.html" class="nav-modules">module/cjs CommonJS模块</a></li>
<li><a href="esm.html" class="nav-esm">module/esm ECMAScript模块</a></li>
<li><a href="packages.html" class="nav-packages">module/package 包模块</a></li>
<li><a href="net.html" class="nav-net">net 网络</a></li>
<li><a href="os.html" class="nav-os">os 操作系统</a></li>
<li><a href="path.html" class="nav-path">path 路径</a></li>
<li><a href="perf_hooks.html" class="nav-perf_hooks">perf_hooks 性能钩子</a></li>
<li><a href="policy.html" class="nav-policy">policy 安全策略</a></li>
<li><a href="process.html" class="nav-process">process 进程</a></li>
<li><a href="punycode.html" class="nav-punycode">punycode 域名代码</a></li>
<li><a href="querystring.html" class="nav-querystring">querystring 查询字符串</a></li>
<li><a href="readline.html" class="nav-readline">readline 逐行读取</a></li>
<li><a href="repl.html" class="nav-repl">repl 交互式解释器</a></li>
<li><a href="report.html" class="nav-report">report 诊断报告</a></li>
<li><a href="stream.html" class="nav-stream">stream 流</a></li>
<li><a href="webstreams.html" class="nav-webstreams">stream/web 网络流</a></li>
<li><a href="string_decoder.html" class="nav-string_decoder">string_decoder 字符串解码器</a></li>
<li><a href="timers.html" class="nav-timers">timers 定时器</a></li>
<li><a href="tls.html" class="nav-tls">tls 安全传输层</a></li>
<li><a href="tracing.html" class="nav-tracing">trace_events 跟踪事件</a></li>
<li><a href="tty.html" class="nav-tty">tty 终端</a></li>
<li><a href="url.html" class="nav-url">url 网址</a></li>
<li><a href="util.html" class="nav-util">util 实用工具</a></li>
<li><a href="v8.html" class="nav-v8">v8 引擎</a></li>
<li><a href="vm.html" class="nav-vm">vm 虚拟机</a></li>
<li><a href="wasi.html" class="nav-wasi">wasi 网络汇编系统接口</a></li>
<li><a href="worker_threads.html" class="nav-worker_threads">worker_threads 工作线程</a></li>
<li><a href="zlib.html" class="nav-zlib">zlib 压缩</a></li>
</ul></div>
    </li>
  
            <li class="picker-header">
    <a href="#">
        <span class="collapsed-arrow">►</span><span class="expanded-arrow">▼</span>
        其他版本
      </a>
    <div class="picker"><ol id="alt-docs">
    <li><a href="../api/fs.html">18.6.0</a></li><li><a href="">16.16.0</a></li><li><a href="../api-v14/fs.html">14.20.0</a></li>
</ol></div>
  </li>
            <li>
              <a href="http://api.nodejs.cn/" class="link-to-search">搜索</a>
            </li>
            <li>
              
              
            </li>
          </ul>
        </div>
        <hr>
      </header>

      <details id="toc" open=""><summary>目录</summary><ul>
<li><span class="stability_2"><a href="#file-system">fs 文件系统</a></span>
<ul>
<li><a href="#promise-example">Promise 的示例</a></li>
<li><a href="#callback-example">回调的示例</a></li>
<li><a href="#synchronous-example">同步的示例</a></li>
<li><a href="#promises-api">Promise 的 API</a>
<ul>
<li><a href="#class-filehandle"><code>FileHandle</code> 类</a>
<ul>
<li><a href="#event-close"><code>'close'</code> 事件</a></li>
<li><a href="#filehandleappendfiledata-options"><code>filehandle.appendFile(data[, options])</code></a></li>
<li><a href="#filehandlechmodmode"><code>filehandle.chmod(mode)</code></a></li>
<li><a href="#filehandlechownuid-gid"><code>filehandle.chown(uid, gid)</code></a></li>
<li><a href="#filehandleclose"><code>filehandle.close()</code></a></li>
<li><a href="#filehandlecreatereadstreamoptions"><code>filehandle.createReadStream([options])</code></a></li>
<li><a href="#filehandlecreatewritestreamoptions"><code>filehandle.createWriteStream([options])</code></a></li>
<li><a href="#filehandledatasync"><code>filehandle.datasync()</code></a></li>
<li><a href="#filehandlefd"><code>filehandle.fd</code></a></li>
<li><a href="#filehandlereadbuffer-offset-length-position"><code>filehandle.read(buffer, offset, length, position)</code></a></li>
<li><a href="#filehandlereadoptions"><code>filehandle.read([options])</code></a></li>
<li><a href="#filehandlereadfileoptions"><code>filehandle.readFile(options)</code></a></li>
<li><a href="#filehandlereadvbuffers-position"><code>filehandle.readv(buffers[, position])</code></a></li>
<li><a href="#filehandlestatoptions"><code>filehandle.stat([options])</code></a></li>
<li><a href="#filehandlesync"><code>filehandle.sync()</code></a></li>
<li><a href="#filehandletruncatelen"><code>filehandle.truncate(len)</code></a></li>
<li><a href="#filehandleutimesatime-mtime"><code>filehandle.utimes(atime, mtime)</code></a></li>
<li><a href="#filehandlewritebuffer-offset-length-position"><code>filehandle.write(buffer[, offset[, length[, position]]])</code></a></li>
<li><a href="#filehandlewritestring-position-encoding"><code>filehandle.write(string[, position[, encoding]])</code></a></li>
<li><a href="#filehandlewritefiledata-options"><code>filehandle.writeFile(data, options)</code></a></li>
<li><a href="#filehandlewritevbuffers-position"><code>filehandle.writev(buffers[, position])</code></a></li>
</ul>
</li>
<li><a href="#fspromisesaccesspath-mode"><code>fsPromises.access(path[, mode])</code></a></li>
<li><a href="#fspromisesappendfilepath-data-options"><code>fsPromises.appendFile(path, data[, options])</code></a></li>
<li><a href="#fspromiseschmodpath-mode"><code>fsPromises.chmod(path, mode)</code></a></li>
<li><a href="#fspromiseschownpath-uid-gid"><code>fsPromises.chown(path, uid, gid)</code></a></li>
<li><a href="#fspromisescopyfilesrc-dest-mode"><code>fsPromises.copyFile(src, dest[, mode])</code></a></li>
<li><span class="stability_1"><a href="#fspromisescpsrc-dest-options"><code>fsPromises.cp(src, dest[, options])</code></a></span></li>
<li><a href="#fspromiseslchmodpath-mode"><code>fsPromises.lchmod(path, mode)</code></a></li>
<li><a href="#fspromiseslchownpath-uid-gid"><code>fsPromises.lchown(path, uid, gid)</code></a></li>
<li><a href="#fspromiseslutimespath-atime-mtime"><code>fsPromises.lutimes(path, atime, mtime)</code></a></li>
<li><a href="#fspromiseslinkexistingpath-newpath"><code>fsPromises.link(existingPath, newPath)</code></a></li>
<li><a href="#fspromiseslstatpath-options"><code>fsPromises.lstat(path[, options])</code></a></li>
<li><a href="#fspromisesmkdirpath-options"><code>fsPromises.mkdir(path[, options])</code></a></li>
<li><a href="#fspromisesmkdtempprefix-options"><code>fsPromises.mkdtemp(prefix[, options])</code></a></li>
<li><a href="#fspromisesopenpath-flags-mode"><code>fsPromises.open(path, flags[, mode])</code></a></li>
<li><a href="#fspromisesopendirpath-options"><code>fsPromises.opendir(path[, options])</code></a></li>
<li><a href="#fspromisesreaddirpath-options"><code>fsPromises.readdir(path[, options])</code></a></li>
<li><a href="#fspromisesreadfilepath-options"><code>fsPromises.readFile(path[, options])</code></a></li>
<li><a href="#fspromisesreadlinkpath-options"><code>fsPromises.readlink(path[, options])</code></a></li>
<li><a href="#fspromisesrealpathpath-options"><code>fsPromises.realpath(path[, options])</code></a></li>
<li><a href="#fspromisesrenameoldpath-newpath"><code>fsPromises.rename(oldPath, newPath)</code></a></li>
<li><a href="#fspromisesrmdirpath-options"><code>fsPromises.rmdir(path[, options])</code></a></li>
<li><a href="#fspromisesrmpath-options"><code>fsPromises.rm(path[, options])</code></a></li>
<li><a href="#fspromisesstatpath-options"><code>fsPromises.stat(path[, options])</code></a></li>
<li><a href="#fspromisessymlinktarget-path-type"><code>fsPromises.symlink(target, path[, type])</code></a></li>
<li><a href="#fspromisestruncatepath-len"><code>fsPromises.truncate(path[, len])</code></a></li>
<li><a href="#fspromisesunlinkpath"><code>fsPromises.unlink(path)</code></a></li>
<li><a href="#fspromisesutimespath-atime-mtime"><code>fsPromises.utimes(path, atime, mtime)</code></a></li>
<li><a href="#fspromiseswatchfilename-options"><code>fsPromises.watch(filename[, options])</code></a></li>
<li><a href="#fspromiseswritefilefile-data-options"><code>fsPromises.writeFile(file, data[, options])</code></a></li>
</ul>
</li>
<li><a href="#callback-api">回调的 API</a>
<ul>
<li><a href="#fsaccesspath-mode-callback"><code>fs.access(path[, mode], callback)</code></a></li>
<li><a href="#fsappendfilepath-data-options-callback"><code>fs.appendFile(path, data[, options], callback)</code></a></li>
<li><a href="#fschmodpath-mode-callback"><code>fs.chmod(path, mode, callback)</code></a>
<ul>
<li><a href="#file-modes">文件的模式</a></li>
</ul>
</li>
<li><a href="#fschownpath-uid-gid-callback"><code>fs.chown(path, uid, gid, callback)</code></a></li>
<li><a href="#fsclosefd-callback"><code>fs.close(fd[, callback])</code></a></li>
<li><a href="#fscopyfilesrc-dest-mode-callback"><code>fs.copyFile(src, dest[, mode], callback)</code></a></li>
<li><span class="stability_1"><a href="#fscpsrc-dest-options-callback"><code>fs.cp(src, dest[, options], callback)</code></a></span></li>
<li><a href="#fscreatereadstreampath-options"><code>fs.createReadStream(path[, options])</code></a></li>
<li><a href="#fscreatewritestreampath-options"><code>fs.createWriteStream(path[, options])</code></a></li>
<li><span class="stability_0"><a href="#fsexistspath-callback"><code>fs.exists(path, callback)</code></a></span></li>
<li><a href="#fsfchmodfd-mode-callback"><code>fs.fchmod(fd, mode, callback)</code></a></li>
<li><a href="#fsfchownfd-uid-gid-callback"><code>fs.fchown(fd, uid, gid, callback)</code></a></li>
<li><a href="#fsfdatasyncfd-callback"><code>fs.fdatasync(fd, callback)</code></a></li>
<li><a href="#fsfstatfd-options-callback"><code>fs.fstat(fd[, options], callback)</code></a></li>
<li><a href="#fsfsyncfd-callback"><code>fs.fsync(fd, callback)</code></a></li>
<li><a href="#fsftruncatefd-len-callback"><code>fs.ftruncate(fd[, len], callback)</code></a></li>
<li><a href="#fsfutimesfd-atime-mtime-callback"><code>fs.futimes(fd, atime, mtime, callback)</code></a></li>
<li><a href="#fslchmodpath-mode-callback"><code>fs.lchmod(path, mode, callback)</code></a></li>
<li><a href="#fslchownpath-uid-gid-callback"><code>fs.lchown(path, uid, gid, callback)</code></a></li>
<li><a href="#fslutimespath-atime-mtime-callback"><code>fs.lutimes(path, atime, mtime, callback)</code></a></li>
<li><a href="#fslinkexistingpath-newpath-callback"><code>fs.link(existingPath, newPath, callback)</code></a></li>
<li><a href="#fslstatpath-options-callback"><code>fs.lstat(path[, options], callback)</code></a></li>
<li><a href="#fsmkdirpath-options-callback"><code>fs.mkdir(path[, options], callback)</code></a></li>
<li><a href="#fsmkdtempprefix-options-callback"><code>fs.mkdtemp(prefix[, options], callback)</code></a></li>
<li><a href="#fsopenpath-flags-mode-callback"><code>fs.open(path[, flags[, mode]], callback)</code></a></li>
<li><a href="#fsopendirpath-options-callback"><code>fs.opendir(path[, options], callback)</code></a></li>
<li><a href="#fsreadfd-buffer-offset-length-position-callback"><code>fs.read(fd, buffer, offset, length, position, callback)</code></a></li>
<li><a href="#fsreadfd-options-callback"><code>fs.read(fd, [options,] callback)</code></a></li>
<li><a href="#fsreaddirpath-options-callback"><code>fs.readdir(path[, options], callback)</code></a></li>
<li><a href="#fsreadfilepath-options-callback"><code>fs.readFile(path[, options], callback)</code></a>
<ul>
<li><a href="#file-descriptors">文件描述符</a></li>
<li><a href="#performance-considerations">性能考量</a></li>
</ul>
</li>
<li><a href="#fsreadlinkpath-options-callback"><code>fs.readlink(path[, options], callback)</code></a></li>
<li><a href="#fsreadvfd-buffers-position-callback"><code>fs.readv(fd, buffers[, position], callback)</code></a></li>
<li><a href="#fsrealpathpath-options-callback"><code>fs.realpath(path[, options], callback)</code></a></li>
<li><a href="#fsrealpathnativepath-options-callback"><code>fs.realpath.native(path[, options], callback)</code></a></li>
<li><a href="#fsrenameoldpath-newpath-callback"><code>fs.rename(oldPath, newPath, callback)</code></a></li>
<li><a href="#fsrmdirpath-options-callback"><code>fs.rmdir(path[, options], callback)</code></a></li>
<li><a href="#fsrmpath-options-callback"><code>fs.rm(path[, options], callback)</code></a></li>
<li><a href="#fsstatpath-options-callback"><code>fs.stat(path[, options], callback)</code></a></li>
<li><a href="#fssymlinktarget-path-type-callback"><code>fs.symlink(target, path[, type], callback)</code></a></li>
<li><a href="#fstruncatepath-len-callback"><code>fs.truncate(path[, len], callback)</code></a></li>
<li><a href="#fsunlinkpath-callback"><code>fs.unlink(path, callback)</code></a></li>
<li><a href="#fsunwatchfilefilename-listener"><code>fs.unwatchFile(filename[, listener])</code></a></li>
<li><a href="#fsutimespath-atime-mtime-callback"><code>fs.utimes(path, atime, mtime, callback)</code></a></li>
<li><a href="#fswatchfilename-options-listener"><code>fs.watch(filename[, options][, listener])</code></a>
<ul>
<li><a href="#caveats">注意事项</a>
<ul>
<li><a href="#availability">可用性</a></li>
<li><a href="#inodes">索引节点</a></li>
<li><a href="#filename-argument">文件名参数</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#fswatchfilefilename-options-listener"><code>fs.watchFile(filename[, options], listener)</code></a></li>
<li><a href="#fswritefd-buffer-offset-length-position-callback"><code>fs.write(fd, buffer[, offset[, length[, position]]], callback)</code></a></li>
<li><a href="#fswritefd-string-position-encoding-callback"><code>fs.write(fd, string[, position[, encoding]], callback)</code></a></li>
<li><a href="#fswritefilefile-data-options-callback"><code>fs.writeFile(file, data[, options], callback)</code></a>
<ul>
<li><a href="#using-fswritefile-with-file-descriptors">将 fs.writeFile() 与文件描述符一起使用</a></li>
</ul>
</li>
<li><a href="#fswritevfd-buffers-position-callback"><code>fs.writev(fd, buffers[, position], callback)</code></a></li>
</ul>
</li>
<li><a href="#synchronous-api">同步的 API</a>
<ul>
<li><a href="#fsaccesssyncpath-mode"><code>fs.accessSync(path[, mode])</code></a></li>
<li><a href="#fsappendfilesyncpath-data-options"><code>fs.appendFileSync(path, data[, options])</code></a></li>
<li><a href="#fschmodsyncpath-mode"><code>fs.chmodSync(path, mode)</code></a></li>
<li><a href="#fschownsyncpath-uid-gid"><code>fs.chownSync(path, uid, gid)</code></a></li>
<li><a href="#fsclosesyncfd"><code>fs.closeSync(fd)</code></a></li>
<li><a href="#fscopyfilesyncsrc-dest-mode"><code>fs.copyFileSync(src, dest[, mode])</code></a></li>
<li><span class="stability_1"><a href="#fscpsyncsrc-dest-options"><code>fs.cpSync(src, dest[, options])</code></a></span></li>
<li><a href="#fsexistssyncpath"><code>fs.existsSync(path)</code></a></li>
<li><a href="#fsfchmodsyncfd-mode"><code>fs.fchmodSync(fd, mode)</code></a></li>
<li><a href="#fsfchownsyncfd-uid-gid"><code>fs.fchownSync(fd, uid, gid)</code></a></li>
<li><a href="#fsfdatasyncsyncfd"><code>fs.fdatasyncSync(fd)</code></a></li>
<li><a href="#fsfstatsyncfd-options"><code>fs.fstatSync(fd[, options])</code></a></li>
<li><a href="#fsfsyncsyncfd"><code>fs.fsyncSync(fd)</code></a></li>
<li><a href="#fsftruncatesyncfd-len"><code>fs.ftruncateSync(fd[, len])</code></a></li>
<li><a href="#fsfutimessyncfd-atime-mtime"><code>fs.futimesSync(fd, atime, mtime)</code></a></li>
<li><a href="#fslchmodsyncpath-mode"><code>fs.lchmodSync(path, mode)</code></a></li>
<li><a href="#fslchownsyncpath-uid-gid"><code>fs.lchownSync(path, uid, gid)</code></a></li>
<li><a href="#fslutimessyncpath-atime-mtime"><code>fs.lutimesSync(path, atime, mtime)</code></a></li>
<li><a href="#fslinksyncexistingpath-newpath"><code>fs.linkSync(existingPath, newPath)</code></a></li>
<li><a href="#fslstatsyncpath-options"><code>fs.lstatSync(path[, options])</code></a></li>
<li><a href="#fsmkdirsyncpath-options"><code>fs.mkdirSync(path[, options])</code></a></li>
<li><a href="#fsmkdtempsyncprefix-options"><code>fs.mkdtempSync(prefix[, options])</code></a></li>
<li><a href="#fsopendirsyncpath-options"><code>fs.opendirSync(path[, options])</code></a></li>
<li><a href="#fsopensyncpath-flags-mode"><code>fs.openSync(path[, flags[, mode]])</code></a></li>
<li><a href="#fsreaddirsyncpath-options"><code>fs.readdirSync(path[, options])</code></a></li>
<li><a href="#fsreadfilesyncpath-options"><code>fs.readFileSync(path[, options])</code></a></li>
<li><a href="#fsreadlinksyncpath-options"><code>fs.readlinkSync(path[, options])</code></a></li>
<li><a href="#fsreadsyncfd-buffer-offset-length-position"><code>fs.readSync(fd, buffer, offset, length, position)</code></a></li>
<li><a href="#fsreadsyncfd-buffer-options"><code>fs.readSync(fd, buffer[, options])</code></a></li>
<li><a href="#fsreadvsyncfd-buffers-position"><code>fs.readvSync(fd, buffers[, position])</code></a></li>
<li><a href="#fsrealpathsyncpath-options"><code>fs.realpathSync(path[, options])</code></a></li>
<li><a href="#fsrealpathsyncnativepath-options"><code>fs.realpathSync.native(path[, options])</code></a></li>
<li><a href="#fsrenamesyncoldpath-newpath"><code>fs.renameSync(oldPath, newPath)</code></a></li>
<li><a href="#fsrmdirsyncpath-options"><code>fs.rmdirSync(path[, options])</code></a></li>
<li><a href="#fsrmsyncpath-options"><code>fs.rmSync(path[, options])</code></a></li>
<li><a href="#fsstatsyncpath-options"><code>fs.statSync(path[, options])</code></a></li>
<li><a href="#fssymlinksynctarget-path-type"><code>fs.symlinkSync(target, path[, type])</code></a></li>
<li><a href="#fstruncatesyncpath-len"><code>fs.truncateSync(path[, len])</code></a></li>
<li><a href="#fsunlinksyncpath"><code>fs.unlinkSync(path)</code></a></li>
<li><a href="#fsutimessyncpath-atime-mtime"><code>fs.utimesSync(path, atime, mtime)</code></a></li>
<li><a href="#fswritefilesyncfile-data-options"><code>fs.writeFileSync(file, data[, options])</code></a></li>
<li><a href="#fswritesyncfd-buffer-offset-length-position"><code>fs.writeSync(fd, buffer[, offset[, length[, position]]])</code></a></li>
<li><a href="#fswritesyncfd-string-position-encoding"><code>fs.writeSync(fd, string[, position[, encoding]])</code></a></li>
<li><a href="#fswritevsyncfd-buffers-position"><code>fs.writevSync(fd, buffers[, position])</code></a></li>
</ul>
</li>
<li><a href="#common-objects">公共对象</a>
<ul>
<li><a href="#class-fsdir"><code>fs.Dir</code> 类</a>
<ul>
<li><a href="#dirclose"><code>dir.close()</code></a></li>
<li><a href="#dirclosecallback"><code>dir.close(callback)</code></a></li>
<li><a href="#dirclosesync"><code>dir.closeSync()</code></a></li>
<li><a href="#dirpath"><code>dir.path</code></a></li>
<li><a href="#dirread"><code>dir.read()</code></a></li>
<li><a href="#dirreadcallback"><code>dir.read(callback)</code></a></li>
<li><a href="#dirreadsync"><code>dir.readSync()</code></a></li>
<li><a href="#dirsymbolasynciterator"><code>dir[Symbol.asyncIterator]()</code></a></li>
</ul>
</li>
<li><a href="#class-fsdirent"><code>fs.Dirent</code> 类</a>
<ul>
<li><a href="#direntisblockdevice"><code>dirent.isBlockDevice()</code></a></li>
<li><a href="#direntischaracterdevice"><code>dirent.isCharacterDevice()</code></a></li>
<li><a href="#direntisdirectory"><code>dirent.isDirectory()</code></a></li>
<li><a href="#direntisfifo"><code>dirent.isFIFO()</code></a></li>
<li><a href="#direntisfile"><code>dirent.isFile()</code></a></li>
<li><a href="#direntissocket"><code>dirent.isSocket()</code></a></li>
<li><a href="#direntissymboliclink"><code>dirent.isSymbolicLink()</code></a></li>
<li><a href="#direntname"><code>dirent.name</code></a></li>
</ul>
</li>
<li><a href="#class-fsfswatcher"><code>fs.FSWatcher</code> 类</a>
<ul>
<li><a href="#event-change"><code>'change'</code> 事件</a></li>
<li><a href="#event-close_1"><code>'close'</code> 事件</a></li>
<li><a href="#event-error"><code>'error'</code> 事件</a></li>
<li><a href="#watcherclose"><code>watcher.close()</code></a></li>
<li><a href="#watcherref"><code>watcher.ref()</code></a></li>
<li><a href="#watcherunref"><code>watcher.unref()</code></a></li>
</ul>
</li>
<li><a href="#class-fsstatwatcher"><code>fs.StatWatcher</code> 类</a>
<ul>
<li><a href="#watcherref_1"><code>watcher.ref()</code></a></li>
<li><a href="#watcherunref_1"><code>watcher.unref()</code></a></li>
</ul>
</li>
<li><a href="#class-fsreadstream"><code>fs.ReadStream</code> 类</a>
<ul>
<li><a href="#event-close_2"><code>'close'</code> 事件</a></li>
<li><a href="#event-open"><code>'open'</code> 事件</a></li>
<li><a href="#event-ready"><code>'ready'</code> 事件</a></li>
<li><a href="#readstreambytesread"><code>readStream.bytesRead</code></a></li>
<li><a href="#readstreampath"><code>readStream.path</code></a></li>
<li><a href="#readstreampending"><code>readStream.pending</code></a></li>
</ul>
</li>
<li><a href="#class-fsstats"><code>fs.Stats</code> 类</a>
<ul>
<li><a href="#statsisblockdevice"><code>stats.isBlockDevice()</code></a></li>
<li><a href="#statsischaracterdevice"><code>stats.isCharacterDevice()</code></a></li>
<li><a href="#statsisdirectory"><code>stats.isDirectory()</code></a></li>
<li><a href="#statsisfifo"><code>stats.isFIFO()</code></a></li>
<li><a href="#statsisfile"><code>stats.isFile()</code></a></li>
<li><a href="#statsissocket"><code>stats.isSocket()</code></a></li>
<li><a href="#statsissymboliclink"><code>stats.isSymbolicLink()</code></a></li>
<li><a href="#statsdev"><code>stats.dev</code></a></li>
<li><a href="#statsino"><code>stats.ino</code></a></li>
<li><a href="#statsmode"><code>stats.mode</code></a></li>
<li><a href="#statsnlink"><code>stats.nlink</code></a></li>
<li><a href="#statsuid"><code>stats.uid</code></a></li>
<li><a href="#statsgid"><code>stats.gid</code></a></li>
<li><a href="#statsrdev"><code>stats.rdev</code></a></li>
<li><a href="#statssize"><code>stats.size</code></a></li>
<li><a href="#statsblksize"><code>stats.blksize</code></a></li>
<li><a href="#statsblocks"><code>stats.blocks</code></a></li>
<li><a href="#statsatimems"><code>stats.atimeMs</code></a></li>
<li><a href="#statsmtimems"><code>stats.mtimeMs</code></a></li>
<li><a href="#statsctimems"><code>stats.ctimeMs</code></a></li>
<li><a href="#statsbirthtimems"><code>stats.birthtimeMs</code></a></li>
<li><a href="#statsatimens"><code>stats.atimeNs</code></a></li>
<li><a href="#statsmtimens"><code>stats.mtimeNs</code></a></li>
<li><a href="#statsctimens"><code>stats.ctimeNs</code></a></li>
<li><a href="#statsbirthtimens"><code>stats.birthtimeNs</code></a></li>
<li><a href="#statsatime"><code>stats.atime</code></a></li>
<li><a href="#statsmtime"><code>stats.mtime</code></a></li>
<li><a href="#statsctime"><code>stats.ctime</code></a></li>
<li><a href="#statsbirthtime"><code>stats.birthtime</code></a></li>
<li><a href="#stat-time-values">统计的时间值</a></li>
</ul>
</li>
<li><a href="#class-fswritestream"><code>fs.WriteStream</code> 类</a>
<ul>
<li><a href="#event-close_3"><code>'close'</code> 事件</a></li>
<li><a href="#event-open_1"><code>'open'</code> 事件</a></li>
<li><a href="#event-ready_1"><code>'ready'</code> 事件</a></li>
<li><a href="#writestreambyteswritten"><code>writeStream.bytesWritten</code></a></li>
<li><a href="#writestreamclosecallback"><code>writeStream.close([callback])</code></a></li>
<li><a href="#writestreampath"><code>writeStream.path</code></a></li>
<li><a href="#writestreampending"><code>writeStream.pending</code></a></li>
</ul>
</li>
<li><a href="#fsconstants"><code>fs.constants</code></a>
<ul>
<li><a href="#fs-constants">FS 常量</a>
<ul>
<li><a href="#file-access-constants">文件访问的常量</a></li>
<li><a href="#file-copy-constants">文件复制的常量</a></li>
<li><a href="#file-open-constants">文件打开的常量</a></li>
<li><a href="#file-type-constants">文件类型的常量</a></li>
<li><a href="#file-mode-constants">文件模式的常量</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><a href="#notes">注意事项</a>
<ul>
<li><a href="#ordering-of-callback-and-promise-based-operations">回调与基于 promise 的操作的顺序</a></li>
<li><a href="#file-paths">文件路径</a>
<ul>
<li><a href="#string-paths">字符串路径</a></li>
<li><a href="#file-url-paths">文件 URL 路径</a>
<ul>
<li><a href="#platform-specific-considerations">平台特定的注意事项</a></li>
</ul>
</li>
<li><a href="#buffer-paths">Buffer 路径</a></li>
<li><a href="#per-drive-working-directories-on-windows">Windows 上的独立驱动器工作目录</a></li>
</ul>
</li>
<li><a href="#file-descriptors_1">文件描述符</a></li>
<li><a href="#threadpool-usage">线程池的使用</a></li>
<li><a href="#file-system-flags">文件系统标志</a></li>
</ul>
</li>
</ul>
</li>
</ul></details>

      <div id="apicontent">
        <h2>fs 文件系统<span><a class="mark" href="#file-system" id="file-system">#</a></span><a aria-hidden="true" class="legacy" id="fs_file_system"></a></h2><p class="tip_wrap" data-show_trans="1" data-item_id="#file-system">
                <a href="fs/file_system.html" class="tip_trans">中英对照</a>
                </p>
<!--introduced_in=v0.10.0-->
<p></p><div class="api_stability api_stability_2"><a href="documentation.html#stability-index">稳定性: 2</a> - 稳定</div><p></p>
<!--name=fs-->
<p class=""><strong>源代码:</strong> <a rel="nofollow" href="https://github.com/nodejs/node/blob/v16.16.0/lib/fs.js">lib/fs.js</a></p>
<p><code>fs</code> 模块能够以标准 POSIX 函数为模型的方式与文件系统进行交互。</p>
<p class="">要使用基于 promise 的 API：</p>

<pre class="with-34-chars"><input class="js-flavor-selector" type="checkbox" checked="" aria-label="Show modern ES modules syntax"><code class="language-js mjs"><span class="hljs-keyword">import</span> * <span class="hljs-keyword">as</span> fs <span class="hljs-keyword">from</span> <span class="hljs-string">'fs/promises'</span>;</code><code class="language-js cjs"><span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">'fs/promises'</span>);</code></pre>
<p class="">要使用回调和同步的 API：</p>

<pre class="with-25-chars"><input class="js-flavor-selector" type="checkbox" checked="" aria-label="Show modern ES modules syntax"><code class="language-js mjs"><span class="hljs-keyword">import</span> * <span class="hljs-keyword">as</span> fs <span class="hljs-keyword">from</span> <span class="hljs-string">'fs'</span>;</code><code class="language-js cjs"><span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">'fs'</span>);</code></pre>
<p class="">所有文件系统操作都具有同步、回调和基于 promise 的形式，并且可以使用 CommonJS 语法和 ES6 模块进行访问。</p>
<section><h3>Promise 的示例<span><a class="mark" href="#promise-example" id="promise-example">#</a></span><a aria-hidden="true" class="legacy" id="fs_promise_example"></a></h3><p class="tip_wrap" data-show_trans="1" data-item_id="#promise-example">
                <a href="fs/promise_example.html" class="tip_trans">中英对照</a>
                </p>
<p>基于 promise 的操作会返回一个当异步操作完成时被履行的 promise。</p>

<pre class="with-42-chars"><input class="js-flavor-selector" type="checkbox" checked="" aria-label="Show modern ES modules syntax"><code class="language-js mjs"><span class="hljs-keyword">import</span> { unlink } <span class="hljs-keyword">from</span> <span class="hljs-string">'fs/promises'</span>;

<span class="hljs-keyword">try</span> {
  <span class="hljs-keyword">await</span> <span class="hljs-title function_">unlink</span>(<span class="hljs-string">'/tmp/hello'</span>);
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'successfully deleted /tmp/hello'</span>);
} <span class="hljs-keyword">catch</span> (error) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'there was an error:'</span>, error.<span class="hljs-property">message</span>);
}</code><code class="language-js cjs"><span class="hljs-keyword">const</span> { unlink } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'fs/promises'</span>);

(<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span>(<span class="hljs-params">path</span>) {
  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">await</span> <span class="hljs-title function_">unlink</span>(path);
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`successfully deleted <span class="hljs-subst">${path}</span>`</span>);
  } <span class="hljs-keyword">catch</span> (error) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'there was an error:'</span>, error.<span class="hljs-property">message</span>);
  }
})(<span class="hljs-string">'/tmp/hello'</span>);</code></pre>
</section><section><h3>回调的示例<span><a class="mark" href="#callback-example" id="callback-example">#</a></span><a aria-hidden="true" class="legacy" id="fs_callback_example"></a></h3><p class="tip_wrap" data-show_trans="1" data-item_id="#callback-example">
                <a href="fs/callback_example.html" class="tip_trans">中英对照</a>
                </p>
<p>回调的形式将完成回调函数作为其最后一个参数并且异步地调用该操作。
传给完成回调的参数取决于方法，但是第一个参数始终预留用于异常。
如果操作成功地完成，则第一个参数为 <code>null</code> 或 <code>undefined</code>。</p>

<pre class="with-33-chars"><input class="js-flavor-selector" type="checkbox" checked="" aria-label="Show modern ES modules syntax"><code class="language-js mjs"><span class="hljs-keyword">import</span> { unlink } <span class="hljs-keyword">from</span> <span class="hljs-string">'fs'</span>;

<span class="hljs-title function_">unlink</span>(<span class="hljs-string">'/tmp/hello'</span>, <span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {
  <span class="hljs-keyword">if</span> (err) <span class="hljs-keyword">throw</span> err;
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'successfully deleted /tmp/hello'</span>);
});</code><code class="language-js cjs"><span class="hljs-keyword">const</span> { unlink } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'fs'</span>);

<span class="hljs-title function_">unlink</span>(<span class="hljs-string">'/tmp/hello'</span>, <span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {
  <span class="hljs-keyword">if</span> (err) <span class="hljs-keyword">throw</span> err;
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'successfully deleted /tmp/hello'</span>);
});</code></pre>
<p class="">当需要最大性能（在执行时间和内存分配方面）时，<code>fs</code> 模块 API 的基于回调的版本比使用 promise API 更可取。</p>
</section><section><h3>同步的示例<span><a class="mark" href="#synchronous-example" id="synchronous-example">#</a></span><a aria-hidden="true" class="legacy" id="fs_synchronous_example"></a></h3><p class="tip_wrap" data-show_trans="1" data-item_id="#synchronous-example">
                <a href="fs/synchronous_example.html" class="tip_trans">中英对照</a>
                </p>
<p>同步的 API 会阻塞 Node.js 事件循环和下一步的 JavaScript 执行，直到操作完成。
异常会被立即地抛出，可以使用 <code>try…catch</code> 来处理，也可以允许冒泡。</p>

<pre class="with-37-chars"><input class="js-flavor-selector" type="checkbox" checked="" aria-label="Show modern ES modules syntax"><code class="language-js mjs"><span class="hljs-keyword">import</span> { unlinkSync } <span class="hljs-keyword">from</span> <span class="hljs-string">'fs'</span>;

<span class="hljs-keyword">try</span> {
  <span class="hljs-title function_">unlinkSync</span>(<span class="hljs-string">'/tmp/hello'</span>);
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'successfully deleted /tmp/hello'</span>);
} <span class="hljs-keyword">catch</span> (err) {
  <span class="hljs-comment">// 处理错误</span>
}</code><code class="language-js cjs"><span class="hljs-keyword">const</span> { unlinkSync } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'fs'</span>);

<span class="hljs-keyword">try</span> {
  <span class="hljs-title function_">unlinkSync</span>(<span class="hljs-string">'/tmp/hello'</span>);
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'successfully deleted /tmp/hello'</span>);
} <span class="hljs-keyword">catch</span> (err) {
  <span class="hljs-comment">// 处理错误</span>
}</code></pre>
</section><section><h3>Promise 的 API<span><a class="mark" href="#promises-api" id="promises-api">#</a></span><a aria-hidden="true" class="legacy" id="fs_promises_api"></a></h3><p class="tip_wrap" data-show_trans="1" data-item_id="#promises-api">
                <a href="fs/promises_api.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<details class="changelog"><summary>版本历史</summary>
<table>
<tbody><tr><th>版本</th><th>变更</th></tr>
<tr><td>v14.0.0</td>
<td><p>暴露为 <code>require('fs/promises')</code>。</p></td></tr>
<tr><td>v11.14.0, v10.17.0</td>
<td><p>此 API 不再是实验的。</p></td></tr>
<tr><td>v10.1.0</td>
<td><p>该 API 只能通过 <code>require('fs').promises</code> 访问。</p></td></tr>
<tr><td>v10.0.0</td>
<td><p><span>新增于: v10.0.0</span></p></td></tr>
</tbody></table>
</details>
</div>
<p>该 <code>fs/promises</code> API 提供了返回 promise 的异步的文件系统方法。</p>
<p class="">Promise API 使用底层的 Node.js 线程池在事件循环线程之外执行文件系统操作。
这些操作不是同步的也不是线程安全的。
对同一文件执行多个并发修改时必须小心，否则可能会损坏数据。</p>
<h4><code>FileHandle</code> 类<span><a class="mark" href="#class-filehandle" id="class-filehandle">#</a></span><a aria-hidden="true" class="legacy" id="fs_class_filehandle"></a></h4><p class="tip_wrap" data-show_trans="1" data-item_id="#class-filehandle">
                <a href="fs/class_filehandle.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>新增于: v10.0.0</span>
</div>
<p><a href="#class-filehandle" rel="nofollow" class="type">&lt;FileHandle&gt;</a> 对象是数字文件描述符的对象封装。</p>
<p class=""><a href="#class-filehandle" rel="nofollow" class="type">&lt;FileHandle&gt;</a> 对象的实例通过 <code>fsPromises.open()</code> 方法创建。</p>
<p class="">所有 <a href="#class-filehandle" rel="nofollow" class="type">&lt;FileHandle&gt;</a> 对象都是  <a href="events.html#class-eventemitter" rel="nofollow" class="type">&lt;EventEmitter&gt;</a>。</p>
<p class="">如果未使用 <code>filehandle.close()</code> 方法关闭 <a href="#class-filehandle" rel="nofollow" class="type">&lt;FileHandle&gt;</a>，则它将尝试自动关闭文件描述符并触发进程警告，从而有助于防止内存泄漏。
请不要依赖此行为，因为它可能不可靠并且该文件可能未被关闭。
而是，始终显式关闭 <a href="#class-filehandle" rel="nofollow" class="type">&lt;FileHandle&gt;</a>。
Node.js 将来可能会更改此行为。</p>
<h5><code>'close'</code> 事件<span><a class="mark" href="#event-close" id="event-close">#</a></span><a aria-hidden="true" class="legacy" id="fs_event_close"></a></h5><p class="tip_wrap" data-show_trans="1" data-item_id="#event-close">
                <a href="fs/event_close.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>新增于: v15.4.0</span>
</div>
<p>当 <a href="#class-filehandle" rel="nofollow" class="type">&lt;FileHandle&gt;</a> 已关闭且不再可用时，则触发 <code>'close'</code> 事件。</p>
<h5><code>filehandle.appendFile(data[, options])</code><span><a class="mark" href="#filehandleappendfiledata-options" id="filehandleappendfiledata-options">#</a></span><a aria-hidden="true" class="legacy" id="fs_filehandle_appendfile_data_options"></a></h5><p class="tip_wrap" data-show_trans="1" data-item_id="#filehandleappendfiledata-options">
                <a href="fs/filehandle_appendfile_data_options.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>新增于: v10.0.0</span>
</div>
<ul class="">
<li><code>data</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="buffer.html#class-buffer" rel="nofollow" class="type">&lt;Buffer&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/TypedArray" rel="nofollow" class="type">&lt;TypedArray&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/DataView" rel="nofollow" class="type">&lt;DataView&gt;</a></li>
<li><code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" rel="nofollow" class="type">&lt;Object&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a>
<ul>
<li><code>encoding</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Null_type" rel="nofollow" class="type">&lt;null&gt;</a> <strong>默认值:</strong> <code>'utf8'</code></li>
</ul>
</li>
<li>返回: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" rel="nofollow" class="type">&lt;Promise&gt;</a> 成功时将使用 <code>undefined</code> 履行。</li>
</ul>
<p><a href="#filehandlewritefiledata-options"><code>filehandle.writeFile()</code></a> 的别名。</p>
<p class="">当在文件句柄上进行操作时，则无法将模式更改为使用 <a href="#fspromisesopenpath-flags-mode"><code>fsPromises.open()</code></a> 设置的模式。
因此，这相当于 <a href="#filehandlewritefiledata-options"><code>filehandle.writeFile()</code></a>。</p>
<h5><code>filehandle.chmod(mode)</code><span><a class="mark" href="#filehandlechmodmode" id="filehandlechmodmode">#</a></span><a aria-hidden="true" class="legacy" id="fs_filehandle_chmod_mode"></a></h5><p class="tip_wrap" data-show_trans="1" data-item_id="#filehandlechmodmode">
                <a href="fs/filehandle_chmod_mode.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>新增于: v10.0.0</span>
</div>
<ul class="">
<li><code>mode</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a> 文件模式位掩码。</li>
<li>返回: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" rel="nofollow" class="type">&lt;Promise&gt;</a> 成功时将使用 <code>undefined</code> 履行。</li>
</ul>
<p>修改文件的权限。
参见 <a href="http://man7.org/linux/man-pages/man2/chmod.2.html" rel="nofollow"><code>chmod(2)</code></a>。</p>
<h5><code>filehandle.chown(uid, gid)</code><span><a class="mark" href="#filehandlechownuid-gid" id="filehandlechownuid-gid">#</a></span><a aria-hidden="true" class="legacy" id="fs_filehandle_chown_uid_gid"></a></h5><p class="tip_wrap" data-show_trans="1" data-item_id="#filehandlechownuid-gid">
                <a href="fs/filehandle_chown_uid_gid.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>新增于: v10.0.0</span>
</div>
<ul class="">
<li><code>uid</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a> 文件的新所有者的用户 ID。</li>
<li><code>gid</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a> 文件的新群组的组 ID。</li>
<li>返回: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" rel="nofollow" class="type">&lt;Promise&gt;</a> 成功时将使用 <code>undefined</code> 履行。</li>
</ul>
<p>更改文件的所有权。
<a href="http://man7.org/linux/man-pages/man2/chown.2.html" rel="nofollow"><code>chown(2)</code></a> 的封装。</p>
<h5><code>filehandle.close()</code><span><a class="mark" href="#filehandleclose" id="filehandleclose">#</a></span><a aria-hidden="true" class="legacy" id="fs_filehandle_close"></a></h5><p class="tip_wrap" data-show_trans="1" data-item_id="#filehandleclose">
                <a href="fs/filehandle_close.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>新增于: v10.0.0</span>
</div>
<ul class="">
<li>返回: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" rel="nofollow" class="type">&lt;Promise&gt;</a> 成功时将使用 <code>undefined</code> 履行。</li>
</ul>
<p>等待句柄上的任何未决操作完成后，关闭文件句柄。</p>
<pre class=""><code class="language-js mjs"><span class="hljs-keyword">import</span> { open } <span class="hljs-keyword">from</span> <span class="hljs-string">'fs/promises'</span>;

<span class="hljs-keyword">let</span> filehandle;
<span class="hljs-keyword">try</span> {
  filehandle = <span class="hljs-keyword">await</span> <span class="hljs-title function_">open</span>(<span class="hljs-string">'thefile.txt'</span>, <span class="hljs-string">'r'</span>);
} <span class="hljs-keyword">finally</span> {
  <span class="hljs-keyword">await</span> filehandle?.<span class="hljs-title function_">close</span>();
}</code></pre>
<h5><code>filehandle.createReadStream([options])</code><span><a class="mark" href="#filehandlecreatereadstreamoptions" id="filehandlecreatereadstreamoptions">#</a></span><a aria-hidden="true" class="legacy" id="fs_filehandle_createreadstream_options"></a></h5><p class="tip_wrap" data-show_trans="1" data-item_id="#filehandlecreatereadstreamoptions">
                <a href="fs/filehandle_createreadstream_options.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>新增于: v16.11.0</span>
</div>
<ul class="">
<li><code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" rel="nofollow" class="type">&lt;Object&gt;</a>
<ul>
<li><code>encoding</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> <strong>默认值:</strong> <code>null</code></li>
<li><code>autoClose</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" rel="nofollow" class="type">&lt;boolean&gt;</a> <strong>默认值:</strong> <code>true</code></li>
<li><code>emitClose</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" rel="nofollow" class="type">&lt;boolean&gt;</a> <strong>默认值:</strong> <code>true</code></li>
<li><code>start</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a></li>
<li><code>end</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a> <strong>默认值:</strong> <code>Infinity</code></li>
<li><code>highWaterMark</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a> <strong>默认值:</strong> <code>64 * 1024</code></li>
</ul>
</li>
<li>返回: <a href="#class-fsreadstream" rel="nofollow" class="type">&lt;fs.ReadStream&gt;</a></li>
</ul>
<p>与 <a href="stream.html#class-streamreadable" rel="nofollow" class="type">&lt;stream.Readable&gt;</a> 的 16 kb 默认 <code>highWaterMark</code> 不同，此方法返回的流的默认 <code>highWaterMark</code> 为 64 kb。</p>
<p class=""><code>options</code> 可以包括 <code>start</code> 和 <code>end</code> 值，以从文件中读取一定范围的字节，而不是整个文件。
<code>start</code> 和 <code>end</code> 都包含在内并且从 0 开始计数，允许的值在 [0, <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number/MAX_SAFE_INTEGER" rel="nofollow"><code>Number.MAX_SAFE_INTEGER</code></a>] 范围内。
如果省略 <code>start</code> 或为 <code>undefined</code>，则 <code>filehandle.createReadStream()</code> 从当前的文件位置开始依次读取。
<code>encoding</code> 可以是 <a href="buffer.html#class-buffer" rel="nofollow" class="type">&lt;Buffer&gt;</a> 接受的任何一种。</p>
<p class="">如果 <code>FileHandle</code> 指向只支持阻塞读取的字符设备（如键盘或声卡），则读取操作在数据可用之前不会完成。
这可以防止进程退出和流自然关闭。</p>
<p class="">默认情况下，流将在销毁后触发 <code>'close'</code> 事件。
将 <code>emitClose</code> 选项设置为 <code>false</code> 以更改此行为。</p>
<pre class=""><code class="language-js mjs"><span class="hljs-keyword">import</span> { open } <span class="hljs-keyword">from</span> <span class="hljs-string">'fs/promises'</span>;

<span class="hljs-keyword">const</span> fd = <span class="hljs-keyword">await</span> <span class="hljs-title function_">open</span>(<span class="hljs-string">'/dev/input/event0'</span>);
<span class="hljs-comment">// 从某个字符设备创建流。</span>
<span class="hljs-keyword">const</span> stream = fd.<span class="hljs-title function_">createReadStream</span>();
<span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
  stream.<span class="hljs-title function_">close</span>(); <span class="hljs-comment">// 这可能不会关闭流。</span>
  <span class="hljs-comment">// 人为地标记流结束，就好像底层资源自己指示了文件结束一样，允许流关闭。</span>
  <span class="hljs-comment">// 这不会取消挂起的读操作，如果有这样的操作，进程可能仍然无法成功退出，直到它完成。</span>
  stream.<span class="hljs-title function_">push</span>(<span class="hljs-literal">null</span>);
  stream.<span class="hljs-title function_">read</span>(<span class="hljs-number">0</span>);
}, <span class="hljs-number">100</span>);</code></pre>
<p class="">如果 <code>autoClose</code> 为 false，则即使出现错误，文件描述符也不会关闭。
关闭它并确保没有文件描述符泄漏是应用程序的责任。
如果 <code>autoClose</code> 设置为 true（默认行为），则在 <code>'error'</code> 或 <code>'end'</code> 时，文件描述符将自动关闭。</p>
<p class="">读取 100 个字节长的文件的最后 10 个字节的示例：</p>
<pre class=""><code class="language-js mjs"><span class="hljs-keyword">import</span> { open } <span class="hljs-keyword">from</span> <span class="hljs-string">'fs/promises'</span>;

<span class="hljs-keyword">const</span> fd = <span class="hljs-keyword">await</span> <span class="hljs-title function_">open</span>(<span class="hljs-string">'sample.txt'</span>);
fd.<span class="hljs-title function_">createReadStream</span>({ <span class="hljs-attr">start</span>: <span class="hljs-number">90</span>, <span class="hljs-attr">end</span>: <span class="hljs-number">99</span> });</code></pre>
<h5><code>filehandle.createWriteStream([options])</code><span><a class="mark" href="#filehandlecreatewritestreamoptions" id="filehandlecreatewritestreamoptions">#</a></span><a aria-hidden="true" class="legacy" id="fs_filehandle_createwritestream_options"></a></h5><p class="tip_wrap" data-show_trans="1" data-item_id="#filehandlecreatewritestreamoptions">
                <a href="fs/filehandle_createwritestream_options.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>新增于: v16.11.0</span>
</div>
<ul class="">
<li><code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" rel="nofollow" class="type">&lt;Object&gt;</a>
<ul>
<li><code>encoding</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> <strong>默认值:</strong> <code>'utf8'</code></li>
<li><code>autoClose</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" rel="nofollow" class="type">&lt;boolean&gt;</a> <strong>默认值:</strong> <code>true</code></li>
<li><code>emitClose</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" rel="nofollow" class="type">&lt;boolean&gt;</a> <strong>默认值:</strong> <code>true</code></li>
<li><code>start</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a></li>
</ul>
</li>
<li>返回: <a href="#class-fswritestream" rel="nofollow" class="type">&lt;fs.WriteStream&gt;</a></li>
</ul>
<p><code>options</code> 还可以包括 <code>start</code> 选项，以允许在文件开头的某个位置写入数据，允许的值在 [0, <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number/MAX_SAFE_INTEGER" rel="nofollow"><code>Number.MAX_SAFE_INTEGER</code></a>] 范围内。
修改文件（而不是替换它）可能需要将 <code>flags</code> <code>open</code> 选项设置为 <code>r+</code>（而不是默认的 <code>r</code>）。
<code>encoding</code> 可以是 <a href="buffer.html#class-buffer" rel="nofollow" class="type">&lt;Buffer&gt;</a> 接受的任何一种。</p>
<p class="">如果将 <code>autoClose</code> 设置为 true（默认行为），则在 <code>'error'</code> 或 <code>'finish'</code> 时文件描述符将自动关闭。
如果 <code>autoClose</code> 为 false，则即使出现错误，文件描述符也不会关闭。
关闭它并确保没有文件描述符泄漏是应用程序的责任。</p>
<p class="">默认情况下，流将在销毁后触发 <code>'close'</code> 事件。
将 <code>emitClose</code> 选项设置为 <code>false</code> 以更改此行为。</p>
<h5><code>filehandle.datasync()</code><span><a class="mark" href="#filehandledatasync" id="filehandledatasync">#</a></span><a aria-hidden="true" class="legacy" id="fs_filehandle_datasync"></a></h5><p class="tip_wrap" data-show_trans="1" data-item_id="#filehandledatasync">
                <a href="fs/filehandle_datasync.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>新增于: v10.0.0</span>
</div>
<ul class="">
<li>返回: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" rel="nofollow" class="type">&lt;Promise&gt;</a> 成功时将使用 <code>undefined</code> 履行。</li>
</ul>
<p>将与文件关联的所有当前排队的 I/O 操作强制为操作系统的同步 I/O 完成状态。
有关详细信息，请参阅 POSIX <a href="http://man7.org/linux/man-pages/man2/fdatasync.2.html" rel="nofollow"><code>fdatasync(2)</code></a> 文档。</p>
<p class="">与 <code>filehandle.sync</code> 不同，此方法不会刷新修改的元数据。</p>
<h5><code>filehandle.fd</code><span><a class="mark" href="#filehandlefd" id="filehandlefd">#</a></span><a aria-hidden="true" class="legacy" id="fs_filehandle_fd"></a></h5><p class="tip_wrap" data-show_trans="1" data-item_id="#filehandlefd">
                <a href="fs/filehandle_fd.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>新增于: v10.0.0</span>
</div>
<ul class="">
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;number&gt;</a> 由 <a href="#class-filehandle" rel="nofollow" class="type">&lt;FileHandle&gt;</a> 对象管理的数字文件描述符。</li>
</ul>
<h5><code>filehandle.read(buffer, offset, length, position)</code><span><a class="mark" href="#filehandlereadbuffer-offset-length-position" id="filehandlereadbuffer-offset-length-position">#</a></span><a aria-hidden="true" class="legacy" id="fs_filehandle_read_buffer_offset_length_position"></a></h5><p class="tip_wrap" data-show_trans="1" data-item_id="#filehandlereadbuffer-offset-length-position">
                <a href="fs/filehandle_read_buffer_offset_length_position.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>新增于: v10.0.0</span>
</div>
<ul class="">
<li><code>buffer</code> <a href="buffer.html#class-buffer" rel="nofollow" class="type">&lt;Buffer&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/TypedArray" rel="nofollow" class="type">&lt;TypedArray&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/DataView" rel="nofollow" class="type">&lt;DataView&gt;</a> 将填充读取的文件数据的缓冲区。</li>
<li><code>offset</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a> 缓冲区中开始填充的位置。</li>
<li><code>length</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a> 读取的字节数。</li>
<li><code>position</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a> 从文件开始读取数据的位置。
如果为 <code>null</code>，则将从当前文件位置读取数据，并将更新该位置。
如果 <code>position</code> 是整数，则当前文件位置将保持不变。</li>
<li>返回: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" rel="nofollow" class="type">&lt;Promise&gt;</a> 成功时将使用具有以下两个属性的对象履行：
<ul>
<li><code>bytesRead</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a> 读取的字节数</li>
<li><code>buffer</code> <a href="buffer.html#class-buffer" rel="nofollow" class="type">&lt;Buffer&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/TypedArray" rel="nofollow" class="type">&lt;TypedArray&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/DataView" rel="nofollow" class="type">&lt;DataView&gt;</a> 对传入的 <code>buffer</code> 参数的引用。</li>
</ul>
</li>
</ul>
<p>从文件中读取数据，并将其存储在给定的缓冲区中。</p>
<p class="">如果未同时修改文件，当读取的字节数为零时，则到达文件末尾。</p>
<h5><code>filehandle.read([options])</code><span><a class="mark" href="#filehandlereadoptions" id="filehandlereadoptions">#</a></span><a aria-hidden="true" class="legacy" id="fs_filehandle_read_options"></a></h5><p class="tip_wrap" data-show_trans="1" data-item_id="#filehandlereadoptions">
                <a href="fs/filehandle_read_options.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>新增于: v13.11.0, v12.17.0</span>
</div>
<ul class="">
<li><code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" rel="nofollow" class="type">&lt;Object&gt;</a>
<ul>
<li><code>buffer</code> <a href="buffer.html#class-buffer" rel="nofollow" class="type">&lt;Buffer&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/TypedArray" rel="nofollow" class="type">&lt;TypedArray&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/DataView" rel="nofollow" class="type">&lt;DataView&gt;</a> 将填充读取的文件数据的缓冲区。 <strong>默认值:</strong> <code>Buffer.alloc(16384)</code></li>
<li><code>offset</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a> 缓冲区中开始填充的位置。
<strong>默认值:</strong> <code>0</code></li>
<li><code>length</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a> 读取的字节数。 <strong>默认值:</strong>
<code>buffer.byteLength - offset</code></li>
<li><code>position</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a> 从文件开始读取数据的位置。
如果为 <code>null</code>，则将从当前文件位置读取数据，并将更新该位置。
如果 <code>position</code> 是整数，则当前文件位置将保持不变。 <strong>默认值:</strong>: <code>null</code></li>
</ul>
</li>
<li>返回: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" rel="nofollow" class="type">&lt;Promise&gt;</a> 成功时将使用具有以下两个属性的对象履行：
<ul>
<li><code>bytesRead</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a> 读取的字节数</li>
<li><code>buffer</code> <a href="buffer.html#class-buffer" rel="nofollow" class="type">&lt;Buffer&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/TypedArray" rel="nofollow" class="type">&lt;TypedArray&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/DataView" rel="nofollow" class="type">&lt;DataView&gt;</a> 对传入的 <code>buffer</code> 参数的引用。</li>
</ul>
</li>
</ul>
<p>从文件中读取数据，并将其存储在给定的缓冲区中。</p>
<p class="">如果未同时修改文件，当读取的字节数为零时，则到达文件末尾。</p>
<h5><code>filehandle.readFile(options)</code><span><a class="mark" href="#filehandlereadfileoptions" id="filehandlereadfileoptions">#</a></span><a aria-hidden="true" class="legacy" id="fs_filehandle_readfile_options"></a></h5><p class="tip_wrap" data-show_trans="1" data-item_id="#filehandlereadfileoptions">
                <a href="fs/filehandle_readfile_options.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>新增于: v10.0.0</span>
</div>
<ul class="">
<li><code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" rel="nofollow" class="type">&lt;Object&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a>
<ul>
<li><code>encoding</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Null_type" rel="nofollow" class="type">&lt;null&gt;</a> <strong>默认值:</strong> <code>null</code></li>
<li><code>signal</code> <a href="globals.html#class-abortsignal" rel="nofollow" class="type">&lt;AbortSignal&gt;</a> 允许中止正在进行的读取文件</li>
</ul>
</li>
<li>返回: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" rel="nofollow" class="type">&lt;Promise&gt;</a> 成功读取时将使用文件内容履行。
如果未指定编码（使用 <code>options.encoding</code>），则数据作为 <a href="buffer.html#class-buffer" rel="nofollow" class="type">&lt;Buffer&gt;</a> 对象返回。
否则，数据将为字符串。</li>
</ul>
<p>异步地读取文件的全部内容。</p>
<p class="">如果 <code>options</code> 是字符串，则它指定 <code>encoding</code>。</p>
<p class=""><a href="#class-filehandle" rel="nofollow" class="type">&lt;FileHandle&gt;</a> 必须支持读取。</p>
<p class="">如果在文件句柄上进行了一次或多次 <code>filehandle.read()</code> 调用，然后进行 <code>filehandle.readFile()</code> 调用，则将从当前位置读取数据，直到文件末尾。
它并不总是从文件的开头读取。</p>
<h5><code>filehandle.readv(buffers[, position])</code><span><a class="mark" href="#filehandlereadvbuffers-position" id="filehandlereadvbuffers-position">#</a></span><a aria-hidden="true" class="legacy" id="fs_filehandle_readv_buffers_position"></a></h5><p class="tip_wrap" data-show_trans="1" data-item_id="#filehandlereadvbuffers-position">
                <a href="fs/filehandle_readv_buffers_position.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>新增于: v13.13.0, v12.17.0</span>
</div>
<ul class="">
<li><code>buffers</code> <a href="buffer.html#class-buffer" rel="nofollow" class="type">&lt;Buffer[]&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/TypedArray" rel="nofollow" class="type">&lt;TypedArray[]&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/DataView" rel="nofollow" class="type">&lt;DataView[]&gt;</a></li>
<li><code>position</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a> 要从中读取数据的文件的开头偏移量。
如果 <code>position</code> 不是 <code>number</code>，则将从当前位置读取数据。</li>
<li>返回: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" rel="nofollow" class="type">&lt;Promise&gt;</a> 成功时将使用包含以下两个属性的对象履行：
<ul>
<li><code>bytesRead</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a> 读取的字节数</li>
<li><code>buffers</code> <a href="buffer.html#class-buffer" rel="nofollow" class="type">&lt;Buffer[]&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/TypedArray" rel="nofollow" class="type">&lt;TypedArray[]&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/DataView" rel="nofollow" class="type">&lt;DataView[]&gt;</a> 该属性包含对 <code>buffers</code> 输入的引用。</li>
</ul>
</li>
</ul>
<p>从文件读取并写入 <a href="https://developer.mozilla.org/en-US/docs/Web/API/ArrayBufferView" rel="nofollow" class="type">&lt;ArrayBufferView&gt;</a> 的数组</p>
<h5><code>filehandle.stat([options])</code><span><a class="mark" href="#filehandlestatoptions" id="filehandlestatoptions">#</a></span><a aria-hidden="true" class="legacy" id="fs_filehandle_stat_options"></a></h5><p class="tip_wrap" data-show_trans="1" data-item_id="#filehandlestatoptions">
                <a href="fs/filehandle_stat_options.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<details class="changelog"><summary>版本历史</summary>
<table>
<tbody><tr><th>版本</th><th>变更</th></tr>
<tr><td>v10.5.0</td>
<td><p>接受额外的 <code>options</code> 对象，以指定返回的数字值是否应为长整数。</p></td></tr>
<tr><td>v10.0.0</td>
<td><p><span>新增于: v10.0.0</span></p></td></tr>
</tbody></table>
</details>
</div>
<ul class="">
<li><code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" rel="nofollow" class="type">&lt;Object&gt;</a>
<ul>
<li><code>bigint</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" rel="nofollow" class="type">&lt;boolean&gt;</a> 返回的 <a href="#class-fsstats" rel="nofollow" class="type">&lt;fs.Stats&gt;</a> 对象中的数值是否应为 <code>bigint</code>。 <strong>默认值:</strong> <code>false</code>。</li>
</ul>
</li>
<li>返回: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" rel="nofollow" class="type">&lt;Promise&gt;</a> 使用文件的 <a href="#class-fsstats" rel="nofollow" class="type">&lt;fs.Stats&gt;</a> 履行。</li>
</ul>
<h5><code>filehandle.sync()</code><span><a class="mark" href="#filehandlesync" id="filehandlesync">#</a></span><a aria-hidden="true" class="legacy" id="fs_filehandle_sync"></a></h5><p class="tip_wrap" data-show_trans="1" data-item_id="#filehandlesync">
                <a href="fs/filehandle_sync.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>新增于: v10.0.0</span>
</div>
<ul class="">
<li>返回: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" rel="nofollow" class="type">&lt;Promise&gt;</a> 成功时将使用 <code>undefined</code> 履行。</li>
</ul>
<p>请求将打开文件描述符的所有数据刷新到存储设备。
具体实现是操作系统和设备特定的。
有关更多详细信息，请参考 POSIX <a href="http://man7.org/linux/man-pages/man2/fsync.2.html" rel="nofollow"><code>fsync(2)</code></a> 文档。</p>
<h5><code>filehandle.truncate(len)</code><span><a class="mark" href="#filehandletruncatelen" id="filehandletruncatelen">#</a></span><a aria-hidden="true" class="legacy" id="fs_filehandle_truncate_len"></a></h5><p class="tip_wrap" data-show_trans="1" data-item_id="#filehandletruncatelen">
                <a href="fs/filehandle_truncate_len.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>新增于: v10.0.0</span>
</div>
<ul class="">
<li><code>len</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a> <strong>默认值:</strong> <code>0</code></li>
<li>返回: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" rel="nofollow" class="type">&lt;Promise&gt;</a> 成功时将使用 <code>undefined</code> 履行。</li>
</ul>
<p>截断文件。</p>
<p class="">如果文件大于 <code>len</code> 个字节，则仅前 <code>len</code> 个字节将保留在文件中。</p>
<p class="">下面的示例仅保留文件的前四个字节：</p>
<pre class=""><code class="language-js mjs"><span class="hljs-keyword">import</span> { open } <span class="hljs-keyword">from</span> <span class="hljs-string">'fs/promises'</span>;

<span class="hljs-keyword">let</span> filehandle = <span class="hljs-literal">null</span>;
<span class="hljs-keyword">try</span> {
  filehandle = <span class="hljs-keyword">await</span> <span class="hljs-title function_">open</span>(<span class="hljs-string">'temp.txt'</span>, <span class="hljs-string">'r+'</span>);
  <span class="hljs-keyword">await</span> filehandle.<span class="hljs-title function_">truncate</span>(<span class="hljs-number">4</span>);
} <span class="hljs-keyword">finally</span> {
  <span class="hljs-keyword">await</span> filehandle?.<span class="hljs-title function_">close</span>();
}</code></pre>
<p class="">如果文件先前小于 <code>len</code> 个字节，则将其扩展，并且扩展部分将使用空字节（<code>'\0'</code>）填充：</p>
<p class="">如果 <code>len</code> 为负数，则将使用 <code>0</code>。</p>
<h5><code>filehandle.utimes(atime, mtime)</code><span><a class="mark" href="#filehandleutimesatime-mtime" id="filehandleutimesatime-mtime">#</a></span><a aria-hidden="true" class="legacy" id="fs_filehandle_utimes_atime_mtime"></a></h5><p class="tip_wrap" data-show_trans="1" data-item_id="#filehandleutimesatime-mtime">
                <a href="fs/filehandle_utimes_atime_mtime.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>新增于: v10.0.0</span>
</div>
<ul class="">
<li><code>atime</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;number&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date" rel="nofollow" class="type">&lt;Date&gt;</a></li>
<li><code>mtime</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;number&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date" rel="nofollow" class="type">&lt;Date&gt;</a></li>
<li>返回: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" rel="nofollow" class="type">&lt;Promise&gt;</a></li>
</ul>
<p>更改 <a href="#class-filehandle" rel="nofollow" class="type">&lt;FileHandle&gt;</a> 引用的对象的文件系统时间戳，然后在成功时不带参数解决 promise 。</p>
<h5><code>filehandle.write(buffer[, offset[, length[, position]]])</code><span><a class="mark" href="#filehandlewritebuffer-offset-length-position" id="filehandlewritebuffer-offset-length-position">#</a></span><a aria-hidden="true" class="legacy" id="fs_filehandle_write_buffer_offset_length_position"></a></h5><p class="tip_wrap" data-show_trans="1" data-item_id="#filehandlewritebuffer-offset-length-position">
                <a href="fs/filehandle_write_buffer_offset_length_position.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<details class="changelog"><summary>版本历史</summary>
<table>
<tbody><tr><th>版本</th><th>变更</th></tr>
<tr><td>v14.12.0</td>
<td><p>参数 <code>buffer</code> 将使用显式 <code>toString</code> 函数对对象进行字符串化。</p></td></tr>
<tr><td>v14.0.0</td>
<td><p>参数 <code>buffer</code> 不会再将不支持的输入强制转换为缓冲区。</p></td></tr>
<tr><td>v10.0.0</td>
<td><p><span>新增于: v10.0.0</span></p></td></tr>
</tbody></table>
</details>
</div>
<ul class="">
<li><code>buffer</code> <a href="buffer.html#class-buffer" rel="nofollow" class="type">&lt;Buffer&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/TypedArray" rel="nofollow" class="type">&lt;TypedArray&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/DataView" rel="nofollow" class="type">&lt;DataView&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" rel="nofollow" class="type">&lt;Object&gt;</a></li>
<li><code>offset</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a> 要开始写入数据的 <code>buffer</code> 的起始位置。 <strong>默认值:</strong> <code>0</code></li>
<li><code>length</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a> 要从 <code>buffer</code> 写入的字节数。 <strong>默认值:</strong>
<code>buffer.byteLength</code></li>
<li><code>position</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a> 要写入来自 <code>buffer</code> 的数据的文件的开头偏移量。
如果 <code>position</code> 不是 <code>number</code>，则数据将被写入当前位置。
有关更多详细信息，请参阅 POSIX <a href="http://man7.org/linux/man-pages/man2/pwrite.2.html" rel="nofollow"><code>pwrite(2)</code></a> 文档。</li>
<li>返回: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" rel="nofollow" class="type">&lt;Promise&gt;</a></li>
</ul>
<p>将 <code>buffer</code> 写入文件。</p>
<p class="">如果 <code>buffer</code> 是普通的对象，则它必须具有自有的（不是继承的）<code>toString</code> 函数属性。</p>
<p class="">使用包含以下两个属性的对象来解决 promise：</p>
<ul class="">
<li><code>bytesWritten</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a> 写入的字节数</li>
<li><code>buffer</code> <a href="buffer.html#class-buffer" rel="nofollow" class="type">&lt;Buffer&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/TypedArray" rel="nofollow" class="type">&lt;TypedArray&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/DataView" rel="nofollow" class="type">&lt;DataView&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" rel="nofollow" class="type">&lt;Object&gt;</a> 对被写入的 <code>buffer</code> 的引用。</li>
</ul>
<p class="">在同一文件上多次使用 <code>filehandle.write()</code> 而不等待 promise 被解决（或拒绝）是不安全的。
对于这种情况，请使用 <a href="#fscreatewritestreampath-options"><code>fs.createWriteStream()</code></a>。</p>
<p class="">在 Linux 上，以追加模式打开文件时，位置写入不起作用。
内核会忽略位置参数，并始终将数据追加到文件末尾。</p>
<h5><code>filehandle.write(string[, position[, encoding]])</code><span><a class="mark" href="#filehandlewritestring-position-encoding" id="filehandlewritestring-position-encoding">#</a></span><a aria-hidden="true" class="legacy" id="fs_filehandle_write_string_position_encoding"></a></h5><p class="tip_wrap" data-show_trans="1" data-item_id="#filehandlewritestring-position-encoding">
                <a href="fs/filehandle_write_string_position_encoding.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<details class="changelog"><summary>版本历史</summary>
<table>
<tbody><tr><th>版本</th><th>变更</th></tr>
<tr><td>v14.12.0</td>
<td><p>参数 <code>string</code> 将使用显式 <code>toString</code> 函数对对象进行字符串化。</p></td></tr>
<tr><td>v14.0.0</td>
<td><p>参数 <code>string</code> 不会再将不支持的输入强制转换为字符串。</p></td></tr>
<tr><td>v10.0.0</td>
<td><p><span>新增于: v10.0.0</span></p></td></tr>
</tbody></table>
</details>
</div>
<ul class="">
<li><code>string</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" rel="nofollow" class="type">&lt;Object&gt;</a></li>
<li><code>position</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a> 要写入来自 <code>string</code> 的数据的文件的开头偏移量。
如果 <code>position</code> 不是 <code>number</code>，则数据将写入当前位置。
有关更多详细信息，请参阅 POSIX <a href="http://man7.org/linux/man-pages/man2/pwrite.2.html" rel="nofollow"><code>pwrite(2)</code></a> 文档。</li>
<li><code>encoding</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> 预期的字符串编码。 <strong>默认值:</strong> <code>'utf8'</code></li>
<li>返回: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" rel="nofollow" class="type">&lt;Promise&gt;</a></li>
</ul>
<p>将 <code>string</code> 写入文件。
如果 <code>string</code> 不是字符串或具有自有的 <code>toString</code> 函数属性的对象，则 promise 将被使用错误拒绝。</p>
<p class="">使用包含以下两个属性的对象来解决 promise：</p>
<ul class="">
<li><code>bytesWritten</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a> 写入的字节数</li>
<li><code>buffer</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" rel="nofollow" class="type">&lt;Object&gt;</a> 对被写入的 <code>string</code> 的引用。</li>
</ul>
<p class="">在同一文件上多次使用 <code>filehandle.write()</code> 而不等待 promise 被解决（或拒绝）是不安全的。
对于这种情况，请使用 <a href="#fscreatewritestreampath-options"><code>fs.createWriteStream()</code></a>。</p>
<p class="">在 Linux 上，以追加模式打开文件时，位置写入不起作用。
内核会忽略位置参数，并始终将数据追加到文件末尾。</p>
<h5><code>filehandle.writeFile(data, options)</code><span><a class="mark" href="#filehandlewritefiledata-options" id="filehandlewritefiledata-options">#</a></span><a aria-hidden="true" class="legacy" id="fs_filehandle_writefile_data_options"></a></h5><p class="tip_wrap" data-show_trans="1" data-item_id="#filehandlewritefiledata-options">
                <a href="fs/filehandle_writefile_data_options.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<details class="changelog"><summary>版本历史</summary>
<table>
<tbody><tr><th>版本</th><th>变更</th></tr>
<tr><td>v15.14.0</td>
<td><p>参数 <code>data</code> 支持 <code>AsyncIterable</code>、<code>Iterable</code> 和 <code>Stream</code>。</p></td></tr>
<tr><td>v14.12.0</td>
<td><p>参数 <code>data</code> 将使用显式 <code>toString</code> 函数对对象进行字符串化。</p></td></tr>
<tr><td>v14.0.0</td>
<td><p>参数 <code>data</code> 不会再将不支持的输入强制转换为字符串。</p></td></tr>
<tr><td>v10.0.0</td>
<td><p><span>新增于: v10.0.0</span></p></td></tr>
</tbody></table>
</details>
</div>
<ul class="">
<li><code>data</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="buffer.html#class-buffer" rel="nofollow" class="type">&lt;Buffer&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/TypedArray" rel="nofollow" class="type">&lt;TypedArray&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/DataView" rel="nofollow" class="type">&lt;DataView&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" rel="nofollow" class="type">&lt;Object&gt;</a> | <a href="https://tc39.github.io/ecma262/#sec-asynciterable-interface" rel="nofollow" class="type">&lt;AsyncIterable&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Iteration_protocols#The_iterable_protocol" rel="nofollow" class="type">&lt;Iterable&gt;</a> | <a href="stream.html#stream" rel="nofollow" class="type">&lt;Stream&gt;</a></li>
<li><code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" rel="nofollow" class="type">&lt;Object&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a>
<ul>
<li><code>encoding</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Null_type" rel="nofollow" class="type">&lt;null&gt;</a> 当 <code>data</code> 为字符串时的预期字符编码。 <strong>默认值:</strong> <code>'utf8'</code></li>
</ul>
</li>
<li>返回: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" rel="nofollow" class="type">&lt;Promise&gt;</a></li>
</ul>
<p>异步地将数据写入文件，如果文件已经存在，则替换该文件。
<code>data</code> 可以是字符串、缓冲区、<a href="https://tc39.github.io/ecma262/#sec-asynciterable-interface" rel="nofollow" class="type">&lt;AsyncIterable&gt;</a> 或 <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Iteration_protocols#The_iterable_protocol" rel="nofollow" class="type">&lt;Iterable&gt;</a> 对象、或者具有自有的 <code>toString</code> 函数属性的对象。
成功时不带参数解决 promise。</p>
<p class="">如果 <code>options</code> 是字符串，则它指定 <code>encoding</code>。</p>
<p class=""><a href="#class-filehandle" rel="nofollow" class="type">&lt;FileHandle&gt;</a> 必须支持写入。</p>
<p class="">在同一文件上多次使用 <code>filehandle.writeFile()</code> 而不等待 promise 被解决（或拒绝）是不安全的。</p>
<p class="">如果在文件句柄上进行了一次或多次 <code>filehandle.write()</code> 调用，然后进行 <code>filehandle.writeFile()</code> 调用，则数据将从当前位置写入，直到文件末尾。
它并不总是从文件的开头写入。</p>
<h5><code>filehandle.writev(buffers[, position])</code><span><a class="mark" href="#filehandlewritevbuffers-position" id="filehandlewritevbuffers-position">#</a></span><a aria-hidden="true" class="legacy" id="fs_filehandle_writev_buffers_position"></a></h5><p class="tip_wrap" data-show_trans="1" data-item_id="#filehandlewritevbuffers-position">
                <a href="fs/filehandle_writev_buffers_position.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>新增于: v12.9.0</span>
</div>
<ul class="">
<li><code>buffers</code> <a href="buffer.html#class-buffer" rel="nofollow" class="type">&lt;Buffer[]&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/TypedArray" rel="nofollow" class="type">&lt;TypedArray[]&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/DataView" rel="nofollow" class="type">&lt;DataView[]&gt;</a></li>
<li><code>position</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a> 要写入来自 <code>buffers</code> 的数据的文件的开头偏移量。
如果 <code>position</code> 不是 <code>number</code>，则数据将被写入当前位置。</li>
<li>返回: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" rel="nofollow" class="type">&lt;Promise&gt;</a></li>
</ul>
<p>将 <a href="https://developer.mozilla.org/en-US/docs/Web/API/ArrayBufferView" rel="nofollow" class="type">&lt;ArrayBufferView&gt;</a> 的数组写入文件。</p>
<p class="">使用包含以下两个属性的对象来解决 promise：</p>
<ul class="">
<li><code>bytesWritten</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a> 写入的字节数</li>
<li><code>buffers</code> <a href="buffer.html#class-buffer" rel="nofollow" class="type">&lt;Buffer[]&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/TypedArray" rel="nofollow" class="type">&lt;TypedArray[]&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/DataView" rel="nofollow" class="type">&lt;DataView[]&gt;</a> 对 <code>buffers</code> 输入的引用。</li>
</ul>
<p class="">在同一文件上多次调用 <code>writev()</code> 而不等待 promise 被解决（或拒绝）是不安全的。</p>
<p class="">在 Linux 上，以追加模式打开文件时，位置写入不起作用。
内核会忽略位置参数，并始终将数据追加到文件末尾。</p>
<h4><code>fsPromises.access(path[, mode])</code><span><a class="mark" href="#fspromisesaccesspath-mode" id="fspromisesaccesspath-mode">#</a></span><a aria-hidden="true" class="legacy" id="fs_fspromises_access_path_mode"></a></h4><p class="tip_wrap" data-show_trans="1" data-item_id="#fspromisesaccesspath-mode">
                <a href="fs/fspromises_access_path_mode.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>新增于: v10.0.0</span>
</div>
<ul class="">
<li><code>path</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="buffer.html#class-buffer" rel="nofollow" class="type">&lt;Buffer&gt;</a> | <a href="url.html#the-whatwg-url-api" rel="nofollow" class="type">&lt;URL&gt;</a></li>
<li><code>mode</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a> <strong>默认值:</strong> <code>fs.constants.F_OK</code></li>
<li>返回: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" rel="nofollow" class="type">&lt;Promise&gt;</a> 成功时将使用 <code>undefined</code> 履行。</li>
</ul>
<p>测试用户对 <code>path</code> 指定的文件或目录的权限。
<code>mode</code> 参数是可选的整数，指定要执行的可访问性检查。
<code>mode</code> 应该是值 <code>fs.constants.F_OK</code> 或由 <code>fs.constants.R_OK</code>、<code>fs.constants.W_OK</code> 和 <code>fs.constants.X_OK</code> 中的任何一个（例如 <code>fs.constants.W_OK | fs.constants.R_OK</code>）的按位或组成的掩码。
查看<a href="#file-access-constants">文件访问的常量</a>以获取可能的 <code>mode</code> 值。</p>
<p class="">如果可访问性检查成功，则不带值解决 promise。
如果任何可访问性检查失败，则使用 <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error" rel="nofollow" class="type">&lt;Error&gt;</a> 对象拒绝 promise。
以下示例检查当前进程是否可以读写文件 <code>/etc/passwd</code>。</p>
<pre class=""><code class="language-js mjs"><span class="hljs-keyword">import</span> { access } <span class="hljs-keyword">from</span> <span class="hljs-string">'fs/promises'</span>;
<span class="hljs-keyword">import</span> { constants } <span class="hljs-keyword">from</span> <span class="hljs-string">'fs'</span>;

<span class="hljs-keyword">try</span> {
  <span class="hljs-keyword">await</span> <span class="hljs-title function_">access</span>(<span class="hljs-string">'/etc/passwd'</span>, constants.<span class="hljs-property">R_OK</span> | constants.<span class="hljs-property">W_OK</span>);
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'can access'</span>);
} <span class="hljs-keyword">catch</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'cannot access'</span>);
}</code></pre>
<p class="">不建议在调用 <code>fsPromises.open()</code> 之前使用 <code>fsPromises.access()</code> 检查文件的可访问性。
这样做会引入竞争条件，因为其他进程可能会在两次调用之间更改文件的状态。
而是，用户代码应直接打开/读取/写入文件，并处理无法访问文件时引发的错误。</p>
<h4><code>fsPromises.appendFile(path, data[, options])</code><span><a class="mark" href="#fspromisesappendfilepath-data-options" id="fspromisesappendfilepath-data-options">#</a></span><a aria-hidden="true" class="legacy" id="fs_fspromises_appendfile_path_data_options"></a></h4><p class="tip_wrap" data-show_trans="1" data-item_id="#fspromisesappendfilepath-data-options">
                <a href="fs/fspromises_appendfile_path_data_options.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>新增于: v10.0.0</span>
</div>
<ul class="">
<li><code>path</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="buffer.html#class-buffer" rel="nofollow" class="type">&lt;Buffer&gt;</a> | <a href="url.html#the-whatwg-url-api" rel="nofollow" class="type">&lt;URL&gt;</a> | <a href="#class-filehandle" rel="nofollow" class="type">&lt;FileHandle&gt;</a> 文件名或 <a href="#class-filehandle" rel="nofollow" class="type">&lt;FileHandle&gt;</a></li>
<li><code>data</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="buffer.html#class-buffer" rel="nofollow" class="type">&lt;Buffer&gt;</a></li>
<li><code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" rel="nofollow" class="type">&lt;Object&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a>
<ul>
<li><code>encoding</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Null_type" rel="nofollow" class="type">&lt;null&gt;</a> <strong>默认值:</strong> <code>'utf8'</code></li>
<li><code>mode</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a> <strong>默认值:</strong> <code>0o666</code></li>
<li><code>flag</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> 请参阅<a href="#file-system-flags">对文件系统 <code>flags</code> 的支持</a>。 <strong>默认值:</strong> <code>'a'</code>。</li>
</ul>
</li>
<li>返回: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" rel="nofollow" class="type">&lt;Promise&gt;</a> 成功时将使用 <code>undefined</code> 履行。</li>
</ul>
<p>异步地将数据追加到文件，如果该文件尚不存在，则创建该文件。
<code>data</code> 可以是字符串或 <a href="buffer.html#class-buffer" rel="nofollow" class="type">&lt;Buffer&gt;</a>。</p>
<p class="">如果 <code>options</code> 是字符串，则它指定 <code>encoding</code>。</p>
<p class=""><code>mode</code> 选项仅影响新创建的文件。
有关详细信息，请参阅 <a href="#fsopenpath-flags-mode-callback"><code>fs.open()</code></a>。</p>
<p class="">可以将 <code>path</code> 指定为已打开用于追加（使用 <code>fsPromises.open()</code>）的 <a href="#class-filehandle" rel="nofollow" class="type">&lt;FileHandle&gt;</a>。</p>
<h4><code>fsPromises.chmod(path, mode)</code><span><a class="mark" href="#fspromiseschmodpath-mode" id="fspromiseschmodpath-mode">#</a></span><a aria-hidden="true" class="legacy" id="fs_fspromises_chmod_path_mode"></a></h4><p class="tip_wrap" data-show_trans="1" data-item_id="#fspromiseschmodpath-mode">
                <a href="fs/fspromises_chmod_path_mode.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>新增于: v10.0.0</span>
</div>
<ul class="">
<li><code>path</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="buffer.html#class-buffer" rel="nofollow" class="type">&lt;Buffer&gt;</a> | <a href="url.html#the-whatwg-url-api" rel="nofollow" class="type">&lt;URL&gt;</a></li>
<li><code>mode</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a></li>
<li>返回: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" rel="nofollow" class="type">&lt;Promise&gt;</a> 成功时将使用 <code>undefined</code> 履行。</li>
</ul>
<p>更改文件的权限。</p>
<h4><code>fsPromises.chown(path, uid, gid)</code><span><a class="mark" href="#fspromiseschownpath-uid-gid" id="fspromiseschownpath-uid-gid">#</a></span><a aria-hidden="true" class="legacy" id="fs_fspromises_chown_path_uid_gid"></a></h4><p class="tip_wrap" data-show_trans="1" data-item_id="#fspromiseschownpath-uid-gid">
                <a href="fs/fspromises_chown_path_uid_gid.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>新增于: v10.0.0</span>
</div>
<ul class="">
<li><code>path</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="buffer.html#class-buffer" rel="nofollow" class="type">&lt;Buffer&gt;</a> | <a href="url.html#the-whatwg-url-api" rel="nofollow" class="type">&lt;URL&gt;</a></li>
<li><code>uid</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a></li>
<li><code>gid</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a></li>
<li>返回: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" rel="nofollow" class="type">&lt;Promise&gt;</a> 成功时将使用 <code>undefined</code> 履行。</li>
</ul>
<p>更改文件的所有权。</p>
<h4><code>fsPromises.copyFile(src, dest[, mode])</code><span><a class="mark" href="#fspromisescopyfilesrc-dest-mode" id="fspromisescopyfilesrc-dest-mode">#</a></span><a aria-hidden="true" class="legacy" id="fs_fspromises_copyfile_src_dest_mode"></a></h4><p class="tip_wrap" data-show_trans="1" data-item_id="#fspromisescopyfilesrc-dest-mode">
                <a href="fs/fspromises_copyfile_src_dest_mode.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<details class="changelog"><summary>版本历史</summary>
<table>
<tbody><tr><th>版本</th><th>变更</th></tr>
<tr><td>v14.0.0</td>
<td><p>将 'flags' 参数更改为 'mode'，并进行更严格的类型验证。</p></td></tr>
<tr><td>v10.0.0</td>
<td><p><span>新增于: v10.0.0</span></p></td></tr>
</tbody></table>
</details>
</div>
<ul class="">
<li><code>src</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="buffer.html#class-buffer" rel="nofollow" class="type">&lt;Buffer&gt;</a> | <a href="url.html#the-whatwg-url-api" rel="nofollow" class="type">&lt;URL&gt;</a> 要复制的源文件名</li>
<li><code>dest</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="buffer.html#class-buffer" rel="nofollow" class="type">&lt;Buffer&gt;</a> | <a href="url.html#the-whatwg-url-api" rel="nofollow" class="type">&lt;URL&gt;</a> 复制操作的目标文件名</li>
<li><code>mode</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a> 指定复制操作行为的可选修饰符。
可以创建由两个或多个值的按位或组成的掩码（例如 <code>fs.constants.COPYFILE_EXCL | fs.constants.COPYFILE_FICLONE</code>）
<strong>默认值:</strong> <code>0</code>。
<ul>
<li><code>fs.constants.COPYFILE_EXCL</code>: 如果 <code>dest</code> 已经存在，则复制操作将失败。</li>
<li><code>fs.constants.COPYFILE_FICLONE</code>: 复制操作将尝试创建写时复制引用链接。
如果平台不支持写时复制，则使用后备复制机制。</li>
<li><code>fs.constants.COPYFILE_FICLONE_FORCE</code>: 复制操作将尝试创建写时复制引用链接。
如果平台不支持写时复制，则该操作将失败。</li>
</ul>
</li>
<li>返回: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" rel="nofollow" class="type">&lt;Promise&gt;</a> 成功时将使用 <code>undefined</code> 履行。</li>
</ul>
<p>异步地将 <code>src</code> 复制到 <code>dest</code>。
默认情况下，如果 <code>dest</code> 已经存在，则会被覆盖。</p>
<p class="">无法保证复制操作的原子性。
如果在打开目标文件进行写入后发生错误，则将尝试删除目标文件。</p>
<pre class=""><code class="language-js mjs"><span class="hljs-keyword">import</span> { constants } <span class="hljs-keyword">from</span> <span class="hljs-string">'fs'</span>;
<span class="hljs-keyword">import</span> { copyFile } <span class="hljs-keyword">from</span> <span class="hljs-string">'fs/promises'</span>;

<span class="hljs-keyword">try</span> {
  <span class="hljs-keyword">await</span> <span class="hljs-title function_">copyFile</span>(<span class="hljs-string">'source.txt'</span>, <span class="hljs-string">'destination.txt'</span>);
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'source.txt was copied to destination.txt'</span>);
} <span class="hljs-keyword">catch</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'The file could not be copied'</span>);
}

<span class="hljs-comment">// 通过使用 COPYFILE_EXCL，如果 destination.txt 存在，则该操作将失败。</span>
<span class="hljs-keyword">try</span> {
  <span class="hljs-keyword">await</span> <span class="hljs-title function_">copyFile</span>(<span class="hljs-string">'source.txt'</span>, <span class="hljs-string">'destination.txt'</span>, constants.<span class="hljs-property">COPYFILE_EXCL</span>);
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'source.txt was copied to destination.txt'</span>);
} <span class="hljs-keyword">catch</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'The file could not be copied'</span>);
}</code></pre>
<h4><code>fsPromises.cp(src, dest[, options])</code><span><a class="mark" href="#fspromisescpsrc-dest-options" id="fspromisescpsrc-dest-options">#</a></span><a aria-hidden="true" class="legacy" id="fs_fspromises_cp_src_dest_options"></a></h4><p class="tip_wrap" data-show_trans="1" data-item_id="#fspromisescpsrc-dest-options">
                <a href="fs/fspromises_cp_src_dest_options.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<details class="changelog"><summary>版本历史</summary>
<table>
<tbody><tr><th>版本</th><th>变更</th></tr>
<tr><td>v16.15.0</td>
<td><p>接受额外的 <code>verbatimSymlinks</code> 选项来指定是否为符号链接执行路径解析。</p></td></tr>
<tr><td>v16.7.0</td>
<td><p><span>新增于: v16.7.0</span></p></td></tr>
</tbody></table>
</details>
</div>
<p></p><div class="api_stability api_stability_1"><a href="documentation.html#stability-index">稳定性: 1</a> - 实验</div><p></p>
<ul class="">
<li><code>src</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="url.html#the-whatwg-url-api" rel="nofollow" class="type">&lt;URL&gt;</a> 要复制的源路径。</li>
<li><code>dest</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="url.html#the-whatwg-url-api" rel="nofollow" class="type">&lt;URL&gt;</a> 要复制到的目标路径。</li>
<li><code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" rel="nofollow" class="type">&lt;Object&gt;</a>
<ul>
<li><code>dereference</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" rel="nofollow" class="type">&lt;boolean&gt;</a> 取消引用符号链接。 <strong>默认值:</strong> <code>false</code>。</li>
<li><code>errorOnExist</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" rel="nofollow" class="type">&lt;boolean&gt;</a> 当 <code>force</code> 为 <code>false</code> 且目标存在时，则抛出错误。 <strong>默认值:</strong> <code>false</code>。</li>
<li><code>filter</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" rel="nofollow" class="type">&lt;Function&gt;</a> 过滤复制文件/目录的函数。
返回 <code>true</code> 则复制条目，返回 <code>false</code> 则忽略它。
也可以返回解决为 <code>true</code> 或 <code>false</code> 的 <code>Promise</code> <strong>默认值:</strong> <code>undefined</code>。</li>
<li><code>force</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" rel="nofollow" class="type">&lt;boolean&gt;</a> 覆盖现有的文件或目录。
如果将此设置为 false 并且目标存在，则复制操作将忽略错误。
使用 <code>errorOnExist</code> 选项更改此行为。
<strong>默认值:</strong> <code>true</code>。</li>
<li><code>preserveTimestamps</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" rel="nofollow" class="type">&lt;boolean&gt;</a> 当为 <code>true</code> 时，则 <code>src</code> 的时间戳将被保留。 <strong>默认值:</strong> <code>false</code>。</li>
<li><code>recursive</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" rel="nofollow" class="type">&lt;boolean&gt;</a> 递归地复制目录 <strong>默认值:</strong> <code>false</code></li>
<li><code>verbatimSymlinks</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" rel="nofollow" class="type">&lt;boolean&gt;</a> 当为 <code>true</code> 时，则符号链接的路径解析将被跳过。 <strong>默认值:</strong> <code>false</code></li>
</ul>
</li>
<li>返回: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" rel="nofollow" class="type">&lt;Promise&gt;</a> 成功时将使用 <code>undefined</code> 履行。</li>
</ul>
<p>将整个目录结构从 <code>src</code> 异步地复制到 <code>dest</code>，包括子目录和文件。</p>
<p class="">当将目录复制到另一个目录时，不支持 globs，并且行为类似于 <code>cp dir1/ dir2/</code>。</p>
<h4><code>fsPromises.lchmod(path, mode)</code><span><a class="mark" href="#fspromiseslchmodpath-mode" id="fspromiseslchmodpath-mode">#</a></span><a aria-hidden="true" class="legacy" id="fs_fspromises_lchmod_path_mode"></a></h4><p class="tip_wrap" data-show_trans="1" data-item_id="#fspromiseslchmodpath-mode">
                <a href="fs/fspromises_lchmod_path_mode.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>弃用于: v10.0.0</span>
</div>
<ul class="">
<li><code>path</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="buffer.html#class-buffer" rel="nofollow" class="type">&lt;Buffer&gt;</a> | <a href="url.html#the-whatwg-url-api" rel="nofollow" class="type">&lt;URL&gt;</a></li>
<li><code>mode</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a></li>
<li>返回: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" rel="nofollow" class="type">&lt;Promise&gt;</a> 成功时将使用 <code>undefined</code> 履行。</li>
</ul>
<p>更改符号链接的权限。</p>
<p class="">此方法仅在 macOS 上实现。</p>
<h4><code>fsPromises.lchown(path, uid, gid)</code><span><a class="mark" href="#fspromiseslchownpath-uid-gid" id="fspromiseslchownpath-uid-gid">#</a></span><a aria-hidden="true" class="legacy" id="fs_fspromises_lchown_path_uid_gid"></a></h4><p class="tip_wrap" data-show_trans="1" data-item_id="#fspromiseslchownpath-uid-gid">
                <a href="fs/fspromises_lchown_path_uid_gid.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<details class="changelog"><summary>版本历史</summary>
<table>
<tbody><tr><th>版本</th><th>变更</th></tr>
<tr><td>v10.6.0</td>
<td><p>该 API 不再被弃用。</p></td></tr>
<tr><td>v10.0.0</td>
<td><p><span>新增于: v10.0.0</span></p></td></tr>
</tbody></table>
</details>
</div>
<ul class="">
<li><code>path</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="buffer.html#class-buffer" rel="nofollow" class="type">&lt;Buffer&gt;</a> | <a href="url.html#the-whatwg-url-api" rel="nofollow" class="type">&lt;URL&gt;</a></li>
<li><code>uid</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a></li>
<li><code>gid</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a></li>
<li>返回: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" rel="nofollow" class="type">&lt;Promise&gt;</a>  成功时将使用 <code>undefined</code> 履行。</li>
</ul>
<p>更改符号链接上的所有权。</p>
<h4><code>fsPromises.lutimes(path, atime, mtime)</code><span><a class="mark" href="#fspromiseslutimespath-atime-mtime" id="fspromiseslutimespath-atime-mtime">#</a></span><a aria-hidden="true" class="legacy" id="fs_fspromises_lutimes_path_atime_mtime"></a></h4><p class="tip_wrap" data-show_trans="1" data-item_id="#fspromiseslutimespath-atime-mtime">
                <a href="fs/fspromises_lutimes_path_atime_mtime.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>新增于: v14.5.0, v12.19.0</span>
</div>
<ul class="">
<li><code>path</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="buffer.html#class-buffer" rel="nofollow" class="type">&lt;Buffer&gt;</a> | <a href="url.html#the-whatwg-url-api" rel="nofollow" class="type">&lt;URL&gt;</a></li>
<li><code>atime</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;number&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date" rel="nofollow" class="type">&lt;Date&gt;</a></li>
<li><code>mtime</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;number&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date" rel="nofollow" class="type">&lt;Date&gt;</a></li>
<li>返回: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" rel="nofollow" class="type">&lt;Promise&gt;</a>  成功时将使用 <code>undefined</code> 履行。</li>
</ul>
<p>以与 <a href="#fspromisesutimespath-atime-mtime"><code>fsPromises.utimes()</code></a> 相同的方式更改文件的访问和修改时间，不同之处在于，如果路径引用符号链接，则不会取消引用该链接：而是，符号链接本身的时间戳会更改。</p>
<h4><code>fsPromises.link(existingPath, newPath)</code><span><a class="mark" href="#fspromiseslinkexistingpath-newpath" id="fspromiseslinkexistingpath-newpath">#</a></span><a aria-hidden="true" class="legacy" id="fs_fspromises_link_existingpath_newpath"></a></h4><p class="tip_wrap" data-show_trans="1" data-item_id="#fspromiseslinkexistingpath-newpath">
                <a href="fs/fspromises_link_existingpath_newpath.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>新增于: v10.0.0</span>
</div>
<ul class="">
<li><code>existingPath</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="buffer.html#class-buffer" rel="nofollow" class="type">&lt;Buffer&gt;</a> | <a href="url.html#the-whatwg-url-api" rel="nofollow" class="type">&lt;URL&gt;</a></li>
<li><code>newPath</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="buffer.html#class-buffer" rel="nofollow" class="type">&lt;Buffer&gt;</a> | <a href="url.html#the-whatwg-url-api" rel="nofollow" class="type">&lt;URL&gt;</a></li>
<li>返回: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" rel="nofollow" class="type">&lt;Promise&gt;</a>  成功时将使用 <code>undefined</code> 履行。</li>
</ul>
<p>创建从 <code>existingPath</code> 到 <code>newPath</code> 的新链接。
有关更多详细信息，请参阅 POSIX <a href="http://man7.org/linux/man-pages/man2/link.2.html" rel="nofollow"><code>link(2)</code></a> 文档。</p>
<h4><code>fsPromises.lstat(path[, options])</code><span><a class="mark" href="#fspromiseslstatpath-options" id="fspromiseslstatpath-options">#</a></span><a aria-hidden="true" class="legacy" id="fs_fspromises_lstat_path_options"></a></h4><p class="tip_wrap" data-show_trans="1" data-item_id="#fspromiseslstatpath-options">
                <a href="fs/fspromises_lstat_path_options.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<details class="changelog"><summary>版本历史</summary>
<table>
<tbody><tr><th>版本</th><th>变更</th></tr>
<tr><td>v10.5.0</td>
<td><p>接受额外的 <code>options</code> 对象，以指定返回的数字值是否应为长整数。</p></td></tr>
<tr><td>v10.0.0</td>
<td><p><span>新增于: v10.0.0</span></p></td></tr>
</tbody></table>
</details>
</div>
<ul class="">
<li><code>path</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="buffer.html#class-buffer" rel="nofollow" class="type">&lt;Buffer&gt;</a> | <a href="url.html#the-whatwg-url-api" rel="nofollow" class="type">&lt;URL&gt;</a></li>
<li><code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" rel="nofollow" class="type">&lt;Object&gt;</a>
<ul>
<li><code>bigint</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" rel="nofollow" class="type">&lt;boolean&gt;</a> 返回的 <a href="#class-fsstats" rel="nofollow" class="type">&lt;fs.Stats&gt;</a> 对象中的数值是否应为 <code>bigint</code>。 <strong>默认值:</strong> <code>false</code>。</li>
</ul>
</li>
<li>返回: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" rel="nofollow" class="type">&lt;Promise&gt;</a>  使用给定的符号链接 <code>path</code> 的 <a href="#class-fsstats" rel="nofollow" class="type">&lt;fs.Stats&gt;</a> 对象履行。</li>
</ul>
<p>等效于 <a href="#fspromisesstatpath-options"><code>fsPromises.stat()</code></a>，除非 <code>path</code> 指向符号链接，在这种情况下，被统计的是链接本身，而不是其所引用的文件。
有关更多详细信息，请参考 POSIX <a href="http://man7.org/linux/man-pages/man2/lstat.2.html" rel="nofollow"><code>lstat(2)</code></a> 文档。</p>
<h4><code>fsPromises.mkdir(path[, options])</code><span><a class="mark" href="#fspromisesmkdirpath-options" id="fspromisesmkdirpath-options">#</a></span><a aria-hidden="true" class="legacy" id="fs_fspromises_mkdir_path_options"></a></h4><p class="tip_wrap" data-show_trans="1" data-item_id="#fspromisesmkdirpath-options">
                <a href="fs/fspromises_mkdir_path_options.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>新增于: v10.0.0</span>
</div>
<ul class="">
<li><code>path</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="buffer.html#class-buffer" rel="nofollow" class="type">&lt;Buffer&gt;</a> | <a href="url.html#the-whatwg-url-api" rel="nofollow" class="type">&lt;URL&gt;</a></li>
<li><code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" rel="nofollow" class="type">&lt;Object&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a>
<ul>
<li><code>recursive</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" rel="nofollow" class="type">&lt;boolean&gt;</a> <strong>默认值:</strong> <code>false</code></li>
<li><code>mode</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a> Windows 上不支持。 <strong>默认值:</strong> <code>0o777</code>。</li>
</ul>
</li>
<li>返回: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" rel="nofollow" class="type">&lt;Promise&gt;</a> 成功后，如果 <code>recursive</code> 为 <code>false</code>，则使用 <code>undefined</code> 履行；如果 <code>recursive</code> 为 <code>true</code>，则使用创建的第一个目录路径履行。</li>
</ul>
<p>异步地创建目录。</p>
<p class="">可选的 <code>options</code> 参数可以是指定 <code>mode</code>（权限和粘性位）的整数，也可以是具有 <code>mode</code> 属性和 <code>recursive</code> 属性（指示是否应创建父目录）的对象。
当 <code>path</code> 是已存在的目录时，调用 <code>fsPromises.mkdir()</code> 仅在 <code>recursive</code> 为 false 时才导致拒绝。</p>
<h4><code>fsPromises.mkdtemp(prefix[, options])</code><span><a class="mark" href="#fspromisesmkdtempprefix-options" id="fspromisesmkdtempprefix-options">#</a></span><a aria-hidden="true" class="legacy" id="fs_fspromises_mkdtemp_prefix_options"></a></h4><p class="tip_wrap" data-show_trans="1" data-item_id="#fspromisesmkdtempprefix-options">
                <a href="fs/fspromises_mkdtemp_prefix_options.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<details class="changelog"><summary>版本历史</summary>
<table>
<tbody><tr><th>版本</th><th>变更</th></tr>
<tr><td>v16.5.0</td>
<td><p>参数 <code>prefix</code> 现在接受空字符串。</p></td></tr>
<tr><td>v10.0.0</td>
<td><p><span>新增于: v10.0.0</span></p></td></tr>
</tbody></table>
</details>
</div>
<ul class="">
<li><code>prefix</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a></li>
<li><code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" rel="nofollow" class="type">&lt;Object&gt;</a>
<ul>
<li><code>encoding</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> <strong>默认值:</strong> <code>'utf8'</code></li>
</ul>
</li>
<li>返回: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" rel="nofollow" class="type">&lt;Promise&gt;</a>  使用包含新创建的临时目录的文件系统路径的字符串来履行。</li>
</ul>
<p>创建唯一的临时目录。
通过在所提供的 <code>prefix</code> 的末尾附加六个随机字符来生成唯一的目录名称。
由于平台的不一致，请避免在 <code>prefix</code> 中尾随 <code>X</code> 字符。
某些平台，尤其是 BSD，可能返回六个以上的随机字符，并将 <code>prefix</code> 中的尾随 <code>X</code> 字符替换为随机字符。</p>
<p class="">可选的 <code>options</code> 参数可以是指定编码的字符串，也可以是具有 <code>encoding</code> 属性（指定要使用的字符编码）的对象。</p>
<pre class=""><code class="language-js mjs"><span class="hljs-keyword">import</span> { mkdtemp } <span class="hljs-keyword">from</span> <span class="hljs-string">'fs/promises'</span>;

<span class="hljs-keyword">try</span> {
  <span class="hljs-keyword">await</span> <span class="hljs-title function_">mkdtemp</span>(path.<span class="hljs-title function_">join</span>(os.<span class="hljs-title function_">tmpdir</span>(), <span class="hljs-string">'foo-'</span>));
} <span class="hljs-keyword">catch</span> (err) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(err);
}</code></pre>
<p class=""><code>fsPromises.mkdtemp()</code> 方法会将六个随机选择的字符直接附加到 <code>prefix</code> 字符串。
例如，给定目录 <code>/tmp</code>，如果要在 <code>/tmp</code> 内创建临时目录，则 <code>prefix</code> 必须以平台特定的尾随路径分隔符（<code>require('path').sep</code>）结尾。</p>
<h4><code>fsPromises.open(path, flags[, mode])</code><span><a class="mark" href="#fspromisesopenpath-flags-mode" id="fspromisesopenpath-flags-mode">#</a></span><a aria-hidden="true" class="legacy" id="fs_fspromises_open_path_flags_mode"></a></h4><p class="tip_wrap" data-show_trans="1" data-item_id="#fspromisesopenpath-flags-mode">
                <a href="fs/fspromises_open_path_flags_mode.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<details class="changelog"><summary>版本历史</summary>
<table>
<tbody><tr><th>版本</th><th>变更</th></tr>
<tr><td>v11.1.0</td>
<td><p>参数 <code>flags</code> 现在是可选的，默认为 <code>'r'</code>。</p></td></tr>
<tr><td>v10.0.0</td>
<td><p><span>新增于: v10.0.0</span></p></td></tr>
</tbody></table>
</details>
</div>
<ul class="">
<li><code>path</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="buffer.html#class-buffer" rel="nofollow" class="type">&lt;Buffer&gt;</a> | <a href="url.html#the-whatwg-url-api" rel="nofollow" class="type">&lt;URL&gt;</a></li>
<li><code>flags</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;number&gt;</a> 请参阅<a href="#file-system-flags">对文件系统 <code>flags</code> 的支持</a>。
<strong>默认值:</strong> <code>'r'</code>。</li>
<li><code>mode</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a> 如果创建文件，则设置文件模式（权限和粘性位）。 <strong>默认值:</strong> <code>0o666</code> （可读可写）</li>
<li>返回: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" rel="nofollow" class="type">&lt;Promise&gt;</a> 使用  <a href="#class-filehandle" rel="nofollow" class="type">&lt;FileHandle&gt;</a> 对象履行。</li>
</ul>
<p>打开 <a href="#class-filehandle" rel="nofollow" class="type">&lt;FileHandle&gt;</a>。</p>
<p class="">有关更多详细信息，请参考 POSIX <a href="http://man7.org/linux/man-pages/man2/open.2.html" rel="nofollow"><code>open(2)</code></a> 文档。</p>
<p class="">在 Windows 上预留了一些字符（<code>&lt; &gt; : " / \ | ? *</code>），如<a href="https://docs.microsoft.com/en-us/windows/desktop/FileIO/naming-a-file" rel="nofollow">命名文件、路径和命名空间</a>所记录。
在 NTFS 下，如果文件名包含冒号，则 Node.js 将打开文件系统流，如<a href="https://docs.microsoft.com/en-us/windows/desktop/FileIO/using-streams" rel="nofollow">此 MSDN 页面</a>所述。</p>
<h4><code>fsPromises.opendir(path[, options])</code><span><a class="mark" href="#fspromisesopendirpath-options" id="fspromisesopendirpath-options">#</a></span><a aria-hidden="true" class="legacy" id="fs_fspromises_opendir_path_options"></a></h4><p class="tip_wrap" data-show_trans="1" data-item_id="#fspromisesopendirpath-options">
                <a href="fs/fspromises_opendir_path_options.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<details class="changelog"><summary>版本历史</summary>
<table>
<tbody><tr><th>版本</th><th>变更</th></tr>
<tr><td>v13.1.0, v12.16.0</td>
<td><p>引入了 <code>bufferSize</code> 选项。</p></td></tr>
<tr><td>v12.12.0</td>
<td><p><span>新增于: v12.12.0</span></p></td></tr>
</tbody></table>
</details>
</div>
<ul class="">
<li><code>path</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="buffer.html#class-buffer" rel="nofollow" class="type">&lt;Buffer&gt;</a> | <a href="url.html#the-whatwg-url-api" rel="nofollow" class="type">&lt;URL&gt;</a></li>
<li><code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" rel="nofollow" class="type">&lt;Object&gt;</a>
<ul>
<li><code>encoding</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Null_type" rel="nofollow" class="type">&lt;null&gt;</a> <strong>默认值:</strong> <code>'utf8'</code></li>
<li><code>bufferSize</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;number&gt;</a> 当从目录读取时，在内部缓冲的目录条目数。
值越大，性能越好，但内存使用率越高。 <strong>默认值:</strong> <code>32</code></li>
</ul>
</li>
<li>返回: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" rel="nofollow" class="type">&lt;Promise&gt;</a>  使用 <a href="#class-fsdir" rel="nofollow" class="type">&lt;fs.Dir&gt;</a> 履行。</li>
</ul>
<p>异步地打开目录进行迭代扫描。
有关更多详细信息，请参阅 POSIX <a href="http://man7.org/linux/man-pages/man3/opendir.3.html" rel="nofollow"><code>opendir(3)</code></a> 文档。</p>
<p class="">创建 <a href="#class-fsdir" rel="nofollow" class="type">&lt;fs.Dir&gt;</a>，其中包含用于从目录读取和清理目录的所有进一步的函数。</p>
<p class=""><code>encoding</code> 选项设置在打开目录和随后的读取操作时 <code>path</code> 的编码。</p>
<p class="">使用异步迭代的示例：</p>
<pre class=""><code class="language-js mjs"><span class="hljs-keyword">import</span> { opendir } <span class="hljs-keyword">from</span> <span class="hljs-string">'fs/promises'</span>;

<span class="hljs-keyword">try</span> {
  <span class="hljs-keyword">const</span> dir = <span class="hljs-keyword">await</span> <span class="hljs-title function_">opendir</span>(<span class="hljs-string">'./'</span>);
  <span class="hljs-keyword">for</span> <span class="hljs-keyword">await</span> (<span class="hljs-keyword">const</span> dirent <span class="hljs-keyword">of</span> dir)
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(dirent.<span class="hljs-property">name</span>);
} <span class="hljs-keyword">catch</span> (err) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(err);
}</code></pre>
<p class="">当使用异步迭代器时，<a href="#class-fsdir" rel="nofollow" class="type">&lt;fs.Dir&gt;</a> 对象将在迭代器退出后自动关闭。</p>
<h4><code>fsPromises.readdir(path[, options])</code><span><a class="mark" href="#fspromisesreaddirpath-options" id="fspromisesreaddirpath-options">#</a></span><a aria-hidden="true" class="legacy" id="fs_fspromises_readdir_path_options"></a></h4><p class="tip_wrap" data-show_trans="1" data-item_id="#fspromisesreaddirpath-options">
                <a href="fs/fspromises_readdir_path_options.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<details class="changelog"><summary>版本历史</summary>
<table>
<tbody><tr><th>版本</th><th>变更</th></tr>
<tr><td>v10.11.0</td>
<td><p>添加了新选项 <code>withFileTypes</code>。</p></td></tr>
<tr><td>v10.0.0</td>
<td><p><span>新增于: v10.0.0</span></p></td></tr>
</tbody></table>
</details>
</div>
<ul class="">
<li><code>path</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="buffer.html#class-buffer" rel="nofollow" class="type">&lt;Buffer&gt;</a> | <a href="url.html#the-whatwg-url-api" rel="nofollow" class="type">&lt;URL&gt;</a></li>
<li><code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" rel="nofollow" class="type">&lt;Object&gt;</a>
<ul>
<li><code>encoding</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> <strong>默认值:</strong> <code>'utf8'</code></li>
<li><code>withFileTypes</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" rel="nofollow" class="type">&lt;boolean&gt;</a> <strong>默认值:</strong> <code>false</code></li>
</ul>
</li>
<li>返回: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" rel="nofollow" class="type">&lt;Promise&gt;</a>  使用目录中文件的名称数组（不包括 <code>'.'</code> 和 <code>'..'</code>）履行。</li>
</ul>
<p>读取目录的内容。</p>
<p class="">可选的 <code>options</code> 参数可以是指定编码的字符串，也可以是具有 <code>encoding</code> 属性（指定用于文件名的字符编码）的对象。
如果 <code>encoding</code> 设置为 <code>'buffer'</code>，则返回的文件名将作为 <a href="buffer.html#class-buffer" rel="nofollow" class="type">&lt;Buffer&gt;</a> 对象传入。</p>
<p class="">如果 <code>options.withFileTypes</code> 设置为 <code>true</code>，则解决的数组将包含 <a href="#class-fsdirent" rel="nofollow" class="type">&lt;fs.Dirent&gt;</a> 对象。</p>
<pre class=""><code class="language-js mjs"><span class="hljs-keyword">import</span> { readdir } <span class="hljs-keyword">from</span> <span class="hljs-string">'fs/promises'</span>;

<span class="hljs-keyword">try</span> {
  <span class="hljs-keyword">const</span> files = <span class="hljs-keyword">await</span> <span class="hljs-title function_">readdir</span>(path);
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> file <span class="hljs-keyword">of</span> files)
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(file);
} <span class="hljs-keyword">catch</span> (err) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(err);
}</code></pre>
<h4><code>fsPromises.readFile(path[, options])</code><span><a class="mark" href="#fspromisesreadfilepath-options" id="fspromisesreadfilepath-options">#</a></span><a aria-hidden="true" class="legacy" id="fs_fspromises_readfile_path_options"></a></h4><p class="tip_wrap" data-show_trans="1" data-item_id="#fspromisesreadfilepath-options">
                <a href="fs/fspromises_readfile_path_options.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<details class="changelog"><summary>版本历史</summary>
<table>
<tbody><tr><th>版本</th><th>变更</th></tr>
<tr><td>v15.2.0, v14.17.0</td>
<td><p>选项参数可以包含中止信号，以中止正在进行的读取文件请求。</p></td></tr>
<tr><td>v10.0.0</td>
<td><p><span>新增于: v10.0.0</span></p></td></tr>
</tbody></table>
</details>
</div>
<ul class="">
<li><code>path</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="buffer.html#class-buffer" rel="nofollow" class="type">&lt;Buffer&gt;</a> | <a href="url.html#the-whatwg-url-api" rel="nofollow" class="type">&lt;URL&gt;</a> | <a href="#class-filehandle" rel="nofollow" class="type">&lt;FileHandle&gt;</a> 文件名或 <code>FileHandle</code></li>
<li><code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" rel="nofollow" class="type">&lt;Object&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a>
<ul>
<li><code>encoding</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Null_type" rel="nofollow" class="type">&lt;null&gt;</a> <strong>默认值:</strong> <code>null</code></li>
<li><code>flag</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> 请参阅<a href="#file-system-flags">对文件系统 <code>flags</code> 的支持</a>。 <strong>默认值:</strong> <code>'r'</code>。</li>
<li><code>signal</code> <a href="globals.html#class-abortsignal" rel="nofollow" class="type">&lt;AbortSignal&gt;</a> 允许中止正在进行的读取文件</li>
</ul>
</li>
<li>返回: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" rel="nofollow" class="type">&lt;Promise&gt;</a>  使用文件的内容履行。</li>
</ul>
<p>异步地读取文件的全部内容。</p>
<p class="">如果未指定编码（使用 <code>options.encoding</code>），则数据作为 <a href="buffer.html#class-buffer" rel="nofollow" class="type">&lt;Buffer&gt;</a> 对象返回。
否则，数据将为字符串。</p>
<p class="">如果 <code>options</code> 是字符串，则它指定编码。</p>
<p class="">当 <code>path</code> 是目录时，<code>fsPromises.readFile()</code> 的行为是特定于平台的。
在 macOS、Linux 和 Windows 上，promise 将使用错误拒绝。
在 FreeBSD 上，将返回目录内容的表示。</p>
<p class="">可以使用 <a href="globals.html#class-abortsignal" rel="nofollow" class="type">&lt;AbortSignal&gt;</a> 中止正在进行的 <code>readFile</code>。
如果请求中止，则返回的 promise 将使用 <code>AbortError</code> 拒绝：</p>
<pre class=""><code class="language-js mjs"><span class="hljs-keyword">import</span> { readFile } <span class="hljs-keyword">from</span> <span class="hljs-string">'fs/promises'</span>;

<span class="hljs-keyword">try</span> {
  <span class="hljs-keyword">const</span> controller = <span class="hljs-keyword">new</span> <span class="hljs-title class_">AbortController</span>();
  <span class="hljs-keyword">const</span> { signal } = controller;
  <span class="hljs-keyword">const</span> promise = <span class="hljs-title function_">readFile</span>(fileName, { signal });

  <span class="hljs-comment">// 在 promise 达成之前中止请求。</span>
  controller.<span class="hljs-title function_">abort</span>();

  <span class="hljs-keyword">await</span> promise;
} <span class="hljs-keyword">catch</span> (err) {
  <span class="hljs-comment">// 当请求中止时 - err 是 AbortError</span>
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(err);
}</code></pre>
<p class="">中止正在进行的请求不会中止单个操作系统请求，而是中止内部缓冲的 <code>fs.readFile</code> 执行。</p>
<p class="">任何指定的 <a href="#class-filehandle" rel="nofollow" class="type">&lt;FileHandle&gt;</a> 必须支持读取。</p>
<h4><code>fsPromises.readlink(path[, options])</code><span><a class="mark" href="#fspromisesreadlinkpath-options" id="fspromisesreadlinkpath-options">#</a></span><a aria-hidden="true" class="legacy" id="fs_fspromises_readlink_path_options"></a></h4><p class="tip_wrap" data-show_trans="1" data-item_id="#fspromisesreadlinkpath-options">
                <a href="fs/fspromises_readlink_path_options.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>新增于: v10.0.0</span>
</div>
<ul class="">
<li><code>path</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="buffer.html#class-buffer" rel="nofollow" class="type">&lt;Buffer&gt;</a> | <a href="url.html#the-whatwg-url-api" rel="nofollow" class="type">&lt;URL&gt;</a></li>
<li><code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" rel="nofollow" class="type">&lt;Object&gt;</a>
<ul>
<li><code>encoding</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> <strong>默认值:</strong> <code>'utf8'</code></li>
</ul>
</li>
<li>返回: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" rel="nofollow" class="type">&lt;Promise&gt;</a> 成功时将使用 <code>linkString</code> 履行。</li>
</ul>
<p>读取 <code>path</code> 引用的符号链接的内容。
有关更多详细信息，请参阅 POSIX <a href="http://man7.org/linux/man-pages/man2/readlink.2.html" rel="nofollow"><code>readlink(2)</code></a> 文档。
成功时使用 <code>linkString</code> 解决 promise。</p>
<p class="">可选的 <code>options</code> 参数可以是指定编码的字符串，也可以是具有 <code>encoding</code> 属性（指定用于返回的链接路径的字符编码）的对象。
如果将 <code>encoding</code> 设置为 <code>'buffer'</code>，则返回的链接路径将作为 <a href="buffer.html#class-buffer" rel="nofollow" class="type">&lt;Buffer&gt;</a> 对象传入。</p>
<h4><code>fsPromises.realpath(path[, options])</code><span><a class="mark" href="#fspromisesrealpathpath-options" id="fspromisesrealpathpath-options">#</a></span><a aria-hidden="true" class="legacy" id="fs_fspromises_realpath_path_options"></a></h4><p class="tip_wrap" data-show_trans="1" data-item_id="#fspromisesrealpathpath-options">
                <a href="fs/fspromises_realpath_path_options.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>新增于: v10.0.0</span>
</div>
<ul class="">
<li><code>path</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="buffer.html#class-buffer" rel="nofollow" class="type">&lt;Buffer&gt;</a> | <a href="url.html#the-whatwg-url-api" rel="nofollow" class="type">&lt;URL&gt;</a></li>
<li><code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" rel="nofollow" class="type">&lt;Object&gt;</a>
<ul>
<li><code>encoding</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> <strong>默认值:</strong> <code>'utf8'</code></li>
</ul>
</li>
<li>返回: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" rel="nofollow" class="type">&lt;Promise&gt;</a>  成功时将使用解析的路径履行。</li>
</ul>
<p>使用与 <code>fs.realpath.native()</code> 函数相同的语义确定 <code>path</code> 的实际位置。</p>
<p class="">仅支持可以转换为 UTF8 字符串的路径。</p>
<p class="">可选的 <code>options</code> 参数可以是指定编码的字符串，也可以是具有 <code>encoding</code> 属性（指定用于路径的字符编码）的对象。
如果 <code>encoding</code> 设置为 <code>'buffer'</code>，则返回的路径将作为 <a href="buffer.html#class-buffer" rel="nofollow" class="type">&lt;Buffer&gt;</a> 对象传入。</p>
<p class="">在 Linux 上，将 Node.js 与 musl libc 链接时，必须将 procfs 文件系统挂载在 <code>/proc</code> 上，此函数才能起作用。
Glibc 没有此限制。</p>
<h4><code>fsPromises.rename(oldPath, newPath)</code><span><a class="mark" href="#fspromisesrenameoldpath-newpath" id="fspromisesrenameoldpath-newpath">#</a></span><a aria-hidden="true" class="legacy" id="fs_fspromises_rename_oldpath_newpath"></a></h4><p class="tip_wrap" data-show_trans="1" data-item_id="#fspromisesrenameoldpath-newpath">
                <a href="fs/fspromises_rename_oldpath_newpath.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>新增于: v10.0.0</span>
</div>
<ul class="">
<li><code>oldPath</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="buffer.html#class-buffer" rel="nofollow" class="type">&lt;Buffer&gt;</a> | <a href="url.html#the-whatwg-url-api" rel="nofollow" class="type">&lt;URL&gt;</a></li>
<li><code>newPath</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="buffer.html#class-buffer" rel="nofollow" class="type">&lt;Buffer&gt;</a> | <a href="url.html#the-whatwg-url-api" rel="nofollow" class="type">&lt;URL&gt;</a></li>
<li>返回: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" rel="nofollow" class="type">&lt;Promise&gt;</a> 成功时将使用 <code>undefined</code> 履行。</li>
</ul>
<p>将 <code>oldPath</code> 重命名为 <code>newPath</code>。</p>
<h4><code>fsPromises.rmdir(path[, options])</code><span><a class="mark" href="#fspromisesrmdirpath-options" id="fspromisesrmdirpath-options">#</a></span><a aria-hidden="true" class="legacy" id="fs_fspromises_rmdir_path_options"></a></h4><p class="tip_wrap" data-show_trans="1" data-item_id="#fspromisesrmdirpath-options">
                <a href="fs/fspromises_rmdir_path_options.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<details class="changelog"><summary>版本历史</summary>
<table>
<tbody><tr><th>版本</th><th>变更</th></tr>
<tr><td>v16.0.0</td>
<td><p>不再允许在文件 <code>path</code> 上使用 <code>fsPromises.rmdir(path, { recursive: true })</code>，在 Windows 上导致 <code>ENOENT</code> 错误，在 POSIX 上导致 <code>ENOTDIR</code> 错误。</p></td></tr>
<tr><td>v16.0.0</td>
<td><p>不再允许在不存在的 <code>path</code> 上使用 <code>fsPromises.rmdir(path, { recursive: true })</code>，会导致 <code>ENOENT</code> 错误。</p></td></tr>
<tr><td>v16.0.0</td>
<td><p>选项 <code>recursive</code> 已弃用，使用它会触发弃用警告。</p></td></tr>
<tr><td>v14.14.0</td>
<td><p>不推荐使用 <code>recursive</code> 选项，请改用 <code>fsPromises.rm</code>。</p></td></tr>
<tr><td>v13.3.0, v12.16.0</td>
<td><p>选项 <code>maxBusyTries</code> 重命名为 <code>maxRetries</code>，默认值为 0。 选项 <code>emfileWait</code> 已删除，并且 <code>EMFILE</code> 错误使用与其他错误相同的重试逻辑。 现在支持 <code>retryDelay</code> 选项。 现在重试 <code>ENFILE</code> 错误。</p></td></tr>
<tr><td>v12.10.0</td>
<td><p>现在支持 <code>recursive</code>、<code>maxBusyTries</code> 和 <code>emfileWait</code> 选项。</p></td></tr>
<tr><td>v10.0.0</td>
<td><p><span>新增于: v10.0.0</span></p></td></tr>
</tbody></table>
</details>
</div>
<ul class="">
<li><code>path</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="buffer.html#class-buffer" rel="nofollow" class="type">&lt;Buffer&gt;</a> | <a href="url.html#the-whatwg-url-api" rel="nofollow" class="type">&lt;URL&gt;</a></li>
<li><code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" rel="nofollow" class="type">&lt;Object&gt;</a>
<ul>
<li><code>maxRetries</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a> 如果遇到 <code>EBUSY</code>、<code>EMFILE</code>、<code>ENFILE</code>、<code>ENOTEMPTY</code> 或 <code>EPERM</code> 错误，Node.js 将在每次尝试时以 <code>retryDelay</code> 毫秒的线性退避等待时间重试该操作。
此选项表示重试次数。
如果 <code>recursive</code> 选项不为 <code>true</code>，则忽略此选项。 <strong>默认值:</strong> <code>0</code>。</li>
<li><code>recursive</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" rel="nofollow" class="type">&lt;boolean&gt;</a> 如果为 <code>true</code>，则执行递归目录删除。
在递归模式下，操作将在失败时重试。 <strong>默认值:</strong> <code>false</code>。
<strong>已弃用。</strong></li>
<li><code>retryDelay</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a> 重试之间等待的时间（以毫秒为单位）。
如果 <code>recursive</code> 选项不为 <code>true</code>，则忽略此选项。
<strong>默认值:</strong> <code>100</code>。</li>
</ul>
</li>
<li>返回: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" rel="nofollow" class="type">&lt;Promise&gt;</a> 成功时将使用 <code>undefined</code> 履行。</li>
</ul>
<p>删除由 <code>path</code> 标识的目录。</p>
<p class="">在文件（而不是目录）上使用 <code>fsPromises.rmdir()</code> 会导致 promise 被拒绝，在 Windows 上使用 <code>ENOENT</code> 错误，在 POSIX 上使用 <code>ENOTDIR</code> 错误。</p>
<p class="">要获得类似于 <code>rm -rf</code> Unix 命令的行为，则使用具有选项 <code>{ recursive: true, force: true }</code> 的 <a href="#fspromisesrmpath-options"><code>fsPromises.rm()</code></a>。</p>
<h4><code>fsPromises.rm(path[, options])</code><span><a class="mark" href="#fspromisesrmpath-options" id="fspromisesrmpath-options">#</a></span><a aria-hidden="true" class="legacy" id="fs_fspromises_rm_path_options"></a></h4><p class="tip_wrap" data-show_trans="1" data-item_id="#fspromisesrmpath-options">
                <a href="fs/fspromises_rm_path_options.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>新增于: v14.14.0</span>
</div>
<ul class="">
<li><code>path</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="buffer.html#class-buffer" rel="nofollow" class="type">&lt;Buffer&gt;</a> | <a href="url.html#the-whatwg-url-api" rel="nofollow" class="type">&lt;URL&gt;</a></li>
<li><code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" rel="nofollow" class="type">&lt;Object&gt;</a>
<ul>
<li><code>force</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" rel="nofollow" class="type">&lt;boolean&gt;</a> 当为 <code>true</code> 时，如果 <code>path</code> 不存在，则异常将被忽略。 <strong>默认值:</strong> <code>false</code>。</li>
<li><code>maxRetries</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a> 如果遇到 <code>EBUSY</code>、<code>EMFILE</code>、<code>ENFILE</code>、<code>ENOTEMPTY</code> 或 <code>EPERM</code> 错误，Node.js 将在每次尝试时以 <code>retryDelay</code> 毫秒的线性退避等待时间重试该操作。
此选项表示重试次数。
如果 <code>recursive</code> 选项不为 <code>true</code>，则忽略此选项。 <strong>默认值:</strong> <code>0</code>。</li>
<li><code>recursive</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" rel="nofollow" class="type">&lt;boolean&gt;</a> 如果为 <code>true</code>，则执行递归目录删除。
在递归模式下，操作将在失败时重试。 <strong>默认值:</strong> <code>false</code>。</li>
<li><code>retryDelay</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a> 重试之间等待的时间（以毫秒为单位）。
如果 <code>recursive</code> 选项不为 <code>true</code>，则忽略此选项。
<strong>默认值:</strong> <code>100</code>。</li>
</ul>
</li>
<li>返回: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" rel="nofollow" class="type">&lt;Promise&gt;</a> 成功时将使用 <code>undefined</code> 履行。</li>
</ul>
<p>删除文件和目录（在标准 POSIX <code>rm</code> 实用工具上建模）。</p>
<h4><code>fsPromises.stat(path[, options])</code><span><a class="mark" href="#fspromisesstatpath-options" id="fspromisesstatpath-options">#</a></span><a aria-hidden="true" class="legacy" id="fs_fspromises_stat_path_options"></a></h4><p class="tip_wrap" data-show_trans="1" data-item_id="#fspromisesstatpath-options">
                <a href="fs/fspromises_stat_path_options.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<details class="changelog"><summary>版本历史</summary>
<table>
<tbody><tr><th>版本</th><th>变更</th></tr>
<tr><td>v10.5.0</td>
<td><p>接受额外的 <code>options</code> 对象，以指定返回的数字值是否应为长整数。</p></td></tr>
<tr><td>v10.0.0</td>
<td><p><span>新增于: v10.0.0</span></p></td></tr>
</tbody></table>
</details>
</div>
<ul class="">
<li><code>path</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="buffer.html#class-buffer" rel="nofollow" class="type">&lt;Buffer&gt;</a> | <a href="url.html#the-whatwg-url-api" rel="nofollow" class="type">&lt;URL&gt;</a></li>
<li><code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" rel="nofollow" class="type">&lt;Object&gt;</a>
<ul>
<li><code>bigint</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" rel="nofollow" class="type">&lt;boolean&gt;</a> 返回的 <a href="#class-fsstats" rel="nofollow" class="type">&lt;fs.Stats&gt;</a> 对象中的数值是否应为 <code>bigint</code>。 <strong>默认值:</strong> <code>false</code>。</li>
</ul>
</li>
<li>返回: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" rel="nofollow" class="type">&lt;Promise&gt;</a>  使用给定的 <code>path</code> 的 <a href="#class-fsstats" rel="nofollow" class="type">&lt;fs.Stats&gt;</a> 对象履行。</li>
</ul>
<h4><code>fsPromises.symlink(target, path[, type])</code><span><a class="mark" href="#fspromisessymlinktarget-path-type" id="fspromisessymlinktarget-path-type">#</a></span><a aria-hidden="true" class="legacy" id="fs_fspromises_symlink_target_path_type"></a></h4><p class="tip_wrap" data-show_trans="1" data-item_id="#fspromisessymlinktarget-path-type">
                <a href="fs/fspromises_symlink_target_path_type.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>新增于: v10.0.0</span>
</div>
<ul class="">
<li><code>target</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="buffer.html#class-buffer" rel="nofollow" class="type">&lt;Buffer&gt;</a> | <a href="url.html#the-whatwg-url-api" rel="nofollow" class="type">&lt;URL&gt;</a></li>
<li><code>path</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="buffer.html#class-buffer" rel="nofollow" class="type">&lt;Buffer&gt;</a> | <a href="url.html#the-whatwg-url-api" rel="nofollow" class="type">&lt;URL&gt;</a></li>
<li><code>type</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> <strong>默认值:</strong> <code>'file'</code></li>
<li>返回: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" rel="nofollow" class="type">&lt;Promise&gt;</a> 成功时将使用 <code>undefined</code> 履行。</li>
</ul>
<p>创建符号链接。</p>
<p class=""><code>type</code> 参数仅在 Windows 平台上使用，可以是 <code>'dir'</code>、<code>'file'</code> 或 <code>'junction'</code> 之一。
Windows 交接点要求目标路径是绝对路径。
使用 <code>'junction'</code> 时，<code>target</code> 参数将自动规范化为绝对路径。</p>
<h4><code>fsPromises.truncate(path[, len])</code><span><a class="mark" href="#fspromisestruncatepath-len" id="fspromisestruncatepath-len">#</a></span><a aria-hidden="true" class="legacy" id="fs_fspromises_truncate_path_len"></a></h4><p class="tip_wrap" data-show_trans="1" data-item_id="#fspromisestruncatepath-len">
                <a href="fs/fspromises_truncate_path_len.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>新增于: v10.0.0</span>
</div>
<ul class="">
<li><code>path</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="buffer.html#class-buffer" rel="nofollow" class="type">&lt;Buffer&gt;</a> | <a href="url.html#the-whatwg-url-api" rel="nofollow" class="type">&lt;URL&gt;</a></li>
<li><code>len</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a> <strong>默认值:</strong> <code>0</code></li>
<li>返回: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" rel="nofollow" class="type">&lt;Promise&gt;</a> 成功时将使用 <code>undefined</code> 履行。</li>
</ul>
<p>将 <code>path</code> 上的内容截断（缩短或延长长度）到 <code>len</code> 个字节。</p>
<h4><code>fsPromises.unlink(path)</code><span><a class="mark" href="#fspromisesunlinkpath" id="fspromisesunlinkpath">#</a></span><a aria-hidden="true" class="legacy" id="fs_fspromises_unlink_path"></a></h4><p class="tip_wrap" data-show_trans="1" data-item_id="#fspromisesunlinkpath">
                <a href="fs/fspromises_unlink_path.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>新增于: v10.0.0</span>
</div>
<ul class="">
<li><code>path</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="buffer.html#class-buffer" rel="nofollow" class="type">&lt;Buffer&gt;</a> | <a href="url.html#the-whatwg-url-api" rel="nofollow" class="type">&lt;URL&gt;</a></li>
<li>返回: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" rel="nofollow" class="type">&lt;Promise&gt;</a> 成功时将使用 <code>undefined</code> 履行。</li>
</ul>
<p>如果 <code>path</code> 指向符号链接，则删除该链接，但不影响链接所指向的文件或目录。
如果 <code>path</code> 指向的文件路径不是符号链接，则删除文件。
有关更多详细信息，请参阅 POSIX <a href="http://man7.org/linux/man-pages/man2/unlink.2.html" rel="nofollow"><code>unlink(2)</code></a> 文档。</p>
<h4><code>fsPromises.utimes(path, atime, mtime)</code><span><a class="mark" href="#fspromisesutimespath-atime-mtime" id="fspromisesutimespath-atime-mtime">#</a></span><a aria-hidden="true" class="legacy" id="fs_fspromises_utimes_path_atime_mtime"></a></h4><p class="tip_wrap" data-show_trans="1" data-item_id="#fspromisesutimespath-atime-mtime">
                <a href="fs/fspromises_utimes_path_atime_mtime.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>新增于: v10.0.0</span>
</div>
<ul class="">
<li><code>path</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="buffer.html#class-buffer" rel="nofollow" class="type">&lt;Buffer&gt;</a> | <a href="url.html#the-whatwg-url-api" rel="nofollow" class="type">&lt;URL&gt;</a></li>
<li><code>atime</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;number&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date" rel="nofollow" class="type">&lt;Date&gt;</a></li>
<li><code>mtime</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;number&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date" rel="nofollow" class="type">&lt;Date&gt;</a></li>
<li>返回: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" rel="nofollow" class="type">&lt;Promise&gt;</a> 成功时将使用 <code>undefined</code> 履行。</li>
</ul>
<p>更改 <code>path</code> 引用的对象的文件系统时间戳。</p>
<p class=""><code>atime</code> 和 <code>mtime</code> 参数遵循以下规则：</p>
<ul class="">
<li>值可以是代表 Unix 纪元时间的数字、<code>Date</code>、或数字字符串（例如 <code>'123456789.0'</code>）。</li>
<li>如果该值不能转换为数字，或者是 <code>NaN</code>，<code>Infinity</code> 或 <code>-Infinity</code>，则将抛出 <code>Error</code>。</li>
</ul>
<h4><code>fsPromises.watch(filename[, options])</code><span><a class="mark" href="#fspromiseswatchfilename-options" id="fspromiseswatchfilename-options">#</a></span><a aria-hidden="true" class="legacy" id="fs_fspromises_watch_filename_options"></a></h4><p class="tip_wrap" data-show_trans="1" data-item_id="#fspromiseswatchfilename-options">
                <a href="fs/fspromises_watch_filename_options.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>新增于: v15.9.0</span>
</div>
<ul class="">
<li><code>filename</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="buffer.html#class-buffer" rel="nofollow" class="type">&lt;Buffer&gt;</a> | <a href="url.html#the-whatwg-url-api" rel="nofollow" class="type">&lt;URL&gt;</a></li>
<li><code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" rel="nofollow" class="type">&lt;Object&gt;</a>
<ul>
<li><code>persistent</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" rel="nofollow" class="type">&lt;boolean&gt;</a> 指示只要正在监视文件，进程是否应继续运行。 <strong>默认值:</strong> <code>true</code>。</li>
<li><code>recursive</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" rel="nofollow" class="type">&lt;boolean&gt;</a> 指示是应监视所有子目录，还是仅监视当前目录。
这在指定目录时适用，并且仅在受支持的平台上有效（请参见<a href="#caveats">注意事项</a>）。 <strong>默认值:</strong> <code>false</code>。</li>
<li><code>encoding</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> 指定用于传给监听器的文件名的字符编码。 <strong>默认值:</strong> <code>'utf8'</code>。</li>
<li><code>signal</code> <a href="globals.html#class-abortsignal" rel="nofollow" class="type">&lt;AbortSignal&gt;</a> 用于指示监视器何时应停止的 <a href="globals.html#class-abortsignal" rel="nofollow" class="type">&lt;AbortSignal&gt;</a>。</li>
</ul>
</li>
<li>返回: <a href="https://tc39.github.io/ecma262/#sec-asynciterator-interface" rel="nofollow" class="type">&lt;AsyncIterator&gt;</a> 具有以下属性的对象：
<ul>
<li><code>eventType</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> 变更类型</li>
<li><code>filename</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="buffer.html#class-buffer" rel="nofollow" class="type">&lt;Buffer&gt;</a> 变更的文件的名称。</li>
</ul>
</li>
</ul>
<p>返回异步迭代器，其监视 <code>filename</code> 上的更改，其中 <code>filename</code> 是文件或目录。</p>
<pre class=""><code class="language-js"><span class="hljs-keyword">const</span> { watch } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'fs/promises'</span>);

<span class="hljs-keyword">const</span> ac = <span class="hljs-keyword">new</span> <span class="hljs-title class_">AbortController</span>();
<span class="hljs-keyword">const</span> { signal } = ac;
<span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> ac.<span class="hljs-title function_">abort</span>(), <span class="hljs-number">10000</span>);

(<span class="hljs-keyword">async</span> () =&gt; {
  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">const</span> watcher = <span class="hljs-title function_">watch</span>(__filename, { signal });
    <span class="hljs-keyword">for</span> <span class="hljs-keyword">await</span> (<span class="hljs-keyword">const</span> event <span class="hljs-keyword">of</span> watcher)
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(event);
  } <span class="hljs-keyword">catch</span> (err) {
    <span class="hljs-keyword">if</span> (err.<span class="hljs-property">name</span> === <span class="hljs-string">'AbortError'</span>)
      <span class="hljs-keyword">return</span>;
    <span class="hljs-keyword">throw</span> err;
  }
})();</code></pre>
<p class="">在大多数平台上，只要目录中文件名出现或消失，就会触发 <code>'rename'</code>。</p>
<p class=""><code>fs.watch()</code> 的所有<a href="#caveats">注意事项</a>也适用于 <code>fsPromises.watch()</code>。</p>
<h4><code>fsPromises.writeFile(file, data[, options])</code><span><a class="mark" href="#fspromiseswritefilefile-data-options" id="fspromiseswritefilefile-data-options">#</a></span><a aria-hidden="true" class="legacy" id="fs_fspromises_writefile_file_data_options"></a></h4><p class="tip_wrap" data-show_trans="1" data-item_id="#fspromiseswritefilefile-data-options">
                <a href="fs/fspromises_writefile_file_data_options.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<details class="changelog"><summary>版本历史</summary>
<table>
<tbody><tr><th>版本</th><th>变更</th></tr>
<tr><td>v15.14.0</td>
<td><p>参数 <code>data</code> 支持 <code>AsyncIterable</code>、<code>Iterable</code> 和 <code>Stream</code>。</p></td></tr>
<tr><td>v15.2.0, v14.17.0</td>
<td><p>选项参数可以包含中止信号，以中止正在进行的写入文件请求。</p></td></tr>
<tr><td>v14.12.0</td>
<td><p>参数 <code>data</code> 将使用显式 <code>toString</code> 函数对对象进行字符串化。</p></td></tr>
<tr><td>v14.0.0</td>
<td><p>参数 <code>data</code> 不会再将不支持的输入强制转换为字符串。</p></td></tr>
<tr><td>v10.0.0</td>
<td><p><span>新增于: v10.0.0</span></p></td></tr>
</tbody></table>
</details>
</div>
<ul class="">
<li><code>file</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="buffer.html#class-buffer" rel="nofollow" class="type">&lt;Buffer&gt;</a> | <a href="url.html#the-whatwg-url-api" rel="nofollow" class="type">&lt;URL&gt;</a> | <a href="#class-filehandle" rel="nofollow" class="type">&lt;FileHandle&gt;</a> 文件名或 <code>FileHandle</code></li>
<li><code>data</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="buffer.html#class-buffer" rel="nofollow" class="type">&lt;Buffer&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/TypedArray" rel="nofollow" class="type">&lt;TypedArray&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/DataView" rel="nofollow" class="type">&lt;DataView&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" rel="nofollow" class="type">&lt;Object&gt;</a> | <a href="https://tc39.github.io/ecma262/#sec-asynciterable-interface" rel="nofollow" class="type">&lt;AsyncIterable&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Iteration_protocols#The_iterable_protocol" rel="nofollow" class="type">&lt;Iterable&gt;</a> | <a href="stream.html#stream" rel="nofollow" class="type">&lt;Stream&gt;</a></li>
<li><code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" rel="nofollow" class="type">&lt;Object&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a>
<ul>
<li><code>encoding</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Null_type" rel="nofollow" class="type">&lt;null&gt;</a> <strong>默认值:</strong> <code>'utf8'</code></li>
<li><code>mode</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a> <strong>默认值:</strong> <code>0o666</code></li>
<li><code>flag</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> 请参阅<a href="#file-system-flags">对文件系统 <code>flags</code> 的支持</a>。 <strong>默认值:</strong> <code>'w'</code>。</li>
<li><code>signal</code> <a href="globals.html#class-abortsignal" rel="nofollow" class="type">&lt;AbortSignal&gt;</a> 允许中止正在进行的写入文件</li>
</ul>
</li>
<li>返回: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" rel="nofollow" class="type">&lt;Promise&gt;</a> 成功时将使用 <code>undefined</code> 履行。</li>
</ul>
<p>异步地将数据写入文件，如果文件已经存在，则替换该文件。
<code>data</code> 可以是字符串、<a href="buffer.html#class-buffer" rel="nofollow" class="type">&lt;Buffer&gt;</a>、或具有自有的（不是继承的）<code>toString</code> 函数属性的对象。</p>
<p class="">如果 <code>data</code> 是缓冲区，则忽略 <code>encoding</code> 选项。</p>
<p class="">如果 <code>options</code> 是字符串，则它指定编码。</p>
<p class=""><code>mode</code> 选项仅影响新创建的文件。
有关详细信息，请参阅 <a href="#fsopenpath-flags-mode-callback"><code>fs.open()</code></a>。</p>
<p class="">任何指定的 <a href="#class-filehandle" rel="nofollow" class="type">&lt;FileHandle&gt;</a> 都必须支持写入。</p>
<p class="">在同一个文件上多次使用 <code>fsPromises.writeFile()</code> 而不等待 promise 被解决是不安全的。</p>
<p class="">与 <code>fsPromises.readFile</code> 类似，<code>fsPromises.writeFile</code> 是一个便捷的方法，其在内部执行多次 <code>write</code> 调用以写入传给它的缓冲区。
对于性能敏感的代码，则考虑使用 <a href="#fscreatewritestreampath-options"><code>fs.createWriteStream()</code></a>。</p>
<p class="">可以使用 <a href="globals.html#class-abortsignal" rel="nofollow" class="type">&lt;AbortSignal&gt;</a> 取消 <code>fsPromises.writeFile()</code>。
取消是"尽力而为"的，并且可能仍会写入一些数据。</p>
<pre class=""><code class="language-js mjs"><span class="hljs-keyword">import</span> { writeFile } <span class="hljs-keyword">from</span> <span class="hljs-string">'fs/promises'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Buffer</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'buffer'</span>;

<span class="hljs-keyword">try</span> {
  <span class="hljs-keyword">const</span> controller = <span class="hljs-keyword">new</span> <span class="hljs-title class_">AbortController</span>();
  <span class="hljs-keyword">const</span> { signal } = controller;
  <span class="hljs-keyword">const</span> data = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>(<span class="hljs-title class_">Buffer</span>.<span class="hljs-title function_">from</span>(<span class="hljs-string">'Hello Node.js'</span>));
  <span class="hljs-keyword">const</span> promise = <span class="hljs-title function_">writeFile</span>(<span class="hljs-string">'message.txt'</span>, data, { signal });

  <span class="hljs-comment">// 在 promise 达成之前中止请求。</span>
  controller.<span class="hljs-title function_">abort</span>();

  <span class="hljs-keyword">await</span> promise;
} <span class="hljs-keyword">catch</span> (err) {
  <span class="hljs-comment">// 当请求中止时 - err 是 AbortError</span>
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(err);
}</code></pre>
<p class="">中止正在进行的请求不会中止单个操作系统请求，而是中止内部缓冲的 <code>fs.writeFile</code> 执行。</p>
</section><section><h3>回调的 API<span><a class="mark" href="#callback-api" id="callback-api">#</a></span><a aria-hidden="true" class="legacy" id="fs_callback_api"></a></h3><p class="tip_wrap" data-show_trans="1" data-item_id="#callback-api">
                <a href="fs/callback_api.html" class="tip_trans">中英对照</a>
                </p>
<p>回调的 API 异步地执行所有操作，不会阻塞事件循环，然后在完成或错误时调用回调函数。</p>
<p class="">回调的 API 使用底层 Node.js 线程池在事件循环线程之外执行文件系统操作。
这些操作不是同步的也不是线程安全的。
对同一文件执行多个并发修改时必须小心，否则可能会损坏数据。</p>
<h4><code>fs.access(path[, mode], callback)</code><span><a class="mark" href="#fsaccesspath-mode-callback" id="fsaccesspath-mode-callback">#</a></span><a aria-hidden="true" class="legacy" id="fs_fs_access_path_mode_callback"></a></h4><p class="tip_wrap" data-show_trans="1" data-item_id="#fsaccesspath-mode-callback">
                <a href="fs/fs_access_path_mode_callback.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<details class="changelog"><summary>版本历史</summary>
<table>
<tbody><tr><th>版本</th><th>变更</th></tr>
<tr><td>v7.6.0</td>
<td><p>参数 <code>path</code> 可以是使用 <code>file:</code> 协议的 WHATWG <code>URL</code> 对象。</p></td></tr>
<tr><td>v6.3.0</td>
<td><p>像 <code>fs.R_OK</code> 等直接存在于 <code>fs</code> 上的常量被移入 <code>fs.constants</code> 作为软弃用。 因此，对于 Node.js <code>&lt; v6.3.0</code> 使用 <code>fs</code> 来访问这些常量，或者执行类似 <code>(fs.constants || fs).R_OK</code> 的操作以适用于所有版本。</p></td></tr>
<tr><td>v0.11.15</td>
<td><p><span>新增于: v0.11.15</span></p></td></tr>
</tbody></table>
</details>
</div>
<ul class="">
<li><code>path</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="buffer.html#class-buffer" rel="nofollow" class="type">&lt;Buffer&gt;</a> | <a href="url.html#the-whatwg-url-api" rel="nofollow" class="type">&lt;URL&gt;</a></li>
<li><code>mode</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a> <strong>默认值:</strong> <code>fs.constants.F_OK</code></li>
<li><code>callback</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" rel="nofollow" class="type">&lt;Function&gt;</a>
<ul>
<li><code>err</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error" rel="nofollow" class="type">&lt;Error&gt;</a></li>
</ul>
</li>
</ul>
<p>测试用户对 <code>path</code> 指定的文件或目录的权限。
<code>mode</code> 参数是可选的整数，指定要执行的可访问性检查。
<code>mode</code> 应该是值 <code>fs.constants.F_OK</code> 或由 <code>fs.constants.R_OK</code>、<code>fs.constants.W_OK</code> 和 <code>fs.constants.X_OK</code> 中的任何一个（例如 <code>fs.constants.W_OK | fs.constants.R_OK</code>）的按位或组成的掩码。
查看<a href="#file-access-constants">文件访问的常量</a>以获取可能的 <code>mode</code> 值。</p>
<p class="">最后一个参数 <code>callback</code> 是回调函数，其使用一个可能的错误参数调用。
如果任何可访问性检查失败，则错误参数将是 <code>Error</code> 对象。
以下示例检查 <code>package.json</code> 是否存在，以及是否可读或可写。</p>
<pre class=""><code class="language-js mjs"><span class="hljs-keyword">import</span> { access, constants } <span class="hljs-keyword">from</span> <span class="hljs-string">'fs'</span>;

<span class="hljs-keyword">const</span> file = <span class="hljs-string">'package.json'</span>;

<span class="hljs-comment">// 检查当前目录中是否存在该文件。</span>
<span class="hljs-title function_">access</span>(file, constants.<span class="hljs-property">F_OK</span>, <span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`<span class="hljs-subst">${file}</span> <span class="hljs-subst">${err ? <span class="hljs-string">'does not exist'</span> : <span class="hljs-string">'exists'</span>}</span>`</span>);
});

<span class="hljs-comment">// 检查文件是否可读。</span>
<span class="hljs-title function_">access</span>(file, constants.<span class="hljs-property">R_OK</span>, <span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`<span class="hljs-subst">${file}</span> <span class="hljs-subst">${err ? <span class="hljs-string">'is not readable'</span> : <span class="hljs-string">'is readable'</span>}</span>`</span>);
});

<span class="hljs-comment">// 检查文件是否可写。</span>
<span class="hljs-title function_">access</span>(file, constants.<span class="hljs-property">W_OK</span>, <span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`<span class="hljs-subst">${file}</span> <span class="hljs-subst">${err ? <span class="hljs-string">'is not writable'</span> : <span class="hljs-string">'is writable'</span>}</span>`</span>);
});

<span class="hljs-comment">// 检查文件是否可读可写。</span>
<span class="hljs-title function_">access</span>(file, constants.<span class="hljs-property">R_OK</span> | constants.<span class="hljs-property">W_OK</span>, <span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`<span class="hljs-subst">${file}</span> <span class="hljs-subst">${err ? <span class="hljs-string">'is not'</span> : <span class="hljs-string">'is'</span>}</span> readable and writable`</span>);
});</code></pre>
<p class="">在调用 <code>fs.open()</code>、<code>fs.readFile()</code> 或 <code>fs.writeFile()</code> 之前，不要使用 <code>fs.access()</code> 检查文件的可访问性。
这样做会引入竞争条件，因为其他进程可能会在两次调用之间更改文件的状态。
而是，用户代码应直接打开/读取/写入文件，并处理无法访问文件时引发的错误。</p>
<p class=""><strong>写入（不推荐）</strong></p>
<pre class=""><code class="language-js mjs"><span class="hljs-keyword">import</span> { access, open, close } <span class="hljs-keyword">from</span> <span class="hljs-string">'fs'</span>;

<span class="hljs-title function_">access</span>(<span class="hljs-string">'myfile'</span>, <span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {
  <span class="hljs-keyword">if</span> (!err) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'myfile already exists'</span>);
    <span class="hljs-keyword">return</span>;
  }

  <span class="hljs-title function_">open</span>(<span class="hljs-string">'myfile'</span>, <span class="hljs-string">'wx'</span>, <span class="hljs-function">(<span class="hljs-params">err, fd</span>) =&gt;</span> {
    <span class="hljs-keyword">if</span> (err) <span class="hljs-keyword">throw</span> err;

    <span class="hljs-keyword">try</span> {
      <span class="hljs-title function_">writeMyData</span>(fd);
    } <span class="hljs-keyword">finally</span> {
      <span class="hljs-title function_">close</span>(fd, <span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {
        <span class="hljs-keyword">if</span> (err) <span class="hljs-keyword">throw</span> err;
      });
    }
  });
});</code></pre>
<p class=""><strong>写入（推荐）</strong></p>
<pre class=""><code class="language-js mjs"><span class="hljs-keyword">import</span> { open, close } <span class="hljs-keyword">from</span> <span class="hljs-string">'fs'</span>;

<span class="hljs-title function_">open</span>(<span class="hljs-string">'myfile'</span>, <span class="hljs-string">'wx'</span>, <span class="hljs-function">(<span class="hljs-params">err, fd</span>) =&gt;</span> {
  <span class="hljs-keyword">if</span> (err) {
    <span class="hljs-keyword">if</span> (err.<span class="hljs-property">code</span> === <span class="hljs-string">'EEXIST'</span>) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'myfile already exists'</span>);
      <span class="hljs-keyword">return</span>;
    }

    <span class="hljs-keyword">throw</span> err;
  }

  <span class="hljs-keyword">try</span> {
    <span class="hljs-title function_">writeMyData</span>(fd);
  } <span class="hljs-keyword">finally</span> {
    <span class="hljs-title function_">close</span>(fd, <span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {
      <span class="hljs-keyword">if</span> (err) <span class="hljs-keyword">throw</span> err;
    });
  }
});</code></pre>
<p class=""><strong>读取（不推荐）</strong></p>
<pre class=""><code class="language-js mjs"><span class="hljs-keyword">import</span> { access, open, close } <span class="hljs-keyword">from</span> <span class="hljs-string">'fs'</span>;
<span class="hljs-title function_">access</span>(<span class="hljs-string">'myfile'</span>, <span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {
  <span class="hljs-keyword">if</span> (err) {
    <span class="hljs-keyword">if</span> (err.<span class="hljs-property">code</span> === <span class="hljs-string">'ENOENT'</span>) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'myfile does not exist'</span>);
      <span class="hljs-keyword">return</span>;
    }

    <span class="hljs-keyword">throw</span> err;
  }

  <span class="hljs-title function_">open</span>(<span class="hljs-string">'myfile'</span>, <span class="hljs-string">'r'</span>, <span class="hljs-function">(<span class="hljs-params">err, fd</span>) =&gt;</span> {
    <span class="hljs-keyword">if</span> (err) <span class="hljs-keyword">throw</span> err;

    <span class="hljs-keyword">try</span> {
      <span class="hljs-title function_">readMyData</span>(fd);
    } <span class="hljs-keyword">finally</span> {
      <span class="hljs-title function_">close</span>(fd, <span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {
        <span class="hljs-keyword">if</span> (err) <span class="hljs-keyword">throw</span> err;
      });
    }
  });
});</code></pre>
<p class=""><strong>读取（推荐）</strong></p>
<pre class=""><code class="language-js mjs"><span class="hljs-keyword">import</span> { open, close } <span class="hljs-keyword">from</span> <span class="hljs-string">'fs'</span>;

<span class="hljs-title function_">open</span>(<span class="hljs-string">'myfile'</span>, <span class="hljs-string">'r'</span>, <span class="hljs-function">(<span class="hljs-params">err, fd</span>) =&gt;</span> {
  <span class="hljs-keyword">if</span> (err) {
    <span class="hljs-keyword">if</span> (err.<span class="hljs-property">code</span> === <span class="hljs-string">'ENOENT'</span>) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'myfile does not exist'</span>);
      <span class="hljs-keyword">return</span>;
    }

    <span class="hljs-keyword">throw</span> err;
  }

  <span class="hljs-keyword">try</span> {
    <span class="hljs-title function_">readMyData</span>(fd);
  } <span class="hljs-keyword">finally</span> {
    <span class="hljs-title function_">close</span>(fd, <span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {
      <span class="hljs-keyword">if</span> (err) <span class="hljs-keyword">throw</span> err;
    });
  }
});</code></pre>
<p class="">上面的“不推荐”示例检查可访问性，然后使用该文件；“推荐”示例更好，因为它们直接使用文件并处理错误（如果有）。</p>
<p class="">通常，仅当文件不会被直接使用时才检查文件的可访问性，例如当它的可访问性是来自另一个进程的信号时。</p>
<p class="">在 Windows 上，目录上的访问控制策略 (ACL) 可能会限制对文件或目录的访问。
但是，<code>fs.access()</code> 函数不检查 ACL，因此即使 ACL 限制用户读取或写入路径，也可能报告路径可访问。</p>
<h4><code>fs.appendFile(path, data[, options], callback)</code><span><a class="mark" href="#fsappendfilepath-data-options-callback" id="fsappendfilepath-data-options-callback">#</a></span><a aria-hidden="true" class="legacy" id="fs_fs_appendfile_path_data_options_callback"></a></h4><p class="tip_wrap" data-show_trans="1" data-item_id="#fsappendfilepath-data-options-callback">
                <a href="fs/fs_appendfile_path_data_options_callback.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<details class="changelog"><summary>版本历史</summary>
<table>
<tbody><tr><th>版本</th><th>变更</th></tr>
<tr><td>v10.0.0</td>
<td><p>参数 <code>callback</code> 不再是可选的。 不传入它会在运行时抛出 <code>TypeError</code>。</p></td></tr>
<tr><td>v7.0.0</td>
<td><p>参数 <code>callback</code> 不再是可选的。 不传入它将触发 ID 为 DEP0013 的弃用警告。</p></td></tr>
<tr><td>v7.0.0</td>
<td><p>传入的 <code>options</code> 对象永远不会被修改。</p></td></tr>
<tr><td>v5.0.0</td>
<td><p>参数 <code>file</code> 现在可以是文件描述符。</p></td></tr>
<tr><td>v0.6.7</td>
<td><p><span>新增于: v0.6.7</span></p></td></tr>
</tbody></table>
</details>
</div>
<ul class="">
<li><code>path</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="buffer.html#class-buffer" rel="nofollow" class="type">&lt;Buffer&gt;</a> | <a href="url.html#the-whatwg-url-api" rel="nofollow" class="type">&lt;URL&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;number&gt;</a> 文件名或文件描述符</li>
<li><code>data</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="buffer.html#class-buffer" rel="nofollow" class="type">&lt;Buffer&gt;</a></li>
<li><code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" rel="nofollow" class="type">&lt;Object&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a>
<ul>
<li><code>encoding</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Null_type" rel="nofollow" class="type">&lt;null&gt;</a> <strong>默认值:</strong> <code>'utf8'</code></li>
<li><code>mode</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a> <strong>默认值:</strong> <code>0o666</code></li>
<li><code>flag</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> 请参阅<a href="#file-system-flags">对文件系统 <code>flags</code> 的支持</a>。 <strong>默认值:</strong> <code>'a'</code>。</li>
</ul>
</li>
<li><code>callback</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" rel="nofollow" class="type">&lt;Function&gt;</a>
<ul>
<li><code>err</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error" rel="nofollow" class="type">&lt;Error&gt;</a></li>
</ul>
</li>
</ul>
<p>异步地将数据追加到文件，如果该文件尚不存在，则创建该文件。
<code>data</code> 可以是字符串或 <a href="buffer.html#class-buffer" rel="nofollow" class="type">&lt;Buffer&gt;</a>。</p>
<p class=""><code>mode</code> 选项仅影响新创建的文件。
有关详细信息，请参阅 <a href="#fsopenpath-flags-mode-callback"><code>fs.open()</code></a>。</p>
<pre class=""><code class="language-js mjs"><span class="hljs-keyword">import</span> { appendFile } <span class="hljs-keyword">from</span> <span class="hljs-string">'fs'</span>;

<span class="hljs-title function_">appendFile</span>(<span class="hljs-string">'message.txt'</span>, <span class="hljs-string">'data to append'</span>, <span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {
  <span class="hljs-keyword">if</span> (err) <span class="hljs-keyword">throw</span> err;
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'The "data to append" was appended to file!'</span>);
});</code></pre>
<p class="">如果 <code>options</code> 是字符串，则它指定编码：</p>
<pre class=""><code class="language-js mjs"><span class="hljs-keyword">import</span> { appendFile } <span class="hljs-keyword">from</span> <span class="hljs-string">'fs'</span>;

<span class="hljs-title function_">appendFile</span>(<span class="hljs-string">'message.txt'</span>, <span class="hljs-string">'data to append'</span>, <span class="hljs-string">'utf8'</span>, callback);</code></pre>
<p class="">可以将 <code>path</code> 指定为已打开用于追加（使用 <code>fs.open()</code> 或 <code>fs.openSync()</code>）的数字文件描述符。
文件描述符不会自动关闭。</p>
<pre class=""><code class="language-js mjs"><span class="hljs-keyword">import</span> { open, close, appendFile } <span class="hljs-keyword">from</span> <span class="hljs-string">'fs'</span>;

<span class="hljs-keyword">function</span> <span class="hljs-title function_">closeFd</span>(<span class="hljs-params">fd</span>) {
  <span class="hljs-title function_">close</span>(fd, <span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {
    <span class="hljs-keyword">if</span> (err) <span class="hljs-keyword">throw</span> err;
  });
}

<span class="hljs-title function_">open</span>(<span class="hljs-string">'message.txt'</span>, <span class="hljs-string">'a'</span>, <span class="hljs-function">(<span class="hljs-params">err, fd</span>) =&gt;</span> {
  <span class="hljs-keyword">if</span> (err) <span class="hljs-keyword">throw</span> err;

  <span class="hljs-keyword">try</span> {
    <span class="hljs-title function_">appendFile</span>(fd, <span class="hljs-string">'data to append'</span>, <span class="hljs-string">'utf8'</span>, <span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {
      <span class="hljs-title function_">closeFd</span>(fd);
      <span class="hljs-keyword">if</span> (err) <span class="hljs-keyword">throw</span> err;
    });
  } <span class="hljs-keyword">catch</span> (err) {
    <span class="hljs-title function_">closeFd</span>(fd);
    <span class="hljs-keyword">throw</span> err;
  }
});</code></pre>
<h4><code>fs.chmod(path, mode, callback)</code><span><a class="mark" href="#fschmodpath-mode-callback" id="fschmodpath-mode-callback">#</a></span><a aria-hidden="true" class="legacy" id="fs_fs_chmod_path_mode_callback"></a></h4><p class="tip_wrap" data-show_trans="1" data-item_id="#fschmodpath-mode-callback">
                <a href="fs/fs_chmod_path_mode_callback.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<details class="changelog"><summary>版本历史</summary>
<table>
<tbody><tr><th>版本</th><th>变更</th></tr>
<tr><td>v10.0.0</td>
<td><p>参数 <code>callback</code> 不再是可选的。 不传入它会在运行时抛出 <code>TypeError</code>。</p></td></tr>
<tr><td>v7.6.0</td>
<td><p>参数 <code>path</code> 可以是使用 <code>file:</code> 协议的 WHATWG <code>URL</code> 对象。</p></td></tr>
<tr><td>v7.0.0</td>
<td><p>参数 <code>callback</code> 不再是可选的。 不传入它将触发 ID 为 DEP0013 的弃用警告。</p></td></tr>
<tr><td>v0.1.30</td>
<td><p><span>新增于: v0.1.30</span></p></td></tr>
</tbody></table>
</details>
</div>
<ul class="">
<li><code>path</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="buffer.html#class-buffer" rel="nofollow" class="type">&lt;Buffer&gt;</a> | <a href="url.html#the-whatwg-url-api" rel="nofollow" class="type">&lt;URL&gt;</a></li>
<li><code>mode</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a></li>
<li><code>callback</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" rel="nofollow" class="type">&lt;Function&gt;</a>
<ul>
<li><code>err</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error" rel="nofollow" class="type">&lt;Error&gt;</a></li>
</ul>
</li>
</ul>
<p>异步地更改文件的权限。
除了可能的异常之外，没有为完成回调提供任何参数。</p>
<p class="">有关更多详细信息，请参阅 POSIX <a href="http://man7.org/linux/man-pages/man2/chmod.2.html" rel="nofollow"><code>chmod(2)</code></a> 文档。</p>
<pre class=""><code class="language-js mjs"><span class="hljs-keyword">import</span> { chmod } <span class="hljs-keyword">from</span> <span class="hljs-string">'fs'</span>;

<span class="hljs-title function_">chmod</span>(<span class="hljs-string">'my_file.txt'</span>, <span class="hljs-number">0o775</span>, <span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {
  <span class="hljs-keyword">if</span> (err) <span class="hljs-keyword">throw</span> err;
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'The permissions for file "my_file.txt" have been changed!'</span>);
});</code></pre>
<h5>文件的模式<span><a class="mark" href="#file-modes" id="file-modes">#</a></span><a aria-hidden="true" class="legacy" id="fs_file_modes"></a></h5><p class="tip_wrap" data-show_trans="1" data-item_id="#file-modes">
                <a href="fs/file_modes.html" class="tip_trans">中英对照</a>
                </p>
<p><code>fs.chmod()</code> 和 <code>fs.chmodSync()</code> 方法中使用的 <code>mode</code> 参数是使用以下常量的逻辑或创建的数字位掩码：</p>























































<table class=""><thead><tr><th>常量</th><th>八进制</th><th>描述</th></tr></thead><tbody><tr><td><code>fs.constants.S_IRUSR</code></td><td><code>0o400</code></td><td>所有者可读取</td></tr><tr><td><code>fs.constants.S_IWUSR</code></td><td><code>0o200</code></td><td>所有者可写入</td></tr><tr><td><code>fs.constants.S_IXUSR</code></td><td><code>0o100</code></td><td>所有者可执行/搜索</td></tr><tr><td><code>fs.constants.S_IRGRP</code></td><td><code>0o40</code></td><td>群组可读取</td></tr><tr><td><code>fs.constants.S_IWGRP</code></td><td><code>0o20</code></td><td>群组可写入</td></tr><tr><td><code>fs.constants.S_IXGRP</code></td><td><code>0o10</code></td><td>群组可执行/搜索</td></tr><tr><td><code>fs.constants.S_IROTH</code></td><td><code>0o4</code></td><td>其他人可读取</td></tr><tr><td><code>fs.constants.S_IWOTH</code></td><td><code>0o2</code></td><td>其他人可写入</td></tr><tr><td><code>fs.constants.S_IXOTH</code></td><td><code>0o1</code></td><td>其他人可执行/搜索</td></tr></tbody></table>
<p class="">构建 <code>mode</code> 的一种更简单的方法是使用三个八进制数字的序列（例如 <code>765</code>）。
最左边的数字（示例中的 <code>7</code>）指定文件所有者的权限。
中间的数字（示例中的 <code>6</code>）指定群组的权限。
最右边的数字（示例中的 <code>5</code>）指定其他人的权限。</p>









































<table class=""><thead><tr><th>数值</th><th>描述</th></tr></thead><tbody><tr><td><code>7</code></td><td>可读、可写和可执行</td></tr><tr><td><code>6</code></td><td>可读和可写</td></tr><tr><td><code>5</code></td><td>可读和可执行</td></tr><tr><td><code>4</code></td><td>只读</td></tr><tr><td><code>3</code></td><td>可写和可执行</td></tr><tr><td><code>2</code></td><td>只写</td></tr><tr><td><code>1</code></td><td>只可执行</td></tr><tr><td><code>0</code></td><td>无权限</td></tr></tbody></table>
<p class="">例如，八进制值 <code>0o765</code> 表示：</p>
<ul class="">
<li>所有者可以读取、写入和执行文件。</li>
<li>群组可以读取和写入文件。</li>
<li>其他人可以读取和执行文件。</li>
</ul>
<p class="">在需要文件模式的地方使用原始数字时，任何大于 <code>0o777</code> 的值都可能导致特定于平台的行为不支持一致工作。
因此，像 <code>S_ISVTX</code>、<code>S_ISGID</code> 或 <code>S_ISUID</code> 这样的常量不会在 <code>fs.constants</code> 中暴露。</p>
<p class="">注意事项：在 Windows 上只能更改写入权限，并没有实现群组、所有者或其他人权限之间的区别。</p>
<h4><code>fs.chown(path, uid, gid, callback)</code><span><a class="mark" href="#fschownpath-uid-gid-callback" id="fschownpath-uid-gid-callback">#</a></span><a aria-hidden="true" class="legacy" id="fs_fs_chown_path_uid_gid_callback"></a></h4><p class="tip_wrap" data-show_trans="1" data-item_id="#fschownpath-uid-gid-callback">
                <a href="fs/fs_chown_path_uid_gid_callback.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<details class="changelog"><summary>版本历史</summary>
<table>
<tbody><tr><th>版本</th><th>变更</th></tr>
<tr><td>v10.0.0</td>
<td><p>参数 <code>callback</code> 不再是可选的。 不传入它会在运行时抛出 <code>TypeError</code>。</p></td></tr>
<tr><td>v7.6.0</td>
<td><p>参数 <code>path</code> 可以是使用 <code>file:</code> 协议的 WHATWG <code>URL</code> 对象。</p></td></tr>
<tr><td>v7.0.0</td>
<td><p>参数 <code>callback</code> 不再是可选的。 不传入它将触发 ID 为 DEP0013 的弃用警告。</p></td></tr>
<tr><td>v0.1.97</td>
<td><p><span>新增于: v0.1.97</span></p></td></tr>
</tbody></table>
</details>
</div>
<ul class="">
<li><code>path</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="buffer.html#class-buffer" rel="nofollow" class="type">&lt;Buffer&gt;</a> | <a href="url.html#the-whatwg-url-api" rel="nofollow" class="type">&lt;URL&gt;</a></li>
<li><code>uid</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a></li>
<li><code>gid</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a></li>
<li><code>callback</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" rel="nofollow" class="type">&lt;Function&gt;</a>
<ul>
<li><code>err</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error" rel="nofollow" class="type">&lt;Error&gt;</a></li>
</ul>
</li>
</ul>
<p>异步地更改文件的所有者和群组。
除了可能的异常之外，没有为完成回调提供任何参数。</p>
<p class="">有关更多详细信息，请参阅 POSIX <a href="http://man7.org/linux/man-pages/man2/chown.2.html" rel="nofollow"><code>chown(2)</code></a> 文档。</p>
<h4><code>fs.close(fd[, callback])</code><span><a class="mark" href="#fsclosefd-callback" id="fsclosefd-callback">#</a></span><a aria-hidden="true" class="legacy" id="fs_fs_close_fd_callback"></a></h4><p class="tip_wrap" data-show_trans="1" data-item_id="#fsclosefd-callback">
                <a href="fs/fs_close_fd_callback.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<details class="changelog"><summary>版本历史</summary>
<table>
<tbody><tr><th>版本</th><th>变更</th></tr>
<tr><td>v15.9.0</td>
<td><p>如果未提供，现在使用默认回调。</p></td></tr>
<tr><td>v10.0.0</td>
<td><p>参数 <code>callback</code> 不再是可选的。 不传入它会在运行时抛出 <code>TypeError</code>。</p></td></tr>
<tr><td>v7.0.0</td>
<td><p>参数 <code>callback</code> 不再是可选的。 不传入它将触发 ID 为 DEP0013 的弃用警告。</p></td></tr>
<tr><td>v0.0.2</td>
<td><p><span>新增于: v0.0.2</span></p></td></tr>
</tbody></table>
</details>
</div>
<ul class="">
<li><code>fd</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a></li>
<li><code>callback</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" rel="nofollow" class="type">&lt;Function&gt;</a>
<ul>
<li><code>err</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error" rel="nofollow" class="type">&lt;Error&gt;</a></li>
</ul>
</li>
</ul>
<p>关闭文件描述符。
除了可能的异常之外，没有为完成回调提供任何参数。</p>
<p class="">通过任何其他 <code>fs</code> 操作对当前正在使用的任何文件描述符 (<code>fd</code>) 调用 <code>fs.close()</code>，则可能会导致未定义的行为。</p>
<p class="">有关更多详细信息，请参阅 POSIX <a href="http://man7.org/linux/man-pages/man2/close.2.html" rel="nofollow"><code>close(2)</code></a> 文档。</p>
<h4><code>fs.copyFile(src, dest[, mode], callback)</code><span><a class="mark" href="#fscopyfilesrc-dest-mode-callback" id="fscopyfilesrc-dest-mode-callback">#</a></span><a aria-hidden="true" class="legacy" id="fs_fs_copyfile_src_dest_mode_callback"></a></h4><p class="tip_wrap" data-show_trans="1" data-item_id="#fscopyfilesrc-dest-mode-callback">
                <a href="fs/fs_copyfile_src_dest_mode_callback.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<details class="changelog"><summary>版本历史</summary>
<table>
<tbody><tr><th>版本</th><th>变更</th></tr>
<tr><td>v14.0.0</td>
<td><p>将 'flags' 参数更改为 'mode'，并进行更严格的类型验证。</p></td></tr>
<tr><td>v8.5.0</td>
<td><p><span>新增于: v8.5.0</span></p></td></tr>
</tbody></table>
</details>
</div>
<ul class="">
<li><code>src</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="buffer.html#class-buffer" rel="nofollow" class="type">&lt;Buffer&gt;</a> | <a href="url.html#the-whatwg-url-api" rel="nofollow" class="type">&lt;URL&gt;</a> 要复制的源文件名</li>
<li><code>dest</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="buffer.html#class-buffer" rel="nofollow" class="type">&lt;Buffer&gt;</a> | <a href="url.html#the-whatwg-url-api" rel="nofollow" class="type">&lt;URL&gt;</a> 复制操作的目标文件名</li>
<li><code>mode</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a> 复制操作的修饰符。 <strong>默认值:</strong> <code>0</code>。</li>
<li><code>callback</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" rel="nofollow" class="type">&lt;Function&gt;</a></li>
</ul>
<p>异步地将 <code>src</code> 复制到 <code>dest</code>。
默认情况下，如果 <code>dest</code> 已经存在，则会被覆盖。
除了可能的异常之外，没有给回调函数提供任何参数。
Node.js 不保证复制操作的原子性。
如果在打开目标文件进行写入后发生错误，Node.js 将尝试删除目标文件。</p>
<p class=""><code>mode</code> 是可选的整数，用于指定复制操作的行为。
可以创建由两个或多个值的按位或组成的掩码（例如 <code>fs.constants.COPYFILE_EXCL | fs.constants.COPYFILE_FICLONE</code>）。</p>
<ul class="">
<li><code>fs.constants.COPYFILE_EXCL</code>: 如果 <code>dest</code> 已经存在，则复制操作将失败。</li>
<li><code>fs.constants.COPYFILE_FICLONE</code>: 复制操作将尝试创建写时复制引用链接。
如果平台不支持写时复制，则使用后备复制机制。</li>
<li><code>fs.constants.COPYFILE_FICLONE_FORCE</code>: 复制操作将尝试创建写时复制引用链接。
如果平台不支持写时复制，则该操作将失败。</li>
</ul>
<pre class=""><code class="language-js mjs"><span class="hljs-keyword">import</span> { copyFile, constants } <span class="hljs-keyword">from</span> <span class="hljs-string">'fs'</span>;

<span class="hljs-keyword">function</span> <span class="hljs-title function_">callback</span>(<span class="hljs-params">err</span>) {
  <span class="hljs-keyword">if</span> (err) <span class="hljs-keyword">throw</span> err;
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'source.txt was copied to destination.txt'</span>);
}

<span class="hljs-comment">// 默认情况下将创建或覆盖 destination.txt。</span>
<span class="hljs-title function_">copyFile</span>(<span class="hljs-string">'source.txt'</span>, <span class="hljs-string">'destination.txt'</span>, callback);

<span class="hljs-comment">// 通过使用 COPYFILE_EXCL，如果 destination.txt 存在，则该操作将失败。</span>
<span class="hljs-title function_">copyFile</span>(<span class="hljs-string">'source.txt'</span>, <span class="hljs-string">'destination.txt'</span>, constants.<span class="hljs-property">COPYFILE_EXCL</span>, callback);</code></pre>
<h4><code>fs.cp(src, dest[, options], callback)</code><span><a class="mark" href="#fscpsrc-dest-options-callback" id="fscpsrc-dest-options-callback">#</a></span><a aria-hidden="true" class="legacy" id="fs_fs_cp_src_dest_options_callback"></a></h4><p class="tip_wrap" data-show_trans="1" data-item_id="#fscpsrc-dest-options-callback">
                <a href="fs/fs_cp_src_dest_options_callback.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<details class="changelog"><summary>版本历史</summary>
<table>
<tbody><tr><th>版本</th><th>变更</th></tr>
<tr><td>v16.15.0</td>
<td><p>接受额外的 <code>verbatimSymlinks</code> 选项来指定是否为符号链接执行路径解析。</p></td></tr>
<tr><td>v16.7.0</td>
<td><p><span>新增于: v16.7.0</span></p></td></tr>
</tbody></table>
</details>
</div>
<p></p><div class="api_stability api_stability_1"><a href="documentation.html#stability-index">稳定性: 1</a> - 实验</div><p></p>
<ul class="">
<li><code>src</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="url.html#the-whatwg-url-api" rel="nofollow" class="type">&lt;URL&gt;</a> 要复制的源路径。</li>
<li><code>dest</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="url.html#the-whatwg-url-api" rel="nofollow" class="type">&lt;URL&gt;</a> 要复制到的目标路径。</li>
<li><code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" rel="nofollow" class="type">&lt;Object&gt;</a>
<ul>
<li><code>dereference</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" rel="nofollow" class="type">&lt;boolean&gt;</a> 取消引用符号链接。 <strong>默认值:</strong> <code>false</code>。</li>
<li><code>errorOnExist</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" rel="nofollow" class="type">&lt;boolean&gt;</a> 当 <code>force</code> 为 <code>false</code> 且目标存在时，则抛出错误。 <strong>默认值:</strong> <code>false</code>。</li>
<li><code>filter</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" rel="nofollow" class="type">&lt;Function&gt;</a> 过滤复制文件/目录的函数。
返回 <code>true</code> 则复制条目，返回 <code>false</code> 则忽略它。
也可以返回解决为 <code>true</code> 或 <code>false</code> 的 <code>Promise</code> <strong>默认值:</strong> <code>undefined</code>。</li>
<li><code>force</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" rel="nofollow" class="type">&lt;boolean&gt;</a> 覆盖现有的文件或目录。
如果将此设置为 false 并且目标存在，则复制操作将忽略错误。
使用 <code>errorOnExist</code> 选项更改此行为。
<strong>默认值:</strong> <code>true</code>。</li>
<li><code>preserveTimestamps</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" rel="nofollow" class="type">&lt;boolean&gt;</a> 当为 <code>true</code> 时，则 <code>src</code> 的时间戳将被保留。 <strong>默认值:</strong> <code>false</code>。</li>
<li><code>recursive</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" rel="nofollow" class="type">&lt;boolean&gt;</a> 递归地复制目录 <strong>默认值:</strong> <code>false</code></li>
<li><code>verbatimSymlinks</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" rel="nofollow" class="type">&lt;boolean&gt;</a> 当为 <code>true</code> 时，则符号链接的路径解析将被跳过。 <strong>默认值:</strong> <code>false</code></li>
</ul>
</li>
<li><code>callback</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" rel="nofollow" class="type">&lt;Function&gt;</a></li>
</ul>
<p>将整个目录结构从 <code>src</code> 异步地复制到 <code>dest</code>，包括子目录和文件。</p>
<p class="">当将目录复制到另一个目录时，不支持 globs，并且行为类似于 <code>cp dir1/ dir2/</code>。</p>
<h4><code>fs.createReadStream(path[, options])</code><span><a class="mark" href="#fscreatereadstreampath-options" id="fscreatereadstreampath-options">#</a></span><a aria-hidden="true" class="legacy" id="fs_fs_createreadstream_path_options"></a></h4><p class="tip_wrap" data-show_trans="1" data-item_id="#fscreatereadstreampath-options">
                <a href="fs/fs_createreadstream_path_options.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<details class="changelog"><summary>版本历史</summary>
<table>
<tbody><tr><th>版本</th><th>变更</th></tr>
<tr><td>v16.10.0</td>
<td><p>如果提供了 <code>fd</code>，则 <code>fs</code> 选项不需要 <code>open</code> 方法。</p></td></tr>
<tr><td>v16.10.0</td>
<td><p>如果 <code>autoClose</code> 为 <code>false</code>，则 <code>fs</code> 选项不需要 <code>close</code> 方法。</p></td></tr>
<tr><td>v15.4.0</td>
<td><p>选项 <code>fd</code> 接受 FileHandle 参数。</p></td></tr>
<tr><td>v14.0.0</td>
<td><p>将 <code>emitClose</code> 默认更改为 <code>true</code>。</p></td></tr>
<tr><td>v13.6.0, v12.17.0</td>
<td><p>选项 <code>fs</code> 允许覆盖使用的 <code>fs</code> 实现。</p></td></tr>
<tr><td>v12.10.0</td>
<td><p>启用 <code>emitClose</code> 选项。</p></td></tr>
<tr><td>v11.0.0</td>
<td><p>对 <code>start</code> 和 <code>end</code> 施加新的限制，在我们无法合理处理输入值的情况下抛出更合适的错误。</p></td></tr>
<tr><td>v7.6.0</td>
<td><p>参数 <code>path</code> 可以是使用 <code>file:</code> 协议的 WHATWG <code>URL</code> 对象。</p></td></tr>
<tr><td>v7.0.0</td>
<td><p>传入的 <code>options</code> 对象永远不会被修改。</p></td></tr>
<tr><td>v2.3.0</td>
<td><p>传入的 <code>options</code> 对象现在可以是字符串。</p></td></tr>
<tr><td>v0.1.31</td>
<td><p><span>新增于: v0.1.31</span></p></td></tr>
</tbody></table>
</details>
</div>
<ul class="">
<li><code>path</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="buffer.html#class-buffer" rel="nofollow" class="type">&lt;Buffer&gt;</a> | <a href="url.html#the-whatwg-url-api" rel="nofollow" class="type">&lt;URL&gt;</a></li>
<li><code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" rel="nofollow" class="type">&lt;Object&gt;</a>
<ul>
<li><code>flags</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> 请参阅<a href="#file-system-flags">对文件系统 <code>flags</code> 的支持</a>。 <strong>默认值:</strong> <code>'r'</code>。</li>
<li><code>encoding</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> <strong>默认值:</strong> <code>null</code></li>
<li><code>fd</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a> | <a href="#class-filehandle" rel="nofollow" class="type">&lt;FileHandle&gt;</a> <strong>默认值:</strong> <code>null</code></li>
<li><code>mode</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a> <strong>默认值:</strong> <code>0o666</code></li>
<li><code>autoClose</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" rel="nofollow" class="type">&lt;boolean&gt;</a> <strong>默认值:</strong> <code>true</code></li>
<li><code>emitClose</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" rel="nofollow" class="type">&lt;boolean&gt;</a> <strong>默认值:</strong> <code>true</code></li>
<li><code>start</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a></li>
<li><code>end</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a> <strong>默认值:</strong> <code>Infinity</code></li>
<li><code>highWaterMark</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a> <strong>默认值:</strong> <code>64 * 1024</code></li>
<li><code>fs</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" rel="nofollow" class="type">&lt;Object&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Null_type" rel="nofollow" class="type">&lt;null&gt;</a> <strong>默认值:</strong> <code>null</code></li>
</ul>
</li>
<li>返回: <a href="#class-fsreadstream" rel="nofollow" class="type">&lt;fs.ReadStream&gt;</a></li>
</ul>
<p>与 <a href="stream.html#class-streamreadable" rel="nofollow" class="type">&lt;stream.Readable&gt;</a> 的 16 kb 默认 <code>highWaterMark</code> 不同，此方法返回的流的默认 <code>highWaterMark</code> 为 64 kb。</p>
<p class=""><code>options</code> 可以包括 <code>start</code> 和 <code>end</code> 值，以从文件中读取一定范围的字节，而不是整个文件。
<code>start</code> 和 <code>end</code> 都包含在内并且从 0 开始计数，允许的值在 [0, <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number/MAX_SAFE_INTEGER" rel="nofollow"><code>Number.MAX_SAFE_INTEGER</code></a>] 范围内。
如果指定了 <code>fd</code> 并且 <code>start</code> 被省略或 <code>undefined</code>，则 <code>fs.createReadStream()</code> 从当前文件位置顺序读取。
<code>encoding</code> 可以是 <a href="buffer.html#class-buffer" rel="nofollow" class="type">&lt;Buffer&gt;</a> 接受的任何一种。</p>
<p class="">如果指定了 <code>fd</code>，则 <code>ReadStream</code> 将忽略 <code>path</code> 参数并使用指定的文件描述符。
这意味着不会触发 <code>'open'</code> 事件。
<code>fd</code> 应该是阻塞的；非阻塞 <code>fd</code> 应该传给 <a href="net.html#class-netsocket" rel="nofollow" class="type">&lt;net.Socket&gt;</a>。</p>
<p class="">如果 <code>fd</code> 指向仅支持阻塞读取的字符设备（例如键盘或声卡），则读取操作不会在数据可用之前完成。
这可以防止进程退出和流自然关闭。</p>
<p class="">默认情况下，流将在销毁后触发 <code>'close'</code> 事件。
将 <code>emitClose</code> 选项设置为 <code>false</code> 以更改此行为。</p>
<p class="">通过提供 <code>fs</code> 选项，可以覆盖 <code>open</code>、<code>read</code> 和 <code>close</code> 的相应 <code>fs</code> 实现。
当提供了 <code>fs</code> 选项时，则需要覆盖 <code>read</code>。
如果未提供 <code>fd</code>，则还需要覆盖 <code>open</code>。
如果 <code>autoClose</code> 是 <code>true</code>，则还需要覆盖 <code>close</code>。</p>
<pre class=""><code class="language-js mjs"><span class="hljs-keyword">import</span> { createReadStream } <span class="hljs-keyword">from</span> <span class="hljs-string">'fs'</span>;

<span class="hljs-comment">// 从某个字符设备创建流。</span>
<span class="hljs-keyword">const</span> stream = <span class="hljs-title function_">createReadStream</span>(<span class="hljs-string">'/dev/input/event0'</span>);
<span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
  stream.<span class="hljs-title function_">close</span>(); <span class="hljs-comment">// 这可能不会关闭流。</span>
  <span class="hljs-comment">// 人为地标记流结束，就好像底层资源自己指示了文件结束一样，允许流关闭。</span>
  <span class="hljs-comment">// 这不会取消挂起的读操作，如果有这样的操作，进程可能仍然无法成功退出，直到它完成。</span>
  stream.<span class="hljs-title function_">push</span>(<span class="hljs-literal">null</span>);
  stream.<span class="hljs-title function_">read</span>(<span class="hljs-number">0</span>);
}, <span class="hljs-number">100</span>);</code></pre>
<p class="">如果 <code>autoClose</code> 为 false，则即使出现错误，文件描述符也不会关闭。
关闭它并确保没有文件描述符泄漏是应用程序的责任。
如果 <code>autoClose</code> 设置为 true（默认行为），则在 <code>'error'</code> 或 <code>'end'</code> 时，文件描述符将自动关闭。</p>
<p class=""><code>mode</code> 设置文件模式（权限和粘滞位），但前提是文件已创建。</p>
<p class="">读取 100 个字节长的文件的最后 10 个字节的示例：</p>
<pre class=""><code class="language-js mjs"><span class="hljs-keyword">import</span> { createReadStream } <span class="hljs-keyword">from</span> <span class="hljs-string">'fs'</span>;

<span class="hljs-title function_">createReadStream</span>(<span class="hljs-string">'sample.txt'</span>, { <span class="hljs-attr">start</span>: <span class="hljs-number">90</span>, <span class="hljs-attr">end</span>: <span class="hljs-number">99</span> });</code></pre>
<p class="">如果 <code>options</code> 是字符串，则它指定编码。</p>
<h4><code>fs.createWriteStream(path[, options])</code><span><a class="mark" href="#fscreatewritestreampath-options" id="fscreatewritestreampath-options">#</a></span><a aria-hidden="true" class="legacy" id="fs_fs_createwritestream_path_options"></a></h4><p class="tip_wrap" data-show_trans="1" data-item_id="#fscreatewritestreampath-options">
                <a href="fs/fs_createwritestream_path_options.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<details class="changelog"><summary>版本历史</summary>
<table>
<tbody><tr><th>版本</th><th>变更</th></tr>
<tr><td>v16.10.0</td>
<td><p>如果提供了 <code>fd</code>，则 <code>fs</code> 选项不需要 <code>open</code> 方法。</p></td></tr>
<tr><td>v16.10.0</td>
<td><p>如果 <code>autoClose</code> 为 <code>false</code>，则 <code>fs</code> 选项不需要 <code>close</code> 方法。</p></td></tr>
<tr><td>v15.4.0</td>
<td><p>选项 <code>fd</code> 接受 FileHandle 参数。</p></td></tr>
<tr><td>v14.0.0</td>
<td><p>将 <code>emitClose</code> 默认更改为 <code>true</code>。</p></td></tr>
<tr><td>v13.6.0, v12.17.0</td>
<td><p>选项 <code>fs</code> 允许覆盖使用的 <code>fs</code> 实现。</p></td></tr>
<tr><td>v12.10.0</td>
<td><p>启用 <code>emitClose</code> 选项。</p></td></tr>
<tr><td>v7.6.0</td>
<td><p>参数 <code>path</code> 可以是使用 <code>file:</code> 协议的 WHATWG <code>URL</code> 对象。</p></td></tr>
<tr><td>v7.0.0</td>
<td><p>传入的 <code>options</code> 对象永远不会被修改。</p></td></tr>
<tr><td>v5.5.0</td>
<td><p>现在支持 <code>autoClose</code> 选项。</p></td></tr>
<tr><td>v2.3.0</td>
<td><p>传入的 <code>options</code> 对象现在可以是字符串。</p></td></tr>
<tr><td>v0.1.31</td>
<td><p><span>新增于: v0.1.31</span></p></td></tr>
</tbody></table>
</details>
</div>
<ul class="">
<li><code>path</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="buffer.html#class-buffer" rel="nofollow" class="type">&lt;Buffer&gt;</a> | <a href="url.html#the-whatwg-url-api" rel="nofollow" class="type">&lt;URL&gt;</a></li>
<li><code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" rel="nofollow" class="type">&lt;Object&gt;</a>
<ul>
<li><code>flags</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> 请参阅<a href="#file-system-flags">对文件系统 <code>flags</code> 的支持</a>。 <strong>默认值:</strong> <code>'w'</code>。</li>
<li><code>encoding</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> <strong>默认值:</strong> <code>'utf8'</code></li>
<li><code>fd</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a> | <a href="#class-filehandle" rel="nofollow" class="type">&lt;FileHandle&gt;</a> <strong>默认值:</strong> <code>null</code></li>
<li><code>mode</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a> <strong>默认值:</strong> <code>0o666</code></li>
<li><code>autoClose</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" rel="nofollow" class="type">&lt;boolean&gt;</a> <strong>默认值:</strong> <code>true</code></li>
<li><code>emitClose</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" rel="nofollow" class="type">&lt;boolean&gt;</a> <strong>默认值:</strong> <code>true</code></li>
<li><code>start</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a></li>
<li><code>fs</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" rel="nofollow" class="type">&lt;Object&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Null_type" rel="nofollow" class="type">&lt;null&gt;</a> <strong>默认值:</strong> <code>null</code></li>
</ul>
</li>
<li>返回: <a href="#class-fswritestream" rel="nofollow" class="type">&lt;fs.WriteStream&gt;</a></li>
</ul>
<p><code>options</code> 还可以包括 <code>start</code> 选项，以允许在文件开头的某个位置写入数据，允许的值在 [0, <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number/MAX_SAFE_INTEGER" rel="nofollow"><code>Number.MAX_SAFE_INTEGER</code></a>] 范围内。
修改文件而不是替换它可能需要将 <code>flags</code> 选项设置为 <code>r+</code> 而不是默认的 <code>w</code>。
<code>encoding</code> 可以是 <a href="buffer.html#class-buffer" rel="nofollow" class="type">&lt;Buffer&gt;</a> 接受的任何一种。</p>
<p class="">如果将 <code>autoClose</code> 设置为 true（默认行为），则在 <code>'error'</code> 或 <code>'finish'</code> 时文件描述符将自动关闭。
如果 <code>autoClose</code> 为 false，则即使出现错误，文件描述符也不会关闭。
关闭它并确保没有文件描述符泄漏是应用程序的责任。</p>
<p class="">默认情况下，流将在销毁后触发 <code>'close'</code> 事件。
将 <code>emitClose</code> 选项设置为 <code>false</code> 以更改此行为。</p>
<p class="">通过提供 <code>fs</code> 选项，可以覆盖 <code>open</code>、<code>write</code>、<code>writev</code> 和 <code>close</code> 的相应 <code>fs</code> 实现。
在没有 <code>writev()</code> 的情况下覆盖 <code>write()</code> 会降低性能，因为某些优化 (<code>_writev()</code>) 将被禁用。
当提供了 <code>fs</code> 选项时，则至少需要覆盖 <code>write</code> 和 <code>writev</code> 之一。
如果没有提供 <code>fd</code> 选项，则还需要覆盖 <code>open</code>。
如果 <code>autoClose</code> 是 <code>true</code>，则还需要覆盖 <code>close</code>。</p>
<p class="">与 <a href="#class-fsreadstream" rel="nofollow" class="type">&lt;fs.ReadStream&gt;</a> 一样，如果指定了 <code>fd</code>，则 <a href="#class-fswritestream" rel="nofollow" class="type">&lt;fs.WriteStream&gt;</a> 将忽略 <code>path</code> 参数并使用指定的文件描述符。
这意味着不会触发 <code>'open'</code> 事件。
<code>fd</code> 应该是阻塞的；非阻塞 <code>fd</code> 应该传给 <a href="net.html#class-netsocket" rel="nofollow" class="type">&lt;net.Socket&gt;</a>。</p>
<p class="">如果 <code>options</code> 是字符串，则它指定编码。</p>
<h4><code>fs.exists(path, callback)</code><span><a class="mark" href="#fsexistspath-callback" id="fsexistspath-callback">#</a></span><a aria-hidden="true" class="legacy" id="fs_fs_exists_path_callback"></a></h4><p class="tip_wrap" data-show_trans="1" data-item_id="#fsexistspath-callback">
                <a href="fs/fs_exists_path_callback.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<details class="changelog"><summary>版本历史</summary>
<table>
<tbody><tr><th>版本</th><th>变更</th></tr>
<tr><td>v7.6.0</td>
<td><p>参数 <code>path</code> 可以是使用 <code>file:</code> 协议的 WHATWG <code>URL</code> 对象。</p></td></tr>
<tr><td>v1.0.0</td>
<td><p><span>弃用于: v1.0.0</span></p></td></tr>
<tr><td>v0.0.2</td>
<td><p><span>新增于: v0.0.2</span></p></td></tr>
</tbody></table>
</details>
</div>
<p></p><div class="api_stability api_stability_0"><a href="documentation.html#stability-index">稳定性: 0</a> - 弃用: 改为使用 <a href="#fsstatpath-options-callback"><code>fs.stat()</code></a> 或 <a href="#fsaccesspath-mode-callback"><code>fs.access()</code></a> 。</div><p></p>
<ul class="">
<li><code>path</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="buffer.html#class-buffer" rel="nofollow" class="type">&lt;Buffer&gt;</a> | <a href="url.html#the-whatwg-url-api" rel="nofollow" class="type">&lt;URL&gt;</a></li>
<li><code>callback</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" rel="nofollow" class="type">&lt;Function&gt;</a>
<ul>
<li><code>exists</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" rel="nofollow" class="type">&lt;boolean&gt;</a></li>
</ul>
</li>
</ul>
<p>通过检查文件系统来测试给定的路径是否存在。
然后使用 true 或 false 调用 <code>callback</code> 参数：</p>
<pre class=""><code class="language-js mjs"><span class="hljs-keyword">import</span> { exists } <span class="hljs-keyword">from</span> <span class="hljs-string">'fs'</span>;

<span class="hljs-title function_">exists</span>(<span class="hljs-string">'/etc/passwd'</span>, <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(e ? <span class="hljs-string">'it exists'</span> : <span class="hljs-string">'no passwd!'</span>);
});</code></pre>
<p class=""><strong>此回调的参数与其他 Node.js 回调不一致。</strong>
通常，Node.js 回调的第一个参数是 <code>err</code> 参数，后跟可选的其他参数。
<code>fs.exists()</code> 回调只有一个布尔参数。
这是推荐 <code>fs.access()</code> 而不是 <code>fs.exists()</code> 的原因之一。</p>
<p class="">不推荐在调用 <code>fs.open()</code>、<code>fs.readFile()</code> 或 <code>fs.writeFile()</code> 之前使用 <code>fs.exists()</code> 检查文件是否存在。
这样做会引入竞争条件，因为其他进程可能会在两次调用之间更改文件的状态。
而是，用户代码应该直接打开/读取/写入文件，并在文件不存在时处理引发的错误。</p>
<p class=""><strong>写入（不推荐）</strong></p>
<pre class=""><code class="language-js mjs"><span class="hljs-keyword">import</span> { exists, open, close } <span class="hljs-keyword">from</span> <span class="hljs-string">'fs'</span>;

<span class="hljs-title function_">exists</span>(<span class="hljs-string">'myfile'</span>, <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> {
  <span class="hljs-keyword">if</span> (e) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'myfile already exists'</span>);
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-title function_">open</span>(<span class="hljs-string">'myfile'</span>, <span class="hljs-string">'wx'</span>, <span class="hljs-function">(<span class="hljs-params">err, fd</span>) =&gt;</span> {
      <span class="hljs-keyword">if</span> (err) <span class="hljs-keyword">throw</span> err;

      <span class="hljs-keyword">try</span> {
        <span class="hljs-title function_">writeMyData</span>(fd);
      } <span class="hljs-keyword">finally</span> {
        <span class="hljs-title function_">close</span>(fd, <span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {
          <span class="hljs-keyword">if</span> (err) <span class="hljs-keyword">throw</span> err;
        });
      }
    });
  }
});</code></pre>
<p class=""><strong>写入（推荐）</strong></p>
<pre class=""><code class="language-js mjs"><span class="hljs-keyword">import</span> { open, close } <span class="hljs-keyword">from</span> <span class="hljs-string">'fs'</span>;
<span class="hljs-title function_">open</span>(<span class="hljs-string">'myfile'</span>, <span class="hljs-string">'wx'</span>, <span class="hljs-function">(<span class="hljs-params">err, fd</span>) =&gt;</span> {
  <span class="hljs-keyword">if</span> (err) {
    <span class="hljs-keyword">if</span> (err.<span class="hljs-property">code</span> === <span class="hljs-string">'EEXIST'</span>) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'myfile already exists'</span>);
      <span class="hljs-keyword">return</span>;
    }

    <span class="hljs-keyword">throw</span> err;
  }

  <span class="hljs-keyword">try</span> {
    <span class="hljs-title function_">writeMyData</span>(fd);
  } <span class="hljs-keyword">finally</span> {
    <span class="hljs-title function_">close</span>(fd, <span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {
      <span class="hljs-keyword">if</span> (err) <span class="hljs-keyword">throw</span> err;
    });
  }
});</code></pre>
<p class=""><strong>读取（不推荐）</strong></p>
<pre class=""><code class="language-js mjs"><span class="hljs-keyword">import</span> { open, close, exists } <span class="hljs-keyword">from</span> <span class="hljs-string">'fs'</span>;

<span class="hljs-title function_">exists</span>(<span class="hljs-string">'myfile'</span>, <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> {
  <span class="hljs-keyword">if</span> (e) {
    <span class="hljs-title function_">open</span>(<span class="hljs-string">'myfile'</span>, <span class="hljs-string">'r'</span>, <span class="hljs-function">(<span class="hljs-params">err, fd</span>) =&gt;</span> {
      <span class="hljs-keyword">if</span> (err) <span class="hljs-keyword">throw</span> err;

      <span class="hljs-keyword">try</span> {
        <span class="hljs-title function_">readMyData</span>(fd);
      } <span class="hljs-keyword">finally</span> {
        <span class="hljs-title function_">close</span>(fd, <span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {
          <span class="hljs-keyword">if</span> (err) <span class="hljs-keyword">throw</span> err;
        });
      }
    });
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'myfile does not exist'</span>);
  }
});</code></pre>
<p class=""><strong>读取（推荐）</strong></p>
<pre class=""><code class="language-js mjs"><span class="hljs-keyword">import</span> { open, close } <span class="hljs-keyword">from</span> <span class="hljs-string">'fs'</span>;

<span class="hljs-title function_">open</span>(<span class="hljs-string">'myfile'</span>, <span class="hljs-string">'r'</span>, <span class="hljs-function">(<span class="hljs-params">err, fd</span>) =&gt;</span> {
  <span class="hljs-keyword">if</span> (err) {
    <span class="hljs-keyword">if</span> (err.<span class="hljs-property">code</span> === <span class="hljs-string">'ENOENT'</span>) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'myfile does not exist'</span>);
      <span class="hljs-keyword">return</span>;
    }

    <span class="hljs-keyword">throw</span> err;
  }

  <span class="hljs-keyword">try</span> {
    <span class="hljs-title function_">readMyData</span>(fd);
  } <span class="hljs-keyword">finally</span> {
    <span class="hljs-title function_">close</span>(fd, <span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {
      <span class="hljs-keyword">if</span> (err) <span class="hljs-keyword">throw</span> err;
    });
  }
});</code></pre>
<p class="">上面的“不推荐”示例检查是否存在，然后使用该文件；“推荐”示例更好，因为它们直接使用文件并处理错误（如果有）。</p>
<p class="">通常，仅当文件不会被直接使用时才检查文件是否存在，例如当它的存在是来自另一个进程的信号时。</p>
<h4><code>fs.fchmod(fd, mode, callback)</code><span><a class="mark" href="#fsfchmodfd-mode-callback" id="fsfchmodfd-mode-callback">#</a></span><a aria-hidden="true" class="legacy" id="fs_fs_fchmod_fd_mode_callback"></a></h4><p class="tip_wrap" data-show_trans="1" data-item_id="#fsfchmodfd-mode-callback">
                <a href="fs/fs_fchmod_fd_mode_callback.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<details class="changelog"><summary>版本历史</summary>
<table>
<tbody><tr><th>版本</th><th>变更</th></tr>
<tr><td>v10.0.0</td>
<td><p>参数 <code>callback</code> 不再是可选的。 不传入它会在运行时抛出 <code>TypeError</code>。</p></td></tr>
<tr><td>v7.0.0</td>
<td><p>参数 <code>callback</code> 不再是可选的。 不传入它将触发 ID 为 DEP0013 的弃用警告。</p></td></tr>
<tr><td>v0.4.7</td>
<td><p><span>新增于: v0.4.7</span></p></td></tr>
</tbody></table>
</details>
</div>
<ul class="">
<li><code>fd</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a></li>
<li><code>mode</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a></li>
<li><code>callback</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" rel="nofollow" class="type">&lt;Function&gt;</a>
<ul>
<li><code>err</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error" rel="nofollow" class="type">&lt;Error&gt;</a></li>
</ul>
</li>
</ul>
<p>设置文件的权限。
除了可能的异常之外，没有为完成回调提供任何参数。</p>
<p class="">有关更多详细信息，请参阅 POSIX <a href="http://man7.org/linux/man-pages/man2/fchmod.2.html" rel="nofollow"><code>fchmod(2)</code></a> 文档。</p>
<h4><code>fs.fchown(fd, uid, gid, callback)</code><span><a class="mark" href="#fsfchownfd-uid-gid-callback" id="fsfchownfd-uid-gid-callback">#</a></span><a aria-hidden="true" class="legacy" id="fs_fs_fchown_fd_uid_gid_callback"></a></h4><p class="tip_wrap" data-show_trans="1" data-item_id="#fsfchownfd-uid-gid-callback">
                <a href="fs/fs_fchown_fd_uid_gid_callback.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<details class="changelog"><summary>版本历史</summary>
<table>
<tbody><tr><th>版本</th><th>变更</th></tr>
<tr><td>v10.0.0</td>
<td><p>参数 <code>callback</code> 不再是可选的。 不传入它会在运行时抛出 <code>TypeError</code>。</p></td></tr>
<tr><td>v7.0.0</td>
<td><p>参数 <code>callback</code> 不再是可选的。 不传入它将触发 ID 为 DEP0013 的弃用警告。</p></td></tr>
<tr><td>v0.4.7</td>
<td><p><span>新增于: v0.4.7</span></p></td></tr>
</tbody></table>
</details>
</div>
<ul class="">
<li><code>fd</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a></li>
<li><code>uid</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a></li>
<li><code>gid</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a></li>
<li><code>callback</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" rel="nofollow" class="type">&lt;Function&gt;</a>
<ul>
<li><code>err</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error" rel="nofollow" class="type">&lt;Error&gt;</a></li>
</ul>
</li>
</ul>
<p>设置文件的所有者。
除了可能的异常之外，没有为完成回调提供任何参数。</p>
<p class="">有关更多详细信息，请参阅 POSIX <a href="http://man7.org/linux/man-pages/man2/fchown.2.html" rel="nofollow"><code>fchown(2)</code></a> 文档。</p>
<h4><code>fs.fdatasync(fd, callback)</code><span><a class="mark" href="#fsfdatasyncfd-callback" id="fsfdatasyncfd-callback">#</a></span><a aria-hidden="true" class="legacy" id="fs_fs_fdatasync_fd_callback"></a></h4><p class="tip_wrap" data-show_trans="1" data-item_id="#fsfdatasyncfd-callback">
                <a href="fs/fs_fdatasync_fd_callback.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<details class="changelog"><summary>版本历史</summary>
<table>
<tbody><tr><th>版本</th><th>变更</th></tr>
<tr><td>v10.0.0</td>
<td><p>参数 <code>callback</code> 不再是可选的。 不传入它会在运行时抛出 <code>TypeError</code>。</p></td></tr>
<tr><td>v7.0.0</td>
<td><p>参数 <code>callback</code> 不再是可选的。 不传入它将触发 ID 为 DEP0013 的弃用警告。</p></td></tr>
<tr><td>v0.1.96</td>
<td><p><span>新增于: v0.1.96</span></p></td></tr>
</tbody></table>
</details>
</div>
<ul class="">
<li><code>fd</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a></li>
<li><code>callback</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" rel="nofollow" class="type">&lt;Function&gt;</a>
<ul>
<li><code>err</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error" rel="nofollow" class="type">&lt;Error&gt;</a></li>
</ul>
</li>
</ul>
<p>将与文件关联的所有当前排队的 I/O 操作强制为操作系统的同步 I/O 完成状态。
有关详细信息，请参阅 POSIX <a href="http://man7.org/linux/man-pages/man2/fdatasync.2.html" rel="nofollow"><code>fdatasync(2)</code></a> 文档。
除了可能的异常之外，没有为完成回调提供任何参数。</p>
<h4><code>fs.fstat(fd[, options], callback)</code><span><a class="mark" href="#fsfstatfd-options-callback" id="fsfstatfd-options-callback">#</a></span><a aria-hidden="true" class="legacy" id="fs_fs_fstat_fd_options_callback"></a></h4><p class="tip_wrap" data-show_trans="1" data-item_id="#fsfstatfd-options-callback">
                <a href="fs/fs_fstat_fd_options_callback.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<details class="changelog"><summary>版本历史</summary>
<table>
<tbody><tr><th>版本</th><th>变更</th></tr>
<tr><td>v10.5.0</td>
<td><p>接受额外的 <code>options</code> 对象，以指定返回的数字值是否应为长整数。</p></td></tr>
<tr><td>v10.0.0</td>
<td><p>参数 <code>callback</code> 不再是可选的。 不传入它会在运行时抛出 <code>TypeError</code>。</p></td></tr>
<tr><td>v7.0.0</td>
<td><p>参数 <code>callback</code> 不再是可选的。 不传入它将触发 ID 为 DEP0013 的弃用警告。</p></td></tr>
<tr><td>v0.1.95</td>
<td><p><span>新增于: v0.1.95</span></p></td></tr>
</tbody></table>
</details>
</div>
<ul class="">
<li><code>fd</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a></li>
<li><code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" rel="nofollow" class="type">&lt;Object&gt;</a>
<ul>
<li><code>bigint</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" rel="nofollow" class="type">&lt;boolean&gt;</a> 返回的 <a href="#class-fsstats" rel="nofollow" class="type">&lt;fs.Stats&gt;</a> 对象中的数值是否应为 <code>bigint</code>。 <strong>默认值:</strong> <code>false</code>。</li>
</ul>
</li>
<li><code>callback</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" rel="nofollow" class="type">&lt;Function&gt;</a>
<ul>
<li><code>err</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error" rel="nofollow" class="type">&lt;Error&gt;</a></li>
<li><code>stats</code> <a href="#class-fsstats" rel="nofollow" class="type">&lt;fs.Stats&gt;</a></li>
</ul>
</li>
</ul>
<p>使用文件描述符的 <a href="#class-fsstats" rel="nofollow" class="type">&lt;fs.Stats&gt;</a> 调用回调。</p>
<p class="">有关更多详细信息，请参阅 POSIX <a href="http://man7.org/linux/man-pages/man2/fstat.2.html" rel="nofollow"><code>fstat(2)</code></a> 文档。</p>
<h4><code>fs.fsync(fd, callback)</code><span><a class="mark" href="#fsfsyncfd-callback" id="fsfsyncfd-callback">#</a></span><a aria-hidden="true" class="legacy" id="fs_fs_fsync_fd_callback"></a></h4><p class="tip_wrap" data-show_trans="1" data-item_id="#fsfsyncfd-callback">
                <a href="fs/fs_fsync_fd_callback.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<details class="changelog"><summary>版本历史</summary>
<table>
<tbody><tr><th>版本</th><th>变更</th></tr>
<tr><td>v10.0.0</td>
<td><p>参数 <code>callback</code> 不再是可选的。 不传入它会在运行时抛出 <code>TypeError</code>。</p></td></tr>
<tr><td>v7.0.0</td>
<td><p>参数 <code>callback</code> 不再是可选的。 不传入它将触发 ID 为 DEP0013 的弃用警告。</p></td></tr>
<tr><td>v0.1.96</td>
<td><p><span>新增于: v0.1.96</span></p></td></tr>
</tbody></table>
</details>
</div>
<ul class="">
<li><code>fd</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a></li>
<li><code>callback</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" rel="nofollow" class="type">&lt;Function&gt;</a>
<ul>
<li><code>err</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error" rel="nofollow" class="type">&lt;Error&gt;</a></li>
</ul>
</li>
</ul>
<p>请求将打开文件描述符的所有数据刷新到存储设备。
具体实现是操作系统和设备特定的。
有关更多详细信息，请参考 POSIX <a href="http://man7.org/linux/man-pages/man2/fsync.2.html" rel="nofollow"><code>fsync(2)</code></a> 文档。
除了可能的异常之外，没有为完成回调提供任何参数。</p>
<h4><code>fs.ftruncate(fd[, len], callback)</code><span><a class="mark" href="#fsftruncatefd-len-callback" id="fsftruncatefd-len-callback">#</a></span><a aria-hidden="true" class="legacy" id="fs_fs_ftruncate_fd_len_callback"></a></h4><p class="tip_wrap" data-show_trans="1" data-item_id="#fsftruncatefd-len-callback">
                <a href="fs/fs_ftruncate_fd_len_callback.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<details class="changelog"><summary>版本历史</summary>
<table>
<tbody><tr><th>版本</th><th>变更</th></tr>
<tr><td>v10.0.0</td>
<td><p>参数 <code>callback</code> 不再是可选的。 不传入它会在运行时抛出 <code>TypeError</code>。</p></td></tr>
<tr><td>v7.0.0</td>
<td><p>参数 <code>callback</code> 不再是可选的。 不传入它将触发 ID 为 DEP0013 的弃用警告。</p></td></tr>
<tr><td>v0.8.6</td>
<td><p><span>新增于: v0.8.6</span></p></td></tr>
</tbody></table>
</details>
</div>
<ul class="">
<li><code>fd</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a></li>
<li><code>len</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a> <strong>默认值:</strong> <code>0</code></li>
<li><code>callback</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" rel="nofollow" class="type">&lt;Function&gt;</a>
<ul>
<li><code>err</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error" rel="nofollow" class="type">&lt;Error&gt;</a></li>
</ul>
</li>
</ul>
<p>截断文件描述符。
除了可能的异常之外，没有为完成回调提供任何参数。</p>
<p class="">有关更多详细信息，请参阅 POSIX <a href="http://man7.org/linux/man-pages/man2/ftruncate.2.html" rel="nofollow"><code>ftruncate(2)</code></a> 文档。</p>
<p class="">如果文件描述符引用的文件大于 <code>len</code> 个字节，则文件中将仅保留前 <code>len</code> 个字节。</p>
<p class="">例如，以下程序仅保留文件的前四个字节：</p>
<pre class=""><code class="language-js mjs"><span class="hljs-keyword">import</span> { open, close, ftruncate } <span class="hljs-keyword">from</span> <span class="hljs-string">'fs'</span>;

<span class="hljs-keyword">function</span> <span class="hljs-title function_">closeFd</span>(<span class="hljs-params">fd</span>) {
  <span class="hljs-title function_">close</span>(fd, <span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {
    <span class="hljs-keyword">if</span> (err) <span class="hljs-keyword">throw</span> err;
  });
}

<span class="hljs-title function_">open</span>(<span class="hljs-string">'temp.txt'</span>, <span class="hljs-string">'r+'</span>, <span class="hljs-function">(<span class="hljs-params">err, fd</span>) =&gt;</span> {
  <span class="hljs-keyword">if</span> (err) <span class="hljs-keyword">throw</span> err;

  <span class="hljs-keyword">try</span> {
    <span class="hljs-title function_">ftruncate</span>(fd, <span class="hljs-number">4</span>, <span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {
      <span class="hljs-title function_">closeFd</span>(fd);
      <span class="hljs-keyword">if</span> (err) <span class="hljs-keyword">throw</span> err;
    });
  } <span class="hljs-keyword">catch</span> (err) {
    <span class="hljs-title function_">closeFd</span>(fd);
    <span class="hljs-keyword">if</span> (err) <span class="hljs-keyword">throw</span> err;
  }
});</code></pre>
<p class="">如果文件先前小于 <code>len</code> 个字节，则将其扩展，并且扩展部分将使用空字节（<code>'\0'</code>）填充：</p>
<p class="">如果 <code>len</code> 为负数，则将使用 <code>0</code>。</p>
<h4><code>fs.futimes(fd, atime, mtime, callback)</code><span><a class="mark" href="#fsfutimesfd-atime-mtime-callback" id="fsfutimesfd-atime-mtime-callback">#</a></span><a aria-hidden="true" class="legacy" id="fs_fs_futimes_fd_atime_mtime_callback"></a></h4><p class="tip_wrap" data-show_trans="1" data-item_id="#fsfutimesfd-atime-mtime-callback">
                <a href="fs/fs_futimes_fd_atime_mtime_callback.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<details class="changelog"><summary>版本历史</summary>
<table>
<tbody><tr><th>版本</th><th>变更</th></tr>
<tr><td>v10.0.0</td>
<td><p>参数 <code>callback</code> 不再是可选的。 不传入它会在运行时抛出 <code>TypeError</code>。</p></td></tr>
<tr><td>v7.0.0</td>
<td><p>参数 <code>callback</code> 不再是可选的。 不传入它将触发 ID 为 DEP0013 的弃用警告。</p></td></tr>
<tr><td>v4.1.0</td>
<td><p>现在允许使用数字字符串、<code>NaN</code> 和 <code>Infinity</code> 作为时间说明符。</p></td></tr>
<tr><td>v0.4.2</td>
<td><p><span>新增于: v0.4.2</span></p></td></tr>
</tbody></table>
</details>
</div>
<ul class="">
<li><code>fd</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a></li>
<li><code>atime</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;number&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date" rel="nofollow" class="type">&lt;Date&gt;</a></li>
<li><code>mtime</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;number&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date" rel="nofollow" class="type">&lt;Date&gt;</a></li>
<li><code>callback</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" rel="nofollow" class="type">&lt;Function&gt;</a>
<ul>
<li><code>err</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error" rel="nofollow" class="type">&lt;Error&gt;</a></li>
</ul>
</li>
</ul>
<p>更改提供的文件描述符引用的对象的文件系统时间戳。
参见 <a href="#fsutimespath-atime-mtime-callback"><code>fs.utimes()</code></a>。</p>
<h4><code>fs.lchmod(path, mode, callback)</code><span><a class="mark" href="#fslchmodpath-mode-callback" id="fslchmodpath-mode-callback">#</a></span><a aria-hidden="true" class="legacy" id="fs_fs_lchmod_path_mode_callback"></a></h4><p class="tip_wrap" data-show_trans="1" data-item_id="#fslchmodpath-mode-callback">
                <a href="fs/fs_lchmod_path_mode_callback.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<details class="changelog"><summary>版本历史</summary>
<table>
<tbody><tr><th>版本</th><th>变更</th></tr>
<tr><td>v16.0.0</td>
<td><p>如果返回多个错误，则返回的错误可能是 <code>AggregateError</code>。</p></td></tr>
<tr><td>v10.0.0</td>
<td><p>参数 <code>callback</code> 不再是可选的。 不传入它会在运行时抛出 <code>TypeError</code>。</p></td></tr>
<tr><td>v7.0.0</td>
<td><p>参数 <code>callback</code> 不再是可选的。 不传入它将触发 ID 为 DEP0013 的弃用警告。</p></td></tr>
<tr><td>v0.4.7</td>
<td><p><span>弃用于: v0.4.7</span></p></td></tr>
</tbody></table>
</details>
</div>
<ul class="">
<li><code>path</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="buffer.html#class-buffer" rel="nofollow" class="type">&lt;Buffer&gt;</a> | <a href="url.html#the-whatwg-url-api" rel="nofollow" class="type">&lt;URL&gt;</a></li>
<li><code>mode</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a></li>
<li><code>callback</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" rel="nofollow" class="type">&lt;Function&gt;</a>
<ul>
<li><code>err</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error" rel="nofollow" class="type">&lt;Error&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/AggregateError" rel="nofollow" class="type">&lt;AggregateError&gt;</a></li>
</ul>
</li>
</ul>
<p>更改符号链接的权限。
除了可能的异常之外，没有为完成回调提供任何参数。</p>
<p class="">此方法仅在 macOS 上实现。</p>
<p class="">有关更多详细信息，请参阅 POSIX <a href="https://www.freebsd.org/cgi/man.cgi" rel="nofollow"><code>lchmod(2)</code></a> 文档。</p>
<h4><code>fs.lchown(path, uid, gid, callback)</code><span><a class="mark" href="#fslchownpath-uid-gid-callback" id="fslchownpath-uid-gid-callback">#</a></span><a aria-hidden="true" class="legacy" id="fs_fs_lchown_path_uid_gid_callback"></a></h4><p class="tip_wrap" data-show_trans="1" data-item_id="#fslchownpath-uid-gid-callback">
                <a href="fs/fs_lchown_path_uid_gid_callback.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<details class="changelog"><summary>版本历史</summary>
<table>
<tbody><tr><th>版本</th><th>变更</th></tr>
<tr><td>v10.6.0</td>
<td><p>该 API 不再被弃用。</p></td></tr>
<tr><td>v10.0.0</td>
<td><p>参数 <code>callback</code> 不再是可选的。 不传入它会在运行时抛出 <code>TypeError</code>。</p></td></tr>
<tr><td>v7.0.0</td>
<td><p>参数 <code>callback</code> 不再是可选的。 不传入它将触发 ID 为 DEP0013 的弃用警告。</p></td></tr>
<tr><td>v0.4.7</td>
<td><p>仅文档弃用。</p></td></tr>
</tbody></table>
</details>
</div>
<ul class="">
<li><code>path</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="buffer.html#class-buffer" rel="nofollow" class="type">&lt;Buffer&gt;</a> | <a href="url.html#the-whatwg-url-api" rel="nofollow" class="type">&lt;URL&gt;</a></li>
<li><code>uid</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a></li>
<li><code>gid</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a></li>
<li><code>callback</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" rel="nofollow" class="type">&lt;Function&gt;</a>
<ul>
<li><code>err</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error" rel="nofollow" class="type">&lt;Error&gt;</a></li>
</ul>
</li>
</ul>
<p>设置符号链接的所有者。
除了可能的异常之外，没有为完成回调提供任何参数。</p>
<p class="">有关更多详细信息，请参阅 POSIX <a href="http://man7.org/linux/man-pages/man2/lchown.2.html" rel="nofollow"><code>lchown(2)</code></a> 文档。</p>
<h4><code>fs.lutimes(path, atime, mtime, callback)</code><span><a class="mark" href="#fslutimespath-atime-mtime-callback" id="fslutimespath-atime-mtime-callback">#</a></span><a aria-hidden="true" class="legacy" id="fs_fs_lutimes_path_atime_mtime_callback"></a></h4><p class="tip_wrap" data-show_trans="1" data-item_id="#fslutimespath-atime-mtime-callback">
                <a href="fs/fs_lutimes_path_atime_mtime_callback.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>新增于: v14.5.0, v12.19.0</span>
</div>
<ul class="">
<li><code>path</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="buffer.html#class-buffer" rel="nofollow" class="type">&lt;Buffer&gt;</a> | <a href="url.html#the-whatwg-url-api" rel="nofollow" class="type">&lt;URL&gt;</a></li>
<li><code>atime</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;number&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date" rel="nofollow" class="type">&lt;Date&gt;</a></li>
<li><code>mtime</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;number&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date" rel="nofollow" class="type">&lt;Date&gt;</a></li>
<li><code>callback</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" rel="nofollow" class="type">&lt;Function&gt;</a>
<ul>
<li><code>err</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error" rel="nofollow" class="type">&lt;Error&gt;</a></li>
</ul>
</li>
</ul>
<p>以与 <a href="#fsutimespath-atime-mtime-callback"><code>fs.utimes()</code></a> 相同的方式更改文件的访问和修改时间，不同之处在于，如果路径引用符号链接，则不会取消引用该链接：而是，符号链接本身的时间戳会更改。</p>
<p class="">除了可能的异常之外，没有为完成回调提供任何参数。</p>
<h4><code>fs.link(existingPath, newPath, callback)</code><span><a class="mark" href="#fslinkexistingpath-newpath-callback" id="fslinkexistingpath-newpath-callback">#</a></span><a aria-hidden="true" class="legacy" id="fs_fs_link_existingpath_newpath_callback"></a></h4><p class="tip_wrap" data-show_trans="1" data-item_id="#fslinkexistingpath-newpath-callback">
                <a href="fs/fs_link_existingpath_newpath_callback.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<details class="changelog"><summary>版本历史</summary>
<table>
<tbody><tr><th>版本</th><th>变更</th></tr>
<tr><td>v10.0.0</td>
<td><p>参数 <code>callback</code> 不再是可选的。 不传入它会在运行时抛出 <code>TypeError</code>。</p></td></tr>
<tr><td>v7.6.0</td>
<td><p>参数 <code>existingPath</code> 和 <code>newPath</code> 可以是使用 <code>file:</code> 协议的 WHATWG <code>URL</code> 对象。 支持目前仍处于实验阶段。</p></td></tr>
<tr><td>v7.0.0</td>
<td><p>参数 <code>callback</code> 不再是可选的。 不传入它将触发 ID 为 DEP0013 的弃用警告。</p></td></tr>
<tr><td>v0.1.31</td>
<td><p><span>新增于: v0.1.31</span></p></td></tr>
</tbody></table>
</details>
</div>
<ul class="">
<li><code>existingPath</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="buffer.html#class-buffer" rel="nofollow" class="type">&lt;Buffer&gt;</a> | <a href="url.html#the-whatwg-url-api" rel="nofollow" class="type">&lt;URL&gt;</a></li>
<li><code>newPath</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="buffer.html#class-buffer" rel="nofollow" class="type">&lt;Buffer&gt;</a> | <a href="url.html#the-whatwg-url-api" rel="nofollow" class="type">&lt;URL&gt;</a></li>
<li><code>callback</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" rel="nofollow" class="type">&lt;Function&gt;</a>
<ul>
<li><code>err</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error" rel="nofollow" class="type">&lt;Error&gt;</a></li>
</ul>
</li>
</ul>
<p>创建从 <code>existingPath</code> 到 <code>newPath</code> 的新链接。
有关更多详细信息，请参阅 POSIX <a href="http://man7.org/linux/man-pages/man2/link.2.html" rel="nofollow"><code>link(2)</code></a> 文档。
除了可能的异常之外，没有为完成回调提供任何参数。</p>
<h4><code>fs.lstat(path[, options], callback)</code><span><a class="mark" href="#fslstatpath-options-callback" id="fslstatpath-options-callback">#</a></span><a aria-hidden="true" class="legacy" id="fs_fs_lstat_path_options_callback"></a></h4><p class="tip_wrap" data-show_trans="1" data-item_id="#fslstatpath-options-callback">
                <a href="fs/fs_lstat_path_options_callback.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<details class="changelog"><summary>版本历史</summary>
<table>
<tbody><tr><th>版本</th><th>变更</th></tr>
<tr><td>v10.5.0</td>
<td><p>接受额外的 <code>options</code> 对象，以指定返回的数字值是否应为长整数。</p></td></tr>
<tr><td>v10.0.0</td>
<td><p>参数 <code>callback</code> 不再是可选的。 不传入它会在运行时抛出 <code>TypeError</code>。</p></td></tr>
<tr><td>v7.6.0</td>
<td><p>参数 <code>path</code> 可以是使用 <code>file:</code> 协议的 WHATWG <code>URL</code> 对象。</p></td></tr>
<tr><td>v7.0.0</td>
<td><p>参数 <code>callback</code> 不再是可选的。 不传入它将触发 ID 为 DEP0013 的弃用警告。</p></td></tr>
<tr><td>v0.1.30</td>
<td><p><span>新增于: v0.1.30</span></p></td></tr>
</tbody></table>
</details>
</div>
<ul class="">
<li><code>path</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="buffer.html#class-buffer" rel="nofollow" class="type">&lt;Buffer&gt;</a> | <a href="url.html#the-whatwg-url-api" rel="nofollow" class="type">&lt;URL&gt;</a></li>
<li><code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" rel="nofollow" class="type">&lt;Object&gt;</a>
<ul>
<li><code>bigint</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" rel="nofollow" class="type">&lt;boolean&gt;</a> 返回的 <a href="#class-fsstats" rel="nofollow" class="type">&lt;fs.Stats&gt;</a> 对象中的数值是否应为 <code>bigint</code>。 <strong>默认值:</strong> <code>false</code>。</li>
</ul>
</li>
<li><code>callback</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" rel="nofollow" class="type">&lt;Function&gt;</a>
<ul>
<li><code>err</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error" rel="nofollow" class="type">&lt;Error&gt;</a></li>
<li><code>stats</code> <a href="#class-fsstats" rel="nofollow" class="type">&lt;fs.Stats&gt;</a></li>
</ul>
</li>
</ul>
<p>获取路径引用的符号链接的 <a href="#class-fsstats" rel="nofollow" class="type">&lt;fs.Stats&gt;</a>。
回调有两个参数 <code>(err, stats)</code>，其中 <code>stats</code> 是 <a href="#class-fsstats" rel="nofollow" class="type">&lt;fs.Stats&gt;</a> 对象。
<code>lstat()</code> 与 <code>stat()</code> 相同，除了如果 <code>path</code> 是符号链接，则被统计的是链接本身，而不是它引用的文件。</p>
<p class="">有关更多详细信息，请参阅 POSIX <a href="http://man7.org/linux/man-pages/man2/lstat.2.html" rel="nofollow"><code>lstat(2)</code></a> 文档。</p>
<h4><code>fs.mkdir(path[, options], callback)</code><span><a class="mark" href="#fsmkdirpath-options-callback" id="fsmkdirpath-options-callback">#</a></span><a aria-hidden="true" class="legacy" id="fs_fs_mkdir_path_options_callback"></a></h4><p class="tip_wrap" data-show_trans="1" data-item_id="#fsmkdirpath-options-callback">
                <a href="fs/fs_mkdir_path_options_callback.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<details class="changelog"><summary>版本历史</summary>
<table>
<tbody><tr><th>版本</th><th>变更</th></tr>
<tr><td>v13.11.0, v12.17.0</td>
<td><p>在 <code>recursive</code> 模式下，回调现在将接收第一个创建的路径作为参数。</p></td></tr>
<tr><td>v10.12.0</td>
<td><p>第二个参数现在可以是具有 <code>recursive</code> 和 <code>mode</code> 属性的 <code>options</code> 对象。</p></td></tr>
<tr><td>v10.0.0</td>
<td><p>参数 <code>callback</code> 不再是可选的。 不传入它会在运行时抛出 <code>TypeError</code>。</p></td></tr>
<tr><td>v7.6.0</td>
<td><p>参数 <code>path</code> 可以是使用 <code>file:</code> 协议的 WHATWG <code>URL</code> 对象。</p></td></tr>
<tr><td>v7.0.0</td>
<td><p>参数 <code>callback</code> 不再是可选的。 不传入它将触发 ID 为 DEP0013 的弃用警告。</p></td></tr>
<tr><td>v0.1.8</td>
<td><p><span>新增于: v0.1.8</span></p></td></tr>
</tbody></table>
</details>
</div>
<ul class="">
<li><code>path</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="buffer.html#class-buffer" rel="nofollow" class="type">&lt;Buffer&gt;</a> | <a href="url.html#the-whatwg-url-api" rel="nofollow" class="type">&lt;URL&gt;</a></li>
<li><code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" rel="nofollow" class="type">&lt;Object&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a>
<ul>
<li><code>recursive</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" rel="nofollow" class="type">&lt;boolean&gt;</a> <strong>默认值:</strong> <code>false</code></li>
<li><code>mode</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a> Windows 上不支持。 <strong>默认值:</strong> <code>0o777</code>。</li>
</ul>
</li>
<li><code>callback</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" rel="nofollow" class="type">&lt;Function&gt;</a>
<ul>
<li><code>err</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error" rel="nofollow" class="type">&lt;Error&gt;</a></li>
</ul>
</li>
</ul>
<p>异步地创建目录。</p>
<p class="">回调给出一个可能的异常和创建的第一个目录路径（如果 <code>recursive</code> 为 <code>true</code>），<code>(err[, path])</code>。
当 <code>recursive</code> 为 <code>true</code> 时，如果没有创建目录，则 <code>path</code> 仍然为 <code>undefined</code>。</p>
<p class="">可选的 <code>options</code> 参数可以是指定 <code>mode</code>（权限和粘性位）的整数，也可以是具有 <code>mode</code> 属性和 <code>recursive</code> 属性（指示是否应创建父目录）的对象。
当 <code>path</code> 是已存在的目录时，调用 <code>fs.mkdir()</code> 仅在 <code>recursive</code> 为 false 时才导致错误。</p>
<pre class=""><code class="language-js mjs"><span class="hljs-keyword">import</span> { mkdir } <span class="hljs-keyword">from</span> <span class="hljs-string">'fs'</span>;

<span class="hljs-comment">// 创建 /tmp/a/apple，不管 `/tmp` 和 /tmp/a 是否存在。</span>
<span class="hljs-title function_">mkdir</span>(<span class="hljs-string">'/tmp/a/apple'</span>, { <span class="hljs-attr">recursive</span>: <span class="hljs-literal">true</span> }, <span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {
  <span class="hljs-keyword">if</span> (err) <span class="hljs-keyword">throw</span> err;
});</code></pre>
<p class="">在 Windows 上，即使使用递归，在根目录上使用 <code>fs.mkdir()</code> 也会导致错误：</p>
<pre class=""><code class="language-js mjs"><span class="hljs-keyword">import</span> { mkdir } <span class="hljs-keyword">from</span> <span class="hljs-string">'fs'</span>;

<span class="hljs-title function_">mkdir</span>(<span class="hljs-string">'/'</span>, { <span class="hljs-attr">recursive</span>: <span class="hljs-literal">true</span> }, <span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {
  <span class="hljs-comment">// =&gt; [Error: EPERM: operation not permitted, mkdir 'C:\']</span>
});</code></pre>
<p class="">有关更多详细信息，请参阅 POSIX <a href="http://man7.org/linux/man-pages/man2/mkdir.2.html" rel="nofollow"><code>mkdir(2)</code></a> 文档。</p>
<h4><code>fs.mkdtemp(prefix[, options], callback)</code><span><a class="mark" href="#fsmkdtempprefix-options-callback" id="fsmkdtempprefix-options-callback">#</a></span><a aria-hidden="true" class="legacy" id="fs_fs_mkdtemp_prefix_options_callback"></a></h4><p class="tip_wrap" data-show_trans="1" data-item_id="#fsmkdtempprefix-options-callback">
                <a href="fs/fs_mkdtemp_prefix_options_callback.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<details class="changelog"><summary>版本历史</summary>
<table>
<tbody><tr><th>版本</th><th>变更</th></tr>
<tr><td>v16.5.0</td>
<td><p>参数 <code>prefix</code> 现在接受空字符串。</p></td></tr>
<tr><td>v10.0.0</td>
<td><p>参数 <code>callback</code> 不再是可选的。 不传入它会在运行时抛出 <code>TypeError</code>。</p></td></tr>
<tr><td>v7.0.0</td>
<td><p>参数 <code>callback</code> 不再是可选的。 不传入它将触发 ID 为 DEP0013 的弃用警告。</p></td></tr>
<tr><td>v6.2.1</td>
<td><p>参数 <code>callback</code> 现在是可选的。</p></td></tr>
<tr><td>v5.10.0</td>
<td><p><span>新增于: v5.10.0</span></p></td></tr>
</tbody></table>
</details>
</div>
<ul class="">
<li><code>prefix</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a></li>
<li><code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" rel="nofollow" class="type">&lt;Object&gt;</a>
<ul>
<li><code>encoding</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> <strong>默认值:</strong> <code>'utf8'</code></li>
</ul>
</li>
<li><code>callback</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" rel="nofollow" class="type">&lt;Function&gt;</a>
<ul>
<li><code>err</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error" rel="nofollow" class="type">&lt;Error&gt;</a></li>
<li><code>directory</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a></li>
</ul>
</li>
</ul>
<p>创建唯一的临时目录。</p>
<p class="">生成六个随机字符，附加在所需的 <code>prefix</code> 后面以创建唯一的临时目录。
由于平台的不一致，请避免在 <code>prefix</code> 中尾随 <code>X</code> 字符。
某些平台，尤其是 BSD，可能返回六个以上的随机字符，并将 <code>prefix</code> 中的尾随 <code>X</code> 字符替换为随机字符。</p>
<p class="">创建的目录路径作为字符串传递给回调的第二个参数。</p>
<p class="">可选的 <code>options</code> 参数可以是指定编码的字符串，也可以是具有 <code>encoding</code> 属性（指定要使用的字符编码）的对象。</p>
<pre class=""><code class="language-js mjs"><span class="hljs-keyword">import</span> { mkdtemp } <span class="hljs-keyword">from</span> <span class="hljs-string">'fs'</span>;

<span class="hljs-title function_">mkdtemp</span>(path.<span class="hljs-title function_">join</span>(os.<span class="hljs-title function_">tmpdir</span>(), <span class="hljs-string">'foo-'</span>), <span class="hljs-function">(<span class="hljs-params">err, directory</span>) =&gt;</span> {
  <span class="hljs-keyword">if</span> (err) <span class="hljs-keyword">throw</span> err;
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(directory);
  <span class="hljs-comment">// 打印: /tmp/foo-itXde2 or C:\Users\...\AppData\Local\Temp\foo-itXde2</span>
});</code></pre>
<p class=""><code>fs.mkdtemp()</code> 方法会将六个随机选择的字符直接附加到 <code>prefix</code> 字符串。
例如，给定目录 <code>/tmp</code>，如果要在 <code>/tmp</code> 内创建临时目录，则 <code>prefix</code> 必须以平台特定的尾随路径分隔符（<code>require('path').sep</code>）结尾。</p>
<pre class=""><code class="language-js mjs"><span class="hljs-keyword">import</span> { tmpdir } <span class="hljs-keyword">from</span> <span class="hljs-string">'os'</span>;
<span class="hljs-keyword">import</span> { mkdtemp } <span class="hljs-keyword">from</span> <span class="hljs-string">'fs'</span>;

<span class="hljs-comment">// 新临时目录的父目录</span>
<span class="hljs-keyword">const</span> tmpDir = <span class="hljs-title function_">tmpdir</span>();

<span class="hljs-comment">// 这个方法是*不正确的*：</span>
<span class="hljs-title function_">mkdtemp</span>(tmpDir, <span class="hljs-function">(<span class="hljs-params">err, directory</span>) =&gt;</span> {
  <span class="hljs-keyword">if</span> (err) <span class="hljs-keyword">throw</span> err;
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(directory);
  <span class="hljs-comment">// 将打印类似于 `/tmpabc123` 的内容。</span>
  <span class="hljs-comment">// 在文件系统根目录创建一个新的临时目录，而不是在 /tmp 目录中。</span>
});

<span class="hljs-comment">// 这个方法是*正确的*：</span>
<span class="hljs-keyword">import</span> { sep } <span class="hljs-keyword">from</span> <span class="hljs-string">'path'</span>;
<span class="hljs-title function_">mkdtemp</span>(<span class="hljs-string">`<span class="hljs-subst">${tmpDir}</span><span class="hljs-subst">${sep}</span>`</span>, <span class="hljs-function">(<span class="hljs-params">err, directory</span>) =&gt;</span> {
  <span class="hljs-keyword">if</span> (err) <span class="hljs-keyword">throw</span> err;
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(directory);
  <span class="hljs-comment">// 将打印类似于 `/tmp/abc123` 的内容。</span>
  <span class="hljs-comment">// 在 /tmp 目录中创建一个新的临时目录。</span>
});</code></pre>
<h4><code>fs.open(path[, flags[, mode]], callback)</code><span><a class="mark" href="#fsopenpath-flags-mode-callback" id="fsopenpath-flags-mode-callback">#</a></span><a aria-hidden="true" class="legacy" id="fs_fs_open_path_flags_mode_callback"></a></h4><p class="tip_wrap" data-show_trans="1" data-item_id="#fsopenpath-flags-mode-callback">
                <a href="fs/fs_open_path_flags_mode_callback.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<details class="changelog"><summary>版本历史</summary>
<table>
<tbody><tr><th>版本</th><th>变更</th></tr>
<tr><td>v11.1.0</td>
<td><p>参数 <code>flags</code> 现在是可选的，默认为 <code>'r'</code>。</p></td></tr>
<tr><td>v9.9.0</td>
<td><p>现在支持 <code>as</code> 和 <code>as+</code> 标志。</p></td></tr>
<tr><td>v7.6.0</td>
<td><p>参数 <code>path</code> 可以是使用 <code>file:</code> 协议的 WHATWG <code>URL</code> 对象。</p></td></tr>
<tr><td>v0.0.2</td>
<td><p><span>新增于: v0.0.2</span></p></td></tr>
</tbody></table>
</details>
</div>
<ul class="">
<li><code>path</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="buffer.html#class-buffer" rel="nofollow" class="type">&lt;Buffer&gt;</a> | <a href="url.html#the-whatwg-url-api" rel="nofollow" class="type">&lt;URL&gt;</a></li>
<li><code>flags</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;number&gt;</a> 请参阅<a href="#file-system-flags">对文件系统 <code>flags</code> 的支持</a>。
<strong>默认值:</strong> <code>'r'</code>。</li>
<li><code>mode</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a> <strong>默认值:</strong> <code>0o666</code> （可读可写）</li>
<li><code>callback</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" rel="nofollow" class="type">&lt;Function&gt;</a>
<ul>
<li><code>err</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error" rel="nofollow" class="type">&lt;Error&gt;</a></li>
<li><code>fd</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a></li>
</ul>
</li>
</ul>
<p>异步地打开文件。
有关更多详细信息，请参阅 POSIX <a href="http://man7.org/linux/man-pages/man2/open.2.html" rel="nofollow"><code>open(2)</code></a> 文档。</p>
<p class=""><code>mode</code> 设置文件模式（权限和粘滞位），但前提是文件已创建。
在 Windows 上，只能操作写入权限；请参阅 <a href="#fschmodpath-mode-callback"><code>fs.chmod()</code></a>。</p>
<p class="">回调有两个参数 <code>(err, fd)</code>。</p>
<p class="">在 Windows 上预留了一些字符（<code>&lt; &gt; : " / \ | ? *</code>），如<a href="https://docs.microsoft.com/en-us/windows/desktop/FileIO/naming-a-file" rel="nofollow">命名文件、路径和命名空间</a>所记录。
在 NTFS 下，如果文件名包含冒号，则 Node.js 将打开文件系统流，如<a href="https://docs.microsoft.com/en-us/windows/desktop/FileIO/using-streams" rel="nofollow">此 MSDN 页面</a>所述。</p>
<p class="">基于 <code>fs.open()</code> 的函数也表现出这种行为：<code>fs.writeFile()</code>、<code>fs.readFile()</code> 等。</p>
<h4><code>fs.opendir(path[, options], callback)</code><span><a class="mark" href="#fsopendirpath-options-callback" id="fsopendirpath-options-callback">#</a></span><a aria-hidden="true" class="legacy" id="fs_fs_opendir_path_options_callback"></a></h4><p class="tip_wrap" data-show_trans="1" data-item_id="#fsopendirpath-options-callback">
                <a href="fs/fs_opendir_path_options_callback.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<details class="changelog"><summary>版本历史</summary>
<table>
<tbody><tr><th>版本</th><th>变更</th></tr>
<tr><td>v13.1.0, v12.16.0</td>
<td><p>引入了 <code>bufferSize</code> 选项。</p></td></tr>
<tr><td>v12.12.0</td>
<td><p><span>新增于: v12.12.0</span></p></td></tr>
</tbody></table>
</details>
</div>
<ul class="">
<li><code>path</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="buffer.html#class-buffer" rel="nofollow" class="type">&lt;Buffer&gt;</a> | <a href="url.html#the-whatwg-url-api" rel="nofollow" class="type">&lt;URL&gt;</a></li>
<li><code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" rel="nofollow" class="type">&lt;Object&gt;</a>
<ul>
<li><code>encoding</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Null_type" rel="nofollow" class="type">&lt;null&gt;</a> <strong>默认值:</strong> <code>'utf8'</code></li>
<li><code>bufferSize</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;number&gt;</a> 当从目录读取时，在内部缓冲的目录条目数。
值越大，性能越好，但内存使用率越高。 <strong>默认值:</strong> <code>32</code></li>
</ul>
</li>
<li><code>callback</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" rel="nofollow" class="type">&lt;Function&gt;</a>
<ul>
<li><code>err</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error" rel="nofollow" class="type">&lt;Error&gt;</a></li>
<li><code>dir</code> <a href="#class-fsdir" rel="nofollow" class="type">&lt;fs.Dir&gt;</a></li>
</ul>
</li>
</ul>
<p>异步地打开目录。
有关更多详细信息，请参阅 POSIX <a href="http://man7.org/linux/man-pages/man3/opendir.3.html" rel="nofollow"><code>opendir(3)</code></a> 文档。</p>
<p class="">创建 <a href="#class-fsdir" rel="nofollow" class="type">&lt;fs.Dir&gt;</a>，其中包含用于从目录读取和清理目录的所有进一步的函数。</p>
<p class=""><code>encoding</code> 选项设置在打开目录和随后的读取操作时 <code>path</code> 的编码。</p>
<h4><code>fs.read(fd, buffer, offset, length, position, callback)</code><span><a class="mark" href="#fsreadfd-buffer-offset-length-position-callback" id="fsreadfd-buffer-offset-length-position-callback">#</a></span><a aria-hidden="true" class="legacy" id="fs_fs_read_fd_buffer_offset_length_position_callback"></a></h4><p class="tip_wrap" data-show_trans="1" data-item_id="#fsreadfd-buffer-offset-length-position-callback">
                <a href="fs/fs_read_fd_buffer_offset_length_position_callback.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<details class="changelog"><summary>版本历史</summary>
<table>
<tbody><tr><th>版本</th><th>变更</th></tr>
<tr><td>v10.10.0</td>
<td><p>参数 <code>buffer</code> 现在可以是任何 <code>TypedArray</code> 或 <code>DataView</code>。</p></td></tr>
<tr><td>v7.4.0</td>
<td><p>参数 <code>buffer</code> 现在可以是 <code>Uint8Array</code>。</p></td></tr>
<tr><td>v6.0.0</td>
<td><p>参数 <code>length</code> 现在可以为 <code>0</code>。</p></td></tr>
<tr><td>v0.0.2</td>
<td><p><span>新增于: v0.0.2</span></p></td></tr>
</tbody></table>
</details>
</div>
<ul class="">
<li><code>fd</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a></li>
<li><code>buffer</code> <a href="buffer.html#class-buffer" rel="nofollow" class="type">&lt;Buffer&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/TypedArray" rel="nofollow" class="type">&lt;TypedArray&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/DataView" rel="nofollow" class="type">&lt;DataView&gt;</a> 数据将写入的缓冲区。</li>
<li><code>offset</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a> 要写入数据的 <code>buffer</code> 中的位置。</li>
<li><code>length</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a> 读取的字节数。</li>
<li><code>position</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/BigInt" rel="nofollow" class="type">&lt;bigint&gt;</a> 指定从文件中开始读取的位置。
如果 <code>position</code> 为 <code>null</code> 或 <code>-1 </code>，则将从当前文件位置读取数据，并更新文件位置。
如果 <code>position</code> 是整数，则文件位置将保持不变。</li>
<li><code>callback</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" rel="nofollow" class="type">&lt;Function&gt;</a>
<ul>
<li><code>err</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error" rel="nofollow" class="type">&lt;Error&gt;</a></li>
<li><code>bytesRead</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a></li>
<li><code>buffer</code> <a href="buffer.html#class-buffer" rel="nofollow" class="type">&lt;Buffer&gt;</a></li>
</ul>
</li>
</ul>
<p>从 <code>fd</code> 指定的文件中读取数据。</p>
<p class="">回调被赋予三个参数，<code>(err, bytesRead, buffer)</code>。</p>
<p class="">如果未同时修改文件，当读取的字节数为零时，则到达文件末尾。</p>
<p class="">如果此方法作为其 <a href="util.html#utilpromisifyoriginal"><code>util.promisify()</code></a> 版本被调用，则返回具有 <code>bytesRead</code> 和 <code>buffer</code> 属性的 <code>Object</code> 的 promise。</p>
<h4><code>fs.read(fd, [options,] callback)</code><span><a class="mark" href="#fsreadfd-options-callback" id="fsreadfd-options-callback">#</a></span><a aria-hidden="true" class="legacy" id="fs_fs_read_fd_options_callback"></a></h4><p class="tip_wrap" data-show_trans="1" data-item_id="#fsreadfd-options-callback">
                <a href="fs/fs_read_fd_options_callback.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<details class="changelog"><summary>版本历史</summary>
<table>
<tbody><tr><th>版本</th><th>变更</th></tr>
<tr><td>v13.11.0, v12.17.0</td>
<td><p><span>新增于: v13.11.0, v12.17.0</span></p></td></tr>
<tr><td>v13.11.0, v12.17.0</td>
<td><p>可以传入选项对象，使缓冲区、偏移量、长度、以及位置可选。</p></td></tr>
</tbody></table>
</details>
</div>
<ul class="">
<li><code>fd</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a></li>
<li><code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" rel="nofollow" class="type">&lt;Object&gt;</a>
<ul>
<li><code>buffer</code> <a href="buffer.html#class-buffer" rel="nofollow" class="type">&lt;Buffer&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/TypedArray" rel="nofollow" class="type">&lt;TypedArray&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/DataView" rel="nofollow" class="type">&lt;DataView&gt;</a> <strong>默认值:</strong> <code>Buffer.alloc(16384)</code></li>
<li><code>offset</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a> <strong>默认值:</strong> <code>0</code></li>
<li><code>length</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a> <strong>默认值:</strong> <code>buffer.byteLength - offset</code></li>
<li><code>position</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/BigInt" rel="nofollow" class="type">&lt;bigint&gt;</a> <strong>默认值:</strong> <code>null</code></li>
</ul>
</li>
<li><code>callback</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" rel="nofollow" class="type">&lt;Function&gt;</a>
<ul>
<li><code>err</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error" rel="nofollow" class="type">&lt;Error&gt;</a></li>
<li><code>bytesRead</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a></li>
<li><code>buffer</code> <a href="buffer.html#class-buffer" rel="nofollow" class="type">&lt;Buffer&gt;</a></li>
</ul>
</li>
</ul>
<p>与 <a href="#fsreadfd-buffer-offset-length-position-callback"><code>fs.read()</code></a> 函数类似，此版本采用可选的 <code>options</code> 对象。
如果未指定 <code>options</code> 对象，则默认使用上述值。</p>
<h4><code>fs.readdir(path[, options], callback)</code><span><a class="mark" href="#fsreaddirpath-options-callback" id="fsreaddirpath-options-callback">#</a></span><a aria-hidden="true" class="legacy" id="fs_fs_readdir_path_options_callback"></a></h4><p class="tip_wrap" data-show_trans="1" data-item_id="#fsreaddirpath-options-callback">
                <a href="fs/fs_readdir_path_options_callback.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<details class="changelog"><summary>版本历史</summary>
<table>
<tbody><tr><th>版本</th><th>变更</th></tr>
<tr><td>v10.10.0</td>
<td><p>添加了新选项 <code>withFileTypes</code>。</p></td></tr>
<tr><td>v10.0.0</td>
<td><p>参数 <code>callback</code> 不再是可选的。 不传入它会在运行时抛出 <code>TypeError</code>。</p></td></tr>
<tr><td>v7.6.0</td>
<td><p>参数 <code>path</code> 可以是使用 <code>file:</code> 协议的 WHATWG <code>URL</code> 对象。</p></td></tr>
<tr><td>v7.0.0</td>
<td><p>参数 <code>callback</code> 不再是可选的。 不传入它将触发 ID 为 DEP0013 的弃用警告。</p></td></tr>
<tr><td>v6.0.0</td>
<td><p>添加了 <code>options</code> 参数。</p></td></tr>
<tr><td>v0.1.8</td>
<td><p><span>新增于: v0.1.8</span></p></td></tr>
</tbody></table>
</details>
</div>
<ul class="">
<li><code>path</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="buffer.html#class-buffer" rel="nofollow" class="type">&lt;Buffer&gt;</a> | <a href="url.html#the-whatwg-url-api" rel="nofollow" class="type">&lt;URL&gt;</a></li>
<li><code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" rel="nofollow" class="type">&lt;Object&gt;</a>
<ul>
<li><code>encoding</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> <strong>默认值:</strong> <code>'utf8'</code></li>
<li><code>withFileTypes</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" rel="nofollow" class="type">&lt;boolean&gt;</a> <strong>默认值:</strong> <code>false</code></li>
</ul>
</li>
<li><code>callback</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" rel="nofollow" class="type">&lt;Function&gt;</a>
<ul>
<li><code>err</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error" rel="nofollow" class="type">&lt;Error&gt;</a></li>
<li><code>files</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string[]&gt;</a> | <a href="buffer.html#class-buffer" rel="nofollow" class="type">&lt;Buffer[]&gt;</a> | <a href="#class-fsdirent" rel="nofollow" class="type">&lt;fs.Dirent[]&gt;</a></li>
</ul>
</li>
</ul>
<p>读取目录的内容。
回调有两个参数 <code>(err, files)</code>，其中 <code>files</code> 是目录中文件名的数组，不包括 <code>'.'</code> 和 <code>'..'</code>。</p>
<p class="">有关更多详细信息，请参阅 POSIX <a href="http://man7.org/linux/man-pages/man3/readdir.3.html" rel="nofollow"><code>readdir(3)</code></a> 文档。</p>
<p class="">可选的 <code>options</code> 参数可以是指定编码的字符串，也可以是具有 <code>encoding</code> 属性（指定用于传给回调的文件名的字符编码）的对象。
如果 <code>encoding</code> 设置为 <code>'buffer'</code>，则返回的文件名将作为 <a href="buffer.html#class-buffer" rel="nofollow" class="type">&lt;Buffer&gt;</a> 对象传入。</p>
<p class="">如果 <code>options.withFileTypes</code> 设置为 <code>true</code>，则 <code>files</code> 数组将包含 <a href="#class-fsdirent" rel="nofollow" class="type">&lt;fs.Dirent&gt;</a> 对象。</p>
<h4><code>fs.readFile(path[, options], callback)</code><span><a class="mark" href="#fsreadfilepath-options-callback" id="fsreadfilepath-options-callback">#</a></span><a aria-hidden="true" class="legacy" id="fs_fs_readfile_path_options_callback"></a></h4><p class="tip_wrap" data-show_trans="1" data-item_id="#fsreadfilepath-options-callback">
                <a href="fs/fs_readfile_path_options_callback.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<details class="changelog"><summary>版本历史</summary>
<table>
<tbody><tr><th>版本</th><th>变更</th></tr>
<tr><td>v16.0.0</td>
<td><p>如果返回多个错误，则返回的错误可能是 <code>AggregateError</code>。</p></td></tr>
<tr><td>v15.2.0</td>
<td><p>选项参数可以包含中止信号，以中止正在进行的读取文件请求。</p></td></tr>
<tr><td>v10.0.0</td>
<td><p>参数 <code>callback</code> 不再是可选的。 不传入它会在运行时抛出 <code>TypeError</code>。</p></td></tr>
<tr><td>v7.6.0</td>
<td><p>参数 <code>path</code> 可以是使用 <code>file:</code> 协议的 WHATWG <code>URL</code> 对象。</p></td></tr>
<tr><td>v7.0.0</td>
<td><p>参数 <code>callback</code> 不再是可选的。 不传入它将触发 ID 为 DEP0013 的弃用警告。</p></td></tr>
<tr><td>v5.1.0</td>
<td><p>如果成功，<code>callback</code> 将始终以 <code>null</code> 作为 <code>error</code> 参数调用。</p></td></tr>
<tr><td>v5.0.0</td>
<td><p>参数 <code>path</code> 现在可以是文件描述符。</p></td></tr>
<tr><td>v0.1.29</td>
<td><p><span>新增于: v0.1.29</span></p></td></tr>
</tbody></table>
</details>
</div>
<ul class="">
<li><code>path</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="buffer.html#class-buffer" rel="nofollow" class="type">&lt;Buffer&gt;</a> | <a href="url.html#the-whatwg-url-api" rel="nofollow" class="type">&lt;URL&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a> 文件名或文件描述符</li>
<li><code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" rel="nofollow" class="type">&lt;Object&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a>
<ul>
<li><code>encoding</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Null_type" rel="nofollow" class="type">&lt;null&gt;</a> <strong>默认值:</strong> <code>null</code></li>
<li><code>flag</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> 请参阅<a href="#file-system-flags">对文件系统 <code>flags</code> 的支持</a>。 <strong>默认值:</strong> <code>'r'</code>。</li>
<li><code>signal</code> <a href="globals.html#class-abortsignal" rel="nofollow" class="type">&lt;AbortSignal&gt;</a> 允许中止正在进行的读取文件</li>
</ul>
</li>
<li><code>callback</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" rel="nofollow" class="type">&lt;Function&gt;</a>
<ul>
<li><code>err</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error" rel="nofollow" class="type">&lt;Error&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/AggregateError" rel="nofollow" class="type">&lt;AggregateError&gt;</a></li>
<li><code>data</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="buffer.html#class-buffer" rel="nofollow" class="type">&lt;Buffer&gt;</a></li>
</ul>
</li>
</ul>
<p>异步地读取文件的全部内容。</p>
<pre class=""><code class="language-js mjs"><span class="hljs-keyword">import</span> { readFile } <span class="hljs-keyword">from</span> <span class="hljs-string">'fs'</span>;

<span class="hljs-title function_">readFile</span>(<span class="hljs-string">'/etc/passwd'</span>, <span class="hljs-function">(<span class="hljs-params">err, data</span>) =&gt;</span> {
  <span class="hljs-keyword">if</span> (err) <span class="hljs-keyword">throw</span> err;
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(data);
});</code></pre>
<p class="">回调传入了两个参数 <code>(err, data)</code>，其中 <code>data</code> 是文件的内容。</p>
<p class="">如果未指定编码，则返回原始缓冲区。</p>
<p class="">如果 <code>options</code> 是字符串，则它指定编码：</p>
<pre class=""><code class="language-js mjs"><span class="hljs-keyword">import</span> { readFile } <span class="hljs-keyword">from</span> <span class="hljs-string">'fs'</span>;

<span class="hljs-title function_">readFile</span>(<span class="hljs-string">'/etc/passwd'</span>, <span class="hljs-string">'utf8'</span>, callback);</code></pre>
<p class="">当路径是目录时，<code>fs.readFile()</code> 和 <a href="#fsreadfilesyncpath-options"><code>fs.readFileSync()</code></a> 的行为是特定于平台的。
在 macOS、Linux 和 Windows 上，将返回错误。
在 FreeBSD 上，将返回目录内容的表示。</p>
<pre class=""><code class="language-js mjs"><span class="hljs-keyword">import</span> { readFile } <span class="hljs-keyword">from</span> <span class="hljs-string">'fs'</span>;

<span class="hljs-comment">// macOS、Linux 和 Windows</span>
<span class="hljs-title function_">readFile</span>(<span class="hljs-string">'&lt;directory&gt;'</span>, <span class="hljs-function">(<span class="hljs-params">err, data</span>) =&gt;</span> {
  <span class="hljs-comment">// =&gt; [Error: EISDIR: illegal operation on a directory, read &lt;directory&gt;]</span>
});

<span class="hljs-comment">//  FreeBSD</span>
<span class="hljs-title function_">readFile</span>(<span class="hljs-string">'&lt;directory&gt;'</span>, <span class="hljs-function">(<span class="hljs-params">err, data</span>) =&gt;</span> {
  <span class="hljs-comment">// =&gt; null, &lt;data&gt;</span>
});</code></pre>
<p class="">可以使用 <code>AbortSignal</code> 中止正在进行的请求。
如果请求被中止，回调将被使用 <code>AbortError</code> 调用：</p>
<pre class=""><code class="language-js mjs"><span class="hljs-keyword">import</span> { readFile } <span class="hljs-keyword">from</span> <span class="hljs-string">'fs'</span>;

<span class="hljs-keyword">const</span> controller = <span class="hljs-keyword">new</span> <span class="hljs-title class_">AbortController</span>();
<span class="hljs-keyword">const</span> signal = controller.<span class="hljs-property">signal</span>;
<span class="hljs-title function_">readFile</span>(fileInfo[<span class="hljs-number">0</span>].<span class="hljs-property">name</span>, { signal }, <span class="hljs-function">(<span class="hljs-params">err, buf</span>) =&gt;</span> {
  <span class="hljs-comment">// ...</span>
});
<span class="hljs-comment">// 当想中止请求时</span>
controller.<span class="hljs-title function_">abort</span>();</code></pre>
<p class=""><code>fs.readFile()</code> 函数缓冲整个文件。
为了最小化内存成本，在可能的情况下优先通过 <code>fs.createReadStream()</code> 进行流式传输。</p>
<p class="">中止正在进行的请求不会中止单个操作系统请求，而是中止内部缓冲的 <code>fs.readFile</code> 执行。</p>
<h5>文件描述符<span><a class="mark" href="#file-descriptors" id="file-descriptors">#</a></span><a aria-hidden="true" class="legacy" id="fs_file_descriptors"></a></h5><p class="tip_wrap" data-show_trans="1" data-item_id="#file-descriptors">
                <a href="fs/file_descriptors.html" class="tip_trans">中英对照</a>
                </p>
<ol class="">
<li>任何指定的文件描述符都必须支持读取。</li>
<li>如果将文件描述符指定为 <code>path</code>，则它将不会自动关闭。</li>
<li>读数将从当前位置开始。
例如，如果文件已经具有 <code>'Hello World'</code> 并且使用文件描述符读取了六个字节，则使用相同文件描述符对 <code>fs.readFile()</code> 的调用将得到 <code>'World'</code>，而不是 <code>'Hello World'</code>。</li>
</ol>
<h5>性能考量<span><a class="mark" href="#performance-considerations" id="performance-considerations">#</a></span><a aria-hidden="true" class="legacy" id="fs_performance_considerations"></a></h5><p class="tip_wrap" data-show_trans="1" data-item_id="#performance-considerations">
                <a href="fs/performance_considerations.html" class="tip_trans">中英对照</a>
                </p>
<p><code>fs.readFile()</code> 方法每次一块地异步读取文件内容到内存中，允许事件循环在每个块之间转换。
这允许读取操作对可能使用底层 libuv 线程池的其他活动的影响较小，但意味着将完整文件读入内存需要更长的时间。</p>
<p class="">额外的读取开销在不同的系统上可能会有很大差异，并且取决于正在读取的文件类型。
如果文件类型不是常规的文件（例如管道），并且 Node.js 无法确定实际的文件大小，则每次读取操作将加载 64 KB 的数据。
对于常规的文件，每次读取将处理 512 KB 的数据。</p>
<p class="">对于需要尽可能快地读取文件内容的应用程序，最好直接使用 <code>fs.read()</code> 并让应用程序代码管理读取文件本身的全部内容。</p>
<p class="">Node.js GitHub 问题 <a href="https://github.com/nodejs/node/issues/25741" rel="nofollow">#25741</a> 提供了有关不同 Node.js 版本中多个文件大小的 <code>fs.readFile()</code> 性能的详细信息和详细分析。</p>
<h4><code>fs.readlink(path[, options], callback)</code><span><a class="mark" href="#fsreadlinkpath-options-callback" id="fsreadlinkpath-options-callback">#</a></span><a aria-hidden="true" class="legacy" id="fs_fs_readlink_path_options_callback"></a></h4><p class="tip_wrap" data-show_trans="1" data-item_id="#fsreadlinkpath-options-callback">
                <a href="fs/fs_readlink_path_options_callback.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<details class="changelog"><summary>版本历史</summary>
<table>
<tbody><tr><th>版本</th><th>变更</th></tr>
<tr><td>v10.0.0</td>
<td><p>参数 <code>callback</code> 不再是可选的。 不传入它会在运行时抛出 <code>TypeError</code>。</p></td></tr>
<tr><td>v7.6.0</td>
<td><p>参数 <code>path</code> 可以是使用 <code>file:</code> 协议的 WHATWG <code>URL</code> 对象。</p></td></tr>
<tr><td>v7.0.0</td>
<td><p>参数 <code>callback</code> 不再是可选的。 不传入它将触发 ID 为 DEP0013 的弃用警告。</p></td></tr>
<tr><td>v0.1.31</td>
<td><p><span>新增于: v0.1.31</span></p></td></tr>
</tbody></table>
</details>
</div>
<ul class="">
<li><code>path</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="buffer.html#class-buffer" rel="nofollow" class="type">&lt;Buffer&gt;</a> | <a href="url.html#the-whatwg-url-api" rel="nofollow" class="type">&lt;URL&gt;</a></li>
<li><code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" rel="nofollow" class="type">&lt;Object&gt;</a>
<ul>
<li><code>encoding</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> <strong>默认值:</strong> <code>'utf8'</code></li>
</ul>
</li>
<li><code>callback</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" rel="nofollow" class="type">&lt;Function&gt;</a>
<ul>
<li><code>err</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error" rel="nofollow" class="type">&lt;Error&gt;</a></li>
<li><code>linkString</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="buffer.html#class-buffer" rel="nofollow" class="type">&lt;Buffer&gt;</a></li>
</ul>
</li>
</ul>
<p>读取 <code>path</code> 引用的符号链接的内容。
回调有两个参数 <code>(err, linkString)</code>。</p>
<p class="">有关更多详细信息，请参阅 POSIX <a href="http://man7.org/linux/man-pages/man2/readlink.2.html" rel="nofollow"><code>readlink(2)</code></a> 文档。</p>
<p class="">可选的 <code>options</code> 参数可以是指定编码的字符串，也可以是具有 <code>encoding</code> 属性（指定用于传给回调的链接路径的字符编码）的对象。
如果将 <code>encoding</code> 设置为 <code>'buffer'</code>，则返回的链接路径将作为 <a href="buffer.html#class-buffer" rel="nofollow" class="type">&lt;Buffer&gt;</a> 对象传入。</p>
<h4><code>fs.readv(fd, buffers[, position], callback)</code><span><a class="mark" href="#fsreadvfd-buffers-position-callback" id="fsreadvfd-buffers-position-callback">#</a></span><a aria-hidden="true" class="legacy" id="fs_fs_readv_fd_buffers_position_callback"></a></h4><p class="tip_wrap" data-show_trans="1" data-item_id="#fsreadvfd-buffers-position-callback">
                <a href="fs/fs_readv_fd_buffers_position_callback.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>新增于: v13.13.0, v12.17.0</span>
</div>
<ul class="">
<li><code>fd</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a></li>
<li><code>buffers</code> <a href="https://developer.mozilla.org/en-US/docs/Web/API/ArrayBufferView" rel="nofollow" class="type">&lt;ArrayBufferView[]&gt;</a></li>
<li><code>position</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a></li>
<li><code>callback</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" rel="nofollow" class="type">&lt;Function&gt;</a>
<ul>
<li><code>err</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error" rel="nofollow" class="type">&lt;Error&gt;</a></li>
<li><code>bytesRead</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a></li>
<li><code>buffers</code> <a href="https://developer.mozilla.org/en-US/docs/Web/API/ArrayBufferView" rel="nofollow" class="type">&lt;ArrayBufferView[]&gt;</a></li>
</ul>
</li>
</ul>
<p>从 <code>fd</code> 指定的文件中读取并使用 <code>readv()</code> 写入 <code>ArrayBufferView</code> 数组。</p>
<p class=""><code>position</code> 是从文件开头应该读取数据的偏移量。
如果 <code>typeof position !== 'number'</code>，则从当前位置读取数据。</p>
<p class="">回调将被赋予三个参数：<code>err</code>、<code>bytesRead</code> 和 <code>buffers</code>。
<code>bytesRead</code> 是从文件中读取的字节数。</p>
<p class="">如果此方法作为其 <a href="util.html#utilpromisifyoriginal"><code>util.promisify()</code></a> 版本被调用，则返回具有 <code>bytesRead</code> 和 <code>buffers</code> 属性的 <code>Object</code> 的 promise。</p>
<h4><code>fs.realpath(path[, options], callback)</code><span><a class="mark" href="#fsrealpathpath-options-callback" id="fsrealpathpath-options-callback">#</a></span><a aria-hidden="true" class="legacy" id="fs_fs_realpath_path_options_callback"></a></h4><p class="tip_wrap" data-show_trans="1" data-item_id="#fsrealpathpath-options-callback">
                <a href="fs/fs_realpath_path_options_callback.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<details class="changelog"><summary>版本历史</summary>
<table>
<tbody><tr><th>版本</th><th>变更</th></tr>
<tr><td>v10.0.0</td>
<td><p>参数 <code>callback</code> 不再是可选的。 不传入它会在运行时抛出 <code>TypeError</code>。</p></td></tr>
<tr><td>v8.0.0</td>
<td><p>添加了管道/套接字解析支持。</p></td></tr>
<tr><td>v7.6.0</td>
<td><p>参数 <code>path</code> 可以是使用 <code>file:</code> 协议的 WHATWG <code>URL</code> 对象。</p></td></tr>
<tr><td>v7.0.0</td>
<td><p>参数 <code>callback</code> 不再是可选的。 不传入它将触发 ID 为 DEP0013 的弃用警告。</p></td></tr>
<tr><td>v6.4.0</td>
<td><p>调用 <code>realpath</code> 现在再次适用于 Windows 上的各种边缘情况。</p></td></tr>
<tr><td>v6.0.0</td>
<td><p>参数 <code>cache</code> 已删除。</p></td></tr>
<tr><td>v0.1.31</td>
<td><p><span>新增于: v0.1.31</span></p></td></tr>
</tbody></table>
</details>
</div>
<ul class="">
<li><code>path</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="buffer.html#class-buffer" rel="nofollow" class="type">&lt;Buffer&gt;</a> | <a href="url.html#the-whatwg-url-api" rel="nofollow" class="type">&lt;URL&gt;</a></li>
<li><code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" rel="nofollow" class="type">&lt;Object&gt;</a>
<ul>
<li><code>encoding</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> <strong>默认值:</strong> <code>'utf8'</code></li>
</ul>
</li>
<li><code>callback</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" rel="nofollow" class="type">&lt;Function&gt;</a>
<ul>
<li><code>err</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error" rel="nofollow" class="type">&lt;Error&gt;</a></li>
<li><code>resolvedPath</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="buffer.html#class-buffer" rel="nofollow" class="type">&lt;Buffer&gt;</a></li>
</ul>
</li>
</ul>
<p>通过解析 <code>.</code>、<code>..</code> 和符号链接异步地计算规范路径名。</p>
<p class="">规范路径名不一定是唯一的。
硬链接和绑定挂载可以通过许多路径名暴露文件系统实体。</p>
<p class="">此函数的行为类似于 <a href="http://man7.org/linux/man-pages/man3/realpath.3.html" rel="nofollow"><code>realpath(3)</code></a>，但有一些例外：</p>
<ol class="">
<li>
<p>在不区分大小写的文件系统上不执行大小写转换。</p>
</li>
<li>
<p>符号链接的最大数量与平台无关，并且通常（远）高于原生 <a href="http://man7.org/linux/man-pages/man3/realpath.3.html" rel="nofollow"><code>realpath(3)</code></a> 实现支持的数量。</p>
</li>
</ol>
<p class=""><code>callback</code> 有两个参数 <code>(err, resolvedPath)</code>。
可以使用 <code>process.cwd</code> 来解析相对路径。</p>
<p class="">仅支持可以转换为 UTF8 字符串的路径。</p>
<p class="">可选的 <code>options</code> 参数可以是指定编码的字符串，也可以是具有 <code>encoding</code> 属性（指定用于传给回调的路径的字符编码）的对象。
如果 <code>encoding</code> 设置为 <code>'buffer'</code>，则返回的路径将作为 <a href="buffer.html#class-buffer" rel="nofollow" class="type">&lt;Buffer&gt;</a> 对象传入。</p>
<p class="">如果 <code>path</code> 解析为套接字或管道，则该函数将返回该对象的系统相关名称。</p>
<h4><code>fs.realpath.native(path[, options], callback)</code><span><a class="mark" href="#fsrealpathnativepath-options-callback" id="fsrealpathnativepath-options-callback">#</a></span><a aria-hidden="true" class="legacy" id="fs_fs_realpath_native_path_options_callback"></a></h4><p class="tip_wrap" data-show_trans="1" data-item_id="#fsrealpathnativepath-options-callback">
                <a href="fs/fs_realpath_native_path_options_callback.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>新增于: v9.2.0</span>
</div>
<ul class="">
<li><code>path</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="buffer.html#class-buffer" rel="nofollow" class="type">&lt;Buffer&gt;</a> | <a href="url.html#the-whatwg-url-api" rel="nofollow" class="type">&lt;URL&gt;</a></li>
<li><code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" rel="nofollow" class="type">&lt;Object&gt;</a>
<ul>
<li><code>encoding</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> <strong>默认值:</strong> <code>'utf8'</code></li>
</ul>
</li>
<li><code>callback</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" rel="nofollow" class="type">&lt;Function&gt;</a>
<ul>
<li><code>err</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error" rel="nofollow" class="type">&lt;Error&gt;</a></li>
<li><code>resolvedPath</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="buffer.html#class-buffer" rel="nofollow" class="type">&lt;Buffer&gt;</a></li>
</ul>
</li>
</ul>
<p>异步的 <a href="http://man7.org/linux/man-pages/man3/realpath.3.html" rel="nofollow"><code>realpath(3)</code></a>。</p>
<p class=""><code>callback</code> 有两个参数 <code>(err, resolvedPath)</code>。</p>
<p class="">仅支持可以转换为 UTF8 字符串的路径。</p>
<p class="">可选的 <code>options</code> 参数可以是指定编码的字符串，也可以是具有 <code>encoding</code> 属性（指定用于传给回调的路径的字符编码）的对象。
如果 <code>encoding</code> 设置为 <code>'buffer'</code>，则返回的路径将作为 <a href="buffer.html#class-buffer" rel="nofollow" class="type">&lt;Buffer&gt;</a> 对象传入。</p>
<p class="">在 Linux 上，将 Node.js 与 musl libc 链接时，必须将 procfs 文件系统挂载在 <code>/proc</code> 上，此函数才能起作用。
Glibc 没有此限制。</p>
<h4><code>fs.rename(oldPath, newPath, callback)</code><span><a class="mark" href="#fsrenameoldpath-newpath-callback" id="fsrenameoldpath-newpath-callback">#</a></span><a aria-hidden="true" class="legacy" id="fs_fs_rename_oldpath_newpath_callback"></a></h4><p class="tip_wrap" data-show_trans="1" data-item_id="#fsrenameoldpath-newpath-callback">
                <a href="fs/fs_rename_oldpath_newpath_callback.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<details class="changelog"><summary>版本历史</summary>
<table>
<tbody><tr><th>版本</th><th>变更</th></tr>
<tr><td>v10.0.0</td>
<td><p>参数 <code>callback</code> 不再是可选的。 不传入它会在运行时抛出 <code>TypeError</code>。</p></td></tr>
<tr><td>v7.6.0</td>
<td><p>参数 <code>oldPath</code> 和 <code>newPath</code> 可以是使用 <code>file:</code> 协议的 WHATWG <code>URL</code> 对象。 支持目前仍处于实验阶段。</p></td></tr>
<tr><td>v7.0.0</td>
<td><p>参数 <code>callback</code> 不再是可选的。 不传入它将触发 ID 为 DEP0013 的弃用警告。</p></td></tr>
<tr><td>v0.0.2</td>
<td><p><span>新增于: v0.0.2</span></p></td></tr>
</tbody></table>
</details>
</div>
<ul class="">
<li><code>oldPath</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="buffer.html#class-buffer" rel="nofollow" class="type">&lt;Buffer&gt;</a> | <a href="url.html#the-whatwg-url-api" rel="nofollow" class="type">&lt;URL&gt;</a></li>
<li><code>newPath</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="buffer.html#class-buffer" rel="nofollow" class="type">&lt;Buffer&gt;</a> | <a href="url.html#the-whatwg-url-api" rel="nofollow" class="type">&lt;URL&gt;</a></li>
<li><code>callback</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" rel="nofollow" class="type">&lt;Function&gt;</a>
<ul>
<li><code>err</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error" rel="nofollow" class="type">&lt;Error&gt;</a></li>
</ul>
</li>
</ul>
<p>将 <code>oldPath</code> 处的文件异步重命名为作为 <code>newPath</code> 提供的路径名。
如果 <code>newPath</code> 已经存在，则它将被覆盖。
如果 <code>newPath</code> 是目录，则会引发错误。
除了可能的异常之外，没有为完成回调提供任何参数。</p>
<p class="">另见: <a href="http://man7.org/linux/man-pages/man2/rename.2.html" rel="nofollow"><code>rename(2)</code></a>。</p>
<pre class=""><code class="language-js mjs"><span class="hljs-keyword">import</span> { rename } <span class="hljs-keyword">from</span> <span class="hljs-string">'fs'</span>;

<span class="hljs-title function_">rename</span>(<span class="hljs-string">'oldFile.txt'</span>, <span class="hljs-string">'newFile.txt'</span>, <span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {
  <span class="hljs-keyword">if</span> (err) <span class="hljs-keyword">throw</span> err;
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Rename complete!'</span>);
});</code></pre>
<h4><code>fs.rmdir(path[, options], callback)</code><span><a class="mark" href="#fsrmdirpath-options-callback" id="fsrmdirpath-options-callback">#</a></span><a aria-hidden="true" class="legacy" id="fs_fs_rmdir_path_options_callback"></a></h4><p class="tip_wrap" data-show_trans="1" data-item_id="#fsrmdirpath-options-callback">
                <a href="fs/fs_rmdir_path_options_callback.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<details class="changelog"><summary>版本历史</summary>
<table>
<tbody><tr><th>版本</th><th>变更</th></tr>
<tr><td>v16.0.0</td>
<td><p>不再允许在文件 <code>path</code> 上使用 <code>fs.rmdir(path, { recursive: true })</code>，在 Windows 上导致 <code>ENOENT</code> 错误，在 POSIX 上导致 <code>ENOTDIR</code> 错误。</p></td></tr>
<tr><td>v16.0.0</td>
<td><p>不再允许在不存在的 <code>path</code> 上使用 <code>fs.rmdir(path, { recursive: true })</code>，会导致 <code>ENOENT</code> 错误。</p></td></tr>
<tr><td>v16.0.0</td>
<td><p>选项 <code>recursive</code> 已弃用，使用它会触发弃用警告。</p></td></tr>
<tr><td>v14.14.0</td>
<td><p>不推荐使用 <code>recursive</code> 选项，请改用 <code>fs.rm</code>。</p></td></tr>
<tr><td>v13.3.0, v12.16.0</td>
<td><p>选项 <code>maxBusyTries</code> 重命名为 <code>maxRetries</code>，默认值为 0。 选项 <code>emfileWait</code> 已删除，并且 <code>EMFILE</code> 错误使用与其他错误相同的重试逻辑。 现在支持 <code>retryDelay</code> 选项。 现在重试 <code>ENFILE</code> 错误。</p></td></tr>
<tr><td>v12.10.0</td>
<td><p>现在支持 <code>recursive</code>、<code>maxBusyTries</code> 和 <code>emfileWait</code> 选项。</p></td></tr>
<tr><td>v10.0.0</td>
<td><p>参数 <code>callback</code> 不再是可选的。 不传入它会在运行时抛出 <code>TypeError</code>。</p></td></tr>
<tr><td>v7.6.0</td>
<td><p>参数 <code>path</code> 可以是使用 <code>file:</code> 协议的 WHATWG <code>URL</code> 对象。</p></td></tr>
<tr><td>v7.0.0</td>
<td><p>参数 <code>callback</code> 不再是可选的。 不传入它将触发 ID 为 DEP0013 的弃用警告。</p></td></tr>
<tr><td>v0.0.2</td>
<td><p><span>新增于: v0.0.2</span></p></td></tr>
</tbody></table>
</details>
</div>
<ul class="">
<li><code>path</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="buffer.html#class-buffer" rel="nofollow" class="type">&lt;Buffer&gt;</a> | <a href="url.html#the-whatwg-url-api" rel="nofollow" class="type">&lt;URL&gt;</a></li>
<li><code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" rel="nofollow" class="type">&lt;Object&gt;</a>
<ul>
<li><code>maxRetries</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a> 如果遇到 <code>EBUSY</code>、<code>EMFILE</code>、<code>ENFILE</code>、<code>ENOTEMPTY</code> 或 <code>EPERM</code> 错误，Node.js 将在每次尝试时以 <code>retryDelay</code> 毫秒的线性退避等待时间重试该操作。
此选项表示重试次数。
如果 <code>recursive</code> 选项不为 <code>true</code>，则忽略此选项。 <strong>默认值:</strong> <code>0</code>。</li>
<li><code>recursive</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" rel="nofollow" class="type">&lt;boolean&gt;</a> 如果为 <code>true</code>，则执行递归目录删除。
在递归模式下，操作将在失败时重试。 <strong>默认值:</strong> <code>false</code>。
<strong>已弃用。</strong></li>
<li><code>retryDelay</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a> 重试之间等待的时间（以毫秒为单位）。
如果 <code>recursive</code> 选项不为 <code>true</code>，则忽略此选项。
<strong>默认值:</strong> <code>100</code>。</li>
</ul>
</li>
<li><code>callback</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" rel="nofollow" class="type">&lt;Function&gt;</a>
<ul>
<li><code>err</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error" rel="nofollow" class="type">&lt;Error&gt;</a></li>
</ul>
</li>
</ul>
<p>异步的 <a href="http://man7.org/linux/man-pages/man2/rmdir.2.html" rel="nofollow"><code>rmdir(2)</code></a>。
除了可能的异常之外，没有为完成回调提供任何参数。</p>
<p class="">在文件（而不是目录）上使用 <code>fs.rmdir()</code>，则在 Windows 上会导致 <code>ENOENT</code> 错误，在 POSIX 上会导致 <code>ENOTDIR</code> 错误。</p>
<p class="">要获得类似于 <code>rm -rf</code> Unix 命令的行为，则使用具有选项 <code>{ recursive: true, force: true }</code> 的 <a href="#fsrmpath-options-callback"><code>fs.rm()</code></a>。</p>
<h4><code>fs.rm(path[, options], callback)</code><span><a class="mark" href="#fsrmpath-options-callback" id="fsrmpath-options-callback">#</a></span><a aria-hidden="true" class="legacy" id="fs_fs_rm_path_options_callback"></a></h4><p class="tip_wrap" data-show_trans="1" data-item_id="#fsrmpath-options-callback">
                <a href="fs/fs_rm_path_options_callback.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<details class="changelog"><summary>版本历史</summary>
<table>
<tbody><tr><th>版本</th><th>变更</th></tr>
<tr><td>v16.14.0</td>
<td><p>参数 <code>path</code> 可以是使用 <code>file:</code> 协议的 WHATWG <code>URL</code> 对象。</p></td></tr>
<tr><td>v14.14.0</td>
<td><p><span>新增于: v14.14.0</span></p></td></tr>
</tbody></table>
</details>
</div>
<ul class="">
<li><code>path</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="buffer.html#class-buffer" rel="nofollow" class="type">&lt;Buffer&gt;</a> | <a href="url.html#the-whatwg-url-api" rel="nofollow" class="type">&lt;URL&gt;</a></li>
<li><code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" rel="nofollow" class="type">&lt;Object&gt;</a>
<ul>
<li><code>force</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" rel="nofollow" class="type">&lt;boolean&gt;</a> 当为 <code>true</code> 时，如果 <code>path</code> 不存在，则异常将被忽略。 <strong>默认值:</strong> <code>false</code>。</li>
<li><code>maxRetries</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a> 如果遇到 <code>EBUSY</code>、<code>EMFILE</code>、<code>ENFILE</code>、<code>ENOTEMPTY</code> 或 <code>EPERM</code> 错误，Node.js 将在每次尝试时以 <code>retryDelay</code> 毫秒的线性退避等待时间重试该操作。
此选项表示重试次数。
如果 <code>recursive</code> 选项不为 <code>true</code>，则忽略此选项。 <strong>默认值:</strong> <code>0</code>。</li>
<li><code>recursive</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" rel="nofollow" class="type">&lt;boolean&gt;</a> 如果为 <code>true</code>，则执行递归删除。
在递归模式下，操作将在失败时重试。 <strong>默认值:</strong> <code>false</code>。</li>
<li><code>retryDelay</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a> 重试之间等待的时间（以毫秒为单位）。
如果 <code>recursive</code> 选项不为 <code>true</code>，则忽略此选项。
<strong>默认值:</strong> <code>100</code>。</li>
</ul>
</li>
<li><code>callback</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" rel="nofollow" class="type">&lt;Function&gt;</a>
<ul>
<li><code>err</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error" rel="nofollow" class="type">&lt;Error&gt;</a></li>
</ul>
</li>
</ul>
<p>异步地删除文件和目录（以标准 POSIX <code>rm</code> 实用工具为模型）。
除了可能的异常之外，没有为完成回调提供任何参数。</p>
<h4><code>fs.stat(path[, options], callback)</code><span><a class="mark" href="#fsstatpath-options-callback" id="fsstatpath-options-callback">#</a></span><a aria-hidden="true" class="legacy" id="fs_fs_stat_path_options_callback"></a></h4><p class="tip_wrap" data-show_trans="1" data-item_id="#fsstatpath-options-callback">
                <a href="fs/fs_stat_path_options_callback.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<details class="changelog"><summary>版本历史</summary>
<table>
<tbody><tr><th>版本</th><th>变更</th></tr>
<tr><td>v10.5.0</td>
<td><p>接受额外的 <code>options</code> 对象，以指定返回的数字值是否应为长整数。</p></td></tr>
<tr><td>v10.0.0</td>
<td><p>参数 <code>callback</code> 不再是可选的。 不传入它会在运行时抛出 <code>TypeError</code>。</p></td></tr>
<tr><td>v7.6.0</td>
<td><p>参数 <code>path</code> 可以是使用 <code>file:</code> 协议的 WHATWG <code>URL</code> 对象。</p></td></tr>
<tr><td>v7.0.0</td>
<td><p>参数 <code>callback</code> 不再是可选的。 不传入它将触发 ID 为 DEP0013 的弃用警告。</p></td></tr>
<tr><td>v0.0.2</td>
<td><p><span>新增于: v0.0.2</span></p></td></tr>
</tbody></table>
</details>
</div>
<ul class="">
<li><code>path</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="buffer.html#class-buffer" rel="nofollow" class="type">&lt;Buffer&gt;</a> | <a href="url.html#the-whatwg-url-api" rel="nofollow" class="type">&lt;URL&gt;</a></li>
<li><code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" rel="nofollow" class="type">&lt;Object&gt;</a>
<ul>
<li><code>bigint</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" rel="nofollow" class="type">&lt;boolean&gt;</a> 返回的 <a href="#class-fsstats" rel="nofollow" class="type">&lt;fs.Stats&gt;</a> 对象中的数值是否应为 <code>bigint</code>。 <strong>默认值:</strong> <code>false</code>。</li>
</ul>
</li>
<li><code>callback</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" rel="nofollow" class="type">&lt;Function&gt;</a>
<ul>
<li><code>err</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error" rel="nofollow" class="type">&lt;Error&gt;</a></li>
<li><code>stats</code> <a href="#class-fsstats" rel="nofollow" class="type">&lt;fs.Stats&gt;</a></li>
</ul>
</li>
</ul>
<p>异步的 <a href="http://man7.org/linux/man-pages/man2/stat.2.html" rel="nofollow"><code>stat(2)</code></a>。
回调有两个参数 <code>(err, stats)</code>，其中 <code>stats</code> 是 <a href="#class-fsstats" rel="nofollow" class="type">&lt;fs.Stats&gt;</a> 对象。</p>
<p class="">如果出现错误，<code>err.code</code> 将是<a href="errors.html#common-system-errors">常见系统错误</a>之一。</p>
<p class="">不推荐在调用 <code>fs.open()</code>、<code>fs.readFile()</code> 或 <code>fs.writeFile()</code> 之前使用 <code>fs.stat()</code> 检查文件是否存在。
而是，用户代码应该直接打开/读取/写入文件，并在文件不可用时处理引发的错误。</p>
<p class="">要检查文件是否存在而不对其进行操作，建议使用 <a href="#fsaccesspath-mode-callback"><code>fs.access()</code></a>。</p>
<p class="">例如，给定以下目录结构：</p>
<pre class=""><code class="language-text">- txtDir
-- file.txt
- app.js</code></pre>
<p class="">下一个程序将检查给定路径的统计信息：</p>
<pre class=""><code class="language-js mjs"><span class="hljs-keyword">import</span> { stat } <span class="hljs-keyword">from</span> <span class="hljs-string">'fs'</span>;

<span class="hljs-keyword">const</span> pathsToCheck = [<span class="hljs-string">'./txtDir'</span>, <span class="hljs-string">'./txtDir/file.txt'</span>];

<span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; pathsToCheck.<span class="hljs-property">length</span>; i++) {
  <span class="hljs-title function_">stat</span>(pathsToCheck[i], <span class="hljs-function">(<span class="hljs-params">err, stats</span>) =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(stats.<span class="hljs-title function_">isDirectory</span>());
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(stats);
  });
}</code></pre>
<p class="">结果输出将类似于：</p>
<pre class=""><code class="language-console">true
Stats {
  dev: 16777220,
  mode: 16877,
  nlink: 3,
  uid: 501,
  gid: 20,
  rdev: 0,
  blksize: 4096,
  ino: 14214262,
  size: 96,
  blocks: 0,
  atimeMs: 1561174653071.963,
  mtimeMs: 1561174614583.3518,
  ctimeMs: 1561174626623.5366,
  birthtimeMs: 1561174126937.2893,
  atime: 2019-06-22T03:37:33.072Z,
  mtime: 2019-06-22T03:36:54.583Z,
  ctime: 2019-06-22T03:37:06.624Z,
  birthtime: 2019-06-22T03:28:46.937Z
}
false
Stats {
  dev: 16777220,
  mode: 33188,
  nlink: 1,
  uid: 501,
  gid: 20,
  rdev: 0,
  blksize: 4096,
  ino: 14214074,
  size: 8,
  blocks: 8,
  atimeMs: 1561174616618.8555,
  mtimeMs: 1561174614584,
  ctimeMs: 1561174614583.8145,
  birthtimeMs: 1561174007710.7478,
  atime: 2019-06-22T03:36:56.619Z,
  mtime: 2019-06-22T03:36:54.584Z,
  ctime: 2019-06-22T03:36:54.584Z,
  birthtime: 2019-06-22T03:26:47.711Z
}</code></pre>
<h4><code>fs.symlink(target, path[, type], callback)</code><span><a class="mark" href="#fssymlinktarget-path-type-callback" id="fssymlinktarget-path-type-callback">#</a></span><a aria-hidden="true" class="legacy" id="fs_fs_symlink_target_path_type_callback"></a></h4><p class="tip_wrap" data-show_trans="1" data-item_id="#fssymlinktarget-path-type-callback">
                <a href="fs/fs_symlink_target_path_type_callback.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<details class="changelog"><summary>版本历史</summary>
<table>
<tbody><tr><th>版本</th><th>变更</th></tr>
<tr><td>v12.0.0</td>
<td><p>如果 <code>type</code> 参数未定义，Node 将自动检测 <code>target</code> 类型并自动选择 <code>dir</code> 或 <code>file</code>。</p></td></tr>
<tr><td>v7.6.0</td>
<td><p>参数 <code>target</code> 和 <code>path</code> 可以是使用 <code>file:</code> 协议的 WHATWG <code>URL</code> 对象。 支持目前仍处于实验阶段。</p></td></tr>
<tr><td>v0.1.31</td>
<td><p><span>新增于: v0.1.31</span></p></td></tr>
</tbody></table>
</details>
</div>
<ul class="">
<li><code>target</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="buffer.html#class-buffer" rel="nofollow" class="type">&lt;Buffer&gt;</a> | <a href="url.html#the-whatwg-url-api" rel="nofollow" class="type">&lt;URL&gt;</a></li>
<li><code>path</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="buffer.html#class-buffer" rel="nofollow" class="type">&lt;Buffer&gt;</a> | <a href="url.html#the-whatwg-url-api" rel="nofollow" class="type">&lt;URL&gt;</a></li>
<li><code>type</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a></li>
<li><code>callback</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" rel="nofollow" class="type">&lt;Function&gt;</a>
<ul>
<li><code>err</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error" rel="nofollow" class="type">&lt;Error&gt;</a></li>
</ul>
</li>
</ul>
<p>创建名为 <code>path</code> 指向 <code>target</code> 的链接。
除了可能的异常之外，没有为完成回调提供任何参数。</p>
<p class="">有关更多详细信息，请参阅 POSIX <a href="http://man7.org/linux/man-pages/man2/symlink.2.html" rel="nofollow"><code>symlink(2)</code></a> 文档。</p>
<p class=""><code>type</code> 参数仅在 Windows 上可用，在其他平台上被忽略。
可以设置为 <code>'dir'</code>、<code>'file'</code> 或 <code>'junction'</code>。
如果未设置 <code>type</code> 参数，Node.js 将自动检测 <code>target</code> 类型并使用 <code>'file'</code> 或 <code>'dir'</code>。
如果 <code>target</code> 不存在，将使用 <code>'file'</code>。
Windows 交接点要求目标路径是绝对路径。
使用 <code>'junction'</code> 时，<code>target</code> 参数将自动规范化为绝对路径。</p>
<p class="">相对目标相对于链接的父目录。</p>
<pre class=""><code class="language-js mjs"><span class="hljs-keyword">import</span> { symlink } <span class="hljs-keyword">from</span> <span class="hljs-string">'fs'</span>;

<span class="hljs-title function_">symlink</span>(<span class="hljs-string">'./mew'</span>, <span class="hljs-string">'./mewtwo'</span>, callback);</code></pre>
<p class="">上面的示例创建了符号链接 <code>mewtwo</code>，其指向同一目录中的 <code>mew</code>：</p>
<pre class=""><code class="language-bash">$ tree .
.
├── mew
└── mewtwo -&gt; ./mew</code></pre>
<h4><code>fs.truncate(path[, len], callback)</code><span><a class="mark" href="#fstruncatepath-len-callback" id="fstruncatepath-len-callback">#</a></span><a aria-hidden="true" class="legacy" id="fs_fs_truncate_path_len_callback"></a></h4><p class="tip_wrap" data-show_trans="1" data-item_id="#fstruncatepath-len-callback">
                <a href="fs/fs_truncate_path_len_callback.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<details class="changelog"><summary>版本历史</summary>
<table>
<tbody><tr><th>版本</th><th>变更</th></tr>
<tr><td>v16.0.0</td>
<td><p>如果返回多个错误，则返回的错误可能是 <code>AggregateError</code>。</p></td></tr>
<tr><td>v10.0.0</td>
<td><p>参数 <code>callback</code> 不再是可选的。 不传入它会在运行时抛出 <code>TypeError</code>。</p></td></tr>
<tr><td>v7.0.0</td>
<td><p>参数 <code>callback</code> 不再是可选的。 不传入它将触发 ID 为 DEP0013 的弃用警告。</p></td></tr>
<tr><td>v0.8.6</td>
<td><p><span>新增于: v0.8.6</span></p></td></tr>
</tbody></table>
</details>
</div>
<ul class="">
<li><code>path</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="buffer.html#class-buffer" rel="nofollow" class="type">&lt;Buffer&gt;</a> | <a href="url.html#the-whatwg-url-api" rel="nofollow" class="type">&lt;URL&gt;</a></li>
<li><code>len</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a> <strong>默认值:</strong> <code>0</code></li>
<li><code>callback</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" rel="nofollow" class="type">&lt;Function&gt;</a>
<ul>
<li><code>err</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error" rel="nofollow" class="type">&lt;Error&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/AggregateError" rel="nofollow" class="type">&lt;AggregateError&gt;</a></li>
</ul>
</li>
</ul>
<p>截断文件。
除了可能的异常之外，没有为完成回调提供任何参数。
文件描述符也可以作为第一个参数传入。
在这种情况下，<code>fs.ftruncate()</code> 被调用。</p>

<pre class="with-35-chars"><input class="js-flavor-selector" type="checkbox" checked="" aria-label="Show modern ES modules syntax"><code class="language-js mjs"><span class="hljs-keyword">import</span> { truncate } <span class="hljs-keyword">from</span> <span class="hljs-string">'fs'</span>;
<span class="hljs-comment">// 假设 'path/file.txt' 是普通文件。</span>
<span class="hljs-title function_">truncate</span>(<span class="hljs-string">'path/file.txt'</span>, <span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {
  <span class="hljs-keyword">if</span> (err) <span class="hljs-keyword">throw</span> err;
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'path/file.txt was truncated'</span>);
});</code><code class="language-js cjs"><span class="hljs-keyword">const</span> { truncate } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'fs'</span>);
<span class="hljs-comment">// 假设 'path/file.txt' 是普通文件。</span>
<span class="hljs-title function_">truncate</span>(<span class="hljs-string">'path/file.txt'</span>, <span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {
  <span class="hljs-keyword">if</span> (err) <span class="hljs-keyword">throw</span> err;
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'path/file.txt was truncated'</span>);
});</code></pre>
<p class="">不推荐传入文件描述符，并且可能会导致将来抛出错误。</p>
<p class="">有关更多详细信息，请参阅 POSIX <a href="http://man7.org/linux/man-pages/man2/truncate.2.html" rel="nofollow"><code>truncate(2)</code></a> 文档。</p>
<h4><code>fs.unlink(path, callback)</code><span><a class="mark" href="#fsunlinkpath-callback" id="fsunlinkpath-callback">#</a></span><a aria-hidden="true" class="legacy" id="fs_fs_unlink_path_callback"></a></h4><p class="tip_wrap" data-show_trans="1" data-item_id="#fsunlinkpath-callback">
                <a href="fs/fs_unlink_path_callback.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<details class="changelog"><summary>版本历史</summary>
<table>
<tbody><tr><th>版本</th><th>变更</th></tr>
<tr><td>v10.0.0</td>
<td><p>参数 <code>callback</code> 不再是可选的。 不传入它会在运行时抛出 <code>TypeError</code>。</p></td></tr>
<tr><td>v7.6.0</td>
<td><p>参数 <code>path</code> 可以是使用 <code>file:</code> 协议的 WHATWG <code>URL</code> 对象。</p></td></tr>
<tr><td>v7.0.0</td>
<td><p>参数 <code>callback</code> 不再是可选的。 不传入它将触发 ID 为 DEP0013 的弃用警告。</p></td></tr>
<tr><td>v0.0.2</td>
<td><p><span>新增于: v0.0.2</span></p></td></tr>
</tbody></table>
</details>
</div>
<ul class="">
<li><code>path</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="buffer.html#class-buffer" rel="nofollow" class="type">&lt;Buffer&gt;</a> | <a href="url.html#the-whatwg-url-api" rel="nofollow" class="type">&lt;URL&gt;</a></li>
<li><code>callback</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" rel="nofollow" class="type">&lt;Function&gt;</a>
<ul>
<li><code>err</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error" rel="nofollow" class="type">&lt;Error&gt;</a></li>
</ul>
</li>
</ul>
<p>异步地删除文件或符号链接。
除了可能的异常之外，没有为完成回调提供任何参数。</p>
<pre class=""><code class="language-js mjs"><span class="hljs-keyword">import</span> { unlink } <span class="hljs-keyword">from</span> <span class="hljs-string">'fs'</span>;
<span class="hljs-comment">// 假设 'path/file.txt' 是普通文件。</span>
<span class="hljs-title function_">unlink</span>(<span class="hljs-string">'path/file.txt'</span>, <span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {
  <span class="hljs-keyword">if</span> (err) <span class="hljs-keyword">throw</span> err;
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'path/file.txt was deleted'</span>);
});</code></pre>
<p class=""><code>fs.unlink()</code> 不适用于目录，无论是空目录还是其他目录。
要删除目录，请使用 <a href="#fsrmdirpath-options-callback"><code>fs.rmdir()</code></a>。</p>
<p class="">有关更多详细信息，请参阅 POSIX <a href="http://man7.org/linux/man-pages/man2/unlink.2.html" rel="nofollow"><code>unlink(2)</code></a> 文档。</p>
<h4><code>fs.unwatchFile(filename[, listener])</code><span><a class="mark" href="#fsunwatchfilefilename-listener" id="fsunwatchfilefilename-listener">#</a></span><a aria-hidden="true" class="legacy" id="fs_fs_unwatchfile_filename_listener"></a></h4><p class="tip_wrap" data-show_trans="1" data-item_id="#fsunwatchfilefilename-listener">
                <a href="fs/fs_unwatchfile_filename_listener.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>新增于: v0.1.31</span>
</div>
<ul class="">
<li><code>filename</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="buffer.html#class-buffer" rel="nofollow" class="type">&lt;Buffer&gt;</a> | <a href="url.html#the-whatwg-url-api" rel="nofollow" class="type">&lt;URL&gt;</a></li>
<li><code>listener</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" rel="nofollow" class="type">&lt;Function&gt;</a> 可选，先前使用 <code>fs.watchFile()</code> 附加的监听器。</li>
</ul>
<p>停止监视 <code>filename</code> 的变化。
如果指定了 <code>listener</code>，则仅删除该特定监听器。
否则，所有监听器都将被删除，从而有效地停止监视 <code>filename</code>。</p>
<p class="">使用未被监视的文件名调用 <code>fs.unwatchFile()</code> 是空操作，而不是错误。</p>
<p class="">使用 <a href="#fswatchfilename-options-listener"><code>fs.watch()</code></a> 比 <code>fs.watchFile()</code> 和 <code>fs.unwatchFile()</code> 更高效。
应尽可能使用 <code>fs.watch()</code> 而不是 <code>fs.watchFile()</code> 和 <code>fs.unwatchFile()</code>。</p>
<h4><code>fs.utimes(path, atime, mtime, callback)</code><span><a class="mark" href="#fsutimespath-atime-mtime-callback" id="fsutimespath-atime-mtime-callback">#</a></span><a aria-hidden="true" class="legacy" id="fs_fs_utimes_path_atime_mtime_callback"></a></h4><p class="tip_wrap" data-show_trans="1" data-item_id="#fsutimespath-atime-mtime-callback">
                <a href="fs/fs_utimes_path_atime_mtime_callback.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<details class="changelog"><summary>版本历史</summary>
<table>
<tbody><tr><th>版本</th><th>变更</th></tr>
<tr><td>v10.0.0</td>
<td><p>参数 <code>callback</code> 不再是可选的。 不传入它会在运行时抛出 <code>TypeError</code>。</p></td></tr>
<tr><td>v8.0.0</td>
<td><p><code>NaN</code>、<code>Infinity</code> 和 <code>-Infinity</code> 不再是有效的时间说明符。</p></td></tr>
<tr><td>v7.6.0</td>
<td><p>参数 <code>path</code> 可以是使用 <code>file:</code> 协议的 WHATWG <code>URL</code> 对象。</p></td></tr>
<tr><td>v7.0.0</td>
<td><p>参数 <code>callback</code> 不再是可选的。 不传入它将触发 ID 为 DEP0013 的弃用警告。</p></td></tr>
<tr><td>v4.1.0</td>
<td><p>现在允许使用数字字符串、<code>NaN</code> 和 <code>Infinity</code> 作为时间说明符。</p></td></tr>
<tr><td>v0.4.2</td>
<td><p><span>新增于: v0.4.2</span></p></td></tr>
</tbody></table>
</details>
</div>
<ul class="">
<li><code>path</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="buffer.html#class-buffer" rel="nofollow" class="type">&lt;Buffer&gt;</a> | <a href="url.html#the-whatwg-url-api" rel="nofollow" class="type">&lt;URL&gt;</a></li>
<li><code>atime</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;number&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date" rel="nofollow" class="type">&lt;Date&gt;</a></li>
<li><code>mtime</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;number&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date" rel="nofollow" class="type">&lt;Date&gt;</a></li>
<li><code>callback</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" rel="nofollow" class="type">&lt;Function&gt;</a>
<ul>
<li><code>err</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error" rel="nofollow" class="type">&lt;Error&gt;</a></li>
</ul>
</li>
</ul>
<p>更改 <code>path</code> 引用的对象的文件系统时间戳。</p>
<p class=""><code>atime</code> 和 <code>mtime</code> 参数遵循以下规则：</p>
<ul class="">
<li>值可以是代表 Unix 纪元时间的数字、<code>Date</code>、或数字字符串（例如 <code>'123456789.0'</code>）。</li>
<li>如果该值不能转换为数字，或者是 <code>NaN</code>，<code>Infinity</code> 或 <code>-Infinity</code>，则将抛出 <code>Error</code>。</li>
</ul>
<h4><code>fs.watch(filename[, options][, listener])</code><span><a class="mark" href="#fswatchfilename-options-listener" id="fswatchfilename-options-listener">#</a></span><a aria-hidden="true" class="legacy" id="fs_fs_watch_filename_options_listener"></a></h4><p class="tip_wrap" data-show_trans="1" data-item_id="#fswatchfilename-options-listener">
                <a href="fs/fs_watch_filename_options_listener.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<details class="changelog"><summary>版本历史</summary>
<table>
<tbody><tr><th>版本</th><th>变更</th></tr>
<tr><td>v15.9.0</td>
<td><p>添加了对使用中止信号关闭监视器的支持。</p></td></tr>
<tr><td>v7.6.0</td>
<td><p>参数 <code>filename</code> 可以是使用 <code>file:</code> 协议的 WHATWG <code>URL</code> 对象。</p></td></tr>
<tr><td>v7.0.0</td>
<td><p>传入的 <code>options</code> 对象永远不会被修改。</p></td></tr>
<tr><td>v0.5.10</td>
<td><p><span>新增于: v0.5.10</span></p></td></tr>
</tbody></table>
</details>
</div>
<ul class="">
<li><code>filename</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="buffer.html#class-buffer" rel="nofollow" class="type">&lt;Buffer&gt;</a> | <a href="url.html#the-whatwg-url-api" rel="nofollow" class="type">&lt;URL&gt;</a></li>
<li><code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" rel="nofollow" class="type">&lt;Object&gt;</a>
<ul>
<li><code>persistent</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" rel="nofollow" class="type">&lt;boolean&gt;</a> 指示只要正在监视文件，进程是否应继续运行。 <strong>默认值:</strong> <code>true</code>。</li>
<li><code>recursive</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" rel="nofollow" class="type">&lt;boolean&gt;</a> 指示是应监视所有子目录，还是仅监视当前目录。
这在指定目录时适用，并且仅在受支持的平台上有效（请参见<a href="#caveats">注意事项</a>）。 <strong>默认值:</strong> <code>false</code>。</li>
<li><code>encoding</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> 指定用于传给监听器的文件名的字符编码。 <strong>默认值:</strong> <code>'utf8'</code>。</li>
<li><code>signal</code> <a href="globals.html#class-abortsignal" rel="nofollow" class="type">&lt;AbortSignal&gt;</a> 允许使用中止信号关闭监视器。</li>
</ul>
</li>
<li><code>listener</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" rel="nofollow" class="type">&lt;Function&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Undefined_type" rel="nofollow" class="type">&lt;undefined&gt;</a> <strong>默认值:</strong> <code>undefined</code>
<ul>
<li><code>eventType</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a></li>
<li><code>filename</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="buffer.html#class-buffer" rel="nofollow" class="type">&lt;Buffer&gt;</a></li>
</ul>
</li>
<li>返回: <a href="#class-fsfswatcher" rel="nofollow" class="type">&lt;fs.FSWatcher&gt;</a></li>
</ul>
<p>监视 <code>filename</code> 的变化，其中 <code>filename</code> 是文件或目录。</p>
<p class="">第二个参数是可选的。
如果 <code>options</code> 作为字符串提供，则它指定 <code>encoding</code>。
否则 <code>options</code> 应作为对象传入。</p>
<p class="">监听器回调有两个参数 <code>(eventType, filename)</code>。
<code>eventType</code> 是 <code>'rename'</code> 或 <code>'change'</code>，<code>filename</code> 是触发事件的文件的名称。</p>
<p class="">在大多数平台上，只要目录中文件名出现或消失，就会触发 <code>'rename'</code>。</p>
<p class="">监听器回调绑定到由 <a href="#class-fsfswatcher" rel="nofollow" class="type">&lt;fs.FSWatcher&gt;</a> 触发的 <code>'change'</code> 事件，但它与 <code>eventType</code> 的 <code>'change'</code> 值不同。</p>
<p class="">如果传入了 <code>signal</code>，则中止相应的 AbortController 将关闭返回的 <a href="#class-fsfswatcher" rel="nofollow" class="type">&lt;fs.FSWatcher&gt;</a>。</p>
<h5>注意事项<span><a class="mark" href="#caveats" id="caveats">#</a></span><a aria-hidden="true" class="legacy" id="fs_caveats"></a></h5><p class="tip_wrap" data-show_trans="1" data-item_id="#caveats">
                <a href="fs/caveats.html" class="tip_trans">中英对照</a>
                </p>
<!--type=misc-->
<p><code>fs.watch</code> API 跨平台并非 100% 一致，并且在某些情况下不可用。</p>
<p class="">递归选项仅在 macOS 和 Windows 上受支持。
当在不支持它的平台上使用该选项时，将抛出 <code>ERR_FEATURE_UNAVAILABLE_ON_PLATFORM</code> 异常。</p>
<p class="">在 Windows 上，如果监视目录被移动或重命名，则不会触发任何事件。
删除监视目录时报 <code>EPERM</code> 错误。</p>
<h6>可用性<span><a class="mark" href="#availability" id="availability">#</a></span><a aria-hidden="true" class="legacy" id="fs_availability"></a></h6><p class="tip_wrap" data-show_trans="1" data-item_id="#availability">
                <a href="fs/availability.html" class="tip_trans">中英对照</a>
                </p>
<!--type=misc-->
<p>此功能取决于底层操作系统提供了一种通知文件系统更改的方法。</p>
<ul class="">
<li>在 Linux 系统上，这使用 <a href="https://man7.org/linux/man-pages/man7/inotify.7.html" rel="nofollow"><code>inotify(7)</code></a>。</li>
<li>在 BSD 系统上，这使用 <a href="https://www.freebsd.org/cgi/man.cgi" rel="nofollow"><code>kqueue(2)</code></a>。</li>
<li>在 macOS 上，这对文件使用 <a href="https://www.freebsd.org/cgi/man.cgi" rel="nofollow"><code>kqueue(2)</code></a>，对目录使用 <a href="https://developer.apple.com/documentation/coreservices/file_system_events" rel="nofollow"><code>FSEvents</code></a>。</li>
<li>在 SunOS 系统（包括 Solaris 和 SmartOS）上，这使用 <a href="https://illumos.org/man/port_create" rel="nofollow"><code>event ports</code></a>。</li>
<li>在 Windows 系统上，此功能取决于 <a href="https://docs.microsoft.com/en-us/windows/desktop/api/winbase/nf-winbase-readdirectorychangesw" rel="nofollow"><code>ReadDirectoryChangesW</code></a>。</li>
<li>在 AIX 系统上，此功能依赖于必须启用的 <a href="https://developer.ibm.com/articles/au-aix_event_infrastructure/" rel="nofollow"><code>AHAFS</code></a>。</li>
<li>在 IBM i 系统上，不支持此功能。</li>
</ul>
<p class="">如果底层功能由于某种原因不可用，则 <code>fs.watch()</code> 将无法运行并可能抛出异常。
例如，使用虚拟化软件（例如 Vagrant 或 Docker）时，在网络文件系统（NFS、SMB等）或主机文件系统上监视文件或目录可能不可靠，在某些情况下甚至是不可能的。</p>
<p class="">仍然可以使用 <code>fs.watchFile()</code>，它使用 stat 轮询，但这种方法较慢且不太可靠。</p>
<h6>索引节点<span><a class="mark" href="#inodes" id="inodes">#</a></span><a aria-hidden="true" class="legacy" id="fs_inodes"></a></h6><p class="tip_wrap" data-show_trans="1" data-item_id="#inodes">
                <a href="fs/inodes.html" class="tip_trans">中英对照</a>
                </p>
<!--type=misc-->
<p>在 Linux 和 macOS 系统上，<code>fs.watch()</code> 解析<a href="https://en.wikipedia.org/wiki/Inode" rel="nofollow">索引节点</a>的路径并监视索引节点。
如果监视路径被删除并重新创建，则会为其分配一个新的索引节点。
监视将触发删除事件，但将继续监视原始索引节点。
不会发出新索引节点的事件。
这是预期的行为。</p>
<p class="">AIX 文件在文件的生命周期内保留相同的索引节点。
在 AIX 上保存和关闭监视文件将产生两个通知（一个用于添加新内容，另一个用于截断）。</p>
<h6>文件名参数<span><a class="mark" href="#filename-argument" id="filename-argument">#</a></span><a aria-hidden="true" class="legacy" id="fs_filename_argument"></a></h6><p class="tip_wrap" data-show_trans="1" data-item_id="#filename-argument">
                <a href="fs/filename_argument.html" class="tip_trans">中英对照</a>
                </p>
<!--type=misc-->
<p>仅在 Linux、macOS、Windows 和 AIX 上支持在回调中提供 <code>filename</code> 参数。
即使在支持的平台上，也不能保证始终提供 <code>filename</code>。
因此，不要假设回调中总是提供 <code>filename</code> 参数，如果它为 <code>null</code>，则有一些回退逻辑。</p>
<pre class=""><code class="language-js mjs"><span class="hljs-keyword">import</span> { watch } <span class="hljs-keyword">from</span> <span class="hljs-string">'fs'</span>;
<span class="hljs-title function_">watch</span>(<span class="hljs-string">'somedir'</span>, <span class="hljs-function">(<span class="hljs-params">eventType, filename</span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`event type is: <span class="hljs-subst">${eventType}</span>`</span>);
  <span class="hljs-keyword">if</span> (filename) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`filename provided: <span class="hljs-subst">${filename}</span>`</span>);
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'filename not provided'</span>);
  }
});</code></pre>
<h4><code>fs.watchFile(filename[, options], listener)</code><span><a class="mark" href="#fswatchfilefilename-options-listener" id="fswatchfilefilename-options-listener">#</a></span><a aria-hidden="true" class="legacy" id="fs_fs_watchfile_filename_options_listener"></a></h4><p class="tip_wrap" data-show_trans="1" data-item_id="#fswatchfilefilename-options-listener">
                <a href="fs/fs_watchfile_filename_options_listener.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<details class="changelog"><summary>版本历史</summary>
<table>
<tbody><tr><th>版本</th><th>变更</th></tr>
<tr><td>v10.5.0</td>
<td><p>现在支持 <code>bigint</code> 选项。</p></td></tr>
<tr><td>v7.6.0</td>
<td><p>参数 <code>filename</code> 可以是使用 <code>file:</code> 协议的 WHATWG <code>URL</code> 对象。</p></td></tr>
<tr><td>v0.1.31</td>
<td><p><span>新增于: v0.1.31</span></p></td></tr>
</tbody></table>
</details>
</div>
<ul class="">
<li><code>filename</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="buffer.html#class-buffer" rel="nofollow" class="type">&lt;Buffer&gt;</a> | <a href="url.html#the-whatwg-url-api" rel="nofollow" class="type">&lt;URL&gt;</a></li>
<li><code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" rel="nofollow" class="type">&lt;Object&gt;</a>
<ul>
<li><code>bigint</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" rel="nofollow" class="type">&lt;boolean&gt;</a> <strong>默认值:</strong> <code>false</code></li>
<li><code>persistent</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" rel="nofollow" class="type">&lt;boolean&gt;</a> <strong>默认值:</strong> <code>true</code></li>
<li><code>interval</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a> <strong>默认值:</strong> <code>5007</code></li>
</ul>
</li>
<li><code>listener</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" rel="nofollow" class="type">&lt;Function&gt;</a>
<ul>
<li><code>current</code> <a href="#class-fsstats" rel="nofollow" class="type">&lt;fs.Stats&gt;</a></li>
<li><code>previous</code> <a href="#class-fsstats" rel="nofollow" class="type">&lt;fs.Stats&gt;</a></li>
</ul>
</li>
<li>返回: <a href="#class-fsstatwatcher" rel="nofollow" class="type">&lt;fs.StatWatcher&gt;</a></li>
</ul>
<p>监视 <code>filename</code> 的变化。
每次访问文件时都会调用回调 <code>listener</code>。</p>
<p class="">可以省略 <code>options</code> 参数。
如果提供，它应该是一个对象。
<code>options</code> 对象可以包含名为 <code>persistent</code> 的布尔值，其指示当文件正在被监视时，进程是否应该继续运行。
<code>options</code> 对象可以指定 <code>interval</code> 属性，指示应该轮询目标的频率（以毫秒为单位）。</p>
<p class=""><code>listener</code> 具有两个参数，当前的统计对象和上一个统计对象：</p>
<pre class=""><code class="language-js mjs"><span class="hljs-keyword">import</span> { watchFile } <span class="hljs-keyword">from</span> <span class="hljs-string">'fs'</span>;

<span class="hljs-title function_">watchFile</span>(<span class="hljs-string">'message.text'</span>, <span class="hljs-function">(<span class="hljs-params">curr, prev</span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`the current mtime is: <span class="hljs-subst">${curr.mtime}</span>`</span>);
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`the previous mtime was: <span class="hljs-subst">${prev.mtime}</span>`</span>);
});</code></pre>
<p class="">这些统计对象是 <code>fs.Stat</code> 的实例。
如果 <code>bigint</code> 选项为 <code>true</code>，则这些对象中的数值被指定为 <code>BigInt</code>。</p>
<p class="">要在文件被修改（而不仅仅是访问）时得到通知，则需要比较 <code>curr.mtimeMs</code> 和 <code>prev.mtimeMs</code>。</p>
<p class="">当 <code>fs.watchFile</code> 操作导致 <code>ENOENT</code> 错误时，它将调用监听器一次，且所有字段均清零（或者，对于日期，则为 Unix Epoch）。
如果文件是后来创建的，则将使用最新的统计对象再次调用监听器。
这是自 v0.10 以来的功能变化。</p>
<p class="">使用 <a href="#fswatchfilename-options-listener"><code>fs.watch()</code></a> 比 <code>fs.watchFile</code> 和 <code>fs.unwatchFile</code> 更高效。
应尽可能使用 <code>fs.watch</code> 而不是 <code>fs.watchFile</code> 和 <code>fs.unwatchFile</code>。</p>
<p class="">当 <code>fs.watchFile()</code> 正在监视的文件消失并重新出现时，则第二个回调事件（文件的重新出现）中的 <code>previous</code> 的内容将与第一个回调事件（文件的消失）中的 <code>previous</code> 的内容相同。</p>
<p class="">这发生在：</p>
<ul class="">
<li>文件被删除，然后恢复</li>
<li>文件被重命名，然后再次重命名回其原始名称</li>
</ul>
<h4><code>fs.write(fd, buffer[, offset[, length[, position]]], callback)</code><span><a class="mark" href="#fswritefd-buffer-offset-length-position-callback" id="fswritefd-buffer-offset-length-position-callback">#</a></span><a aria-hidden="true" class="legacy" id="fs_fs_write_fd_buffer_offset_length_position_callback"></a></h4><p class="tip_wrap" data-show_trans="1" data-item_id="#fswritefd-buffer-offset-length-position-callback">
                <a href="fs/fs_write_fd_buffer_offset_length_position_callback.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<details class="changelog"><summary>版本历史</summary>
<table>
<tbody><tr><th>版本</th><th>变更</th></tr>
<tr><td>v14.12.0</td>
<td><p>参数 <code>buffer</code> 将使用显式 <code>toString</code> 函数对对象进行字符串化。</p></td></tr>
<tr><td>v14.0.0</td>
<td><p>参数 <code>buffer</code> 不会再将不支持的输入强制转换为字符串。</p></td></tr>
<tr><td>v10.10.0</td>
<td><p>参数 <code>buffer</code> 现在可以是任何 <code>TypedArray</code> 或 <code>DataView</code>。</p></td></tr>
<tr><td>v10.0.0</td>
<td><p>参数 <code>callback</code> 不再是可选的。 不传入它会在运行时抛出 <code>TypeError</code>。</p></td></tr>
<tr><td>v7.4.0</td>
<td><p>参数 <code>buffer</code> 现在可以是 <code>Uint8Array</code>。</p></td></tr>
<tr><td>v7.2.0</td>
<td><p>参数 <code>offset</code> 和 <code>length</code> 现在是可选的。</p></td></tr>
<tr><td>v7.0.0</td>
<td><p>参数 <code>callback</code> 不再是可选的。 不传入它将触发 ID 为 DEP0013 的弃用警告。</p></td></tr>
<tr><td>v0.0.2</td>
<td><p><span>新增于: v0.0.2</span></p></td></tr>
</tbody></table>
</details>
</div>
<ul class="">
<li><code>fd</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a></li>
<li><code>buffer</code> <a href="buffer.html#class-buffer" rel="nofollow" class="type">&lt;Buffer&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/TypedArray" rel="nofollow" class="type">&lt;TypedArray&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/DataView" rel="nofollow" class="type">&lt;DataView&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" rel="nofollow" class="type">&lt;Object&gt;</a></li>
<li><code>offset</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a></li>
<li><code>length</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a></li>
<li><code>position</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a></li>
<li><code>callback</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" rel="nofollow" class="type">&lt;Function&gt;</a>
<ul>
<li><code>err</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error" rel="nofollow" class="type">&lt;Error&gt;</a></li>
<li><code>bytesWritten</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a></li>
<li><code>buffer</code> <a href="buffer.html#class-buffer" rel="nofollow" class="type">&lt;Buffer&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/TypedArray" rel="nofollow" class="type">&lt;TypedArray&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/DataView" rel="nofollow" class="type">&lt;DataView&gt;</a></li>
</ul>
</li>
</ul>
<p>将 <code>buffer</code> 写入 <code>fd</code> 指定的文件。
如果 <code>buffer</code> 是普通对象，则它必须具有自有的 <code>toString</code> 函数属性。</p>
<p class=""><code>offset</code> 确定要写入的缓冲区部分，<code>length</code> 是整数，指定要写入的字节数。</p>
<p class=""><code>position</code> 指从文件开头数据应被写入的偏移量。
如果 <code>typeof position !== 'number'</code>，则数据将写入当前位置。
参见 <a href="http://man7.org/linux/man-pages/man2/pwrite.2.html" rel="nofollow"><code>pwrite(2)</code></a>。</p>
<p class="">回调将提供三个参数 <code>(err, bytesWritten, buffer)</code>，其中 <code>bytesWritten</code> 指定从 <code>buffer</code> 写入的字节数。</p>
<p class="">如果此方法作为其 <a href="util.html#utilpromisifyoriginal"><code>util.promisify()</code></a> 版本被调用，则返回具有 <code>bytesWritten</code> 和 <code>buffer</code> 属性的 <code>Object</code> 的 promise。</p>
<p class="">在同一个文件上多次使用 <code>fs.write()</code> 而不等待回调是不安全的。
对于这种情况，建议使用 <a href="#fscreatewritestreampath-options"><code>fs.createWriteStream()</code></a>。</p>
<p class="">在 Linux 上，以追加模式打开文件时，位置写入不起作用。
内核会忽略位置参数，并始终将数据追加到文件末尾。</p>
<h4><code>fs.write(fd, string[, position[, encoding]], callback)</code><span><a class="mark" href="#fswritefd-string-position-encoding-callback" id="fswritefd-string-position-encoding-callback">#</a></span><a aria-hidden="true" class="legacy" id="fs_fs_write_fd_string_position_encoding_callback"></a></h4><p class="tip_wrap" data-show_trans="1" data-item_id="#fswritefd-string-position-encoding-callback">
                <a href="fs/fs_write_fd_string_position_encoding_callback.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<details class="changelog"><summary>版本历史</summary>
<table>
<tbody><tr><th>版本</th><th>变更</th></tr>
<tr><td>v14.12.0</td>
<td><p>参数 <code>string</code> 将使用显式 <code>toString</code> 函数对对象进行字符串化。</p></td></tr>
<tr><td>v14.0.0</td>
<td><p>参数 <code>string</code> 不会再将不支持的输入强制转换为字符串。</p></td></tr>
<tr><td>v10.0.0</td>
<td><p>参数 <code>callback</code> 不再是可选的。 不传入它会在运行时抛出 <code>TypeError</code>。</p></td></tr>
<tr><td>v7.2.0</td>
<td><p>参数 <code>position</code> 现在是可选的。</p></td></tr>
<tr><td>v7.0.0</td>
<td><p>参数 <code>callback</code> 不再是可选的。 不传入它将触发 ID 为 DEP0013 的弃用警告。</p></td></tr>
<tr><td>v0.11.5</td>
<td><p><span>新增于: v0.11.5</span></p></td></tr>
</tbody></table>
</details>
</div>
<ul class="">
<li><code>fd</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a></li>
<li><code>string</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" rel="nofollow" class="type">&lt;Object&gt;</a></li>
<li><code>position</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a></li>
<li><code>encoding</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> <strong>默认值:</strong> <code>'utf8'</code></li>
<li><code>callback</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" rel="nofollow" class="type">&lt;Function&gt;</a>
<ul>
<li><code>err</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error" rel="nofollow" class="type">&lt;Error&gt;</a></li>
<li><code>written</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a></li>
<li><code>string</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a></li>
</ul>
</li>
</ul>
<p>将 <code>string</code> 写入 <code>fd</code> 指定的文件。
如果 <code>string</code> 不是字符串，或者不是具有自有的 <code>toString</code> 函数属性的对象，则会抛出异常。</p>
<p class=""><code>position</code> 指从文件开头数据应被写入的偏移量。
如果 <code>typeof position !== 'number'</code>，则数据将写入当前位置。
参见 <a href="http://man7.org/linux/man-pages/man2/pwrite.2.html" rel="nofollow"><code>pwrite(2)</code></a>。</p>
<p class=""><code>encoding</code> 是预期的字符串编码。</p>
<p class="">回调将接收参数 <code>(err, written, string)</code>，其中 <code>written</code> 指定传入的字符串需要被写入的字节数。
写入的字节数不一定与写入的字符串字符数相同。
参见 <a href="buffer.html#static-method-bufferbytelengthstring-encoding"><code>Buffer.byteLength</code></a>。</p>
<p class="">在同一个文件上多次使用 <code>fs.write()</code> 而不等待回调是不安全的。
对于这种情况，建议使用 <a href="#fscreatewritestreampath-options"><code>fs.createWriteStream()</code></a>。</p>
<p class="">在 Linux 上，以追加模式打开文件时，位置写入不起作用。
内核会忽略位置参数，并始终将数据追加到文件末尾。</p>
<p class="">在 Windows 上，如果文件描述符连接到控制台（例如 <code>fd == 1</code> 或 <code>stdout</code>），则默认情况下无论使用何种编码，都无法正确呈现包含非 ASCII 字符的字符串。
通过使用 <code>chcp 65001</code> 命令更改激活的代码页，可以将控制台配置为可正确呈现 UTF-8。
有关更多详细信息，请参阅 <a href="https://ss64.com/nt/chcp.html" rel="nofollow">chcp</a> 文档。</p>
<h4><code>fs.writeFile(file, data[, options], callback)</code><span><a class="mark" href="#fswritefilefile-data-options-callback" id="fswritefilefile-data-options-callback">#</a></span><a aria-hidden="true" class="legacy" id="fs_fs_writefile_file_data_options_callback"></a></h4><p class="tip_wrap" data-show_trans="1" data-item_id="#fswritefilefile-data-options-callback">
                <a href="fs/fs_writefile_file_data_options_callback.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<details class="changelog"><summary>版本历史</summary>
<table>
<tbody><tr><th>版本</th><th>变更</th></tr>
<tr><td>v16.0.0</td>
<td><p>如果返回多个错误，则返回的错误可能是 <code>AggregateError</code>。</p></td></tr>
<tr><td>v15.2.0</td>
<td><p>选项参数可以包含中止信号，以中止正在进行的写入文件请求。</p></td></tr>
<tr><td>v14.12.0</td>
<td><p>参数 <code>data</code> 将使用显式 <code>toString</code> 函数对对象进行字符串化。</p></td></tr>
<tr><td>v14.0.0</td>
<td><p>参数 <code>data</code> 不会再将不支持的输入强制转换为字符串。</p></td></tr>
<tr><td>v10.10.0</td>
<td><p>参数 <code>data</code> 现在可以是任何 <code>TypedArray</code> 或 <code>DataView</code>。</p></td></tr>
<tr><td>v10.0.0</td>
<td><p>参数 <code>callback</code> 不再是可选的。 不传入它会在运行时抛出 <code>TypeError</code>。</p></td></tr>
<tr><td>v7.4.0</td>
<td><p>参数 <code>data</code> 现在可以是 <code>Uint8Array</code>。</p></td></tr>
<tr><td>v7.0.0</td>
<td><p>参数 <code>callback</code> 不再是可选的。 不传入它将触发 ID 为 DEP0013 的弃用警告。</p></td></tr>
<tr><td>v5.0.0</td>
<td><p>参数 <code>file</code> 现在可以是文件描述符。</p></td></tr>
<tr><td>v0.1.29</td>
<td><p><span>新增于: v0.1.29</span></p></td></tr>
</tbody></table>
</details>
</div>
<ul class="">
<li><code>file</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="buffer.html#class-buffer" rel="nofollow" class="type">&lt;Buffer&gt;</a> | <a href="url.html#the-whatwg-url-api" rel="nofollow" class="type">&lt;URL&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a> 文件名或文件描述符</li>
<li><code>data</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="buffer.html#class-buffer" rel="nofollow" class="type">&lt;Buffer&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/TypedArray" rel="nofollow" class="type">&lt;TypedArray&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/DataView" rel="nofollow" class="type">&lt;DataView&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" rel="nofollow" class="type">&lt;Object&gt;</a></li>
<li><code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" rel="nofollow" class="type">&lt;Object&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a>
<ul>
<li><code>encoding</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Null_type" rel="nofollow" class="type">&lt;null&gt;</a> <strong>默认值:</strong> <code>'utf8'</code></li>
<li><code>mode</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a> <strong>默认值:</strong> <code>0o666</code></li>
<li><code>flag</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> 请参阅<a href="#file-system-flags">对文件系统 <code>flags</code> 的支持</a>。 <strong>默认值:</strong> <code>'w'</code>。</li>
<li><code>signal</code> <a href="globals.html#class-abortsignal" rel="nofollow" class="type">&lt;AbortSignal&gt;</a> 允许中止正在进行的写入文件</li>
</ul>
</li>
<li><code>callback</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" rel="nofollow" class="type">&lt;Function&gt;</a>
<ul>
<li><code>err</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error" rel="nofollow" class="type">&lt;Error&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/AggregateError" rel="nofollow" class="type">&lt;AggregateError&gt;</a></li>
</ul>
</li>
</ul>
<p>当 <code>file</code> 是文件名时，将数据异步地写入文件，如果文件已存在则替换该文件。
<code>data</code> 可以是字符串或缓冲区。</p>
<p class="">当 <code>file</code> 是文件描述符时，其行为类似于直接调用 <code>fs.write()</code>（推荐）。
请参阅以下有关使用文件描述符的说明。</p>
<p class="">如果 <code>data</code> 是缓冲区，则忽略 <code>encoding</code> 选项。</p>
<p class=""><code>mode</code> 选项仅影响新创建的文件。
有关详细信息，请参阅 <a href="#fsopenpath-flags-mode-callback"><code>fs.open()</code></a>。</p>
<p class="">如果 <code>data</code> 是普通的对象，则它必须具有自有的（不是继承的）<code>toString</code> 函数属性。</p>
<pre class=""><code class="language-js mjs"><span class="hljs-keyword">import</span> { writeFile } <span class="hljs-keyword">from</span> <span class="hljs-string">'fs'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Buffer</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'buffer'</span>;

<span class="hljs-keyword">const</span> data = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>(<span class="hljs-title class_">Buffer</span>.<span class="hljs-title function_">from</span>(<span class="hljs-string">'Hello Node.js'</span>));
<span class="hljs-title function_">writeFile</span>(<span class="hljs-string">'message.txt'</span>, data, <span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {
  <span class="hljs-keyword">if</span> (err) <span class="hljs-keyword">throw</span> err;
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'The file has been saved!'</span>);
});</code></pre>
<p class="">如果 <code>options</code> 是字符串，则它指定编码：</p>
<pre class=""><code class="language-js mjs"><span class="hljs-keyword">import</span> { writeFile } <span class="hljs-keyword">from</span> <span class="hljs-string">'fs'</span>;

<span class="hljs-title function_">writeFile</span>(<span class="hljs-string">'message.txt'</span>, <span class="hljs-string">'Hello Node.js'</span>, <span class="hljs-string">'utf8'</span>, callback);</code></pre>
<p class="">在同一个文件上多次使用 <code>fs.writeFile()</code> 而不等待回调是不安全的。
对于这种情况，建议使用 <a href="#fscreatewritestreampath-options"><code>fs.createWriteStream()</code></a>。</p>
<p class="">与 <code>fs.readFile</code> 类似，<code>fs.writeFile</code> 是一个便捷的方法，其在内部执行多次 <code>write</code> 调用以写入传给它的缓冲区。
对于性能敏感的代码，则考虑使用 <a href="#fscreatewritestreampath-options"><code>fs.createWriteStream()</code></a>。</p>
<p class="">可以使用 <a href="globals.html#class-abortsignal" rel="nofollow" class="type">&lt;AbortSignal&gt;</a> 取消 <code>fs.writeFile()</code>。
取消是"尽力而为"的，并且可能仍会写入一些数据。</p>
<pre class=""><code class="language-js mjs"><span class="hljs-keyword">import</span> { writeFile } <span class="hljs-keyword">from</span> <span class="hljs-string">'fs'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Buffer</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'buffer'</span>;

<span class="hljs-keyword">const</span> controller = <span class="hljs-keyword">new</span> <span class="hljs-title class_">AbortController</span>();
<span class="hljs-keyword">const</span> { signal } = controller;
<span class="hljs-keyword">const</span> data = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>(<span class="hljs-title class_">Buffer</span>.<span class="hljs-title function_">from</span>(<span class="hljs-string">'Hello Node.js'</span>));
<span class="hljs-title function_">writeFile</span>(<span class="hljs-string">'message.txt'</span>, data, { signal }, <span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {
  <span class="hljs-comment">// 当请求中止时 - 使用 AbortError 调用回调</span>
});
<span class="hljs-comment">// 当应该中止请求时</span>
controller.<span class="hljs-title function_">abort</span>();</code></pre>
<p class="">中止正在进行的请求不会中止单个操作系统请求，而是中止内部缓冲的 <code>fs.writeFile</code> 执行。</p>
<h5>将 fs.writeFile() 与文件描述符一起使用<span><a class="mark" href="#using-fswritefile-with-file-descriptors" id="using-fswritefile-with-file-descriptors">#</a></span><a aria-hidden="true" class="legacy" id="fs_using_fs_writefile_with_file_descriptors"></a></h5><p class="tip_wrap" data-show_trans="1" data-item_id="#using-fswritefile-with-file-descriptors">
                <a href="fs/using_fs_writefile_with_file_descriptors.html" class="tip_trans">中英对照</a>
                </p>
<p>当 <code>file</code> 是文件描述符时，其行为几乎与直接调用 <code>fs.write()</code> 相同，例如：</p>
<pre class=""><code class="language-js mjs"><span class="hljs-keyword">import</span> { write } <span class="hljs-keyword">from</span> <span class="hljs-string">'fs'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Buffer</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'buffer'</span>;

<span class="hljs-title function_">write</span>(fd, <span class="hljs-title class_">Buffer</span>.<span class="hljs-title function_">from</span>(data, options.<span class="hljs-property">encoding</span>), callback);</code></pre>
<p class="">与直接调用 <code>fs.write()</code> 不同的是，在一些异常情况下，<code>fs.write()</code> 可能只写入缓冲区的一部分，需要重试写入剩余的数据，而 <code>fs.writeFile()</code> 会重试直到数据完全写入（或发生错误）。</p>
<p class="">其含义是常见的混淆来源。
在文件描述符的情况下，文件不会被替换！
数据不一定写入文件的开头，文件的原始数据可以保留在新写入的数据之前和/或之后。</p>
<p class="">例如，如果连续调用 <code>fs.writeFile()</code> 两次，首先写入字符串 <code>'Hello'</code>，然后写入字符串 <code>', World'</code>，该文件将包含 <code>'Hello, World'</code>，并且可能包含文件的一些原始数据（这取决于原始文件的大小和文件描述符的位置）。
如果使用文件名而不是描述符，则文件将保证仅包含 <code>', World'</code>。</p>
<h4><code>fs.writev(fd, buffers[, position], callback)</code><span><a class="mark" href="#fswritevfd-buffers-position-callback" id="fswritevfd-buffers-position-callback">#</a></span><a aria-hidden="true" class="legacy" id="fs_fs_writev_fd_buffers_position_callback"></a></h4><p class="tip_wrap" data-show_trans="1" data-item_id="#fswritevfd-buffers-position-callback">
                <a href="fs/fs_writev_fd_buffers_position_callback.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>新增于: v12.9.0</span>
</div>
<ul class="">
<li><code>fd</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a></li>
<li><code>buffers</code> <a href="https://developer.mozilla.org/en-US/docs/Web/API/ArrayBufferView" rel="nofollow" class="type">&lt;ArrayBufferView[]&gt;</a></li>
<li><code>position</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a></li>
<li><code>callback</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" rel="nofollow" class="type">&lt;Function&gt;</a>
<ul>
<li><code>err</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error" rel="nofollow" class="type">&lt;Error&gt;</a></li>
<li><code>bytesWritten</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a></li>
<li><code>buffers</code> <a href="https://developer.mozilla.org/en-US/docs/Web/API/ArrayBufferView" rel="nofollow" class="type">&lt;ArrayBufferView[]&gt;</a></li>
</ul>
</li>
</ul>
<p>使用 <code>writev()</code> 将 <code>ArrayBufferView</code> 数组写入 <code>fd</code> 指定的文件。</p>
<p class=""><code>position</code> 是该数据应写入的文件开头的偏移量。
如果 <code>typeof position !== 'number'</code>，则数据将写入当前位置。</p>
<p class="">回调将被赋予三个参数：<code>err</code>、<code>bytesWritten</code> 和 <code>buffers</code>。
<code>bytesWritten</code> 是从 <code>buffers</code> 写入的字节数。</p>
<p class="">如果这个方法是 <a href="util.html#utilpromisifyoriginal"><code>util.promisify()</code></a> 的，它返回具有 <code>bytesWritten</code> 和 <code>buffers</code> 属性的 <code>Object</code> 的 promise。</p>
<p class="">在同一个文件上多次使用 <code>fs.writev()</code> 而不等待回调是不安全的。
对于这种情况，请使用 <a href="#fscreatewritestreampath-options"><code>fs.createWriteStream()</code></a>。</p>
<p class="">在 Linux 上，以追加模式打开文件时，位置写入不起作用。
内核会忽略位置参数，并始终将数据追加到文件末尾。</p>
</section><section><h3>同步的 API<span><a class="mark" href="#synchronous-api" id="synchronous-api">#</a></span><a aria-hidden="true" class="legacy" id="fs_synchronous_api"></a></h3><p class="tip_wrap" data-show_trans="1" data-item_id="#synchronous-api">
                <a href="fs/synchronous_api.html" class="tip_trans">中英对照</a>
                </p>
<p>同步的 API 同步地执行所有操作，阻塞事件循环，直到操作完成或失败。</p>
<h4><code>fs.accessSync(path[, mode])</code><span><a class="mark" href="#fsaccesssyncpath-mode" id="fsaccesssyncpath-mode">#</a></span><a aria-hidden="true" class="legacy" id="fs_fs_accesssync_path_mode"></a></h4><p class="tip_wrap" data-show_trans="1" data-item_id="#fsaccesssyncpath-mode">
                <a href="fs/fs_accesssync_path_mode.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<details class="changelog"><summary>版本历史</summary>
<table>
<tbody><tr><th>版本</th><th>变更</th></tr>
<tr><td>v7.6.0</td>
<td><p>参数 <code>path</code> 可以是使用 <code>file:</code> 协议的 WHATWG <code>URL</code> 对象。</p></td></tr>
<tr><td>v0.11.15</td>
<td><p><span>新增于: v0.11.15</span></p></td></tr>
</tbody></table>
</details>
</div>
<ul class="">
<li><code>path</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="buffer.html#class-buffer" rel="nofollow" class="type">&lt;Buffer&gt;</a> | <a href="url.html#the-whatwg-url-api" rel="nofollow" class="type">&lt;URL&gt;</a></li>
<li><code>mode</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a> <strong>默认值:</strong> <code>fs.constants.F_OK</code></li>
</ul>
<p>同步地测试用户对 <code>path</code> 指定的文件或目录的权限。
<code>mode</code> 参数是可选的整数，指定要执行的可访问性检查。
<code>mode</code> 应该是值 <code>fs.constants.F_OK</code> 或由 <code>fs.constants.R_OK</code>、<code>fs.constants.W_OK</code> 和 <code>fs.constants.X_OK</code> 中的任何一个（例如 <code>fs.constants.W_OK | fs.constants.R_OK</code>）的按位或组成的掩码。
查看<a href="#file-access-constants">文件访问的常量</a>以获取可能的 <code>mode</code> 值。</p>
<p class="">如果任何可访问性检查失败，将抛出 <code>Error</code>。
否则，该方法将返回 <code>undefined</code>。</p>
<pre class=""><code class="language-js mjs"><span class="hljs-keyword">import</span> { accessSync, constants } <span class="hljs-keyword">from</span> <span class="hljs-string">'fs'</span>;

<span class="hljs-keyword">try</span> {
  <span class="hljs-title function_">accessSync</span>(<span class="hljs-string">'etc/passwd'</span>, constants.<span class="hljs-property">R_OK</span> | constants.<span class="hljs-property">W_OK</span>);
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'can read/write'</span>);
} <span class="hljs-keyword">catch</span> (err) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'no access!'</span>);
}</code></pre>
<h4><code>fs.appendFileSync(path, data[, options])</code><span><a class="mark" href="#fsappendfilesyncpath-data-options" id="fsappendfilesyncpath-data-options">#</a></span><a aria-hidden="true" class="legacy" id="fs_fs_appendfilesync_path_data_options"></a></h4><p class="tip_wrap" data-show_trans="1" data-item_id="#fsappendfilesyncpath-data-options">
                <a href="fs/fs_appendfilesync_path_data_options.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<details class="changelog"><summary>版本历史</summary>
<table>
<tbody><tr><th>版本</th><th>变更</th></tr>
<tr><td>v7.0.0</td>
<td><p>传入的 <code>options</code> 对象永远不会被修改。</p></td></tr>
<tr><td>v5.0.0</td>
<td><p>参数 <code>file</code> 现在可以是文件描述符。</p></td></tr>
<tr><td>v0.6.7</td>
<td><p><span>新增于: v0.6.7</span></p></td></tr>
</tbody></table>
</details>
</div>
<ul class="">
<li><code>path</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="buffer.html#class-buffer" rel="nofollow" class="type">&lt;Buffer&gt;</a> | <a href="url.html#the-whatwg-url-api" rel="nofollow" class="type">&lt;URL&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;number&gt;</a> 文件名或文件描述符</li>
<li><code>data</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="buffer.html#class-buffer" rel="nofollow" class="type">&lt;Buffer&gt;</a></li>
<li><code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" rel="nofollow" class="type">&lt;Object&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a>
<ul>
<li><code>encoding</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Null_type" rel="nofollow" class="type">&lt;null&gt;</a> <strong>默认值:</strong> <code>'utf8'</code></li>
<li><code>mode</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a> <strong>默认值:</strong> <code>0o666</code></li>
<li><code>flag</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> 请参阅<a href="#file-system-flags">对文件系统 <code>flags</code> 的支持</a>。 <strong>默认值:</strong> <code>'a'</code>。</li>
</ul>
</li>
</ul>
<p>同步地将数据追加到文件中，如果文件尚不存在则创建该文件。
<code>data</code> 可以是字符串或 <a href="buffer.html#class-buffer" rel="nofollow" class="type">&lt;Buffer&gt;</a>。</p>
<p class=""><code>mode</code> 选项仅影响新创建的文件。
有关详细信息，请参阅 <a href="#fsopenpath-flags-mode-callback"><code>fs.open()</code></a>。</p>
<pre class=""><code class="language-js mjs"><span class="hljs-keyword">import</span> { appendFileSync } <span class="hljs-keyword">from</span> <span class="hljs-string">'fs'</span>;

<span class="hljs-keyword">try</span> {
  <span class="hljs-title function_">appendFileSync</span>(<span class="hljs-string">'message.txt'</span>, <span class="hljs-string">'data to append'</span>);
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'The "data to append" was appended to file!'</span>);
} <span class="hljs-keyword">catch</span> (err) {
  <span class="hljs-comment">/* 处理错误 */</span>
}</code></pre>
<p class="">如果 <code>options</code> 是字符串，则它指定编码：</p>
<pre class=""><code class="language-js mjs"><span class="hljs-keyword">import</span> { appendFileSync } <span class="hljs-keyword">from</span> <span class="hljs-string">'fs'</span>;

<span class="hljs-title function_">appendFileSync</span>(<span class="hljs-string">'message.txt'</span>, <span class="hljs-string">'data to append'</span>, <span class="hljs-string">'utf8'</span>);</code></pre>
<p class="">可以将 <code>path</code> 指定为已打开用于追加（使用 <code>fs.open()</code> 或 <code>fs.openSync()</code>）的数字文件描述符。
文件描述符不会自动关闭。</p>
<pre class=""><code class="language-js mjs"><span class="hljs-keyword">import</span> { openSync, closeSync, appendFileSync } <span class="hljs-keyword">from</span> <span class="hljs-string">'fs'</span>;

<span class="hljs-keyword">let</span> fd;

<span class="hljs-keyword">try</span> {
  fd = <span class="hljs-title function_">openSync</span>(<span class="hljs-string">'message.txt'</span>, <span class="hljs-string">'a'</span>);
  <span class="hljs-title function_">appendFileSync</span>(fd, <span class="hljs-string">'data to append'</span>, <span class="hljs-string">'utf8'</span>);
} <span class="hljs-keyword">catch</span> (err) {
  <span class="hljs-comment">/* 处理错误 */</span>
} <span class="hljs-keyword">finally</span> {
  <span class="hljs-keyword">if</span> (fd !== <span class="hljs-literal">undefined</span>)
    <span class="hljs-title function_">closeSync</span>(fd);
}</code></pre>
<h4><code>fs.chmodSync(path, mode)</code><span><a class="mark" href="#fschmodsyncpath-mode" id="fschmodsyncpath-mode">#</a></span><a aria-hidden="true" class="legacy" id="fs_fs_chmodsync_path_mode"></a></h4><p class="tip_wrap" data-show_trans="1" data-item_id="#fschmodsyncpath-mode">
                <a href="fs/fs_chmodsync_path_mode.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<details class="changelog"><summary>版本历史</summary>
<table>
<tbody><tr><th>版本</th><th>变更</th></tr>
<tr><td>v7.6.0</td>
<td><p>参数 <code>path</code> 可以是使用 <code>file:</code> 协议的 WHATWG <code>URL</code> 对象。</p></td></tr>
<tr><td>v0.6.7</td>
<td><p><span>新增于: v0.6.7</span></p></td></tr>
</tbody></table>
</details>
</div>
<ul class="">
<li><code>path</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="buffer.html#class-buffer" rel="nofollow" class="type">&lt;Buffer&gt;</a> | <a href="url.html#the-whatwg-url-api" rel="nofollow" class="type">&lt;URL&gt;</a></li>
<li><code>mode</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a></li>
</ul>
<p>有关详细信息，请参阅此 API 的异步版本的文档：<a href="#fschmodpath-mode-callback"><code>fs.chmod()</code></a>。</p>
<p class="">有关更多详细信息，请参阅 POSIX <a href="http://man7.org/linux/man-pages/man2/chmod.2.html" rel="nofollow"><code>chmod(2)</code></a> 文档。</p>
<h4><code>fs.chownSync(path, uid, gid)</code><span><a class="mark" href="#fschownsyncpath-uid-gid" id="fschownsyncpath-uid-gid">#</a></span><a aria-hidden="true" class="legacy" id="fs_fs_chownsync_path_uid_gid"></a></h4><p class="tip_wrap" data-show_trans="1" data-item_id="#fschownsyncpath-uid-gid">
                <a href="fs/fs_chownsync_path_uid_gid.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<details class="changelog"><summary>版本历史</summary>
<table>
<tbody><tr><th>版本</th><th>变更</th></tr>
<tr><td>v7.6.0</td>
<td><p>参数 <code>path</code> 可以是使用 <code>file:</code> 协议的 WHATWG <code>URL</code> 对象。</p></td></tr>
<tr><td>v0.1.97</td>
<td><p><span>新增于: v0.1.97</span></p></td></tr>
</tbody></table>
</details>
</div>
<ul class="">
<li><code>path</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="buffer.html#class-buffer" rel="nofollow" class="type">&lt;Buffer&gt;</a> | <a href="url.html#the-whatwg-url-api" rel="nofollow" class="type">&lt;URL&gt;</a></li>
<li><code>uid</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a></li>
<li><code>gid</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a></li>
</ul>
<p>同步地更改文件的所有者和群组。
返回 <code>undefined</code>。
这是 <a href="#fschownpath-uid-gid-callback"><code>fs.chown()</code></a> 的同步版本。</p>
<p class="">有关更多详细信息，请参阅 POSIX <a href="http://man7.org/linux/man-pages/man2/chown.2.html" rel="nofollow"><code>chown(2)</code></a> 文档。</p>
<h4><code>fs.closeSync(fd)</code><span><a class="mark" href="#fsclosesyncfd" id="fsclosesyncfd">#</a></span><a aria-hidden="true" class="legacy" id="fs_fs_closesync_fd"></a></h4><p class="tip_wrap" data-show_trans="1" data-item_id="#fsclosesyncfd">
                <a href="fs/fs_closesync_fd.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>新增于: v0.1.21</span>
</div>
<ul class="">
<li><code>fd</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a></li>
</ul>
<p>关闭文件描述符。
返回 <code>undefined</code>。</p>
<p class="">通过任何其他 <code>fs</code> 操作对当前正在使用的任何文件描述符 (<code>fd</code>) 调用 <code>fs.closeSync()</code>，则可能会导致未定义的行为。</p>
<p class="">有关更多详细信息，请参阅 POSIX <a href="http://man7.org/linux/man-pages/man2/close.2.html" rel="nofollow"><code>close(2)</code></a> 文档。</p>
<h4><code>fs.copyFileSync(src, dest[, mode])</code><span><a class="mark" href="#fscopyfilesyncsrc-dest-mode" id="fscopyfilesyncsrc-dest-mode">#</a></span><a aria-hidden="true" class="legacy" id="fs_fs_copyfilesync_src_dest_mode"></a></h4><p class="tip_wrap" data-show_trans="1" data-item_id="#fscopyfilesyncsrc-dest-mode">
                <a href="fs/fs_copyfilesync_src_dest_mode.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<details class="changelog"><summary>版本历史</summary>
<table>
<tbody><tr><th>版本</th><th>变更</th></tr>
<tr><td>v14.0.0</td>
<td><p>将 'flags' 参数更改为 'mode'，并进行更严格的类型验证。</p></td></tr>
<tr><td>v8.5.0</td>
<td><p><span>新增于: v8.5.0</span></p></td></tr>
</tbody></table>
</details>
</div>
<ul class="">
<li><code>src</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="buffer.html#class-buffer" rel="nofollow" class="type">&lt;Buffer&gt;</a> | <a href="url.html#the-whatwg-url-api" rel="nofollow" class="type">&lt;URL&gt;</a> 要复制的源文件名</li>
<li><code>dest</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="buffer.html#class-buffer" rel="nofollow" class="type">&lt;Buffer&gt;</a> | <a href="url.html#the-whatwg-url-api" rel="nofollow" class="type">&lt;URL&gt;</a> 复制操作的目标文件名</li>
<li><code>mode</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a> 复制操作的修饰符。 <strong>默认值:</strong> <code>0</code>。</li>
</ul>
<p>同步地复制 <code>src</code> 到 <code>dest</code>。
默认情况下，如果 <code>dest</code> 已经存在，则会被覆盖。
返回 <code>undefined</code>。
Node.js 不保证复制操作的原子性。
如果在打开目标文件进行写入后发生错误，Node.js 将尝试删除目标文件。</p>
<p class=""><code>mode</code> 是可选的整数，用于指定复制操作的行为。
可以创建由两个或多个值的按位或组成的掩码（例如 <code>fs.constants.COPYFILE_EXCL | fs.constants.COPYFILE_FICLONE</code>）。</p>
<ul class="">
<li><code>fs.constants.COPYFILE_EXCL</code>: 如果 <code>dest</code> 已经存在，则复制操作将失败。</li>
<li><code>fs.constants.COPYFILE_FICLONE</code>: 复制操作将尝试创建写时复制引用链接。
如果平台不支持写时复制，则使用后备复制机制。</li>
<li><code>fs.constants.COPYFILE_FICLONE_FORCE</code>: 复制操作将尝试创建写时复制引用链接。
如果平台不支持写时复制，则该操作将失败。</li>
</ul>
<pre class=""><code class="language-js mjs"><span class="hljs-keyword">import</span> { copyFileSync, constants } <span class="hljs-keyword">from</span> <span class="hljs-string">'fs'</span>;

<span class="hljs-comment">// 默认情况下将创建或覆盖 destination.txt。</span>
<span class="hljs-title function_">copyFileSync</span>(<span class="hljs-string">'source.txt'</span>, <span class="hljs-string">'destination.txt'</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'source.txt was copied to destination.txt'</span>);

<span class="hljs-comment">// 通过使用 COPYFILE_EXCL，如果 destination.txt 存在，则该操作将失败。</span>
<span class="hljs-title function_">copyFileSync</span>(<span class="hljs-string">'source.txt'</span>, <span class="hljs-string">'destination.txt'</span>, constants.<span class="hljs-property">COPYFILE_EXCL</span>);</code></pre>
<h4><code>fs.cpSync(src, dest[, options])</code><span><a class="mark" href="#fscpsyncsrc-dest-options" id="fscpsyncsrc-dest-options">#</a></span><a aria-hidden="true" class="legacy" id="fs_fs_cpsync_src_dest_options"></a></h4><p class="tip_wrap" data-show_trans="1" data-item_id="#fscpsyncsrc-dest-options">
                <a href="fs/fs_cpsync_src_dest_options.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<details class="changelog"><summary>版本历史</summary>
<table>
<tbody><tr><th>版本</th><th>变更</th></tr>
<tr><td>v16.15.0</td>
<td><p>接受额外的 <code>verbatimSymlinks</code> 选项来指定是否为符号链接执行路径解析。</p></td></tr>
<tr><td>v16.7.0</td>
<td><p><span>新增于: v16.7.0</span></p></td></tr>
</tbody></table>
</details>
</div>
<p></p><div class="api_stability api_stability_1"><a href="documentation.html#stability-index">稳定性: 1</a> - 实验</div><p></p>
<ul class="">
<li><code>src</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="url.html#the-whatwg-url-api" rel="nofollow" class="type">&lt;URL&gt;</a> 要复制的源路径。</li>
<li><code>dest</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="url.html#the-whatwg-url-api" rel="nofollow" class="type">&lt;URL&gt;</a> 要复制到的目标路径。</li>
<li><code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" rel="nofollow" class="type">&lt;Object&gt;</a>
<ul>
<li><code>dereference</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" rel="nofollow" class="type">&lt;boolean&gt;</a> 取消引用符号链接。 <strong>默认值:</strong> <code>false</code>。</li>
<li><code>errorOnExist</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" rel="nofollow" class="type">&lt;boolean&gt;</a> 当 <code>force</code> 为 <code>false</code> 且目标存在时，则抛出错误。 <strong>默认值:</strong> <code>false</code>。</li>
<li><code>filter</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" rel="nofollow" class="type">&lt;Function&gt;</a> 过滤复制文件/目录的函数。
返回 <code>true</code> 则复制条目，返回 <code>false</code> 则忽略它。 <strong>默认值:</strong> <code>undefined</code></li>
<li><code>force</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" rel="nofollow" class="type">&lt;boolean&gt;</a> 覆盖现有的文件或目录。
如果将此设置为 false 并且目标存在，则复制操作将忽略错误。
使用 <code>errorOnExist</code> 选项更改此行为。
<strong>默认值:</strong> <code>true</code>。</li>
<li><code>preserveTimestamps</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" rel="nofollow" class="type">&lt;boolean&gt;</a> 当为 <code>true</code> 时，则 <code>src</code> 的时间戳将被保留。 <strong>默认值:</strong> <code>false</code>。</li>
<li><code>recursive</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" rel="nofollow" class="type">&lt;boolean&gt;</a> 递归地复制目录 <strong>默认值:</strong> <code>false</code></li>
<li><code>verbatimSymlinks</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" rel="nofollow" class="type">&lt;boolean&gt;</a> 当为 <code>true</code> 时，则符号链接的路径解析将被跳过。 <strong>默认值:</strong> <code>false</code></li>
</ul>
</li>
</ul>
<p>将整个目录结构从 <code>src</code> 同步地复制到 <code>dest</code>，包括子目录和文件。</p>
<p class="">当将目录复制到另一个目录时，不支持 globs，并且行为类似于 <code>cp dir1/ dir2/</code>。</p>
<h4><code>fs.existsSync(path)</code><span><a class="mark" href="#fsexistssyncpath" id="fsexistssyncpath">#</a></span><a aria-hidden="true" class="legacy" id="fs_fs_existssync_path"></a></h4><p class="tip_wrap" data-show_trans="1" data-item_id="#fsexistssyncpath">
                <a href="fs/fs_existssync_path.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<details class="changelog"><summary>版本历史</summary>
<table>
<tbody><tr><th>版本</th><th>变更</th></tr>
<tr><td>v7.6.0</td>
<td><p>参数 <code>path</code> 可以是使用 <code>file:</code> 协议的 WHATWG <code>URL</code> 对象。</p></td></tr>
<tr><td>v0.1.21</td>
<td><p><span>新增于: v0.1.21</span></p></td></tr>
</tbody></table>
</details>
</div>
<ul class="">
<li><code>path</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="buffer.html#class-buffer" rel="nofollow" class="type">&lt;Buffer&gt;</a> | <a href="url.html#the-whatwg-url-api" rel="nofollow" class="type">&lt;URL&gt;</a></li>
<li>返回: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" rel="nofollow" class="type">&lt;boolean&gt;</a></li>
</ul>
<p>如果路径存在则返回 <code>true</code>，否则返回 <code>false</code>。</p>
<p class="">有关详细信息，请参阅此 API 的异步版本的文档：<a href="#fsexistspath-callback"><code>fs.exists()</code></a>。</p>
<p class=""><code>fs.exists()</code> 已弃用，但 <code>fs.existsSync()</code> 不是。
<code>fs.exists()</code> 的 <code>callback</code> 参数接受与其他 Node.js 回调不一致的参数。
<code>fs.existsSync()</code> 不使用回调。</p>
<pre class=""><code class="language-js mjs"><span class="hljs-keyword">import</span> { existsSync } <span class="hljs-keyword">from</span> <span class="hljs-string">'fs'</span>;

<span class="hljs-keyword">if</span> (<span class="hljs-title function_">existsSync</span>(<span class="hljs-string">'/etc/passwd'</span>))
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'The path exists.'</span>);</code></pre>
<h4><code>fs.fchmodSync(fd, mode)</code><span><a class="mark" href="#fsfchmodsyncfd-mode" id="fsfchmodsyncfd-mode">#</a></span><a aria-hidden="true" class="legacy" id="fs_fs_fchmodsync_fd_mode"></a></h4><p class="tip_wrap" data-show_trans="1" data-item_id="#fsfchmodsyncfd-mode">
                <a href="fs/fs_fchmodsync_fd_mode.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>新增于: v0.4.7</span>
</div>
<ul class="">
<li><code>fd</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a></li>
<li><code>mode</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a></li>
</ul>
<p>设置文件的权限。
返回 <code>undefined</code>。</p>
<p class="">有关更多详细信息，请参阅 POSIX <a href="http://man7.org/linux/man-pages/man2/fchmod.2.html" rel="nofollow"><code>fchmod(2)</code></a> 文档。</p>
<h4><code>fs.fchownSync(fd, uid, gid)</code><span><a class="mark" href="#fsfchownsyncfd-uid-gid" id="fsfchownsyncfd-uid-gid">#</a></span><a aria-hidden="true" class="legacy" id="fs_fs_fchownsync_fd_uid_gid"></a></h4><p class="tip_wrap" data-show_trans="1" data-item_id="#fsfchownsyncfd-uid-gid">
                <a href="fs/fs_fchownsync_fd_uid_gid.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>新增于: v0.4.7</span>
</div>
<ul class="">
<li><code>fd</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a></li>
<li><code>uid</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a> 文件的新所有者的用户 ID。</li>
<li><code>gid</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a> 文件的新群组的组 ID。</li>
</ul>
<p>设置文件的所有者。
返回 <code>undefined</code>。</p>
<p class="">有关更多详细信息，请参阅 POSIX <a href="http://man7.org/linux/man-pages/man2/fchown.2.html" rel="nofollow"><code>fchown(2)</code></a> 文档。</p>
<h4><code>fs.fdatasyncSync(fd)</code><span><a class="mark" href="#fsfdatasyncsyncfd" id="fsfdatasyncsyncfd">#</a></span><a aria-hidden="true" class="legacy" id="fs_fs_fdatasyncsync_fd"></a></h4><p class="tip_wrap" data-show_trans="1" data-item_id="#fsfdatasyncsyncfd">
                <a href="fs/fs_fdatasyncsync_fd.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>新增于: v0.1.96</span>
</div>
<ul class="">
<li><code>fd</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a></li>
</ul>
<p>将与文件关联的所有当前排队的 I/O 操作强制为操作系统的同步 I/O 完成状态。
有关详细信息，请参阅 POSIX <a href="http://man7.org/linux/man-pages/man2/fdatasync.2.html" rel="nofollow"><code>fdatasync(2)</code></a> 文档。
返回 <code>undefined</code>。</p>
<h4><code>fs.fstatSync(fd[, options])</code><span><a class="mark" href="#fsfstatsyncfd-options" id="fsfstatsyncfd-options">#</a></span><a aria-hidden="true" class="legacy" id="fs_fs_fstatsync_fd_options"></a></h4><p class="tip_wrap" data-show_trans="1" data-item_id="#fsfstatsyncfd-options">
                <a href="fs/fs_fstatsync_fd_options.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<details class="changelog"><summary>版本历史</summary>
<table>
<tbody><tr><th>版本</th><th>变更</th></tr>
<tr><td>v10.5.0</td>
<td><p>接受额外的 <code>options</code> 对象，以指定返回的数字值是否应为长整数。</p></td></tr>
<tr><td>v0.1.95</td>
<td><p><span>新增于: v0.1.95</span></p></td></tr>
</tbody></table>
</details>
</div>
<ul class="">
<li><code>fd</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a></li>
<li><code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" rel="nofollow" class="type">&lt;Object&gt;</a>
<ul>
<li><code>bigint</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" rel="nofollow" class="type">&lt;boolean&gt;</a> 返回的 <a href="#class-fsstats" rel="nofollow" class="type">&lt;fs.Stats&gt;</a> 对象中的数值是否应为 <code>bigint</code>。 <strong>默认值:</strong> <code>false</code>。</li>
</ul>
</li>
<li>返回: <a href="#class-fsstats" rel="nofollow" class="type">&lt;fs.Stats&gt;</a></li>
</ul>
<p>获取文件描述符的 <a href="#class-fsstats" rel="nofollow" class="type">&lt;fs.Stats&gt;</a>。</p>
<p class="">有关更多详细信息，请参阅 POSIX <a href="http://man7.org/linux/man-pages/man2/fstat.2.html" rel="nofollow"><code>fstat(2)</code></a> 文档。</p>
<h4><code>fs.fsyncSync(fd)</code><span><a class="mark" href="#fsfsyncsyncfd" id="fsfsyncsyncfd">#</a></span><a aria-hidden="true" class="legacy" id="fs_fs_fsyncsync_fd"></a></h4><p class="tip_wrap" data-show_trans="1" data-item_id="#fsfsyncsyncfd">
                <a href="fs/fs_fsyncsync_fd.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>新增于: v0.1.96</span>
</div>
<ul class="">
<li><code>fd</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a></li>
</ul>
<p>请求将打开文件描述符的所有数据刷新到存储设备。
具体实现是操作系统和设备特定的。
有关更多详细信息，请参考 POSIX <a href="http://man7.org/linux/man-pages/man2/fsync.2.html" rel="nofollow"><code>fsync(2)</code></a> 文档。
返回 <code>undefined</code>。</p>
<h4><code>fs.ftruncateSync(fd[, len])</code><span><a class="mark" href="#fsftruncatesyncfd-len" id="fsftruncatesyncfd-len">#</a></span><a aria-hidden="true" class="legacy" id="fs_fs_ftruncatesync_fd_len"></a></h4><p class="tip_wrap" data-show_trans="1" data-item_id="#fsftruncatesyncfd-len">
                <a href="fs/fs_ftruncatesync_fd_len.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>新增于: v0.8.6</span>
</div>
<ul class="">
<li><code>fd</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a></li>
<li><code>len</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a> <strong>默认值:</strong> <code>0</code></li>
</ul>
<p>截断文件描述符。
返回 <code>undefined</code>。</p>
<p class="">有关详细信息，请参阅此 API 的异步版本的文档：<a href="#fsftruncatefd-len-callback"><code>fs.ftruncate()</code></a>。</p>
<h4><code>fs.futimesSync(fd, atime, mtime)</code><span><a class="mark" href="#fsfutimessyncfd-atime-mtime" id="fsfutimessyncfd-atime-mtime">#</a></span><a aria-hidden="true" class="legacy" id="fs_fs_futimessync_fd_atime_mtime"></a></h4><p class="tip_wrap" data-show_trans="1" data-item_id="#fsfutimessyncfd-atime-mtime">
                <a href="fs/fs_futimessync_fd_atime_mtime.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<details class="changelog"><summary>版本历史</summary>
<table>
<tbody><tr><th>版本</th><th>变更</th></tr>
<tr><td>v4.1.0</td>
<td><p>现在允许使用数字字符串、<code>NaN</code> 和 <code>Infinity</code> 作为时间说明符。</p></td></tr>
<tr><td>v0.4.2</td>
<td><p><span>新增于: v0.4.2</span></p></td></tr>
</tbody></table>
</details>
</div>
<ul class="">
<li><code>fd</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a></li>
<li><code>atime</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;number&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date" rel="nofollow" class="type">&lt;Date&gt;</a></li>
<li><code>mtime</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;number&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date" rel="nofollow" class="type">&lt;Date&gt;</a></li>
</ul>
<p><a href="#fsfutimesfd-atime-mtime-callback"><code>fs.futimes()</code></a> 的同步版本。
返回 <code>undefined</code>。</p>
<h4><code>fs.lchmodSync(path, mode)</code><span><a class="mark" href="#fslchmodsyncpath-mode" id="fslchmodsyncpath-mode">#</a></span><a aria-hidden="true" class="legacy" id="fs_fs_lchmodsync_path_mode"></a></h4><p class="tip_wrap" data-show_trans="1" data-item_id="#fslchmodsyncpath-mode">
                <a href="fs/fs_lchmodsync_path_mode.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>弃用于: v0.4.7</span>
</div>
<ul class="">
<li><code>path</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="buffer.html#class-buffer" rel="nofollow" class="type">&lt;Buffer&gt;</a> | <a href="url.html#the-whatwg-url-api" rel="nofollow" class="type">&lt;URL&gt;</a></li>
<li><code>mode</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a></li>
</ul>
<p>更改符号链接的权限。
返回 <code>undefined</code>。</p>
<p class="">此方法仅在 macOS 上实现。</p>
<p class="">有关更多详细信息，请参阅 POSIX <a href="https://www.freebsd.org/cgi/man.cgi" rel="nofollow"><code>lchmod(2)</code></a> 文档。</p>
<h4><code>fs.lchownSync(path, uid, gid)</code><span><a class="mark" href="#fslchownsyncpath-uid-gid" id="fslchownsyncpath-uid-gid">#</a></span><a aria-hidden="true" class="legacy" id="fs_fs_lchownsync_path_uid_gid"></a></h4><p class="tip_wrap" data-show_trans="1" data-item_id="#fslchownsyncpath-uid-gid">
                <a href="fs/fs_lchownsync_path_uid_gid.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<details class="changelog"><summary>版本历史</summary>
<table>
<tbody><tr><th>版本</th><th>变更</th></tr>
<tr><td>v10.6.0</td>
<td><p>该 API 不再被弃用。</p></td></tr>
<tr><td>v0.4.7</td>
<td><p>仅文档弃用。</p></td></tr>
</tbody></table>
</details>
</div>
<ul class="">
<li><code>path</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="buffer.html#class-buffer" rel="nofollow" class="type">&lt;Buffer&gt;</a> | <a href="url.html#the-whatwg-url-api" rel="nofollow" class="type">&lt;URL&gt;</a></li>
<li><code>uid</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a> 文件的新所有者的用户 ID。</li>
<li><code>gid</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a> 文件的新群组的组 ID。</li>
</ul>
<p>设置路径的所有者。
返回 <code>undefined</code>。</p>
<p class="">有关更多详细信息，请参阅 POSIX <a href="http://man7.org/linux/man-pages/man2/lchown.2.html" rel="nofollow"><code>lchown(2)</code></a> 文档。</p>
<h4><code>fs.lutimesSync(path, atime, mtime)</code><span><a class="mark" href="#fslutimessyncpath-atime-mtime" id="fslutimessyncpath-atime-mtime">#</a></span><a aria-hidden="true" class="legacy" id="fs_fs_lutimessync_path_atime_mtime"></a></h4><p class="tip_wrap" data-show_trans="1" data-item_id="#fslutimessyncpath-atime-mtime">
                <a href="fs/fs_lutimessync_path_atime_mtime.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>新增于: v14.5.0, v12.19.0</span>
</div>
<ul class="">
<li><code>path</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="buffer.html#class-buffer" rel="nofollow" class="type">&lt;Buffer&gt;</a> | <a href="url.html#the-whatwg-url-api" rel="nofollow" class="type">&lt;URL&gt;</a></li>
<li><code>atime</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;number&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date" rel="nofollow" class="type">&lt;Date&gt;</a></li>
<li><code>mtime</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;number&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date" rel="nofollow" class="type">&lt;Date&gt;</a></li>
</ul>
<p>更改 <code>path</code> 引用的符号链接的文件系统时间戳。
返回 <code>undefined</code>，或在参数不正确或操作失败时抛出异常。
这是 <a href="#fslutimespath-atime-mtime-callback"><code>fs.lutimes()</code></a> 的同步版本。</p>
<h4><code>fs.linkSync(existingPath, newPath)</code><span><a class="mark" href="#fslinksyncexistingpath-newpath" id="fslinksyncexistingpath-newpath">#</a></span><a aria-hidden="true" class="legacy" id="fs_fs_linksync_existingpath_newpath"></a></h4><p class="tip_wrap" data-show_trans="1" data-item_id="#fslinksyncexistingpath-newpath">
                <a href="fs/fs_linksync_existingpath_newpath.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<details class="changelog"><summary>版本历史</summary>
<table>
<tbody><tr><th>版本</th><th>变更</th></tr>
<tr><td>v7.6.0</td>
<td><p>参数 <code>existingPath</code> 和 <code>newPath</code> 可以是使用 <code>file:</code> 协议的 WHATWG <code>URL</code> 对象。 支持目前仍处于实验阶段。</p></td></tr>
<tr><td>v0.1.31</td>
<td><p><span>新增于: v0.1.31</span></p></td></tr>
</tbody></table>
</details>
</div>
<ul class="">
<li><code>existingPath</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="buffer.html#class-buffer" rel="nofollow" class="type">&lt;Buffer&gt;</a> | <a href="url.html#the-whatwg-url-api" rel="nofollow" class="type">&lt;URL&gt;</a></li>
<li><code>newPath</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="buffer.html#class-buffer" rel="nofollow" class="type">&lt;Buffer&gt;</a> | <a href="url.html#the-whatwg-url-api" rel="nofollow" class="type">&lt;URL&gt;</a></li>
</ul>
<p>创建从 <code>existingPath</code> 到 <code>newPath</code> 的新链接。
有关更多详细信息，请参阅 POSIX <a href="http://man7.org/linux/man-pages/man2/link.2.html" rel="nofollow"><code>link(2)</code></a> 文档。
返回 <code>undefined</code>。</p>
<h4><code>fs.lstatSync(path[, options])</code><span><a class="mark" href="#fslstatsyncpath-options" id="fslstatsyncpath-options">#</a></span><a aria-hidden="true" class="legacy" id="fs_fs_lstatsync_path_options"></a></h4><p class="tip_wrap" data-show_trans="1" data-item_id="#fslstatsyncpath-options">
                <a href="fs/fs_lstatsync_path_options.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<details class="changelog"><summary>版本历史</summary>
<table>
<tbody><tr><th>版本</th><th>变更</th></tr>
<tr><td>v15.3.0, v14.17.0</td>
<td><p>接受 <code>throwIfNoEntry</code> 选项以指定当条目不存在时是否应抛出异常。</p></td></tr>
<tr><td>v10.5.0</td>
<td><p>接受额外的 <code>options</code> 对象，以指定返回的数字值是否应为长整数。</p></td></tr>
<tr><td>v7.6.0</td>
<td><p>参数 <code>path</code> 可以是使用 <code>file:</code> 协议的 WHATWG <code>URL</code> 对象。</p></td></tr>
<tr><td>v0.1.30</td>
<td><p><span>新增于: v0.1.30</span></p></td></tr>
</tbody></table>
</details>
</div>
<ul class="">
<li><code>path</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="buffer.html#class-buffer" rel="nofollow" class="type">&lt;Buffer&gt;</a> | <a href="url.html#the-whatwg-url-api" rel="nofollow" class="type">&lt;URL&gt;</a></li>
<li><code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" rel="nofollow" class="type">&lt;Object&gt;</a>
<ul>
<li><code>bigint</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" rel="nofollow" class="type">&lt;boolean&gt;</a> 返回的 <a href="#class-fsstats" rel="nofollow" class="type">&lt;fs.Stats&gt;</a> 对象中的数值是否应为 <code>bigint</code>。 <strong>默认值:</strong> <code>false</code>。</li>
<li><code>throwIfNoEntry</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" rel="nofollow" class="type">&lt;boolean&gt;</a> 如果文件系统条目不存在，是否会抛出异常，而不是返回 <code>undefined</code>。
<strong>默认值:</strong> <code>true</code>。</li>
</ul>
</li>
<li>返回: <a href="#class-fsstats" rel="nofollow" class="type">&lt;fs.Stats&gt;</a></li>
</ul>
<p>获取 <code>path</code> 引用的符号链接的 <a href="#class-fsstats" rel="nofollow" class="type">&lt;fs.Stats&gt;</a>。</p>
<p class="">有关更多详细信息，请参阅 POSIX <a href="http://man7.org/linux/man-pages/man2/lstat.2.html" rel="nofollow"><code>lstat(2)</code></a> 文档。</p>
<h4><code>fs.mkdirSync(path[, options])</code><span><a class="mark" href="#fsmkdirsyncpath-options" id="fsmkdirsyncpath-options">#</a></span><a aria-hidden="true" class="legacy" id="fs_fs_mkdirsync_path_options"></a></h4><p class="tip_wrap" data-show_trans="1" data-item_id="#fsmkdirsyncpath-options">
                <a href="fs/fs_mkdirsync_path_options.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<details class="changelog"><summary>版本历史</summary>
<table>
<tbody><tr><th>版本</th><th>变更</th></tr>
<tr><td>v13.11.0, v12.17.0</td>
<td><p>在 <code>recursive</code> 模式下，现在返回第一个创建的路径。</p></td></tr>
<tr><td>v10.12.0</td>
<td><p>第二个参数现在可以是具有 <code>recursive</code> 和 <code>mode</code> 属性的 <code>options</code> 对象。</p></td></tr>
<tr><td>v7.6.0</td>
<td><p>参数 <code>path</code> 可以是使用 <code>file:</code> 协议的 WHATWG <code>URL</code> 对象。</p></td></tr>
<tr><td>v0.1.21</td>
<td><p><span>新增于: v0.1.21</span></p></td></tr>
</tbody></table>
</details>
</div>
<ul class="">
<li><code>path</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="buffer.html#class-buffer" rel="nofollow" class="type">&lt;Buffer&gt;</a> | <a href="url.html#the-whatwg-url-api" rel="nofollow" class="type">&lt;URL&gt;</a></li>
<li><code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" rel="nofollow" class="type">&lt;Object&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a>
<ul>
<li><code>recursive</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" rel="nofollow" class="type">&lt;boolean&gt;</a> <strong>默认值:</strong> <code>false</code></li>
<li><code>mode</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a> Windows 上不支持。 <strong>默认值:</strong> <code>0o777</code>。</li>
</ul>
</li>
<li>返回: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Undefined_type" rel="nofollow" class="type">&lt;undefined&gt;</a></li>
</ul>
<p>同步地创建目录。
返回 <code>undefined</code> 或创建的第一个目录路径（如果 <code>recursive</code> 为 <code>true</code>）。
这是 <a href="#fsmkdirpath-options-callback"><code>fs.mkdir()</code></a> 的同步版本。</p>
<p class="">有关更多详细信息，请参阅 POSIX <a href="http://man7.org/linux/man-pages/man2/mkdir.2.html" rel="nofollow"><code>mkdir(2)</code></a> 文档。</p>
<h4><code>fs.mkdtempSync(prefix[, options])</code><span><a class="mark" href="#fsmkdtempsyncprefix-options" id="fsmkdtempsyncprefix-options">#</a></span><a aria-hidden="true" class="legacy" id="fs_fs_mkdtempsync_prefix_options"></a></h4><p class="tip_wrap" data-show_trans="1" data-item_id="#fsmkdtempsyncprefix-options">
                <a href="fs/fs_mkdtempsync_prefix_options.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<details class="changelog"><summary>版本历史</summary>
<table>
<tbody><tr><th>版本</th><th>变更</th></tr>
<tr><td>v16.5.0</td>
<td><p>参数 <code>prefix</code> 现在接受空字符串。</p></td></tr>
<tr><td>v5.10.0</td>
<td><p><span>新增于: v5.10.0</span></p></td></tr>
</tbody></table>
</details>
</div>
<ul class="">
<li><code>prefix</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a></li>
<li><code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" rel="nofollow" class="type">&lt;Object&gt;</a>
<ul>
<li><code>encoding</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> <strong>默认值:</strong> <code>'utf8'</code></li>
</ul>
</li>
<li>返回: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a></li>
</ul>
<p>返回创建的目录路径。</p>
<p class="">有关详细信息，请参阅此 API 的异步版本的文档：<a href="#fsmkdtempprefix-options-callback"><code>fs.mkdtemp()</code></a>。</p>
<p class="">可选的 <code>options</code> 参数可以是指定编码的字符串，也可以是具有 <code>encoding</code> 属性（指定要使用的字符编码）的对象。</p>
<h4><code>fs.opendirSync(path[, options])</code><span><a class="mark" href="#fsopendirsyncpath-options" id="fsopendirsyncpath-options">#</a></span><a aria-hidden="true" class="legacy" id="fs_fs_opendirsync_path_options"></a></h4><p class="tip_wrap" data-show_trans="1" data-item_id="#fsopendirsyncpath-options">
                <a href="fs/fs_opendirsync_path_options.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<details class="changelog"><summary>版本历史</summary>
<table>
<tbody><tr><th>版本</th><th>变更</th></tr>
<tr><td>v13.1.0, v12.16.0</td>
<td><p>引入了 <code>bufferSize</code> 选项。</p></td></tr>
<tr><td>v12.12.0</td>
<td><p><span>新增于: v12.12.0</span></p></td></tr>
</tbody></table>
</details>
</div>
<ul class="">
<li><code>path</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="buffer.html#class-buffer" rel="nofollow" class="type">&lt;Buffer&gt;</a> | <a href="url.html#the-whatwg-url-api" rel="nofollow" class="type">&lt;URL&gt;</a></li>
<li><code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" rel="nofollow" class="type">&lt;Object&gt;</a>
<ul>
<li><code>encoding</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Null_type" rel="nofollow" class="type">&lt;null&gt;</a> <strong>默认值:</strong> <code>'utf8'</code></li>
<li><code>bufferSize</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;number&gt;</a> 当从目录读取时，在内部缓冲的目录条目数。
值越大，性能越好，但内存使用率越高。 <strong>默认值:</strong> <code>32</code></li>
</ul>
</li>
<li>返回: <a href="#class-fsdir" rel="nofollow" class="type">&lt;fs.Dir&gt;</a></li>
</ul>
<p>同步地打开目录。
参见 <a href="http://man7.org/linux/man-pages/man3/opendir.3.html" rel="nofollow"><code>opendir(3)</code></a>。</p>
<p class="">创建 <a href="#class-fsdir" rel="nofollow" class="type">&lt;fs.Dir&gt;</a>，其中包含用于从目录读取和清理目录的所有进一步的函数。</p>
<p class=""><code>encoding</code> 选项设置在打开目录和随后的读取操作时 <code>path</code> 的编码。</p>
<h4><code>fs.openSync(path[, flags[, mode]])</code><span><a class="mark" href="#fsopensyncpath-flags-mode" id="fsopensyncpath-flags-mode">#</a></span><a aria-hidden="true" class="legacy" id="fs_fs_opensync_path_flags_mode"></a></h4><p class="tip_wrap" data-show_trans="1" data-item_id="#fsopensyncpath-flags-mode">
                <a href="fs/fs_opensync_path_flags_mode.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<details class="changelog"><summary>版本历史</summary>
<table>
<tbody><tr><th>版本</th><th>变更</th></tr>
<tr><td>v11.1.0</td>
<td><p>参数 <code>flags</code> 现在是可选的，默认为 <code>'r'</code>。</p></td></tr>
<tr><td>v9.9.0</td>
<td><p>现在支持 <code>as</code> 和 <code>as+</code> 标志。</p></td></tr>
<tr><td>v7.6.0</td>
<td><p>参数 <code>path</code> 可以是使用 <code>file:</code> 协议的 WHATWG <code>URL</code> 对象。</p></td></tr>
<tr><td>v0.1.21</td>
<td><p><span>新增于: v0.1.21</span></p></td></tr>
</tbody></table>
</details>
</div>
<ul class="">
<li><code>path</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="buffer.html#class-buffer" rel="nofollow" class="type">&lt;Buffer&gt;</a> | <a href="url.html#the-whatwg-url-api" rel="nofollow" class="type">&lt;URL&gt;</a></li>
<li><code>flags</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;number&gt;</a> <strong>默认值:</strong> <code>'r'</code>。
请参阅<a href="#file-system-flags">对文件系统 <code>flags</code> 的支持</a>。</li>
<li><code>mode</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a> <strong>默认值:</strong> <code>0o666</code></li>
<li>返回: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;number&gt;</a></li>
</ul>
<p>返回表示文件描述符的整数。</p>
<p class="">有关详细信息，请参阅此 API 的异步版本的文档：<a href="#fsopenpath-flags-mode-callback"><code>fs.open()</code></a>。</p>
<h4><code>fs.readdirSync(path[, options])</code><span><a class="mark" href="#fsreaddirsyncpath-options" id="fsreaddirsyncpath-options">#</a></span><a aria-hidden="true" class="legacy" id="fs_fs_readdirsync_path_options"></a></h4><p class="tip_wrap" data-show_trans="1" data-item_id="#fsreaddirsyncpath-options">
                <a href="fs/fs_readdirsync_path_options.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<details class="changelog"><summary>版本历史</summary>
<table>
<tbody><tr><th>版本</th><th>变更</th></tr>
<tr><td>v10.10.0</td>
<td><p>添加了新选项 <code>withFileTypes</code>。</p></td></tr>
<tr><td>v7.6.0</td>
<td><p>参数 <code>path</code> 可以是使用 <code>file:</code> 协议的 WHATWG <code>URL</code> 对象。</p></td></tr>
<tr><td>v0.1.21</td>
<td><p><span>新增于: v0.1.21</span></p></td></tr>
</tbody></table>
</details>
</div>
<ul class="">
<li><code>path</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="buffer.html#class-buffer" rel="nofollow" class="type">&lt;Buffer&gt;</a> | <a href="url.html#the-whatwg-url-api" rel="nofollow" class="type">&lt;URL&gt;</a></li>
<li><code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" rel="nofollow" class="type">&lt;Object&gt;</a>
<ul>
<li><code>encoding</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> <strong>默认值:</strong> <code>'utf8'</code></li>
<li><code>withFileTypes</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" rel="nofollow" class="type">&lt;boolean&gt;</a> <strong>默认值:</strong> <code>false</code></li>
</ul>
</li>
<li>返回: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string[]&gt;</a> | <a href="buffer.html#class-buffer" rel="nofollow" class="type">&lt;Buffer[]&gt;</a> | <a href="#class-fsdirent" rel="nofollow" class="type">&lt;fs.Dirent[]&gt;</a></li>
</ul>
<p>读取目录的内容。</p>
<p class="">有关更多详细信息，请参阅 POSIX <a href="http://man7.org/linux/man-pages/man3/readdir.3.html" rel="nofollow"><code>readdir(3)</code></a> 文档。</p>
<p class="">可选的 <code>options</code> 参数可以是指定编码的字符串，也可以是具有 <code>encoding</code> 属性（指定用于返回的文件名的字符编码）的对象。
如果 <code>encoding</code> 设置为 <code>'buffer'</code>，则返回的文件名将作为 <a href="buffer.html#class-buffer" rel="nofollow" class="type">&lt;Buffer&gt;</a> 对象传入。</p>
<p class="">如果 <code>options.withFileTypes</code> 设置为 <code>true</code>，则结果将包含 <a href="#class-fsdirent" rel="nofollow" class="type">&lt;fs.Dirent&gt;</a> 对象。</p>
<h4><code>fs.readFileSync(path[, options])</code><span><a class="mark" href="#fsreadfilesyncpath-options" id="fsreadfilesyncpath-options">#</a></span><a aria-hidden="true" class="legacy" id="fs_fs_readfilesync_path_options"></a></h4><p class="tip_wrap" data-show_trans="1" data-item_id="#fsreadfilesyncpath-options">
                <a href="fs/fs_readfilesync_path_options.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<details class="changelog"><summary>版本历史</summary>
<table>
<tbody><tr><th>版本</th><th>变更</th></tr>
<tr><td>v7.6.0</td>
<td><p>参数 <code>path</code> 可以是使用 <code>file:</code> 协议的 WHATWG <code>URL</code> 对象。</p></td></tr>
<tr><td>v5.0.0</td>
<td><p>参数 <code>path</code> 现在可以是文件描述符。</p></td></tr>
<tr><td>v0.1.8</td>
<td><p><span>新增于: v0.1.8</span></p></td></tr>
</tbody></table>
</details>
</div>
<ul class="">
<li><code>path</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="buffer.html#class-buffer" rel="nofollow" class="type">&lt;Buffer&gt;</a> | <a href="url.html#the-whatwg-url-api" rel="nofollow" class="type">&lt;URL&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a> 文件名或文件描述符</li>
<li><code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" rel="nofollow" class="type">&lt;Object&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a>
<ul>
<li><code>encoding</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Null_type" rel="nofollow" class="type">&lt;null&gt;</a> <strong>默认值:</strong> <code>null</code></li>
<li><code>flag</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> 请参阅<a href="#file-system-flags">对文件系统 <code>flags</code> 的支持</a>。 <strong>默认值:</strong> <code>'r'</code>。</li>
</ul>
</li>
<li>返回: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="buffer.html#class-buffer" rel="nofollow" class="type">&lt;Buffer&gt;</a></li>
</ul>
<p>返回 <code>path</code> 的内容。</p>
<p class="">有关详细信息，请参阅此 API 的异步版本的文档：<a href="#fsreadfilepath-options-callback"><code>fs.readFile()</code></a>。</p>
<p class="">如果指定了 <code>encoding</code> 选项，则此函数返回字符串。
否则它返回缓冲区。</p>
<p class="">与 <a href="#fsreadfilepath-options-callback"><code>fs.readFile()</code></a> 类似，当路径为目录时，<code>fs.readFileSync()</code> 的行为是特定于平台的。</p>
<pre class=""><code class="language-js mjs"><span class="hljs-keyword">import</span> { readFileSync } <span class="hljs-keyword">from</span> <span class="hljs-string">'fs'</span>;

<span class="hljs-comment">// macOS、Linux 和 Windows</span>
<span class="hljs-title function_">readFileSync</span>(<span class="hljs-string">'&lt;directory&gt;'</span>);
<span class="hljs-comment">// =&gt; [Error: EISDIR: illegal operation on a directory, read &lt;directory&gt;]</span>

<span class="hljs-comment">//  FreeBSD</span>
<span class="hljs-title function_">readFileSync</span>(<span class="hljs-string">'&lt;directory&gt;'</span>); <span class="hljs-comment">// =&gt; &lt;data&gt;</span></code></pre>
<h4><code>fs.readlinkSync(path[, options])</code><span><a class="mark" href="#fsreadlinksyncpath-options" id="fsreadlinksyncpath-options">#</a></span><a aria-hidden="true" class="legacy" id="fs_fs_readlinksync_path_options"></a></h4><p class="tip_wrap" data-show_trans="1" data-item_id="#fsreadlinksyncpath-options">
                <a href="fs/fs_readlinksync_path_options.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<details class="changelog"><summary>版本历史</summary>
<table>
<tbody><tr><th>版本</th><th>变更</th></tr>
<tr><td>v7.6.0</td>
<td><p>参数 <code>path</code> 可以是使用 <code>file:</code> 协议的 WHATWG <code>URL</code> 对象。</p></td></tr>
<tr><td>v0.1.31</td>
<td><p><span>新增于: v0.1.31</span></p></td></tr>
</tbody></table>
</details>
</div>
<ul class="">
<li><code>path</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="buffer.html#class-buffer" rel="nofollow" class="type">&lt;Buffer&gt;</a> | <a href="url.html#the-whatwg-url-api" rel="nofollow" class="type">&lt;URL&gt;</a></li>
<li><code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" rel="nofollow" class="type">&lt;Object&gt;</a>
<ul>
<li><code>encoding</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> <strong>默认值:</strong> <code>'utf8'</code></li>
</ul>
</li>
<li>返回: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="buffer.html#class-buffer" rel="nofollow" class="type">&lt;Buffer&gt;</a></li>
</ul>
<p>返回符号链接的字符串值。</p>
<p class="">有关更多详细信息，请参阅 POSIX <a href="http://man7.org/linux/man-pages/man2/readlink.2.html" rel="nofollow"><code>readlink(2)</code></a> 文档。</p>
<p class="">可选的 <code>options</code> 参数可以是指定编码的字符串，也可以是具有 <code>encoding</code> 属性（指定用于返回的链接路径的字符编码）的对象。
如果将 <code>encoding</code> 设置为 <code>'buffer'</code>，则返回的链接路径将作为 <a href="buffer.html#class-buffer" rel="nofollow" class="type">&lt;Buffer&gt;</a> 对象传入。</p>
<h4><code>fs.readSync(fd, buffer, offset, length, position)</code><span><a class="mark" href="#fsreadsyncfd-buffer-offset-length-position" id="fsreadsyncfd-buffer-offset-length-position">#</a></span><a aria-hidden="true" class="legacy" id="fs_fs_readsync_fd_buffer_offset_length_position"></a></h4><p class="tip_wrap" data-show_trans="1" data-item_id="#fsreadsyncfd-buffer-offset-length-position">
                <a href="fs/fs_readsync_fd_buffer_offset_length_position.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<details class="changelog"><summary>版本历史</summary>
<table>
<tbody><tr><th>版本</th><th>变更</th></tr>
<tr><td>v10.10.0</td>
<td><p>参数 <code>buffer</code> 现在可以是任何 <code>TypedArray</code> 或 <code>DataView</code>。</p></td></tr>
<tr><td>v6.0.0</td>
<td><p>参数 <code>length</code> 现在可以为 <code>0</code>。</p></td></tr>
<tr><td>v0.1.21</td>
<td><p><span>新增于: v0.1.21</span></p></td></tr>
</tbody></table>
</details>
</div>
<ul class="">
<li><code>fd</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a></li>
<li><code>buffer</code> <a href="buffer.html#class-buffer" rel="nofollow" class="type">&lt;Buffer&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/TypedArray" rel="nofollow" class="type">&lt;TypedArray&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/DataView" rel="nofollow" class="type">&lt;DataView&gt;</a></li>
<li><code>offset</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a></li>
<li><code>length</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a></li>
<li><code>position</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/BigInt" rel="nofollow" class="type">&lt;bigint&gt;</a></li>
<li>返回: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;number&gt;</a></li>
</ul>
<p>返回 <code>bytesRead</code> 的数量。</p>
<p class="">有关详细信息，请参阅此 API 的异步版本的文档：<a href="#fsreadfd-buffer-offset-length-position-callback"><code>fs.read()</code></a>。</p>
<h4><code>fs.readSync(fd, buffer[, options])</code><span><a class="mark" href="#fsreadsyncfd-buffer-options" id="fsreadsyncfd-buffer-options">#</a></span><a aria-hidden="true" class="legacy" id="fs_fs_readsync_fd_buffer_options"></a></h4><p class="tip_wrap" data-show_trans="1" data-item_id="#fsreadsyncfd-buffer-options">
                <a href="fs/fs_readsync_fd_buffer_options.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<details class="changelog"><summary>版本历史</summary>
<table>
<tbody><tr><th>版本</th><th>变更</th></tr>
<tr><td>v13.13.0, v12.17.0</td>
<td><p><span>新增于: v13.13.0, v12.17.0</span></p></td></tr>
<tr><td>v13.13.0, v12.17.0</td>
<td><p>可以传入选项对象，使偏移量、长度、以及位置可选。</p></td></tr>
</tbody></table>
</details>
</div>
<ul class="">
<li><code>fd</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a></li>
<li><code>buffer</code> <a href="buffer.html#class-buffer" rel="nofollow" class="type">&lt;Buffer&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/TypedArray" rel="nofollow" class="type">&lt;TypedArray&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/DataView" rel="nofollow" class="type">&lt;DataView&gt;</a></li>
<li><code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" rel="nofollow" class="type">&lt;Object&gt;</a>
<ul>
<li><code>offset</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a> <strong>默认值:</strong> <code>0</code></li>
<li><code>length</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a> <strong>默认值:</strong> <code>buffer.byteLength - offset</code></li>
<li><code>position</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/BigInt" rel="nofollow" class="type">&lt;bigint&gt;</a> <strong>默认值:</strong> <code>null</code></li>
</ul>
</li>
<li>返回: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;number&gt;</a></li>
</ul>
<p>返回 <code>bytesRead</code> 的数量。</p>
<p class="">与上面的 <code>fs.readSync</code> 函数类似，此版本采用可选的 <code>options</code> 对象。
如果未指定 <code>options</code> 对象，则默认使用上述值。</p>
<p class="">有关详细信息，请参阅此 API 的异步版本的文档：<a href="#fsreadfd-buffer-offset-length-position-callback"><code>fs.read()</code></a>。</p>
<h4><code>fs.readvSync(fd, buffers[, position])</code><span><a class="mark" href="#fsreadvsyncfd-buffers-position" id="fsreadvsyncfd-buffers-position">#</a></span><a aria-hidden="true" class="legacy" id="fs_fs_readvsync_fd_buffers_position"></a></h4><p class="tip_wrap" data-show_trans="1" data-item_id="#fsreadvsyncfd-buffers-position">
                <a href="fs/fs_readvsync_fd_buffers_position.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>新增于: v13.13.0, v12.17.0</span>
</div>
<ul class="">
<li><code>fd</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a></li>
<li><code>buffers</code> <a href="https://developer.mozilla.org/en-US/docs/Web/API/ArrayBufferView" rel="nofollow" class="type">&lt;ArrayBufferView[]&gt;</a></li>
<li><code>position</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a></li>
<li>返回: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;number&gt;</a> 读取的字节数。</li>
</ul>
<p>有关详细信息，请参阅此 API 的异步版本的文档：<a href="#fsreadvfd-buffers-position-callback"><code>fs.readv()</code></a>。</p>
<h4><code>fs.realpathSync(path[, options])</code><span><a class="mark" href="#fsrealpathsyncpath-options" id="fsrealpathsyncpath-options">#</a></span><a aria-hidden="true" class="legacy" id="fs_fs_realpathsync_path_options"></a></h4><p class="tip_wrap" data-show_trans="1" data-item_id="#fsrealpathsyncpath-options">
                <a href="fs/fs_realpathsync_path_options.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<details class="changelog"><summary>版本历史</summary>
<table>
<tbody><tr><th>版本</th><th>变更</th></tr>
<tr><td>v8.0.0</td>
<td><p>添加了管道/套接字解析支持。</p></td></tr>
<tr><td>v7.6.0</td>
<td><p>参数 <code>path</code> 可以是使用 <code>file:</code> 协议的 WHATWG <code>URL</code> 对象。</p></td></tr>
<tr><td>v6.4.0</td>
<td><p>调用 <code>realpathSync</code> 现在再次适用于 Windows 上的各种边缘情况。</p></td></tr>
<tr><td>v6.0.0</td>
<td><p>参数 <code>cache</code> 已删除。</p></td></tr>
<tr><td>v0.1.31</td>
<td><p><span>新增于: v0.1.31</span></p></td></tr>
</tbody></table>
</details>
</div>
<ul class="">
<li><code>path</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="buffer.html#class-buffer" rel="nofollow" class="type">&lt;Buffer&gt;</a> | <a href="url.html#the-whatwg-url-api" rel="nofollow" class="type">&lt;URL&gt;</a></li>
<li><code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" rel="nofollow" class="type">&lt;Object&gt;</a>
<ul>
<li><code>encoding</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> <strong>默认值:</strong> <code>'utf8'</code></li>
</ul>
</li>
<li>返回: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="buffer.html#class-buffer" rel="nofollow" class="type">&lt;Buffer&gt;</a></li>
</ul>
<p>返回解析的路径名。</p>
<p class="">有关详细信息，请参阅此 API 的异步版本的文档：<a href="#fsrealpathpath-options-callback"><code>fs.realpath()</code></a>。</p>
<h4><code>fs.realpathSync.native(path[, options])</code><span><a class="mark" href="#fsrealpathsyncnativepath-options" id="fsrealpathsyncnativepath-options">#</a></span><a aria-hidden="true" class="legacy" id="fs_fs_realpathsync_native_path_options"></a></h4><p class="tip_wrap" data-show_trans="1" data-item_id="#fsrealpathsyncnativepath-options">
                <a href="fs/fs_realpathsync_native_path_options.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>新增于: v9.2.0</span>
</div>
<ul class="">
<li><code>path</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="buffer.html#class-buffer" rel="nofollow" class="type">&lt;Buffer&gt;</a> | <a href="url.html#the-whatwg-url-api" rel="nofollow" class="type">&lt;URL&gt;</a></li>
<li><code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" rel="nofollow" class="type">&lt;Object&gt;</a>
<ul>
<li><code>encoding</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> <strong>默认值:</strong> <code>'utf8'</code></li>
</ul>
</li>
<li>返回: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="buffer.html#class-buffer" rel="nofollow" class="type">&lt;Buffer&gt;</a></li>
</ul>
<p>同步的 <a href="http://man7.org/linux/man-pages/man3/realpath.3.html" rel="nofollow"><code>realpath(3)</code></a>。</p>
<p class="">仅支持可以转换为 UTF8 字符串的路径。</p>
<p class="">可选的 <code>options</code> 参数可以是指定编码的字符串，也可以是具有 <code>encoding</code> 属性（指定用于返回的路径的字符编码）的对象。
如果 <code>encoding</code> 设置为 <code>'buffer'</code>，则返回的路径将作为 <a href="buffer.html#class-buffer" rel="nofollow" class="type">&lt;Buffer&gt;</a> 对象传入。</p>
<p class="">在 Linux 上，将 Node.js 与 musl libc 链接时，必须将 procfs 文件系统挂载在 <code>/proc</code> 上，此函数才能起作用。
Glibc 没有此限制。</p>
<h4><code>fs.renameSync(oldPath, newPath)</code><span><a class="mark" href="#fsrenamesyncoldpath-newpath" id="fsrenamesyncoldpath-newpath">#</a></span><a aria-hidden="true" class="legacy" id="fs_fs_renamesync_oldpath_newpath"></a></h4><p class="tip_wrap" data-show_trans="1" data-item_id="#fsrenamesyncoldpath-newpath">
                <a href="fs/fs_renamesync_oldpath_newpath.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<details class="changelog"><summary>版本历史</summary>
<table>
<tbody><tr><th>版本</th><th>变更</th></tr>
<tr><td>v7.6.0</td>
<td><p>参数 <code>oldPath</code> 和 <code>newPath</code> 可以是使用 <code>file:</code> 协议的 WHATWG <code>URL</code> 对象。 支持目前仍处于实验阶段。</p></td></tr>
<tr><td>v0.1.21</td>
<td><p><span>新增于: v0.1.21</span></p></td></tr>
</tbody></table>
</details>
</div>
<ul class="">
<li><code>oldPath</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="buffer.html#class-buffer" rel="nofollow" class="type">&lt;Buffer&gt;</a> | <a href="url.html#the-whatwg-url-api" rel="nofollow" class="type">&lt;URL&gt;</a></li>
<li><code>newPath</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="buffer.html#class-buffer" rel="nofollow" class="type">&lt;Buffer&gt;</a> | <a href="url.html#the-whatwg-url-api" rel="nofollow" class="type">&lt;URL&gt;</a></li>
</ul>
<p>将文件从 <code>oldPath</code> 重命名为 <code>newPath</code>。
返回 <code>undefined</code>。</p>
<p class="">有关更多详细信息，请参阅 POSIX <a href="http://man7.org/linux/man-pages/man2/rename.2.html" rel="nofollow"><code>rename(2)</code></a> 文档。</p>
<h4><code>fs.rmdirSync(path[, options])</code><span><a class="mark" href="#fsrmdirsyncpath-options" id="fsrmdirsyncpath-options">#</a></span><a aria-hidden="true" class="legacy" id="fs_fs_rmdirsync_path_options"></a></h4><p class="tip_wrap" data-show_trans="1" data-item_id="#fsrmdirsyncpath-options">
                <a href="fs/fs_rmdirsync_path_options.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<details class="changelog"><summary>版本历史</summary>
<table>
<tbody><tr><th>版本</th><th>变更</th></tr>
<tr><td>v16.0.0</td>
<td><p>不再允许在文件 <code>path</code> 上使用 <code>fs.rmdirSync(path, { recursive: true })</code>，在 Windows 上导致 <code>ENOENT</code> 错误，在 POSIX 上导致 <code>ENOTDIR</code> 错误。</p></td></tr>
<tr><td>v16.0.0</td>
<td><p>不再允许在不存在的 <code>path</code> 上使用 <code>fs.rmdirSync(path, { recursive: true })</code>，会导致 <code>ENOENT</code> 错误。</p></td></tr>
<tr><td>v16.0.0</td>
<td><p>选项 <code>recursive</code> 已弃用，使用它会触发弃用警告。</p></td></tr>
<tr><td>v14.14.0</td>
<td><p>不推荐使用 <code>recursive</code> 选项，请改用 <code>fs.rmSync</code>。</p></td></tr>
<tr><td>v13.3.0, v12.16.0</td>
<td><p>选项 <code>maxBusyTries</code> 重命名为 <code>maxRetries</code>，默认值为 0。 选项 <code>emfileWait</code> 已删除，并且 <code>EMFILE</code> 错误使用与其他错误相同的重试逻辑。 现在支持 <code>retryDelay</code> 选项。 现在重试 <code>ENFILE</code> 错误。</p></td></tr>
<tr><td>v12.10.0</td>
<td><p>现在支持 <code>recursive</code>、<code>maxBusyTries</code> 和 <code>emfileWait</code> 选项。</p></td></tr>
<tr><td>v7.6.0</td>
<td><p>参数 <code>path</code> 可以是使用 <code>file:</code> 协议的 WHATWG <code>URL</code> 对象。</p></td></tr>
<tr><td>v0.1.21</td>
<td><p><span>新增于: v0.1.21</span></p></td></tr>
</tbody></table>
</details>
</div>
<ul class="">
<li><code>path</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="buffer.html#class-buffer" rel="nofollow" class="type">&lt;Buffer&gt;</a> | <a href="url.html#the-whatwg-url-api" rel="nofollow" class="type">&lt;URL&gt;</a></li>
<li><code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" rel="nofollow" class="type">&lt;Object&gt;</a>
<ul>
<li><code>maxRetries</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a> 如果遇到 <code>EBUSY</code>、<code>EMFILE</code>、<code>ENFILE</code>、<code>ENOTEMPTY</code> 或 <code>EPERM</code> 错误，Node.js 将在每次尝试时以 <code>retryDelay</code> 毫秒的线性退避等待时间重试该操作。
此选项表示重试次数。
如果 <code>recursive</code> 选项不为 <code>true</code>，则忽略此选项。 <strong>默认值:</strong> <code>0</code>。</li>
<li><code>recursive</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" rel="nofollow" class="type">&lt;boolean&gt;</a> 如果为 <code>true</code>，则执行递归目录删除。
在递归模式下，操作将在失败时重试。 <strong>默认值:</strong> <code>false</code>。
<strong>已弃用。</strong></li>
<li><code>retryDelay</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a> 重试之间等待的时间（以毫秒为单位）。
如果 <code>recursive</code> 选项不为 <code>true</code>，则忽略此选项。
<strong>默认值:</strong> <code>100</code>。</li>
</ul>
</li>
</ul>
<p>同步的 <a href="http://man7.org/linux/man-pages/man2/rmdir.2.html" rel="nofollow"><code>rmdir(2)</code></a>。
返回 <code>undefined</code>。</p>
<p class="">在文件（而不是目录）上使用 <code>fs.rmdirSync()</code>，则在 Windows 上会导致 <code>ENOENT</code> 错误，在 POSIX 上会导致 <code>ENOTDIR</code> 错误。</p>
<p class="">要获得类似于 <code>rm -rf</code> Unix 命令的行为，则使用具有选项 <code>{ recursive: true, force: true }</code> 的 <a href="#fsrmsyncpath-options"><code>fs.rmSync()</code></a>。</p>
<h4><code>fs.rmSync(path[, options])</code><span><a class="mark" href="#fsrmsyncpath-options" id="fsrmsyncpath-options">#</a></span><a aria-hidden="true" class="legacy" id="fs_fs_rmsync_path_options"></a></h4><p class="tip_wrap" data-show_trans="1" data-item_id="#fsrmsyncpath-options">
                <a href="fs/fs_rmsync_path_options.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<details class="changelog"><summary>版本历史</summary>
<table>
<tbody><tr><th>版本</th><th>变更</th></tr>
<tr><td>v16.14.0</td>
<td><p>参数 <code>path</code> 可以是使用 <code>file:</code> 协议的 WHATWG <code>URL</code> 对象。</p></td></tr>
<tr><td>v14.14.0</td>
<td><p><span>新增于: v14.14.0</span></p></td></tr>
</tbody></table>
</details>
</div>
<ul class="">
<li><code>path</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="buffer.html#class-buffer" rel="nofollow" class="type">&lt;Buffer&gt;</a> | <a href="url.html#the-whatwg-url-api" rel="nofollow" class="type">&lt;URL&gt;</a></li>
<li><code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" rel="nofollow" class="type">&lt;Object&gt;</a>
<ul>
<li><code>force</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" rel="nofollow" class="type">&lt;boolean&gt;</a> 当为 <code>true</code> 时，如果 <code>path</code> 不存在，则异常将被忽略。 <strong>默认值:</strong> <code>false</code>。</li>
<li><code>maxRetries</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a> 如果遇到 <code>EBUSY</code>、<code>EMFILE</code>、<code>ENFILE</code>、<code>ENOTEMPTY</code> 或 <code>EPERM</code> 错误，Node.js 将在每次尝试时以 <code>retryDelay</code> 毫秒的线性退避等待时间重试该操作。
此选项表示重试次数。
如果 <code>recursive</code> 选项不为 <code>true</code>，则忽略此选项。 <strong>默认值:</strong> <code>0</code>。</li>
<li><code>recursive</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" rel="nofollow" class="type">&lt;boolean&gt;</a> 如果为 <code>true</code>，则执行递归目录删除。
在递归模式下，操作将在失败时重试。 <strong>默认值:</strong> <code>false</code>。</li>
<li><code>retryDelay</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a> 重试之间等待的时间（以毫秒为单位）。
如果 <code>recursive</code> 选项不为 <code>true</code>，则忽略此选项。
<strong>默认值:</strong> <code>100</code>。</li>
</ul>
</li>
</ul>
<p>同步删除文件和目录（以标准 POSIX <code>rm</code> 实用工具为模型）。
返回 <code>undefined</code>。</p>
<h4><code>fs.statSync(path[, options])</code><span><a class="mark" href="#fsstatsyncpath-options" id="fsstatsyncpath-options">#</a></span><a aria-hidden="true" class="legacy" id="fs_fs_statsync_path_options"></a></h4><p class="tip_wrap" data-show_trans="1" data-item_id="#fsstatsyncpath-options">
                <a href="fs/fs_statsync_path_options.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<details class="changelog"><summary>版本历史</summary>
<table>
<tbody><tr><th>版本</th><th>变更</th></tr>
<tr><td>v15.3.0, v14.17.0</td>
<td><p>接受 <code>throwIfNoEntry</code> 选项以指定当条目不存在时是否应抛出异常。</p></td></tr>
<tr><td>v10.5.0</td>
<td><p>接受额外的 <code>options</code> 对象，以指定返回的数字值是否应为长整数。</p></td></tr>
<tr><td>v7.6.0</td>
<td><p>参数 <code>path</code> 可以是使用 <code>file:</code> 协议的 WHATWG <code>URL</code> 对象。</p></td></tr>
<tr><td>v0.1.21</td>
<td><p><span>新增于: v0.1.21</span></p></td></tr>
</tbody></table>
</details>
</div>
<ul class="">
<li><code>path</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="buffer.html#class-buffer" rel="nofollow" class="type">&lt;Buffer&gt;</a> | <a href="url.html#the-whatwg-url-api" rel="nofollow" class="type">&lt;URL&gt;</a></li>
<li><code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" rel="nofollow" class="type">&lt;Object&gt;</a>
<ul>
<li><code>bigint</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" rel="nofollow" class="type">&lt;boolean&gt;</a> 返回的 <a href="#class-fsstats" rel="nofollow" class="type">&lt;fs.Stats&gt;</a> 对象中的数值是否应为 <code>bigint</code>。 <strong>默认值:</strong> <code>false</code>。</li>
<li><code>throwIfNoEntry</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" rel="nofollow" class="type">&lt;boolean&gt;</a> 如果文件系统条目不存在，是否会抛出异常，而不是返回 <code>undefined</code>。
<strong>默认值:</strong> <code>true</code>。</li>
</ul>
</li>
<li>返回: <a href="#class-fsstats" rel="nofollow" class="type">&lt;fs.Stats&gt;</a></li>
</ul>
<p>获取路径的 <a href="#class-fsstats" rel="nofollow" class="type">&lt;fs.Stats&gt;</a>。</p>
<h4><code>fs.symlinkSync(target, path[, type])</code><span><a class="mark" href="#fssymlinksynctarget-path-type" id="fssymlinksynctarget-path-type">#</a></span><a aria-hidden="true" class="legacy" id="fs_fs_symlinksync_target_path_type"></a></h4><p class="tip_wrap" data-show_trans="1" data-item_id="#fssymlinksynctarget-path-type">
                <a href="fs/fs_symlinksync_target_path_type.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<details class="changelog"><summary>版本历史</summary>
<table>
<tbody><tr><th>版本</th><th>变更</th></tr>
<tr><td>v12.0.0</td>
<td><p>如果 <code>type</code> 参数未定义，Node 将自动检测 <code>target</code> 类型并自动选择 <code>dir</code> 或 <code>file</code>。</p></td></tr>
<tr><td>v7.6.0</td>
<td><p>参数 <code>target</code> 和 <code>path</code> 可以是使用 <code>file:</code> 协议的 WHATWG <code>URL</code> 对象。 支持目前仍处于实验阶段。</p></td></tr>
<tr><td>v0.1.31</td>
<td><p><span>新增于: v0.1.31</span></p></td></tr>
</tbody></table>
</details>
</div>
<ul class="">
<li><code>target</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="buffer.html#class-buffer" rel="nofollow" class="type">&lt;Buffer&gt;</a> | <a href="url.html#the-whatwg-url-api" rel="nofollow" class="type">&lt;URL&gt;</a></li>
<li><code>path</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="buffer.html#class-buffer" rel="nofollow" class="type">&lt;Buffer&gt;</a> | <a href="url.html#the-whatwg-url-api" rel="nofollow" class="type">&lt;URL&gt;</a></li>
<li><code>type</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a></li>
</ul>
<p>返回 <code>undefined</code>。</p>
<p class="">有关详细信息，请参阅此 API 的异步版本的文档：<a href="#fssymlinktarget-path-type-callback"><code>fs.symlink()</code></a>。</p>
<h4><code>fs.truncateSync(path[, len])</code><span><a class="mark" href="#fstruncatesyncpath-len" id="fstruncatesyncpath-len">#</a></span><a aria-hidden="true" class="legacy" id="fs_fs_truncatesync_path_len"></a></h4><p class="tip_wrap" data-show_trans="1" data-item_id="#fstruncatesyncpath-len">
                <a href="fs/fs_truncatesync_path_len.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>新增于: v0.8.6</span>
</div>
<ul class="">
<li><code>path</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="buffer.html#class-buffer" rel="nofollow" class="type">&lt;Buffer&gt;</a> | <a href="url.html#the-whatwg-url-api" rel="nofollow" class="type">&lt;URL&gt;</a></li>
<li><code>len</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a> <strong>默认值:</strong> <code>0</code></li>
</ul>
<p>截断文件。
返回 <code>undefined</code>。
文件描述符也可以作为第一个参数传入。
在这种情况下，<code>fs.ftruncateSync()</code> 被调用。</p>
<p class="">不推荐传入文件描述符，并且可能会导致将来抛出错误。</p>
<h4><code>fs.unlinkSync(path)</code><span><a class="mark" href="#fsunlinksyncpath" id="fsunlinksyncpath">#</a></span><a aria-hidden="true" class="legacy" id="fs_fs_unlinksync_path"></a></h4><p class="tip_wrap" data-show_trans="1" data-item_id="#fsunlinksyncpath">
                <a href="fs/fs_unlinksync_path.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<details class="changelog"><summary>版本历史</summary>
<table>
<tbody><tr><th>版本</th><th>变更</th></tr>
<tr><td>v7.6.0</td>
<td><p>参数 <code>path</code> 可以是使用 <code>file:</code> 协议的 WHATWG <code>URL</code> 对象。</p></td></tr>
<tr><td>v0.1.21</td>
<td><p><span>新增于: v0.1.21</span></p></td></tr>
</tbody></table>
</details>
</div>
<ul class="">
<li><code>path</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="buffer.html#class-buffer" rel="nofollow" class="type">&lt;Buffer&gt;</a> | <a href="url.html#the-whatwg-url-api" rel="nofollow" class="type">&lt;URL&gt;</a></li>
</ul>
<p>同步的 <a href="http://man7.org/linux/man-pages/man2/unlink.2.html" rel="nofollow"><code>unlink(2)</code></a>。
返回 <code>undefined</code>。</p>
<h4><code>fs.utimesSync(path, atime, mtime)</code><span><a class="mark" href="#fsutimessyncpath-atime-mtime" id="fsutimessyncpath-atime-mtime">#</a></span><a aria-hidden="true" class="legacy" id="fs_fs_utimessync_path_atime_mtime"></a></h4><p class="tip_wrap" data-show_trans="1" data-item_id="#fsutimessyncpath-atime-mtime">
                <a href="fs/fs_utimessync_path_atime_mtime.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<details class="changelog"><summary>版本历史</summary>
<table>
<tbody><tr><th>版本</th><th>变更</th></tr>
<tr><td>v8.0.0</td>
<td><p><code>NaN</code>、<code>Infinity</code> 和 <code>-Infinity</code> 不再是有效的时间说明符。</p></td></tr>
<tr><td>v7.6.0</td>
<td><p>参数 <code>path</code> 可以是使用 <code>file:</code> 协议的 WHATWG <code>URL</code> 对象。</p></td></tr>
<tr><td>v4.1.0</td>
<td><p>现在允许使用数字字符串、<code>NaN</code> 和 <code>Infinity</code> 作为时间说明符。</p></td></tr>
<tr><td>v0.4.2</td>
<td><p><span>新增于: v0.4.2</span></p></td></tr>
</tbody></table>
</details>
</div>
<ul class="">
<li><code>path</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="buffer.html#class-buffer" rel="nofollow" class="type">&lt;Buffer&gt;</a> | <a href="url.html#the-whatwg-url-api" rel="nofollow" class="type">&lt;URL&gt;</a></li>
<li><code>atime</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;number&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date" rel="nofollow" class="type">&lt;Date&gt;</a></li>
<li><code>mtime</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;number&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date" rel="nofollow" class="type">&lt;Date&gt;</a></li>
</ul>
<p>返回 <code>undefined</code>。</p>
<p class="">有关详细信息，请参阅此 API 的异步版本的文档：<a href="#fsutimespath-atime-mtime-callback"><code>fs.utimes()</code></a>。</p>
<h4><code>fs.writeFileSync(file, data[, options])</code><span><a class="mark" href="#fswritefilesyncfile-data-options" id="fswritefilesyncfile-data-options">#</a></span><a aria-hidden="true" class="legacy" id="fs_fs_writefilesync_file_data_options"></a></h4><p class="tip_wrap" data-show_trans="1" data-item_id="#fswritefilesyncfile-data-options">
                <a href="fs/fs_writefilesync_file_data_options.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<details class="changelog"><summary>版本历史</summary>
<table>
<tbody><tr><th>版本</th><th>变更</th></tr>
<tr><td>v14.12.0</td>
<td><p>参数 <code>data</code> 将使用显式 <code>toString</code> 函数对对象进行字符串化。</p></td></tr>
<tr><td>v14.0.0</td>
<td><p>参数 <code>data</code> 不会再将不支持的输入强制转换为字符串。</p></td></tr>
<tr><td>v10.10.0</td>
<td><p>参数 <code>data</code> 现在可以是任何 <code>TypedArray</code> 或 <code>DataView</code>。</p></td></tr>
<tr><td>v7.4.0</td>
<td><p>参数 <code>data</code> 现在可以是 <code>Uint8Array</code>。</p></td></tr>
<tr><td>v5.0.0</td>
<td><p>参数 <code>file</code> 现在可以是文件描述符。</p></td></tr>
<tr><td>v0.1.29</td>
<td><p><span>新增于: v0.1.29</span></p></td></tr>
</tbody></table>
</details>
</div>
<ul class="">
<li><code>file</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="buffer.html#class-buffer" rel="nofollow" class="type">&lt;Buffer&gt;</a> | <a href="url.html#the-whatwg-url-api" rel="nofollow" class="type">&lt;URL&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a> 文件名或文件描述符</li>
<li><code>data</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="buffer.html#class-buffer" rel="nofollow" class="type">&lt;Buffer&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/TypedArray" rel="nofollow" class="type">&lt;TypedArray&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/DataView" rel="nofollow" class="type">&lt;DataView&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" rel="nofollow" class="type">&lt;Object&gt;</a></li>
<li><code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" rel="nofollow" class="type">&lt;Object&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a>
<ul>
<li><code>encoding</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Null_type" rel="nofollow" class="type">&lt;null&gt;</a> <strong>默认值:</strong> <code>'utf8'</code></li>
<li><code>mode</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a> <strong>默认值:</strong> <code>0o666</code></li>
<li><code>flag</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> 请参阅<a href="#file-system-flags">对文件系统 <code>flags</code> 的支持</a>。 <strong>默认值:</strong> <code>'w'</code>。</li>
</ul>
</li>
</ul>
<p>返回 <code>undefined</code>。</p>
<p class="">如果 <code>data</code> 是普通的对象，则它必须具有自有的（不是继承的）<code>toString</code> 函数属性。</p>
<p class=""><code>mode</code> 选项仅影响新创建的文件。
有关详细信息，请参阅 <a href="#fsopenpath-flags-mode-callback"><code>fs.open()</code></a>。</p>
<p class="">有关详细信息，请参阅此 API 的异步版本的文档：<a href="#fswritefilefile-data-options-callback"><code>fs.writeFile()</code></a>。</p>
<h4><code>fs.writeSync(fd, buffer[, offset[, length[, position]]])</code><span><a class="mark" href="#fswritesyncfd-buffer-offset-length-position" id="fswritesyncfd-buffer-offset-length-position">#</a></span><a aria-hidden="true" class="legacy" id="fs_fs_writesync_fd_buffer_offset_length_position"></a></h4><p class="tip_wrap" data-show_trans="1" data-item_id="#fswritesyncfd-buffer-offset-length-position">
                <a href="fs/fs_writesync_fd_buffer_offset_length_position.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<details class="changelog"><summary>版本历史</summary>
<table>
<tbody><tr><th>版本</th><th>变更</th></tr>
<tr><td>v14.12.0</td>
<td><p>参数 <code>buffer</code> 将使用显式 <code>toString</code> 函数对对象进行字符串化。</p></td></tr>
<tr><td>v14.0.0</td>
<td><p>参数 <code>buffer</code> 不会再将不支持的输入强制转换为字符串。</p></td></tr>
<tr><td>v10.10.0</td>
<td><p>参数 <code>buffer</code> 现在可以是任何 <code>TypedArray</code> 或 <code>DataView</code>。</p></td></tr>
<tr><td>v7.4.0</td>
<td><p>参数 <code>buffer</code> 现在可以是 <code>Uint8Array</code>。</p></td></tr>
<tr><td>v7.2.0</td>
<td><p>参数 <code>offset</code> 和 <code>length</code> 现在是可选的。</p></td></tr>
<tr><td>v0.1.21</td>
<td><p><span>新增于: v0.1.21</span></p></td></tr>
</tbody></table>
</details>
</div>
<ul class="">
<li><code>fd</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a></li>
<li><code>buffer</code> <a href="buffer.html#class-buffer" rel="nofollow" class="type">&lt;Buffer&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/TypedArray" rel="nofollow" class="type">&lt;TypedArray&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/DataView" rel="nofollow" class="type">&lt;DataView&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" rel="nofollow" class="type">&lt;Object&gt;</a></li>
<li><code>offset</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a></li>
<li><code>length</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a></li>
<li><code>position</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a></li>
<li>返回: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;number&gt;</a> 写入的字节数。</li>
</ul>
<p>如果 <code>buffer</code> 是普通的对象，则它必须具有自有的（不是继承的）<code>toString</code> 函数属性。</p>
<p class="">有关详细信息，请参阅此 API 的异步版本的文档：<a href="#fswritefd-buffer-offset-length-position-callback"><code>fs.write(fd, buffer...)</code></a>。</p>
<h4><code>fs.writeSync(fd, string[, position[, encoding]])</code><span><a class="mark" href="#fswritesyncfd-string-position-encoding" id="fswritesyncfd-string-position-encoding">#</a></span><a aria-hidden="true" class="legacy" id="fs_fs_writesync_fd_string_position_encoding"></a></h4><p class="tip_wrap" data-show_trans="1" data-item_id="#fswritesyncfd-string-position-encoding">
                <a href="fs/fs_writesync_fd_string_position_encoding.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<details class="changelog"><summary>版本历史</summary>
<table>
<tbody><tr><th>版本</th><th>变更</th></tr>
<tr><td>v14.12.0</td>
<td><p>参数 <code>string</code> 将使用显式 <code>toString</code> 函数对对象进行字符串化。</p></td></tr>
<tr><td>v14.0.0</td>
<td><p>参数 <code>string</code> 不会再将不支持的输入强制转换为字符串。</p></td></tr>
<tr><td>v7.2.0</td>
<td><p>参数 <code>position</code> 现在是可选的。</p></td></tr>
<tr><td>v0.11.5</td>
<td><p><span>新增于: v0.11.5</span></p></td></tr>
</tbody></table>
</details>
</div>
<ul class="">
<li><code>fd</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a></li>
<li><code>string</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" rel="nofollow" class="type">&lt;Object&gt;</a></li>
<li><code>position</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a></li>
<li><code>encoding</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a></li>
<li>返回: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;number&gt;</a> 写入的字节数。</li>
</ul>
<p>如果 <code>string</code> 是普通的对象，则它必须具有自有的（不是继承的）<code>toString</code> 函数属性。</p>
<p class="">有关详细信息，请参阅此 API 的异步版本的文档：<a href="#fswritefd-string-position-encoding-callback"><code>fs.write(fd, string...)</code></a>。</p>
<h4><code>fs.writevSync(fd, buffers[, position])</code><span><a class="mark" href="#fswritevsyncfd-buffers-position" id="fswritevsyncfd-buffers-position">#</a></span><a aria-hidden="true" class="legacy" id="fs_fs_writevsync_fd_buffers_position"></a></h4><p class="tip_wrap" data-show_trans="1" data-item_id="#fswritevsyncfd-buffers-position">
                <a href="fs/fs_writevsync_fd_buffers_position.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>新增于: v12.9.0</span>
</div>
<ul class="">
<li><code>fd</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a></li>
<li><code>buffers</code> <a href="https://developer.mozilla.org/en-US/docs/Web/API/ArrayBufferView" rel="nofollow" class="type">&lt;ArrayBufferView[]&gt;</a></li>
<li><code>position</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a></li>
<li>返回: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;number&gt;</a> 写入的字节数。</li>
</ul>
<p>有关详细信息，请参阅此 API 的异步版本的文档：<a href="#fswritevfd-buffers-position-callback"><code>fs.writev()</code></a>。</p>
</section><section><h3>公共对象<span><a class="mark" href="#common-objects" id="common-objects">#</a></span><a aria-hidden="true" class="legacy" id="fs_common_objects"></a></h3><p class="tip_wrap" data-show_trans="1" data-item_id="#common-objects">
                <a href="fs/common_objects.html" class="tip_trans">中英对照</a>
                </p>
<p>公共对象由所有文件系统 API 变体（promise、回调和同步）共享。</p>
<h4><code>fs.Dir</code> 类<span><a class="mark" href="#class-fsdir" id="class-fsdir">#</a></span><a aria-hidden="true" class="legacy" id="fs_class_fs_dir"></a></h4><p class="tip_wrap" data-show_trans="1" data-item_id="#class-fsdir">
                <a href="fs/class_fs_dir.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>新增于: v12.12.0</span>
</div>
<p>表示目录流的类。</p>
<p class="">由 <a href="#fsopendirpath-options-callback"><code>fs.opendir()</code></a>、<a href="#fsopendirsyncpath-options"><code>fs.opendirSync()</code></a> 或 <a href="#fspromisesopendirpath-options"><code>fsPromises.opendir()</code></a> 创建。</p>
<pre class=""><code class="language-js mjs"><span class="hljs-keyword">import</span> { opendir } <span class="hljs-keyword">from</span> <span class="hljs-string">'fs/promises'</span>;

<span class="hljs-keyword">try</span> {
  <span class="hljs-keyword">const</span> dir = <span class="hljs-keyword">await</span> <span class="hljs-title function_">opendir</span>(<span class="hljs-string">'./'</span>);
  <span class="hljs-keyword">for</span> <span class="hljs-keyword">await</span> (<span class="hljs-keyword">const</span> dirent <span class="hljs-keyword">of</span> dir)
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(dirent.<span class="hljs-property">name</span>);
} <span class="hljs-keyword">catch</span> (err) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(err);
}</code></pre>
<p class="">当使用异步迭代器时，<a href="#class-fsdir" rel="nofollow" class="type">&lt;fs.Dir&gt;</a> 对象将在迭代器退出后自动关闭。</p>
<h5><code>dir.close()</code><span><a class="mark" href="#dirclose" id="dirclose">#</a></span><a aria-hidden="true" class="legacy" id="fs_dir_close"></a></h5><p class="tip_wrap" data-show_trans="1" data-item_id="#dirclose">
                <a href="fs/dir_close.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>新增于: v12.12.0</span>
</div>
<ul class="">
<li>返回: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" rel="nofollow" class="type">&lt;Promise&gt;</a></li>
</ul>
<p>异步地关闭目录的底层资源句柄。
后续读取将导致错误。</p>
<p class="">返回将在资源关闭后解决的 promise。</p>
<h5><code>dir.close(callback)</code><span><a class="mark" href="#dirclosecallback" id="dirclosecallback">#</a></span><a aria-hidden="true" class="legacy" id="fs_dir_close_callback"></a></h5><p class="tip_wrap" data-show_trans="1" data-item_id="#dirclosecallback">
                <a href="fs/dir_close_callback.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>新增于: v12.12.0</span>
</div>
<ul class="">
<li><code>callback</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" rel="nofollow" class="type">&lt;Function&gt;</a>
<ul>
<li><code>err</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error" rel="nofollow" class="type">&lt;Error&gt;</a></li>
</ul>
</li>
</ul>
<p>异步地关闭目录的底层资源句柄。
后续读取将导致错误。</p>
<p class="">资源句柄关闭后将调用 <code>callback</code>。</p>
<h5><code>dir.closeSync()</code><span><a class="mark" href="#dirclosesync" id="dirclosesync">#</a></span><a aria-hidden="true" class="legacy" id="fs_dir_closesync"></a></h5><p class="tip_wrap" data-show_trans="1" data-item_id="#dirclosesync">
                <a href="fs/dir_closesync.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>新增于: v12.12.0</span>
</div>
<p>同步地关闭目录的底层资源句柄。
后续读取将导致错误。</p>
<h5><code>dir.path</code><span><a class="mark" href="#dirpath" id="dirpath">#</a></span><a aria-hidden="true" class="legacy" id="fs_dir_path"></a></h5><p class="tip_wrap" data-show_trans="1" data-item_id="#dirpath">
                <a href="fs/dir_path.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>新增于: v12.12.0</span>
</div>
<ul class="">
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a></li>
</ul>
<p>提供给 <a href="#fsopendirpath-options-callback"><code>fs.opendir()</code></a>、<a href="#fsopendirsyncpath-options"><code>fs.opendirSync()</code></a> 或 <a href="#fspromisesopendirpath-options"><code>fsPromises.opendir()</code></a> 的此目录的只读路径。</p>
<h5><code>dir.read()</code><span><a class="mark" href="#dirread" id="dirread">#</a></span><a aria-hidden="true" class="legacy" id="fs_dir_read"></a></h5><p class="tip_wrap" data-show_trans="1" data-item_id="#dirread">
                <a href="fs/dir_read.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>新增于: v12.12.0</span>
</div>
<ul class="">
<li>返回: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" rel="nofollow" class="type">&lt;Promise&gt;</a> 包含 <a href="#class-fsdirent" rel="nofollow" class="type">&lt;fs.Dirent&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Null_type" rel="nofollow" class="type">&lt;null&gt;</a></li>
</ul>
<p>通过 <a href="http://man7.org/linux/man-pages/man3/readdir.3.html" rel="nofollow"><code>readdir(3)</code></a> 异步地读取下一个目录条目作为 <a href="#class-fsdirent" rel="nofollow" class="type">&lt;fs.Dirent&gt;</a>。</p>
<p class="">返回 promise，其将使用 <a href="#class-fsdirent" rel="nofollow" class="type">&lt;fs.Dirent&gt;</a> 或 <code>null</code>（如果读取不到更多的目录条目）解决。</p>
<p class="">此函数返回的目录条目没有操作系统底层目录机制提供的特定顺序。
迭代目录时添加或删除的条目可能不包括在迭代结果中。</p>
<h5><code>dir.read(callback)</code><span><a class="mark" href="#dirreadcallback" id="dirreadcallback">#</a></span><a aria-hidden="true" class="legacy" id="fs_dir_read_callback"></a></h5><p class="tip_wrap" data-show_trans="1" data-item_id="#dirreadcallback">
                <a href="fs/dir_read_callback.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>新增于: v12.12.0</span>
</div>
<ul class="">
<li><code>callback</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" rel="nofollow" class="type">&lt;Function&gt;</a>
<ul>
<li><code>err</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error" rel="nofollow" class="type">&lt;Error&gt;</a></li>
<li><code>dirent</code> <a href="#class-fsdirent" rel="nofollow" class="type">&lt;fs.Dirent&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Null_type" rel="nofollow" class="type">&lt;null&gt;</a></li>
</ul>
</li>
</ul>
<p>通过 <a href="http://man7.org/linux/man-pages/man3/readdir.3.html" rel="nofollow"><code>readdir(3)</code></a> 异步地读取下一个目录条目作为 <a href="#class-fsdirent" rel="nofollow" class="type">&lt;fs.Dirent&gt;</a>。</p>
<p class="">读取完成后，将使用 <a href="#class-fsdirent" rel="nofollow" class="type">&lt;fs.Dirent&gt;</a> 或 <code>null</code>（如果读取不到更多的目录条目）调用 <code>callback</code>。</p>
<p class="">此函数返回的目录条目没有操作系统底层目录机制提供的特定顺序。
迭代目录时添加或删除的条目可能不包括在迭代结果中。</p>
<h5><code>dir.readSync()</code><span><a class="mark" href="#dirreadsync" id="dirreadsync">#</a></span><a aria-hidden="true" class="legacy" id="fs_dir_readsync"></a></h5><p class="tip_wrap" data-show_trans="1" data-item_id="#dirreadsync">
                <a href="fs/dir_readsync.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>新增于: v12.12.0</span>
</div>
<ul class="">
<li>返回: <a href="#class-fsdirent" rel="nofollow" class="type">&lt;fs.Dirent&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Null_type" rel="nofollow" class="type">&lt;null&gt;</a></li>
</ul>
<p>同步地读取下一个目录条目作为 <a href="#class-fsdirent" rel="nofollow" class="type">&lt;fs.Dirent&gt;</a>。
有关更多详细信息，请参阅 POSIX <a href="http://man7.org/linux/man-pages/man3/readdir.3.html" rel="nofollow"><code>readdir(3)</code></a> 文档。</p>
<p class="">如果读取不到更多的目录条目，则将返回 <code>null</code>。</p>
<p class="">此函数返回的目录条目没有操作系统底层目录机制提供的特定顺序。
迭代目录时添加或删除的条目可能不包括在迭代结果中。</p>
<h5><code>dir[Symbol.asyncIterator]()</code><span><a class="mark" href="#dirsymbolasynciterator" id="dirsymbolasynciterator">#</a></span><a aria-hidden="true" class="legacy" id="fs_dir_symbol_asynciterator"></a></h5><p class="tip_wrap" data-show_trans="1" data-item_id="#dirsymbolasynciterator">
                <a href="fs/dir_symbol_asynciterator.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>新增于: v12.12.0</span>
</div>
<ul class="">
<li>返回: <a href="https://tc39.github.io/ecma262/#sec-asynciterator-interface" rel="nofollow" class="type">&lt;AsyncIterator&gt;</a> <a href="#class-fsdirent" rel="nofollow" class="type">&lt;fs.Dirent&gt;</a> 的</li>
</ul>
<p>异步地遍历目录，直到读取了所有条目。
有关更多详细信息，请参考 POSIX <a href="http://man7.org/linux/man-pages/man3/readdir.3.html" rel="nofollow"><code>readdir(3)</code></a> 文档。</p>
<p class="">异步迭代器返回的条目始终是 <a href="#class-fsdirent" rel="nofollow" class="type">&lt;fs.Dirent&gt;</a>。
来自 <code>dir.read()</code> 的 <code>null</code> 情况是在内部处理的。</p>
<p class="">有关示例，请参见 <a href="#class-fsdir" rel="nofollow" class="type">&lt;fs.Dir&gt;</a>。</p>
<p class="">此迭代器返回的目录条目没有操作系统底层目录机制提供的特定顺序。
迭代目录时添加或删除的条目可能不包括在迭代结果中。</p>
<h4><code>fs.Dirent</code> 类<span><a class="mark" href="#class-fsdirent" id="class-fsdirent">#</a></span><a aria-hidden="true" class="legacy" id="fs_class_fs_dirent"></a></h4><p class="tip_wrap" data-show_trans="1" data-item_id="#class-fsdirent">
                <a href="fs/class_fs_dirent.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>新增于: v10.10.0</span>
</div>
<p>目录条目的表示，可以是目录中的文件或子目录，通过从 <a href="#class-fsdir" rel="nofollow" class="type">&lt;fs.Dir&gt;</a> 读取返回。
目录条目是文件名和文件类型对的组合。</p>
<p class="">此外，当 <a href="#fsreaddirpath-options-callback"><code>fs.readdir()</code></a> 或 <a href="#fsreaddirsyncpath-options"><code>fs.readdirSync()</code></a> 在 <code>withFileTypes</code> 选项设置为 <code>true</code> 的情况下调用时，结果数组将填充 <a href="#class-fsdirent" rel="nofollow" class="type">&lt;fs.Dirent&gt;</a> 对象，而不是字符串或 <a href="buffer.html#class-buffer" rel="nofollow" class="type">&lt;Buffer&gt;</a>。</p>
<h5><code>dirent.isBlockDevice()</code><span><a class="mark" href="#direntisblockdevice" id="direntisblockdevice">#</a></span><a aria-hidden="true" class="legacy" id="fs_dirent_isblockdevice"></a></h5><p class="tip_wrap" data-show_trans="1" data-item_id="#direntisblockdevice">
                <a href="fs/dirent_isblockdevice.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>新增于: v10.10.0</span>
</div>
<ul class="">
<li>返回: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" rel="nofollow" class="type">&lt;boolean&gt;</a></li>
</ul>
<p>如果 <a href="#class-fsdirent" rel="nofollow" class="type">&lt;fs.Dirent&gt;</a> 对象描述块设备，则返回 <code>true</code>。</p>
<h5><code>dirent.isCharacterDevice()</code><span><a class="mark" href="#direntischaracterdevice" id="direntischaracterdevice">#</a></span><a aria-hidden="true" class="legacy" id="fs_dirent_ischaracterdevice"></a></h5><p class="tip_wrap" data-show_trans="1" data-item_id="#direntischaracterdevice">
                <a href="fs/dirent_ischaracterdevice.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>新增于: v10.10.0</span>
</div>
<ul class="">
<li>返回: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" rel="nofollow" class="type">&lt;boolean&gt;</a></li>
</ul>
<p>如果 <a href="#class-fsdirent" rel="nofollow" class="type">&lt;fs.Dirent&gt;</a> 对象描述字符设备，则返回 <code>true</code>。</p>
<h5><code>dirent.isDirectory()</code><span><a class="mark" href="#direntisdirectory" id="direntisdirectory">#</a></span><a aria-hidden="true" class="legacy" id="fs_dirent_isdirectory"></a></h5><p class="tip_wrap" data-show_trans="1" data-item_id="#direntisdirectory">
                <a href="fs/dirent_isdirectory.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>新增于: v10.10.0</span>
</div>
<ul class="">
<li>返回: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" rel="nofollow" class="type">&lt;boolean&gt;</a></li>
</ul>
<p>如果 <a href="#class-fsdirent" rel="nofollow" class="type">&lt;fs.Dirent&gt;</a> 对象描述文件系统目录，则返回 <code>true</code>。</p>
<h5><code>dirent.isFIFO()</code><span><a class="mark" href="#direntisfifo" id="direntisfifo">#</a></span><a aria-hidden="true" class="legacy" id="fs_dirent_isfifo"></a></h5><p class="tip_wrap" data-show_trans="1" data-item_id="#direntisfifo">
                <a href="fs/dirent_isfifo.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>新增于: v10.10.0</span>
</div>
<ul class="">
<li>返回: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" rel="nofollow" class="type">&lt;boolean&gt;</a></li>
</ul>
<p>如果 <a href="#class-fsdirent" rel="nofollow" class="type">&lt;fs.Dirent&gt;</a> 对象描述先进先出 (FIFO) 管道，则返回 <code>true</code>。</p>
<h5><code>dirent.isFile()</code><span><a class="mark" href="#direntisfile" id="direntisfile">#</a></span><a aria-hidden="true" class="legacy" id="fs_dirent_isfile"></a></h5><p class="tip_wrap" data-show_trans="1" data-item_id="#direntisfile">
                <a href="fs/dirent_isfile.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>新增于: v10.10.0</span>
</div>
<ul class="">
<li>返回: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" rel="nofollow" class="type">&lt;boolean&gt;</a></li>
</ul>
<p>如果 <a href="#class-fsdirent" rel="nofollow" class="type">&lt;fs.Dirent&gt;</a> 对象描述常规文件，则返回 <code>true</code>。</p>
<h5><code>dirent.isSocket()</code><span><a class="mark" href="#direntissocket" id="direntissocket">#</a></span><a aria-hidden="true" class="legacy" id="fs_dirent_issocket"></a></h5><p class="tip_wrap" data-show_trans="1" data-item_id="#direntissocket">
                <a href="fs/dirent_issocket.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>新增于: v10.10.0</span>
</div>
<ul class="">
<li>返回: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" rel="nofollow" class="type">&lt;boolean&gt;</a></li>
</ul>
<p>如果 <a href="#class-fsdirent" rel="nofollow" class="type">&lt;fs.Dirent&gt;</a> 对象描述套接字，则返回 <code>true</code>。</p>
<h5><code>dirent.isSymbolicLink()</code><span><a class="mark" href="#direntissymboliclink" id="direntissymboliclink">#</a></span><a aria-hidden="true" class="legacy" id="fs_dirent_issymboliclink"></a></h5><p class="tip_wrap" data-show_trans="1" data-item_id="#direntissymboliclink">
                <a href="fs/dirent_issymboliclink.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>新增于: v10.10.0</span>
</div>
<ul class="">
<li>返回: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" rel="nofollow" class="type">&lt;boolean&gt;</a></li>
</ul>
<p>如果 <a href="#class-fsdirent" rel="nofollow" class="type">&lt;fs.Dirent&gt;</a> 对象描述符号链接，则返回 <code>true</code>。</p>
<h5><code>dirent.name</code><span><a class="mark" href="#direntname" id="direntname">#</a></span><a aria-hidden="true" class="legacy" id="fs_dirent_name"></a></h5><p class="tip_wrap" data-show_trans="1" data-item_id="#direntname">
                <a href="fs/dirent_name.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>新增于: v10.10.0</span>
</div>
<ul class="">
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="buffer.html#class-buffer" rel="nofollow" class="type">&lt;Buffer&gt;</a></li>
</ul>
<p>此 <a href="#class-fsdirent" rel="nofollow" class="type">&lt;fs.Dirent&gt;</a> 对象引用的文件名。
该值的类型由传给 <a href="#fsreaddirpath-options-callback"><code>fs.readdir()</code></a> 或 <a href="#fsreaddirsyncpath-options"><code>fs.readdirSync()</code></a> 的 <code>options.encoding</code> 决定。</p>
<h4><code>fs.FSWatcher</code> 类<span><a class="mark" href="#class-fsfswatcher" id="class-fsfswatcher">#</a></span><a aria-hidden="true" class="legacy" id="fs_class_fs_fswatcher"></a></h4><p class="tip_wrap" data-show_trans="1" data-item_id="#class-fsfswatcher">
                <a href="fs/class_fs_fswatcher.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>新增于: v0.5.8</span>
</div>
<ul class="">
<li>继承自 <a href="events.html#class-eventemitter" rel="nofollow" class="type">&lt;EventEmitter&gt;</a></li>
</ul>
<p>成功调用 <a href="#fswatchfilename-options-listener"><code>fs.watch()</code></a> 方法将返回新的 <a href="#class-fsfswatcher" rel="nofollow" class="type">&lt;fs.FSWatcher&gt;</a> 对象。</p>
<p class="">每当修改指定的被监视文件时，所有 <a href="#class-fsfswatcher" rel="nofollow" class="type">&lt;fs.FSWatcher&gt;</a> 对象都会触发 <code>'change'</code> 事件。</p>
<h5><code>'change'</code> 事件<span><a class="mark" href="#event-change" id="event-change">#</a></span><a aria-hidden="true" class="legacy" id="fs_event_change"></a></h5><p class="tip_wrap" data-show_trans="1" data-item_id="#event-change">
                <a href="fs/event_change.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>新增于: v0.5.8</span>
</div>
<ul class="">
<li><code>eventType</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> 发生的变更事件的类型</li>
<li><code>filename</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="buffer.html#class-buffer" rel="nofollow" class="type">&lt;Buffer&gt;</a> 更改的文件名（如果相关/可用）</li>
</ul>
<p>当监视的目录或文件中的某些内容发生更改时触发。
在 <a href="#fswatchfilename-options-listener"><code>fs.watch()</code></a> 中查看更多详细信息。</p>
<p class="">根据操作系统支持，可能不提供 <code>filename</code> 参数。
如果提供了 <code>filename</code>，如果 <code>fs.watch()</code> 在其 <code>encoding</code> 选项设置为 <code>'buffer'</code> 的情况下被调用，它将作为 <a href="buffer.html#class-buffer" rel="nofollow" class="type">&lt;Buffer&gt;</a> 提供，否则 <code>filename</code> 将是 UTF-8 字符串。</p>
<pre class=""><code class="language-js mjs"><span class="hljs-keyword">import</span> { watch } <span class="hljs-keyword">from</span> <span class="hljs-string">'fs'</span>;
<span class="hljs-comment">// 通过 fs.watch() 监听器处理的示例</span>
<span class="hljs-title function_">watch</span>(<span class="hljs-string">'./tmp'</span>, { <span class="hljs-attr">encoding</span>: <span class="hljs-string">'buffer'</span> }, <span class="hljs-function">(<span class="hljs-params">eventType, filename</span>) =&gt;</span> {
  <span class="hljs-keyword">if</span> (filename) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(filename);
    <span class="hljs-comment">// 打印: &lt;Buffer ...&gt;</span>
  }
});</code></pre>
<h5><code>'close'</code> 事件<span><a class="mark" href="#event-close_1" id="event-close_1">#</a></span><a aria-hidden="true" class="legacy" id="fs_event_close_1"></a></h5><p class="tip_wrap" data-show_trans="1" data-item_id="#event-close_1">
                <a href="fs/event_close_1.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>新增于: v10.0.0</span>
</div>
<p>当监视器停止监视变化时触发。
关闭的 <a href="#class-fsfswatcher" rel="nofollow" class="type">&lt;fs.FSWatcher&gt;</a> 对象在事件句柄中不再可用。</p>
<h5><code>'error'</code> 事件<span><a class="mark" href="#event-error" id="event-error">#</a></span><a aria-hidden="true" class="legacy" id="fs_event_error"></a></h5><p class="tip_wrap" data-show_trans="1" data-item_id="#event-error">
                <a href="fs/event_error.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>新增于: v0.5.8</span>
</div>
<ul class="">
<li><code>error</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error" rel="nofollow" class="type">&lt;Error&gt;</a></li>
</ul>
<p>在监视文件时发生错误时触发。
出错的 <a href="#class-fsfswatcher" rel="nofollow" class="type">&lt;fs.FSWatcher&gt;</a> 对象在事件句柄中不再可用。</p>
<h5><code>watcher.close()</code><span><a class="mark" href="#watcherclose" id="watcherclose">#</a></span><a aria-hidden="true" class="legacy" id="fs_watcher_close"></a></h5><p class="tip_wrap" data-show_trans="1" data-item_id="#watcherclose">
                <a href="fs/watcher_close.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>新增于: v0.5.8</span>
</div>
<p>停止监视给定 <a href="#class-fsfswatcher" rel="nofollow" class="type">&lt;fs.FSWatcher&gt;</a> 上的更改。
一旦停止，<a href="#class-fsfswatcher" rel="nofollow" class="type">&lt;fs.FSWatcher&gt;</a> 对象就不再可用。</p>
<h5><code>watcher.ref()</code><span><a class="mark" href="#watcherref" id="watcherref">#</a></span><a aria-hidden="true" class="legacy" id="fs_watcher_ref"></a></h5><p class="tip_wrap" data-show_trans="1" data-item_id="#watcherref">
                <a href="fs/watcher_ref.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>新增于: v14.3.0, v12.20.0</span>
</div>
<ul class="">
<li>返回: <a href="#class-fsfswatcher" rel="nofollow" class="type">&lt;fs.FSWatcher&gt;</a></li>
</ul>
<p>调用时，只要 <a href="#class-fsfswatcher" rel="nofollow" class="type">&lt;fs.FSWatcher&gt;</a> 处于活动状态，就请求 Node.js 事件循环不退出。
多次调用 <code>watcher.ref()</code> 将不起作用。</p>
<p class="">默认情况下，所有 <a href="#class-fsfswatcher" rel="nofollow" class="type">&lt;fs.FSWatcher&gt;</a> 对象都被“引用”，这使得通常不需要调用 <code>watcher.ref()</code> 除非之前已经调用过 <code>watcher.unref()</code>。</p>
<h5><code>watcher.unref()</code><span><a class="mark" href="#watcherunref" id="watcherunref">#</a></span><a aria-hidden="true" class="legacy" id="fs_watcher_unref"></a></h5><p class="tip_wrap" data-show_trans="1" data-item_id="#watcherunref">
                <a href="fs/watcher_unref.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>新增于: v14.3.0, v12.20.0</span>
</div>
<ul class="">
<li>返回: <a href="#class-fsfswatcher" rel="nofollow" class="type">&lt;fs.FSWatcher&gt;</a></li>
</ul>
<p>调用时，活动的 <a href="#class-fsfswatcher" rel="nofollow" class="type">&lt;fs.FSWatcher&gt;</a> 对象不需要 Node.js 事件循环保持活动状态。
如果没有其他活动保持事件循环运行，则进程可能会在调用 <a href="#class-fsfswatcher" rel="nofollow" class="type">&lt;fs.FSWatcher&gt;</a> 对象的回调之前退出。
多次调用 <code>watcher.unref()</code> 将不起作用。</p>
<h4><code>fs.StatWatcher</code> 类<span><a class="mark" href="#class-fsstatwatcher" id="class-fsstatwatcher">#</a></span><a aria-hidden="true" class="legacy" id="fs_class_fs_statwatcher"></a></h4><p class="tip_wrap" data-show_trans="1" data-item_id="#class-fsstatwatcher">
                <a href="fs/class_fs_statwatcher.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>新增于: v14.3.0, v12.20.0</span>
</div>
<ul class="">
<li>继承自 <a href="events.html#class-eventemitter" rel="nofollow" class="type">&lt;EventEmitter&gt;</a></li>
</ul>
<p>成功调用 <code>fs.watchFile()</code> 方法将返回新的 <a href="#class-fsstatwatcher" rel="nofollow" class="type">&lt;fs.StatWatcher&gt;</a> 对象。</p>
<h5><code>watcher.ref()</code><span><a class="mark" href="#watcherref_1" id="watcherref_1">#</a></span><a aria-hidden="true" class="legacy" id="fs_watcher_ref_1"></a></h5><p class="tip_wrap" data-show_trans="1" data-item_id="#watcherref_1">
                <a href="fs/watcher_ref_1.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>新增于: v14.3.0, v12.20.0</span>
</div>
<ul class="">
<li>返回: <a href="#class-fsstatwatcher" rel="nofollow" class="type">&lt;fs.StatWatcher&gt;</a></li>
</ul>
<p>调用时，只要 <a href="#class-fsstatwatcher" rel="nofollow" class="type">&lt;fs.StatWatcher&gt;</a> 处于活动状态，就请求 Node.js 事件循环不退出。
多次调用 <code>watcher.ref()</code> 将不起作用。</p>
<p class="">默认情况下，所有 <a href="#class-fsstatwatcher" rel="nofollow" class="type">&lt;fs.StatWatcher&gt;</a> 对象都被“引用”，这使得通常不需要调用 <code>watcher.ref()</code> 除非之前已经调用过 <code>watcher.unref()</code>。</p>
<h5><code>watcher.unref()</code><span><a class="mark" href="#watcherunref_1" id="watcherunref_1">#</a></span><a aria-hidden="true" class="legacy" id="fs_watcher_unref_1"></a></h5><p class="tip_wrap" data-show_trans="1" data-item_id="#watcherunref_1">
                <a href="fs/watcher_unref_1.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>新增于: v14.3.0, v12.20.0</span>
</div>
<ul class="">
<li>返回: <a href="#class-fsstatwatcher" rel="nofollow" class="type">&lt;fs.StatWatcher&gt;</a></li>
</ul>
<p>调用时，活动的 <a href="#class-fsstatwatcher" rel="nofollow" class="type">&lt;fs.StatWatcher&gt;</a> 对象不需要 Node.js 事件循环保持活动状态。
如果没有其他活动保持事件循环运行，则进程可能会在调用 <a href="#class-fsstatwatcher" rel="nofollow" class="type">&lt;fs.StatWatcher&gt;</a> 对象的回调之前退出。
多次调用 <code>watcher.unref()</code> 将不起作用。</p>
<h4><code>fs.ReadStream</code> 类<span><a class="mark" href="#class-fsreadstream" id="class-fsreadstream">#</a></span><a aria-hidden="true" class="legacy" id="fs_class_fs_readstream"></a></h4><p class="tip_wrap" data-show_trans="1" data-item_id="#class-fsreadstream">
                <a href="fs/class_fs_readstream.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>新增于: v0.1.93</span>
</div>
<ul class="">
<li>继承自: <a href="stream.html#class-streamreadable" rel="nofollow" class="type">&lt;stream.Readable&gt;</a></li>
</ul>
<p><a href="#class-fsreadstream" rel="nofollow" class="type">&lt;fs.ReadStream&gt;</a> 的实例是使用 <a href="#fscreatereadstreampath-options"><code>fs.createReadStream()</code></a> 函数创建和返回的。</p>
<h5><code>'close'</code> 事件<span><a class="mark" href="#event-close_2" id="event-close_2">#</a></span><a aria-hidden="true" class="legacy" id="fs_event_close_2"></a></h5><p class="tip_wrap" data-show_trans="1" data-item_id="#event-close_2">
                <a href="fs/event_close_2.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>新增于: v0.1.93</span>
</div>
<p>当 <a href="#class-fsreadstream" rel="nofollow" class="type">&lt;fs.ReadStream&gt;</a> 的底层文件描述符已关闭时触发。</p>
<h5><code>'open'</code> 事件<span><a class="mark" href="#event-open" id="event-open">#</a></span><a aria-hidden="true" class="legacy" id="fs_event_open"></a></h5><p class="tip_wrap" data-show_trans="1" data-item_id="#event-open">
                <a href="fs/event_open.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>新增于: v0.1.93</span>
</div>
<ul class="">
<li><code>fd</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a> <a href="#class-fsreadstream" rel="nofollow" class="type">&lt;fs.ReadStream&gt;</a> 使用的整数文件描述符。</li>
</ul>
<p>当 <a href="#class-fsreadstream" rel="nofollow" class="type">&lt;fs.ReadStream&gt;</a> 的文件描述符被打开时触发。</p>
<h5><code>'ready'</code> 事件<span><a class="mark" href="#event-ready" id="event-ready">#</a></span><a aria-hidden="true" class="legacy" id="fs_event_ready"></a></h5><p class="tip_wrap" data-show_trans="1" data-item_id="#event-ready">
                <a href="fs/event_ready.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>新增于: v9.11.0</span>
</div>
<p>当 <a href="#class-fsreadstream" rel="nofollow" class="type">&lt;fs.ReadStream&gt;</a> 准备好使用时触发。</p>
<p class=""><code>'open'</code> 后立即触发。</p>
<h5><code>readStream.bytesRead</code><span><a class="mark" href="#readstreambytesread" id="readstreambytesread">#</a></span><a aria-hidden="true" class="legacy" id="fs_readstream_bytesread"></a></h5><p class="tip_wrap" data-show_trans="1" data-item_id="#readstreambytesread">
                <a href="fs/readstream_bytesread.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>新增于: v6.4.0</span>
</div>
<ul class="">
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;number&gt;</a></li>
</ul>
<p>到目前为止已读取的字节数。</p>
<h5><code>readStream.path</code><span><a class="mark" href="#readstreampath" id="readstreampath">#</a></span><a aria-hidden="true" class="legacy" id="fs_readstream_path"></a></h5><p class="tip_wrap" data-show_trans="1" data-item_id="#readstreampath">
                <a href="fs/readstream_path.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>新增于: v0.1.93</span>
</div>
<ul class="">
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="buffer.html#class-buffer" rel="nofollow" class="type">&lt;Buffer&gt;</a></li>
</ul>
<p>流正在读取的文件的路径，如 <code>fs.createReadStream()</code> 的第一个参数中所指定。
如果 <code>path</code> 作为字符串传入，则 <code>readStream.path</code> 将是字符串。
如果 <code>path</code> 作为 <a href="buffer.html#class-buffer" rel="nofollow" class="type">&lt;Buffer&gt;</a> 传入，则 <code>readStream.path</code> 将是 <a href="buffer.html#class-buffer" rel="nofollow" class="type">&lt;Buffer&gt;</a>。
如果指定了 <code>fd</code>，则 <code>readStream.path</code> 将是 <code>undefined</code>。</p>
<h5><code>readStream.pending</code><span><a class="mark" href="#readstreampending" id="readstreampending">#</a></span><a aria-hidden="true" class="legacy" id="fs_readstream_pending"></a></h5><p class="tip_wrap" data-show_trans="1" data-item_id="#readstreampending">
                <a href="fs/readstream_pending.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>新增于: v11.2.0, v10.16.0</span>
</div>
<ul class="">
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" rel="nofollow" class="type">&lt;boolean&gt;</a></li>
</ul>
<p>如果底层文件尚未打开，即在触发 <code>'ready'</code> 事件之前，则此属性为 <code>true</code>。</p>
<h4><code>fs.Stats</code> 类<span><a class="mark" href="#class-fsstats" id="class-fsstats">#</a></span><a aria-hidden="true" class="legacy" id="fs_class_fs_stats"></a></h4><p class="tip_wrap" data-show_trans="1" data-item_id="#class-fsstats">
                <a href="fs/class_fs_stats.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<details class="changelog"><summary>版本历史</summary>
<table>
<tbody><tr><th>版本</th><th>变更</th></tr>
<tr><td>v8.1.0</td>
<td><p>添加作为数值的时间。</p></td></tr>
<tr><td>v0.1.21</td>
<td><p><span>新增于: v0.1.21</span></p></td></tr>
</tbody></table>
</details>
</div>
<p><a href="#class-fsstats" rel="nofollow" class="type">&lt;fs.Stats&gt;</a> 对象提供有关文件的信息。</p>
<p class="">从 <a href="#fsstatpath-options-callback"><code>fs.stat()</code></a>、<a href="#fslstatpath-options-callback"><code>fs.lstat()</code></a> 和 <a href="#fsfstatfd-options-callback"><code>fs.fstat()</code></a> 及其同步方法返回的对象属于此类型。
如果传给这些方法的 <code>options</code> 中的 <code>bigint</code> 为 true，则数值将为 <code>bigint</code> 而不是 <code>number</code>，并且该对象将包含额外的以 <code>Ns</code> 为后缀的纳秒精度属性。</p>
<pre class=""><code class="language-console">Stats {
  dev: 2114,
  ino: 48064969,
  mode: 33188,
  nlink: 1,
  uid: 85,
  gid: 100,
  rdev: 0,
  size: 527,
  blksize: 4096,
  blocks: 8,
  atimeMs: 1318289051000.1,
  mtimeMs: 1318289051000.1,
  ctimeMs: 1318289051000.1,
  birthtimeMs: 1318289051000.1,
  atime: Mon, 10 Oct 2011 23:24:11 GMT,
  mtime: Mon, 10 Oct 2011 23:24:11 GMT,
  ctime: Mon, 10 Oct 2011 23:24:11 GMT,
  birthtime: Mon, 10 Oct 2011 23:24:11 GMT }</code></pre>
<p class=""><code>bigint</code> 版本：</p>
<pre class=""><code class="language-console">BigIntStats {
  dev: 2114n,
  ino: 48064969n,
  mode: 33188n,
  nlink: 1n,
  uid: 85n,
  gid: 100n,
  rdev: 0n,
  size: 527n,
  blksize: 4096n,
  blocks: 8n,
  atimeMs: 1318289051000n,
  mtimeMs: 1318289051000n,
  ctimeMs: 1318289051000n,
  birthtimeMs: 1318289051000n,
  atimeNs: 1318289051000000000n,
  mtimeNs: 1318289051000000000n,
  ctimeNs: 1318289051000000000n,
  birthtimeNs: 1318289051000000000n,
  atime: Mon, 10 Oct 2011 23:24:11 GMT,
  mtime: Mon, 10 Oct 2011 23:24:11 GMT,
  ctime: Mon, 10 Oct 2011 23:24:11 GMT,
  birthtime: Mon, 10 Oct 2011 23:24:11 GMT }</code></pre>
<h5><code>stats.isBlockDevice()</code><span><a class="mark" href="#statsisblockdevice" id="statsisblockdevice">#</a></span><a aria-hidden="true" class="legacy" id="fs_stats_isblockdevice"></a></h5><p class="tip_wrap" data-show_trans="1" data-item_id="#statsisblockdevice">
                <a href="fs/stats_isblockdevice.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>新增于: v0.1.10</span>
</div>
<ul class="">
<li>返回: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" rel="nofollow" class="type">&lt;boolean&gt;</a></li>
</ul>
<p>如果 <a href="#class-fsstats" rel="nofollow" class="type">&lt;fs.Stats&gt;</a> 对象描述块设备，则返回 <code>true</code>。</p>
<h5><code>stats.isCharacterDevice()</code><span><a class="mark" href="#statsischaracterdevice" id="statsischaracterdevice">#</a></span><a aria-hidden="true" class="legacy" id="fs_stats_ischaracterdevice"></a></h5><p class="tip_wrap" data-show_trans="1" data-item_id="#statsischaracterdevice">
                <a href="fs/stats_ischaracterdevice.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>新增于: v0.1.10</span>
</div>
<ul class="">
<li>返回: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" rel="nofollow" class="type">&lt;boolean&gt;</a></li>
</ul>
<p>如果 <a href="#class-fsstats" rel="nofollow" class="type">&lt;fs.Stats&gt;</a> 对象描述字符设备，则返回 <code>true</code>。</p>
<h5><code>stats.isDirectory()</code><span><a class="mark" href="#statsisdirectory" id="statsisdirectory">#</a></span><a aria-hidden="true" class="legacy" id="fs_stats_isdirectory"></a></h5><p class="tip_wrap" data-show_trans="1" data-item_id="#statsisdirectory">
                <a href="fs/stats_isdirectory.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>新增于: v0.1.10</span>
</div>
<ul class="">
<li>返回: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" rel="nofollow" class="type">&lt;boolean&gt;</a></li>
</ul>
<p>如果 <a href="#class-fsstats" rel="nofollow" class="type">&lt;fs.Stats&gt;</a> 对象描述文件系统目录，则返回 <code>true</code>。</p>
<p class="">如果 <a href="#class-fsstats" rel="nofollow" class="type">&lt;fs.Stats&gt;</a> 对象是从 <a href="#fslstatpath-options-callback"><code>fs.lstat()</code></a> 获得的，则此方法将始终返回 <code>false</code>。
这是因为 <a href="#fslstatpath-options-callback"><code>fs.lstat()</code></a> 返回有关符号链接本身的信息，而不是它解析到的路径。</p>
<h5><code>stats.isFIFO()</code><span><a class="mark" href="#statsisfifo" id="statsisfifo">#</a></span><a aria-hidden="true" class="legacy" id="fs_stats_isfifo"></a></h5><p class="tip_wrap" data-show_trans="1" data-item_id="#statsisfifo">
                <a href="fs/stats_isfifo.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>新增于: v0.1.10</span>
</div>
<ul class="">
<li>返回: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" rel="nofollow" class="type">&lt;boolean&gt;</a></li>
</ul>
<p>如果 <a href="#class-fsstats" rel="nofollow" class="type">&lt;fs.Stats&gt;</a> 对象描述先进先出 (FIFO) 管道，则返回 <code>true</code>。</p>
<h5><code>stats.isFile()</code><span><a class="mark" href="#statsisfile" id="statsisfile">#</a></span><a aria-hidden="true" class="legacy" id="fs_stats_isfile"></a></h5><p class="tip_wrap" data-show_trans="1" data-item_id="#statsisfile">
                <a href="fs/stats_isfile.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>新增于: v0.1.10</span>
</div>
<ul class="">
<li>返回: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" rel="nofollow" class="type">&lt;boolean&gt;</a></li>
</ul>
<p>如果 <a href="#class-fsstats" rel="nofollow" class="type">&lt;fs.Stats&gt;</a> 对象描述常规文件，则返回 <code>true</code>。</p>
<h5><code>stats.isSocket()</code><span><a class="mark" href="#statsissocket" id="statsissocket">#</a></span><a aria-hidden="true" class="legacy" id="fs_stats_issocket"></a></h5><p class="tip_wrap" data-show_trans="1" data-item_id="#statsissocket">
                <a href="fs/stats_issocket.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>新增于: v0.1.10</span>
</div>
<ul class="">
<li>返回: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" rel="nofollow" class="type">&lt;boolean&gt;</a></li>
</ul>
<p>如果 <a href="#class-fsstats" rel="nofollow" class="type">&lt;fs.Stats&gt;</a> 对象描述套接字，则返回 <code>true</code>。</p>
<h5><code>stats.isSymbolicLink()</code><span><a class="mark" href="#statsissymboliclink" id="statsissymboliclink">#</a></span><a aria-hidden="true" class="legacy" id="fs_stats_issymboliclink"></a></h5><p class="tip_wrap" data-show_trans="1" data-item_id="#statsissymboliclink">
                <a href="fs/stats_issymboliclink.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>新增于: v0.1.10</span>
</div>
<ul class="">
<li>返回: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" rel="nofollow" class="type">&lt;boolean&gt;</a></li>
</ul>
<p>如果 <a href="#class-fsstats" rel="nofollow" class="type">&lt;fs.Stats&gt;</a> 对象描述符号链接，则返回 <code>true</code>。</p>
<p class="">此方法仅在使用 <a href="#fslstatpath-options-callback"><code>fs.lstat()</code></a> 时有效。</p>
<h5><code>stats.dev</code><span><a class="mark" href="#statsdev" id="statsdev">#</a></span><a aria-hidden="true" class="legacy" id="fs_stats_dev"></a></h5><p class="tip_wrap" data-show_trans="1" data-item_id="#statsdev">
                <a href="fs/stats_dev.html" class="tip_trans">中英对照</a>
                </p>
<ul class="">
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;number&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/BigInt" rel="nofollow" class="type">&lt;bigint&gt;</a></li>
</ul>
<p>包含文件的设备的数字标识符。</p>
<h5><code>stats.ino</code><span><a class="mark" href="#statsino" id="statsino">#</a></span><a aria-hidden="true" class="legacy" id="fs_stats_ino"></a></h5><p class="tip_wrap" data-show_trans="1" data-item_id="#statsino">
                <a href="fs/stats_ino.html" class="tip_trans">中英对照</a>
                </p>
<ul class="">
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;number&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/BigInt" rel="nofollow" class="type">&lt;bigint&gt;</a></li>
</ul>
<p>文件的文件系统特定的索引节点编号。</p>
<h5><code>stats.mode</code><span><a class="mark" href="#statsmode" id="statsmode">#</a></span><a aria-hidden="true" class="legacy" id="fs_stats_mode"></a></h5><p class="tip_wrap" data-show_trans="1" data-item_id="#statsmode">
                <a href="fs/stats_mode.html" class="tip_trans">中英对照</a>
                </p>
<ul class="">
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;number&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/BigInt" rel="nofollow" class="type">&lt;bigint&gt;</a></li>
</ul>
<p>描述文件类型和模式的位字段。</p>
<h5><code>stats.nlink</code><span><a class="mark" href="#statsnlink" id="statsnlink">#</a></span><a aria-hidden="true" class="legacy" id="fs_stats_nlink"></a></h5><p class="tip_wrap" data-show_trans="1" data-item_id="#statsnlink">
                <a href="fs/stats_nlink.html" class="tip_trans">中英对照</a>
                </p>
<ul class="">
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;number&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/BigInt" rel="nofollow" class="type">&lt;bigint&gt;</a></li>
</ul>
<p>文件存在的硬链接数。</p>
<h5><code>stats.uid</code><span><a class="mark" href="#statsuid" id="statsuid">#</a></span><a aria-hidden="true" class="legacy" id="fs_stats_uid"></a></h5><p class="tip_wrap" data-show_trans="1" data-item_id="#statsuid">
                <a href="fs/stats_uid.html" class="tip_trans">中英对照</a>
                </p>
<ul class="">
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;number&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/BigInt" rel="nofollow" class="type">&lt;bigint&gt;</a></li>
</ul>
<p>拥有文件的用户的数字用户标识符 (POSIX)。</p>
<h5><code>stats.gid</code><span><a class="mark" href="#statsgid" id="statsgid">#</a></span><a aria-hidden="true" class="legacy" id="fs_stats_gid"></a></h5><p class="tip_wrap" data-show_trans="1" data-item_id="#statsgid">
                <a href="fs/stats_gid.html" class="tip_trans">中英对照</a>
                </p>
<ul class="">
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;number&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/BigInt" rel="nofollow" class="type">&lt;bigint&gt;</a></li>
</ul>
<p>拥有文件的群组的数字群组标识符 (POSIX)。</p>
<h5><code>stats.rdev</code><span><a class="mark" href="#statsrdev" id="statsrdev">#</a></span><a aria-hidden="true" class="legacy" id="fs_stats_rdev"></a></h5><p class="tip_wrap" data-show_trans="1" data-item_id="#statsrdev">
                <a href="fs/stats_rdev.html" class="tip_trans">中英对照</a>
                </p>
<ul class="">
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;number&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/BigInt" rel="nofollow" class="type">&lt;bigint&gt;</a></li>
</ul>
<p>如果文件代表设备，则为数字设备标识符。</p>
<h5><code>stats.size</code><span><a class="mark" href="#statssize" id="statssize">#</a></span><a aria-hidden="true" class="legacy" id="fs_stats_size"></a></h5><p class="tip_wrap" data-show_trans="1" data-item_id="#statssize">
                <a href="fs/stats_size.html" class="tip_trans">中英对照</a>
                </p>
<ul class="">
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;number&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/BigInt" rel="nofollow" class="type">&lt;bigint&gt;</a></li>
</ul>
<p>文件的大小（以字节为单位）。</p>
<h5><code>stats.blksize</code><span><a class="mark" href="#statsblksize" id="statsblksize">#</a></span><a aria-hidden="true" class="legacy" id="fs_stats_blksize"></a></h5><p class="tip_wrap" data-show_trans="1" data-item_id="#statsblksize">
                <a href="fs/stats_blksize.html" class="tip_trans">中英对照</a>
                </p>
<ul class="">
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;number&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/BigInt" rel="nofollow" class="type">&lt;bigint&gt;</a></li>
</ul>
<p>i/o 操作的文件系统块大小。</p>
<h5><code>stats.blocks</code><span><a class="mark" href="#statsblocks" id="statsblocks">#</a></span><a aria-hidden="true" class="legacy" id="fs_stats_blocks"></a></h5><p class="tip_wrap" data-show_trans="1" data-item_id="#statsblocks">
                <a href="fs/stats_blocks.html" class="tip_trans">中英对照</a>
                </p>
<ul class="">
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;number&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/BigInt" rel="nofollow" class="type">&lt;bigint&gt;</a></li>
</ul>
<p>为此文件分配的块数。</p>
<h5><code>stats.atimeMs</code><span><a class="mark" href="#statsatimems" id="statsatimems">#</a></span><a aria-hidden="true" class="legacy" id="fs_stats_atimems"></a></h5><p class="tip_wrap" data-show_trans="1" data-item_id="#statsatimems">
                <a href="fs/stats_atimems.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>新增于: v8.1.0</span>
</div>
<ul class="">
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;number&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/BigInt" rel="nofollow" class="type">&lt;bigint&gt;</a></li>
</ul>
<p>指示最后一次访问此文件的时间戳，以 POSIX Epoch 以来的毫秒数表示。</p>
<h5><code>stats.mtimeMs</code><span><a class="mark" href="#statsmtimems" id="statsmtimems">#</a></span><a aria-hidden="true" class="legacy" id="fs_stats_mtimems"></a></h5><p class="tip_wrap" data-show_trans="1" data-item_id="#statsmtimems">
                <a href="fs/stats_mtimems.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>新增于: v8.1.0</span>
</div>
<ul class="">
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;number&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/BigInt" rel="nofollow" class="type">&lt;bigint&gt;</a></li>
</ul>
<p>指示最后一次修改此文件的时间戳，以 POSIX Epoch 以来的毫秒数表示。</p>
<h5><code>stats.ctimeMs</code><span><a class="mark" href="#statsctimems" id="statsctimems">#</a></span><a aria-hidden="true" class="legacy" id="fs_stats_ctimems"></a></h5><p class="tip_wrap" data-show_trans="1" data-item_id="#statsctimems">
                <a href="fs/stats_ctimems.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>新增于: v8.1.0</span>
</div>
<ul class="">
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;number&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/BigInt" rel="nofollow" class="type">&lt;bigint&gt;</a></li>
</ul>
<p>指示最后一次更改文件状态的时间戳，以 POSIX Epoch 以来的毫秒数表示。</p>
<h5><code>stats.birthtimeMs</code><span><a class="mark" href="#statsbirthtimems" id="statsbirthtimems">#</a></span><a aria-hidden="true" class="legacy" id="fs_stats_birthtimems"></a></h5><p class="tip_wrap" data-show_trans="1" data-item_id="#statsbirthtimems">
                <a href="fs/stats_birthtimems.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>新增于: v8.1.0</span>
</div>
<ul class="">
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;number&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/BigInt" rel="nofollow" class="type">&lt;bigint&gt;</a></li>
</ul>
<p>指示此文件创建时间的时间戳，以 POSIX Epoch 以来的毫秒数表示。</p>
<h5><code>stats.atimeNs</code><span><a class="mark" href="#statsatimens" id="statsatimens">#</a></span><a aria-hidden="true" class="legacy" id="fs_stats_atimens"></a></h5><p class="tip_wrap" data-show_trans="1" data-item_id="#statsatimens">
                <a href="fs/stats_atimens.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>新增于: v12.10.0</span>
</div>
<ul class="">
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/BigInt" rel="nofollow" class="type">&lt;bigint&gt;</a></li>
</ul>
<p>仅在 <code>bigint: true</code> 传入到生成对象的方法中时出现。
指示最后一次访问此文件的时间戳，以 POSIX Epoch 以来的纳秒数表示。</p>
<h5><code>stats.mtimeNs</code><span><a class="mark" href="#statsmtimens" id="statsmtimens">#</a></span><a aria-hidden="true" class="legacy" id="fs_stats_mtimens"></a></h5><p class="tip_wrap" data-show_trans="1" data-item_id="#statsmtimens">
                <a href="fs/stats_mtimens.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>新增于: v12.10.0</span>
</div>
<ul class="">
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/BigInt" rel="nofollow" class="type">&lt;bigint&gt;</a></li>
</ul>
<p>仅在 <code>bigint: true</code> 传入到生成对象的方法中时出现。
指示最后一次修改此文件的时间戳，以 POSIX Epoch 以来的纳秒数表示。</p>
<h5><code>stats.ctimeNs</code><span><a class="mark" href="#statsctimens" id="statsctimens">#</a></span><a aria-hidden="true" class="legacy" id="fs_stats_ctimens"></a></h5><p class="tip_wrap" data-show_trans="1" data-item_id="#statsctimens">
                <a href="fs/stats_ctimens.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>新增于: v12.10.0</span>
</div>
<ul class="">
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/BigInt" rel="nofollow" class="type">&lt;bigint&gt;</a></li>
</ul>
<p>仅在 <code>bigint: true</code> 传入到生成对象的方法中时出现。
指示最后一次更改文件状态的时间戳，以 POSIX Epoch 以来的纳秒数表示。</p>
<h5><code>stats.birthtimeNs</code><span><a class="mark" href="#statsbirthtimens" id="statsbirthtimens">#</a></span><a aria-hidden="true" class="legacy" id="fs_stats_birthtimens"></a></h5><p class="tip_wrap" data-show_trans="1" data-item_id="#statsbirthtimens">
                <a href="fs/stats_birthtimens.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>新增于: v12.10.0</span>
</div>
<ul class="">
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/BigInt" rel="nofollow" class="type">&lt;bigint&gt;</a></li>
</ul>
<p>仅在 <code>bigint: true</code> 传入到生成对象的方法中时出现。
指示此文件创建时间的时间戳，以 POSIX Epoch 以来的纳秒数表示。</p>
<h5><code>stats.atime</code><span><a class="mark" href="#statsatime" id="statsatime">#</a></span><a aria-hidden="true" class="legacy" id="fs_stats_atime"></a></h5><p class="tip_wrap" data-show_trans="1" data-item_id="#statsatime">
                <a href="fs/stats_atime.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>新增于: v0.11.13</span>
</div>
<ul class="">
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date" rel="nofollow" class="type">&lt;Date&gt;</a></li>
</ul>
<p>指示最后一次访问此文件的时间戳。</p>
<h5><code>stats.mtime</code><span><a class="mark" href="#statsmtime" id="statsmtime">#</a></span><a aria-hidden="true" class="legacy" id="fs_stats_mtime"></a></h5><p class="tip_wrap" data-show_trans="1" data-item_id="#statsmtime">
                <a href="fs/stats_mtime.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>新增于: v0.11.13</span>
</div>
<ul class="">
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date" rel="nofollow" class="type">&lt;Date&gt;</a></li>
</ul>
<p>指示最后一次修改此文件的时间戳。</p>
<h5><code>stats.ctime</code><span><a class="mark" href="#statsctime" id="statsctime">#</a></span><a aria-hidden="true" class="legacy" id="fs_stats_ctime"></a></h5><p class="tip_wrap" data-show_trans="1" data-item_id="#statsctime">
                <a href="fs/stats_ctime.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>新增于: v0.11.13</span>
</div>
<ul class="">
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date" rel="nofollow" class="type">&lt;Date&gt;</a></li>
</ul>
<p>指示最后一次更改文件状态的时间戳。</p>
<h5><code>stats.birthtime</code><span><a class="mark" href="#statsbirthtime" id="statsbirthtime">#</a></span><a aria-hidden="true" class="legacy" id="fs_stats_birthtime"></a></h5><p class="tip_wrap" data-show_trans="1" data-item_id="#statsbirthtime">
                <a href="fs/stats_birthtime.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>新增于: v0.11.13</span>
</div>
<ul class="">
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date" rel="nofollow" class="type">&lt;Date&gt;</a></li>
</ul>
<p>指示此文件创建时间的时间戳。</p>
<h5>统计的时间值<span><a class="mark" href="#stat-time-values" id="stat-time-values">#</a></span><a aria-hidden="true" class="legacy" id="fs_stat_time_values"></a></h5><p class="tip_wrap" data-show_trans="1" data-item_id="#stat-time-values">
                <a href="fs/stat_time_values.html" class="tip_trans">中英对照</a>
                </p>
<p><code>atimeMs</code>、<code>mtimeMs</code>、<code>ctimeMs</code>、<code>birthtimeMs</code> 属性是数值，以毫秒为单位保存相应的时间。
它们的精度是特定于平台的。
当 <code>bigint: true</code> 传给生成对象的方法时，属性将是<a href="https://tc39.github.io/proposal-bigint" rel="nofollow">长整数</a>，否则它们将是<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow">数字</a>。</p>
<p class=""><code>atimeNs</code>、<code>mtimeNs</code>、<code>ctimeNs</code>、<code>birthtimeNs</code> 属性是以纳秒为单位保存相应时间的<a href="https://tc39.github.io/proposal-bigint" rel="nofollow">长整数</a>。
它们仅在 <code>bigint: true</code> 传入到生成对象的方法中时出现。
它们的精度是特定于平台的。</p>
<p class=""><code>atime</code>、<code>mtime</code>、<code>ctime</code> 和 <code>birthtime</code> 是不同时间的 <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date" rel="nofollow"><code>Date</code></a> 对象替代表示。
<code>Date</code> 和数字值是不关联的。
分配新的数值或改变 <code>Date</code> 值不会反映在相应的替代表示中。</p>
<p class="">统计对象中的时间具有以下语义：</p>
<ul class="">
<li><code>atime</code> "访问时间": 上次访问文件数据的时间。
由 <a href="http://man7.org/linux/man-pages/man2/mknod.2.html" rel="nofollow"><code>mknod(2)</code></a>、 <a href="http://man7.org/linux/man-pages/man2/utimes.2.html" rel="nofollow"><code>utimes(2)</code></a> 和 <a href="http://man7.org/linux/man-pages/man2/read.2.html" rel="nofollow"><code>read(2)</code></a> 系统调用更改。</li>
<li><code>mtime</code> "修改时间": 上次修改文件数据的时间。
由 <a href="http://man7.org/linux/man-pages/man2/mknod.2.html" rel="nofollow"><code>mknod(2)</code></a>、 <a href="http://man7.org/linux/man-pages/man2/utimes.2.html" rel="nofollow"><code>utimes(2)</code></a> 和 <a href="http://man7.org/linux/man-pages/man2/write.2.html" rel="nofollow"><code>write(2)</code></a> 系统调用更改。</li>
<li><code>ctime</code> "更改时间": 上次更改文件状态（修改索引节点数据）的时间。
由 <a href="http://man7.org/linux/man-pages/man2/chmod.2.html" rel="nofollow"><code>chmod(2)</code></a>、 <a href="http://man7.org/linux/man-pages/man2/chown.2.html" rel="nofollow"><code>chown(2)</code></a>、 <a href="http://man7.org/linux/man-pages/man2/link.2.html" rel="nofollow"><code>link(2)</code></a>、 <a href="http://man7.org/linux/man-pages/man2/mknod.2.html" rel="nofollow"><code>mknod(2)</code></a>、 <a href="http://man7.org/linux/man-pages/man2/rename.2.html" rel="nofollow"><code>rename(2)</code></a>、 <a href="http://man7.org/linux/man-pages/man2/unlink.2.html" rel="nofollow"><code>unlink(2)</code></a>、 <a href="http://man7.org/linux/man-pages/man2/utimes.2.html" rel="nofollow"><code>utimes(2)</code></a>、 <a href="http://man7.org/linux/man-pages/man2/read.2.html" rel="nofollow"><code>read(2)</code></a> 和 <a href="http://man7.org/linux/man-pages/man2/write.2.html" rel="nofollow"><code>write(2)</code></a> 系统调用更改。</li>
<li><code>birthtime</code> "创建时间": 文件创建时间。
创建文件时设置一次。
在创建时间不可用的文件系统上，该字段可能改为保存 <code>ctime</code> 或 <code>1970-01-01T00:00Z</code>（即 Unix 纪元时间戳 <code>0</code>）。
在这种情况下，该值可能大于 <code>atime</code> 或 <code>mtime</code>。
在 Darwin 和其他 FreeBSD 变体上，如果使用 <a href="http://man7.org/linux/man-pages/man2/utimes.2.html" rel="nofollow"><code>utimes(2)</code></a> 系统调用将 <code>atime</code> 显式设置为比当前 <code>birthtime</code> 更早的值，也会被设置。</li>
</ul>
<p class="">在 Node.js 0.12 之前，<code>ctime</code> 是 Windows 系统上的 <code>birthtime</code>。
从 0.12 开始，<code>ctime</code> 不是“创建时间”，在 Unix 系统上，它从来都不是。</p>
<h4><code>fs.WriteStream</code> 类<span><a class="mark" href="#class-fswritestream" id="class-fswritestream">#</a></span><a aria-hidden="true" class="legacy" id="fs_class_fs_writestream"></a></h4><p class="tip_wrap" data-show_trans="1" data-item_id="#class-fswritestream">
                <a href="fs/class_fs_writestream.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>新增于: v0.1.93</span>
</div>
<ul class="">
<li>继承自 <a href="stream.html#class-streamwritable" rel="nofollow" class="type">&lt;stream.Writable&gt;</a></li>
</ul>
<p><a href="#class-fswritestream" rel="nofollow" class="type">&lt;fs.WriteStream&gt;</a> 的实例是使用 <a href="#fscreatewritestreampath-options"><code>fs.createWriteStream()</code></a> 函数创建和返回的。</p>
<h5><code>'close'</code> 事件<span><a class="mark" href="#event-close_3" id="event-close_3">#</a></span><a aria-hidden="true" class="legacy" id="fs_event_close_3"></a></h5><p class="tip_wrap" data-show_trans="1" data-item_id="#event-close_3">
                <a href="fs/event_close_3.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>新增于: v0.1.93</span>
</div>
<p>当 <a href="#class-fswritestream" rel="nofollow" class="type">&lt;fs.WriteStream&gt;</a> 的底层文件描述符已关闭时触发。</p>
<h5><code>'open'</code> 事件<span><a class="mark" href="#event-open_1" id="event-open_1">#</a></span><a aria-hidden="true" class="legacy" id="fs_event_open_1"></a></h5><p class="tip_wrap" data-show_trans="1" data-item_id="#event-open_1">
                <a href="fs/event_open_1.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>新增于: v0.1.93</span>
</div>
<ul class="">
<li><code>fd</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" rel="nofollow" class="type">&lt;integer&gt;</a> <a href="#class-fswritestream" rel="nofollow" class="type">&lt;fs.WriteStream&gt;</a> 使用的整数文件描述符。</li>
</ul>
<p>打开 <a href="#class-fswritestream" rel="nofollow" class="type">&lt;fs.WriteStream&gt;</a> 的文件时触发。</p>
<h5><code>'ready'</code> 事件<span><a class="mark" href="#event-ready_1" id="event-ready_1">#</a></span><a aria-hidden="true" class="legacy" id="fs_event_ready_1"></a></h5><p class="tip_wrap" data-show_trans="1" data-item_id="#event-ready_1">
                <a href="fs/event_ready_1.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>新增于: v9.11.0</span>
</div>
<p>当 <a href="#class-fswritestream" rel="nofollow" class="type">&lt;fs.WriteStream&gt;</a> 准备好使用时触发。</p>
<p class=""><code>'open'</code> 后立即触发。</p>
<h5><code>writeStream.bytesWritten</code><span><a class="mark" href="#writestreambyteswritten" id="writestreambyteswritten">#</a></span><a aria-hidden="true" class="legacy" id="fs_writestream_byteswritten"></a></h5><p class="tip_wrap" data-show_trans="1" data-item_id="#writestreambyteswritten">
                <a href="fs/writestream_byteswritten.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>新增于: v0.4.7</span>
</div>
<p>到目前为止写入的字节数。
不包括仍在排队等待写入的数据。</p>
<h5><code>writeStream.close([callback])</code><span><a class="mark" href="#writestreamclosecallback" id="writestreamclosecallback">#</a></span><a aria-hidden="true" class="legacy" id="fs_writestream_close_callback"></a></h5><p class="tip_wrap" data-show_trans="1" data-item_id="#writestreamclosecallback">
                <a href="fs/writestream_close_callback.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>新增于: v0.9.4</span>
</div>
<ul class="">
<li><code>callback</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" rel="nofollow" class="type">&lt;Function&gt;</a>
<ul>
<li><code>err</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error" rel="nofollow" class="type">&lt;Error&gt;</a></li>
</ul>
</li>
</ul>
<p>关闭 <code>writeStream</code>。
可以选择接受一个回调，其将在 <code>writeStream</code> 关闭后执行。</p>
<h5><code>writeStream.path</code><span><a class="mark" href="#writestreampath" id="writestreampath">#</a></span><a aria-hidden="true" class="legacy" id="fs_writestream_path"></a></h5><p class="tip_wrap" data-show_trans="1" data-item_id="#writestreampath">
                <a href="fs/writestream_path.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>新增于: v0.1.93</span>
</div>
<p>流正在写入的文件的路径，如 <a href="#fscreatewritestreampath-options"><code>fs.createWriteStream()</code></a> 的第一个参数中所指定。
如果 <code>path</code> 作为字符串传入，则 <code>writeStream.path</code> 将是字符串。
如果 <code>path</code> 作为 <a href="buffer.html#class-buffer" rel="nofollow" class="type">&lt;Buffer&gt;</a> 传入，则 <code>writeStream.path</code> 将是 <a href="buffer.html#class-buffer" rel="nofollow" class="type">&lt;Buffer&gt;</a>。</p>
<h5><code>writeStream.pending</code><span><a class="mark" href="#writestreampending" id="writestreampending">#</a></span><a aria-hidden="true" class="legacy" id="fs_writestream_pending"></a></h5><p class="tip_wrap" data-show_trans="1" data-item_id="#writestreampending">
                <a href="fs/writestream_pending.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>新增于: v11.2.0</span>
</div>
<ul class="">
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" rel="nofollow" class="type">&lt;boolean&gt;</a></li>
</ul>
<p>如果底层文件尚未打开，即在触发 <code>'ready'</code> 事件之前，则此属性为 <code>true</code>。</p>
<h4><code>fs.constants</code><span><a class="mark" href="#fsconstants" id="fsconstants">#</a></span><a aria-hidden="true" class="legacy" id="fs_fs_constants"></a></h4><p class="tip_wrap" data-show_trans="1" data-item_id="#fsconstants">
                <a href="fs/fs_constants.html" class="tip_trans">中英对照</a>
                </p>
<ul class="">
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" rel="nofollow" class="type">&lt;Object&gt;</a></li>
</ul>
<p>返回一个包含文件系统操作常用常量的对象。</p>
<h5>FS 常量<span><a class="mark" href="#fs-constants" id="fs-constants">#</a></span><a aria-hidden="true" class="legacy" id="fs_fs_constants_1"></a></h5><p class="tip_wrap" data-show_trans="1" data-item_id="#fs-constants">
                <a href="fs/fs_constants_1.html" class="tip_trans">中英对照</a>
                </p>
<p>以下常量由 <code>fs.constants</code> 导出。</p>
<p class="">并非每个常量都适用于每个操作系统。</p>
<p class="">要使用多个常量，请使用按位或 <code>|</code> 运算符。</p>
<p class="">示例：</p>
<pre class=""><code class="language-js mjs"><span class="hljs-keyword">import</span> { open, constants } <span class="hljs-keyword">from</span> <span class="hljs-string">'fs'</span>;

<span class="hljs-keyword">const</span> {
  <span class="hljs-variable constant_">O_RDWR</span>,
  <span class="hljs-variable constant_">O_CREAT</span>,
  <span class="hljs-variable constant_">O_EXCL</span>
} = constants;

<span class="hljs-title function_">open</span>(<span class="hljs-string">'/path/to/my/file'</span>, <span class="hljs-variable constant_">O_RDWR</span> | <span class="hljs-variable constant_">O_CREAT</span> | <span class="hljs-variable constant_">O_EXCL</span>, <span class="hljs-function">(<span class="hljs-params">err, fd</span>) =&gt;</span> {
  <span class="hljs-comment">// ...</span>
});</code></pre>
<h6>文件访问的常量<span><a class="mark" href="#file-access-constants" id="file-access-constants">#</a></span><a aria-hidden="true" class="legacy" id="fs_file_access_constants"></a></h6><p class="tip_wrap" data-show_trans="1" data-item_id="#file-access-constants">
                <a href="fs/file_access_constants.html" class="tip_trans">中英对照</a>
                </p>
<p>以下常量用作传给 <a href="#fspromisesaccesspath-mode"><code>fsPromises.access()</code></a>、<a href="#fsaccesspath-mode-callback"><code>fs.access()</code></a> 和 <a href="#fsaccesssyncpath-mode"><code>fs.accessSync()</code></a> 的 <code>mode</code> 参数。</p>
<table class="">
  <tbody><tr>
    <th>常量</th>
    <th>描述</th>
  </tr>
  <tr>
    <td><code>F_OK</code></td>
    <td>指示文件对调用进程可见的标志。
这对于确定文件是否存在很有用，但没有说明 <code>rwx</code> 权限。
未指定模式时的默认值。</td>
  </tr>
  <tr>
    <td><code>R_OK</code></td>
    <td>指示文件可以被调用进程读取的标志。</td>
  </tr>
  <tr>
    <td><code>W_OK</code></td>
    <td>指示文件可以被调用进程写入的标志。</td>
  </tr>
  <tr>
    <td><code>X_OK</code></td>
    <td>指示文件可以被调用进程执行的标志。
这在 Windows 上不起作用（行为类似于 <code>fs.constants.F_OK</code>）。</td>
  </tr>
</tbody></table>
<h6>文件复制的常量<span><a class="mark" href="#file-copy-constants" id="file-copy-constants">#</a></span><a aria-hidden="true" class="legacy" id="fs_file_copy_constants"></a></h6><p class="tip_wrap" data-show_trans="1" data-item_id="#file-copy-constants">
                <a href="fs/file_copy_constants.html" class="tip_trans">中英对照</a>
                </p>
<p>以下常量旨在与 <a href="#fscopyfilesrc-dest-mode-callback"><code>fs.copyFile()</code></a> 一起使用。</p>
<table class="">
  <tbody><tr>
    <th>常量</th>
    <th>描述</th>
  </tr>
  <tr>
    <td><code>COPYFILE_EXCL</code></td>
    <td>如果存在，如果目标路径已经存在，复制操作将失败并显示错误。</td>
  </tr>
  <tr>
    <td><code>COPYFILE_FICLONE</code></td>
    <td>如果存在，复制操作将尝试创建写时复制引用链接。
如果底层平台不支持写时复制，则使用回退复制机制。</td>
  </tr>
  <tr>
    <td><code>COPYFILE_FICLONE_FORCE</code></td>
    <td>如果存在，复制操作将尝试创建写时复制引用链接。
如果底层平台不支持写时复制，则操作将失败并显示错误。</td>
  </tr>
</tbody></table>
<h6>文件打开的常量<span><a class="mark" href="#file-open-constants" id="file-open-constants">#</a></span><a aria-hidden="true" class="legacy" id="fs_file_open_constants"></a></h6><p class="tip_wrap" data-show_trans="1" data-item_id="#file-open-constants">
                <a href="fs/file_open_constants.html" class="tip_trans">中英对照</a>
                </p>
<p>以下常量旨在与 <code>fs.open()</code> 一起使用。</p>
<table class="">
  <tbody><tr>
    <th>常量</th>
    <th>描述</th>
  </tr>
  <tr>
    <td><code>O_RDONLY</code></td>
    <td>指示打开文件以进行只读访问的标志。</td>
  </tr>
  <tr>
    <td><code>O_WRONLY</code></td>
    <td>指示打开文件以进行只写访问的标志。</td>
  </tr>
  <tr>
    <td><code>O_RDWR</code></td>
    <td>指示打开文件以进行读写访问的标志。</td>
  </tr>
  <tr>
    <td><code>O_CREAT</code></td>
    <td>如果文件不存在则指示创建文件的标志。</td>
  </tr>
  <tr>
    <td><code>O_EXCL</code></td>
    <td>如果设置了 <code>O_CREAT</code> 标志并且文件已经存在，则指示打开文件应该失败的标志。</td>
  </tr>
  <tr>
    <td><code>O_NOCTTY</code></td>
    <td>标志表示如果路径标识一个终端设备，打开路径不应导致该终端成为进程的控制终端（如果进程还没有一个）。</td>
  </tr>
  <tr>
    <td><code>O_TRUNC</code></td>
    <td>标志表示如果文件存在并且是一个普通文件，并且该文件被成功打开以进行写访问，则其长度应被截断为零。</td>
  </tr>
  <tr>
    <td><code>O_APPEND</code></td>
    <td>指示数据将追加到文件末尾的标志。</td>
  </tr>
  <tr>
    <td><code>O_DIRECTORY</code></td>
    <td>如果路径不是目录，则表示打开应该失败的标志。</td>
  </tr>
  <tr>
  <td><code>O_NOATIME</code></td>
    <td>指示对文件系统的读取访问的标志将不再导致与文件关联的 <code>atime</code> 信息的更新。
此标志仅在 Linux 操作系统上可用。</td>
  </tr>
  <tr>
    <td><code>O_NOFOLLOW</code></td>
    <td>如果路径是符号链接，则表示打开应该失败的标志。</td>
  </tr>
  <tr>
    <td><code>O_SYNC</code></td>
    <td>指示文件为同步 I/O 打开的标志，写操作等待文件完整性。</td>
  </tr>
  <tr>
    <td><code>O_DSYNC</code></td>
    <td>指示文件为同步 I/O 打开的标志，写操作等待数据完整性。</td>
  </tr>
  <tr>
    <td><code>O_SYMLINK</code></td>
    <td>指示打开符号链接本身而不是它指向的资源的标志。</td>
  </tr>
  <tr>
    <td><code>O_DIRECT</code></td>
    <td>设置后，将尝试最小化文件 I/O 的缓存影响。</td>
  </tr>
  <tr>
    <td><code>O_NONBLOCK</code></td>
    <td>指示在可能的情况下以非阻塞模式打开文件的标志。</td>
  </tr>
  <tr>
    <td><code>UV_FS_O_FILEMAP</code></td>
    <td>设置后，将使用内存文件映射来访问文件。
此标志仅在 Windows 操作系统上可用。
在其他操作系统上，此标志被忽略。</td>
  </tr>
</tbody></table>
<h6>文件类型的常量<span><a class="mark" href="#file-type-constants" id="file-type-constants">#</a></span><a aria-hidden="true" class="legacy" id="fs_file_type_constants"></a></h6><p class="tip_wrap" data-show_trans="1" data-item_id="#file-type-constants">
                <a href="fs/file_type_constants.html" class="tip_trans">中英对照</a>
                </p>
<p>以下常量旨在与 <a href="#class-fsstats" rel="nofollow" class="type">&lt;fs.Stats&gt;</a> 对象的 <code>mode</code> 属性一起使用，以确定文件的类型。</p>
<table class="">
  <tbody><tr>
    <th>常量</th>
    <th>描述</th>
  </tr>
  <tr>
    <td><code>S_IFMT</code></td>
    <td>用于提取文件类型代码的位掩码。</td>
  </tr>
  <tr>
    <td><code>S_IFREG</code></td>
    <td>常规文件的文件类型常量。</td>
  </tr>
  <tr>
    <td><code>S_IFDIR</code></td>
    <td>目录的文件类型常量。</td>
  </tr>
  <tr>
    <td><code>S_IFCHR</code></td>
    <td>面向字符的设备文件的文件类型常量。</td>
  </tr>
  <tr>
    <td><code>S_IFBLK</code></td>
    <td>面向块的设备文件的文件类型常量。</td>
  </tr>
  <tr>
    <td><code>S_IFIFO</code></td>
    <td>FIFO/管道的文件类型常量。</td>
  </tr>
  <tr>
    <td><code>S_IFLNK</code></td>
    <td>符号链接的文件类型常量。</td>
  </tr>
  <tr>
    <td><code>S_IFSOCK</code></td>
    <td>套接字的文件类型常量。</td>
  </tr>
</tbody></table>
<h6>文件模式的常量<span><a class="mark" href="#file-mode-constants" id="file-mode-constants">#</a></span><a aria-hidden="true" class="legacy" id="fs_file_mode_constants"></a></h6><p class="tip_wrap" data-show_trans="1" data-item_id="#file-mode-constants">
                <a href="fs/file_mode_constants.html" class="tip_trans">中英对照</a>
                </p>
<p>以下常量旨在与 <a href="#class-fsstats" rel="nofollow" class="type">&lt;fs.Stats&gt;</a> 对象的 <code>mode</code> 属性一起使用，以确定文件的访问权限。</p>
<table class="">
  <tbody><tr>
    <th>常量</th>
    <th>描述</th>
  </tr>
  <tr>
    <td><code>S_IRWXU</code></td>
    <td>文件模式指示所有者可读、可写和可执行。</td>
  </tr>
  <tr>
    <td><code>S_IRUSR</code></td>
    <td>文件模式指示所有者可读。</td>
  </tr>
  <tr>
    <td><code>S_IWUSR</code></td>
    <td>文件模式指示所有者可写。</td>
  </tr>
  <tr>
    <td><code>S_IXUSR</code></td>
    <td>文件模式指示所有者可执行。</td>
  </tr>
  <tr>
    <td><code>S_IRWXG</code></td>
    <td>文件模式指示群组可读、可写和可执行。</td>
  </tr>
  <tr>
    <td><code>S_IRGRP</code></td>
    <td>文件模式指示群组可读。</td>
  </tr>
  <tr>
    <td><code>S_IWGRP</code></td>
    <td>文件模式指示群组可写。</td>
  </tr>
  <tr>
    <td><code>S_IXGRP</code></td>
    <td>文件模式指示群组可执行。</td>
  </tr>
  <tr>
    <td><code>S_IRWXO</code></td>
    <td>文件模式指示其他人可读、可写和可执行。</td>
  </tr>
  <tr>
    <td><code>S_IROTH</code></td>
    <td>文件模式指示其他人可读。</td>
  </tr>
  <tr>
    <td><code>S_IWOTH</code></td>
    <td>文件模式指示其他人可写。</td>
  </tr>
  <tr>
    <td><code>S_IXOTH</code></td>
    <td>文件模式指示其他人可执行。</td>
  </tr>
</tbody></table>
</section><section><h3>注意事项<span><a class="mark" href="#notes" id="notes">#</a></span><a aria-hidden="true" class="legacy" id="fs_notes"></a></h3>
<h4>回调与基于 promise 的操作的顺序<span><a class="mark" href="#ordering-of-callback-and-promise-based-operations" id="ordering-of-callback-and-promise-based-operations">#</a></span><a aria-hidden="true" class="legacy" id="fs_ordering_of_callback_and_promise_based_operations"></a></h4><p class="tip_wrap" data-show_trans="1" data-item_id="#ordering-of-callback-and-promise-based-operations">
                <a href="fs/ordering_of_callback_and_promise_based_operations.html" class="tip_trans">中英对照</a>
                </p>
<p>因为它们是由底层线程池异步地执行，所以当使用回调或基于 promise 的方法时无法保证顺序。</p>
<p class="">例如，以下内容容易出错，因为 <code>fs.stat()</code> 操作可能会在 <code>fs.rename()</code> 操作之前完成：</p>
<pre class=""><code class="language-js">fs.<span class="hljs-title function_">rename</span>(<span class="hljs-string">'/tmp/hello'</span>, <span class="hljs-string">'/tmp/world'</span>, <span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {
  <span class="hljs-keyword">if</span> (err) <span class="hljs-keyword">throw</span> err;
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'renamed complete'</span>);
});
fs.<span class="hljs-title function_">stat</span>(<span class="hljs-string">'/tmp/world'</span>, <span class="hljs-function">(<span class="hljs-params">err, stats</span>) =&gt;</span> {
  <span class="hljs-keyword">if</span> (err) <span class="hljs-keyword">throw</span> err;
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`stats: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(stats)}</span>`</span>);
});</code></pre>
<p class="">通过在调用另一个之前等待前一个的结果来正确地排序操作，这是很重要的：</p>

<pre class="with-48-chars"><input class="js-flavor-selector" type="checkbox" checked="" aria-label="Show modern ES modules syntax"><code class="language-js mjs"><span class="hljs-keyword">import</span> { rename, stat } <span class="hljs-keyword">from</span> <span class="hljs-string">'fs/promises'</span>;

<span class="hljs-keyword">const</span> <span class="hljs-keyword">from</span> = <span class="hljs-string">'/tmp/hello'</span>;
<span class="hljs-keyword">const</span> to = <span class="hljs-string">'/tmp/world'</span>;

<span class="hljs-keyword">try</span> {
  <span class="hljs-keyword">await</span> <span class="hljs-title function_">rename</span>(<span class="hljs-keyword">from</span>, to);
  <span class="hljs-keyword">const</span> stats = <span class="hljs-keyword">await</span> <span class="hljs-title function_">stat</span>(to);
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`stats: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(stats)}</span>`</span>);
} <span class="hljs-keyword">catch</span> (error) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'there was an error:'</span>, error.<span class="hljs-property">message</span>);
}</code><code class="language-js cjs"><span class="hljs-keyword">const</span> { rename, stat } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'fs/promises'</span>);

(<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span>(<span class="hljs-params"><span class="hljs-keyword">from</span>, to</span>) {
  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">await</span> <span class="hljs-title function_">rename</span>(<span class="hljs-keyword">from</span>, to);
    <span class="hljs-keyword">const</span> stats = <span class="hljs-keyword">await</span> <span class="hljs-title function_">stat</span>(to);
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`stats: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(stats)}</span>`</span>);
  } <span class="hljs-keyword">catch</span> (error) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'there was an error:'</span>, error.<span class="hljs-property">message</span>);
  }
})(<span class="hljs-string">'/tmp/hello'</span>, <span class="hljs-string">'/tmp/world'</span>);</code></pre>
<p class="">或者，当使用回调 API 时，将 <code>fs.stat()</code> 调用移动到 <code>fs.rename()</code> 操作的回调中。</p>

<pre class="with-48-chars"><input class="js-flavor-selector" type="checkbox" checked="" aria-label="Show modern ES modules syntax"><code class="language-js mjs"><span class="hljs-keyword">import</span> { rename, stat } <span class="hljs-keyword">from</span> <span class="hljs-string">'fs'</span>;

<span class="hljs-title function_">rename</span>(<span class="hljs-string">'/tmp/hello'</span>, <span class="hljs-string">'/tmp/world'</span>, <span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {
  <span class="hljs-keyword">if</span> (err) <span class="hljs-keyword">throw</span> err;
  <span class="hljs-title function_">stat</span>(<span class="hljs-string">'/tmp/world'</span>, <span class="hljs-function">(<span class="hljs-params">err, stats</span>) =&gt;</span> {
    <span class="hljs-keyword">if</span> (err) <span class="hljs-keyword">throw</span> err;
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`stats: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(stats)}</span>`</span>);
  });
});</code><code class="language-js cjs"><span class="hljs-keyword">const</span> { rename, stat } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'fs/promises'</span>);

<span class="hljs-title function_">rename</span>(<span class="hljs-string">'/tmp/hello'</span>, <span class="hljs-string">'/tmp/world'</span>, <span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {
  <span class="hljs-keyword">if</span> (err) <span class="hljs-keyword">throw</span> err;
  <span class="hljs-title function_">stat</span>(<span class="hljs-string">'/tmp/world'</span>, <span class="hljs-function">(<span class="hljs-params">err, stats</span>) =&gt;</span> {
    <span class="hljs-keyword">if</span> (err) <span class="hljs-keyword">throw</span> err;
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`stats: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(stats)}</span>`</span>);
  });
});</code></pre>
<h4>文件路径<span><a class="mark" href="#file-paths" id="file-paths">#</a></span><a aria-hidden="true" class="legacy" id="fs_file_paths"></a></h4><p class="tip_wrap" data-show_trans="1" data-item_id="#file-paths">
                <a href="fs/file_paths.html" class="tip_trans">中英对照</a>
                </p>
<p>大多数 <code>fs</code> 操作接受可以以字符串、<a href="buffer.html#class-buffer" rel="nofollow" class="type">&lt;Buffer&gt;</a> 或使用 <code>file:</code> 协议的 <a href="url.html#the-whatwg-url-api" rel="nofollow" class="type">&lt;URL&gt;</a> 对象的形式指定的文件路径。</p>
<h5>字符串路径<span><a class="mark" href="#string-paths" id="string-paths">#</a></span><a aria-hidden="true" class="legacy" id="fs_string_paths"></a></h5><p class="tip_wrap" data-show_trans="1" data-item_id="#string-paths">
                <a href="fs/string_paths.html" class="tip_trans">中英对照</a>
                </p>
<p>字符串路径被解释为标识绝对或相对文件名的 UTF-8 字符序列。
相对路径将相对于通过调用 <code>process.cwd()</code> 确定的当前工作目录进行解析。</p>
<p class="">在 POSIX 上使用绝对路径的示例：</p>
<pre class=""><code class="language-js mjs"><span class="hljs-keyword">import</span> { open } <span class="hljs-keyword">from</span> <span class="hljs-string">'fs/promises'</span>;

<span class="hljs-keyword">let</span> fd;
<span class="hljs-keyword">try</span> {
  fd = <span class="hljs-keyword">await</span> <span class="hljs-title function_">open</span>(<span class="hljs-string">'/open/some/file.txt'</span>, <span class="hljs-string">'r'</span>);
  <span class="hljs-comment">// 对文件做一些事情</span>
} <span class="hljs-keyword">finally</span> {
  <span class="hljs-keyword">await</span> fd.<span class="hljs-title function_">close</span>();
}</code></pre>
<p class="">在 POSIX 上使用相对路径的示例（相对于 <code>process.cwd()</code>）:</p>
<pre class=""><code class="language-js mjs"><span class="hljs-keyword">import</span> { open } <span class="hljs-keyword">from</span> <span class="hljs-string">'fs/promises'</span>;

<span class="hljs-keyword">let</span> fd;
<span class="hljs-keyword">try</span> {
  fd = <span class="hljs-keyword">await</span> <span class="hljs-title function_">open</span>(<span class="hljs-string">'file.txt'</span>, <span class="hljs-string">'r'</span>);
  <span class="hljs-comment">// 对文件做一些事情</span>
} <span class="hljs-keyword">finally</span> {
  <span class="hljs-keyword">await</span> fd.<span class="hljs-title function_">close</span>();
}</code></pre>
<h5>文件 URL 路径<span><a class="mark" href="#file-url-paths" id="file-url-paths">#</a></span><a aria-hidden="true" class="legacy" id="fs_file_url_paths"></a></h5><p class="tip_wrap" data-show_trans="1" data-item_id="#file-url-paths">
                <a href="fs/file_url_paths.html" class="tip_trans">中英对照</a>
                </p>
<div class="api_metadata">
<span>新增于: v7.6.0</span>
</div>
<p>对于大多数 <code>fs</code> 模块函数，<code>path</code> 或 <code>filename</code> 参数可以作为使用 <code>file:</code> 协议的 <a href="url.html#the-whatwg-url-api" rel="nofollow" class="type">&lt;URL&gt;</a> 对象传入。</p>
<pre class=""><code class="language-js mjs"><span class="hljs-keyword">import</span> { readFileSync } <span class="hljs-keyword">from</span> <span class="hljs-string">'fs'</span>;

<span class="hljs-title function_">readFileSync</span>(<span class="hljs-keyword">new</span> <span class="hljs-title function_">URL</span>(<span class="hljs-string">'file:///tmp/hello'</span>));</code></pre>
<p class=""><code>file:</code> URL 始终是绝对路径。</p>
<h6>平台特定的注意事项<span><a class="mark" href="#platform-specific-considerations" id="platform-specific-considerations">#</a></span><a aria-hidden="true" class="legacy" id="fs_platform_specific_considerations"></a></h6><p class="tip_wrap" data-show_trans="1" data-item_id="#platform-specific-considerations">
                <a href="fs/platform_specific_considerations.html" class="tip_trans">中英对照</a>
                </p>
<p>在 Windows 上，带有主机名的 <code>file:</code> <a href="url.html#the-whatwg-url-api" rel="nofollow" class="type">&lt;URL&gt;</a> 转换为 UNC 路径，而带有驱动器号的 <code>file:</code> <a href="url.html#the-whatwg-url-api" rel="nofollow" class="type">&lt;URL&gt;</a> 则转换为本地绝对路径。
没有主机名和驱动器号的 <code>file:</code> <a href="url.html#the-whatwg-url-api" rel="nofollow" class="type">&lt;URL&gt;</a> 将导致错误：</p>
<pre class=""><code class="language-js mjs"><span class="hljs-keyword">import</span> { readFileSync } <span class="hljs-keyword">from</span> <span class="hljs-string">'fs'</span>;
<span class="hljs-comment">// 在 Windows 上：</span>

<span class="hljs-comment">// - 带有主机名的 WHATWG 文件 URL 转换为 UNC 路径</span>
<span class="hljs-comment">// file://hostname/p/a/t/h/file =&gt; \\hostname\p\a\t\h\file</span>
<span class="hljs-title function_">readFileSync</span>(<span class="hljs-keyword">new</span> <span class="hljs-title function_">URL</span>(<span class="hljs-string">'file://hostname/p/a/t/h/file'</span>));

<span class="hljs-comment">// - 带有驱动器号的 WHATWG 文件 URL 转换为绝对路径</span>
<span class="hljs-comment">// file:///C:/tmp/hello =&gt; C:\tmp\hello</span>
<span class="hljs-title function_">readFileSync</span>(<span class="hljs-keyword">new</span> <span class="hljs-title function_">URL</span>(<span class="hljs-string">'file:///C:/tmp/hello'</span>));

<span class="hljs-comment">// - 没有主机名的 WHATWG 文件 URL 必须有驱动器号</span>
<span class="hljs-title function_">readFileSync</span>(<span class="hljs-keyword">new</span> <span class="hljs-title function_">URL</span>(<span class="hljs-string">'file:///notdriveletter/p/a/t/h/file'</span>));
<span class="hljs-title function_">readFileSync</span>(<span class="hljs-keyword">new</span> <span class="hljs-title function_">URL</span>(<span class="hljs-string">'file:///c/p/a/t/h/file'</span>));
<span class="hljs-comment">// TypeError [ERR_INVALID_FILE_URL_PATH]: File URL path must be absolute</span></code></pre>
<p class="">带有驱动器号的 <code>file:</code> <a href="url.html#the-whatwg-url-api" rel="nofollow" class="type">&lt;URL&gt;</a> 必须在驱动器号之后使用 <code>:</code> 作为分隔符。
使用其他分隔符会导致错误。</p>
<p class="">在所有其他平台上，不支持带有主机名的 <code>file:</code> <a href="url.html#the-whatwg-url-api" rel="nofollow" class="type">&lt;URL&gt;</a> 并且会导致错误：</p>
<pre class=""><code class="language-js mjs"><span class="hljs-keyword">import</span> { readFileSync } <span class="hljs-keyword">from</span> <span class="hljs-string">'fs'</span>;
<span class="hljs-comment">// 在其他平台上：</span>

<span class="hljs-comment">// - 不支持带有主机名的 WHATWG 文件 URL</span>
<span class="hljs-comment">// file://hostname/p/a/t/h/file =&gt; throw!</span>
<span class="hljs-title function_">readFileSync</span>(<span class="hljs-keyword">new</span> <span class="hljs-title function_">URL</span>(<span class="hljs-string">'file://hostname/p/a/t/h/file'</span>));
<span class="hljs-comment">// TypeError [ERR_INVALID_FILE_URL_PATH]: must be absolute</span>

<span class="hljs-comment">// - WHATWG 文件 URL 转换为绝对路径</span>
<span class="hljs-comment">// file:///tmp/hello =&gt; /tmp/hello</span>
<span class="hljs-title function_">readFileSync</span>(<span class="hljs-keyword">new</span> <span class="hljs-title function_">URL</span>(<span class="hljs-string">'file:///tmp/hello'</span>));</code></pre>
<p class="">具有编码斜杠字符的 <code>file:</code> <a href="url.html#the-whatwg-url-api" rel="nofollow" class="type">&lt;URL&gt;</a> 在所有平台上都将导致错误：</p>
<pre class=""><code class="language-js mjs"><span class="hljs-keyword">import</span> { readFileSync } <span class="hljs-keyword">from</span> <span class="hljs-string">'fs'</span>;

<span class="hljs-comment">// 在 Windows 上</span>
<span class="hljs-title function_">readFileSync</span>(<span class="hljs-keyword">new</span> <span class="hljs-title function_">URL</span>(<span class="hljs-string">'file:///C:/p/a/t/h/%2F'</span>));
<span class="hljs-title function_">readFileSync</span>(<span class="hljs-keyword">new</span> <span class="hljs-title function_">URL</span>(<span class="hljs-string">'file:///C:/p/a/t/h/%2f'</span>));
<span class="hljs-comment">/* TypeError [ERR_INVALID_FILE_URL_PATH]: File URL path must not include encoded
\ or / characters */</span>

<span class="hljs-comment">// 在 POSIX 上</span>
<span class="hljs-title function_">readFileSync</span>(<span class="hljs-keyword">new</span> <span class="hljs-title function_">URL</span>(<span class="hljs-string">'file:///p/a/t/h/%2F'</span>));
<span class="hljs-title function_">readFileSync</span>(<span class="hljs-keyword">new</span> <span class="hljs-title function_">URL</span>(<span class="hljs-string">'file:///p/a/t/h/%2f'</span>));
<span class="hljs-comment">/* TypeError [ERR_INVALID_FILE_URL_PATH]: File URL path must not include encoded
/ characters */</span></code></pre>
<p class="">在 Windows 上，带有编码反斜杠的 <code>file:</code> <a href="url.html#the-whatwg-url-api" rel="nofollow" class="type">&lt;URL&gt;</a> 将导致错误：</p>
<pre class=""><code class="language-js mjs"><span class="hljs-keyword">import</span> { readFileSync } <span class="hljs-keyword">from</span> <span class="hljs-string">'fs'</span>;

<span class="hljs-comment">// 在 Windows 上</span>
<span class="hljs-title function_">readFileSync</span>(<span class="hljs-keyword">new</span> <span class="hljs-title function_">URL</span>(<span class="hljs-string">'file:///C:/path/%5C'</span>));
<span class="hljs-title function_">readFileSync</span>(<span class="hljs-keyword">new</span> <span class="hljs-title function_">URL</span>(<span class="hljs-string">'file:///C:/path/%5c'</span>));
<span class="hljs-comment">/* TypeError [ERR_INVALID_FILE_URL_PATH]: File URL path must not include encoded
\ or / characters */</span></code></pre>
<h5>Buffer 路径<span><a class="mark" href="#buffer-paths" id="buffer-paths">#</a></span><a aria-hidden="true" class="legacy" id="fs_buffer_paths"></a></h5><p class="tip_wrap" data-show_trans="1" data-item_id="#buffer-paths">
                <a href="fs/buffer_paths.html" class="tip_trans">中英对照</a>
                </p>
<p>使用 <a href="buffer.html#class-buffer" rel="nofollow" class="type">&lt;Buffer&gt;</a> 指定的路径主要用于将文件路径视为不透明字节序列的某些 POSIX 操作系统。
在此类系统上，单个文件路径可能包含使用多种字符编码的子序列。
与字符串路径一样，<a href="buffer.html#class-buffer" rel="nofollow" class="type">&lt;Buffer&gt;</a> 路径可以是相对的或绝对的：</p>
<p class="">在 POSIX 上使用绝对路径的示例：</p>
<pre class=""><code class="language-js mjs"><span class="hljs-keyword">import</span> { open } <span class="hljs-keyword">from</span> <span class="hljs-string">'fs/promises'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Buffer</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'buffer'</span>;

<span class="hljs-keyword">let</span> fd;
<span class="hljs-keyword">try</span> {
  fd = <span class="hljs-keyword">await</span> <span class="hljs-title function_">open</span>(<span class="hljs-title class_">Buffer</span>.<span class="hljs-title function_">from</span>(<span class="hljs-string">'/open/some/file.txt'</span>), <span class="hljs-string">'r'</span>);
  <span class="hljs-comment">// 对文件做一些事情</span>
} <span class="hljs-keyword">finally</span> {
  <span class="hljs-keyword">await</span> fd.<span class="hljs-title function_">close</span>();
}</code></pre>
<h5>Windows 上的独立驱动器工作目录<span><a class="mark" href="#per-drive-working-directories-on-windows" id="per-drive-working-directories-on-windows">#</a></span><a aria-hidden="true" class="legacy" id="fs_per_drive_working_directories_on_windows"></a></h5><p class="tip_wrap" data-show_trans="1" data-item_id="#per-drive-working-directories-on-windows">
                <a href="fs/per_drive_working_directories_on_windows.html" class="tip_trans">中英对照</a>
                </p>
<p>在 Windows 上，Node.js 遵循独立驱动器工作目录的概念。
当使用不带反斜杠的驱动器路径时，可以观察到此行为。
例如，<code>fs.readdirSync('C:\\')</code> 可能返回与 <code>fs.readdirSync('C:')</code> 不同的结果。
有关详细信息，请参阅<a href="https://docs.microsoft.com/en-us/windows/desktop/FileIO/naming-a-file#fully-qualified-vs-relative-paths" rel="nofollow">此 MSDN 页面</a>。</p>
<h4>文件描述符<span><a class="mark" href="#file-descriptors_1" id="file-descriptors_1">#</a></span><a aria-hidden="true" class="legacy" id="fs_file_descriptors_1"></a></h4><p class="tip_wrap" data-show_trans="1" data-item_id="#file-descriptors_1">
                <a href="fs/file_descriptors_1.html" class="tip_trans">中英对照</a>
                </p>
<p>在 POSIX 系统上，对于每个进程，内核维护一个当前打开的文件和资源表。
每个打开的文件都分配了一个简单的数字标识符，称为_文件描述符_。
在系统级，所有文件系统操作都使用这些文件描述符来识别和跟踪每个特定文件。
Windows 系统使用不同但概念上相似的机制来跟踪资源。
为了方便用户，Node.js 抽象了操作系统之间的差异，并为所有打开的文件分配了一个数字文件描述符。</p>
<p class="">基于回调的 <code>fs.open()</code> 和同步 <code>fs.openSync()</code> 方法打开一个文件并分配一个新的文件描述符。
分配后，文件描述符可用于从文件读取数据、向文件写入数据或请求有关文件的信息。</p>
<p class="">操作系统限制在任何给定时间可能打开的文件描述符的数量，因此在操作完成时关闭描述符至关重要。
否则将导致内存泄漏，最终导致应用程序崩溃。</p>
<pre class=""><code class="language-js mjs"><span class="hljs-keyword">import</span> { open, close, fstat } <span class="hljs-keyword">from</span> <span class="hljs-string">'fs'</span>;

<span class="hljs-keyword">function</span> <span class="hljs-title function_">closeFd</span>(<span class="hljs-params">fd</span>) {
  <span class="hljs-title function_">close</span>(fd, <span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {
    <span class="hljs-keyword">if</span> (err) <span class="hljs-keyword">throw</span> err;
  });
}

<span class="hljs-title function_">open</span>(<span class="hljs-string">'/open/some/file.txt'</span>, <span class="hljs-string">'r'</span>, <span class="hljs-function">(<span class="hljs-params">err, fd</span>) =&gt;</span> {
  <span class="hljs-keyword">if</span> (err) <span class="hljs-keyword">throw</span> err;
  <span class="hljs-keyword">try</span> {
    <span class="hljs-title function_">fstat</span>(fd, <span class="hljs-function">(<span class="hljs-params">err, stat</span>) =&gt;</span> {
      <span class="hljs-keyword">if</span> (err) {
        <span class="hljs-title function_">closeFd</span>(fd);
        <span class="hljs-keyword">throw</span> err;
      }

      <span class="hljs-comment">// 使用统计</span>

      <span class="hljs-title function_">closeFd</span>(fd);
    });
  } <span class="hljs-keyword">catch</span> (err) {
    <span class="hljs-title function_">closeFd</span>(fd);
    <span class="hljs-keyword">throw</span> err;
  }
});</code></pre>
<p class="">基于 promise 的 API 使用 <a href="#class-filehandle" rel="nofollow" class="type">&lt;FileHandle&gt;</a> 对象代替数字文件描述符。
这些对象由系统更好地管理，以确保资源不泄漏。
但是，仍然需要在操作完成时关闭它们：</p>
<pre class=""><code class="language-js mjs"><span class="hljs-keyword">import</span> { open } <span class="hljs-keyword">from</span> <span class="hljs-string">'fs/promises'</span>;

<span class="hljs-keyword">let</span> file;
<span class="hljs-keyword">try</span> {
  file = <span class="hljs-keyword">await</span> <span class="hljs-title function_">open</span>(<span class="hljs-string">'/open/some/file.txt'</span>, <span class="hljs-string">'r'</span>);
  <span class="hljs-keyword">const</span> stat = <span class="hljs-keyword">await</span> file.<span class="hljs-title function_">stat</span>();
  <span class="hljs-comment">// 使用统计</span>
} <span class="hljs-keyword">finally</span> {
  <span class="hljs-keyword">await</span> file.<span class="hljs-title function_">close</span>();
}</code></pre>
<h4>线程池的使用<span><a class="mark" href="#threadpool-usage" id="threadpool-usage">#</a></span><a aria-hidden="true" class="legacy" id="fs_threadpool_usage"></a></h4><p class="tip_wrap" data-show_trans="1" data-item_id="#threadpool-usage">
                <a href="fs/threadpool_usage.html" class="tip_trans">中英对照</a>
                </p>
<p>所有基于回调和 promise 的文件系统 API（除了 <code>fs.FSWatcher()</code>）都使用 libuv 的线程池。
这可能会对某些应用程序产生令人惊讶的负面性能影响。
有关更多信息，请参阅 <a href="cli.html#uv_threadpool_sizesize"><code>UV_THREADPOOL_SIZE</code></a> 文档。</p>
<h4>文件系统标志<span><a class="mark" href="#file-system-flags" id="file-system-flags">#</a></span><a aria-hidden="true" class="legacy" id="fs_file_system_flags"></a></h4><p class="tip_wrap" data-show_trans="1" data-item_id="#file-system-flags">
                <a href="fs/file_system_flags.html" class="tip_trans">中英对照</a>
                </p>
<p>以下标志在 <code>flag</code> 选项接受字符串的任何地方可用。</p>
<ul class="">
<li>
<p><code>'a'</code>: 打开文件进行追加。
如果文件不存在，则创建该文件。</p>
</li>
<li>
<p><code>'ax'</code>: 类似于 <code>'a'</code> 但如果路径存在则失败。</p>
</li>
<li>
<p><code>'a+'</code>: 打开文件进行读取和追加。
如果文件不存在，则创建该文件。</p>
</li>
<li>
<p><code>'ax+'</code>: 类似于 <code>'a+'</code> 但如果路径存在则失败。</p>
</li>
<li>
<p><code>'as'</code>: 以同步模式打开文件进行追加。
如果文件不存在，则创建该文件。</p>
</li>
<li>
<p><code>'as+'</code>: 以同步模式打开文件进行读取和追加。
如果文件不存在，则创建该文件。</p>
</li>
<li>
<p><code>'r'</code>: 打开文件进行读取。
如果文件不存在，则会发生异常。</p>
</li>
<li>
<p><code>'r+'</code>: 打开文件进行读写。
如果文件不存在，则会发生异常。</p>
</li>
<li>
<p><code>'rs+'</code>: 以同步模式打开文件进行读写。
指示操作系统绕过本地文件系统缓存。</p>
<p>这主要用于在 NFS 挂载上打开文件，因为它允许跳过可能过时的本地缓存。
它对 I/O 性能有非常实际的影响，因此除非需要，否则不建议使用此标志。</p>
<p>这不会将 <code>fs.open()</code> 或 <code>fsPromises.open()</code> 变成同步阻塞调用。
如果需要同步操作，应该使用类似 <code>fs.openSync()</code> 的东西。</p>
</li>
<li>
<p><code>'w'</code>: 打开文件进行写入。
创建（如果它不存在）或截断（如果它存在）该文件。</p>
</li>
<li>
<p><code>'wx'</code>: 类似于 <code>'w'</code> 但如果路径存在则失败。</p>
</li>
<li>
<p><code>'w+'</code>: 打开文件进行读写。
创建（如果它不存在）或截断（如果它存在）该文件。</p>
</li>
<li>
<p><code>'wx+'</code>: 类似于 <code>'w+'</code> 但如果路径存在则失败。</p>
</li>
</ul>
<p class=""><code>flag</code> 也可以是 <a href="http://man7.org/linux/man-pages/man2/open.2.html" rel="nofollow"><code>open(2)</code></a> 记录的数字；常用的常量可从 <code>fs.constants</code> 获得。
在 Windows 上，标志会在适用的情况下转换为等效的标志，例如 <code>O_WRONLY</code> 至 <code>FILE_GENERIC_WRITE</code>，或 <code>O_EXCL|O_CREAT</code> 至 <code>CREATE_NEW</code>，为 <code>CreateFileW</code> 所接受。</p>
<p class="">如果路径已经存在，则独占标志 <code>'x'</code>（ <a href="http://man7.org/linux/man-pages/man2/open.2.html" rel="nofollow"><code>open(2)</code></a> 中的 <code>O_EXCL</code> 标志）会导致操作返回错误。
在 POSIX 上，如果路径是符号链接，即使链接指向不存在的路径，使用 <code>O_EXCL</code> 也会返回错误。
独占标志可能不适用于网络文件系统。</p>
<p class="">在 Linux 上，以追加模式打开文件时，位置写入不起作用。
内核会忽略位置参数，并始终将数据追加到文件末尾。</p>
<p class="">修改文件而不是替换它可能需要将 <code>flag</code> 选项设置为 <code>'r+'</code> 而不是默认的 <code>'w'</code>。</p>
<p class="">某些标志的行为是特定于平台的。
因此，在 macOS 和 Linux 上使用 <code>'a+'</code> 标志打开目录，如下例所示，将返回错误。
而在 Windows 和 FreeBSD 上，将返回文件描述符或 <code>FileHandle</code>。</p>
<pre class=""><code class="language-js"><span class="hljs-comment">// macOS 和 Linux</span>
fs.<span class="hljs-title function_">open</span>(<span class="hljs-string">'&lt;directory&gt;'</span>, <span class="hljs-string">'a+'</span>, <span class="hljs-function">(<span class="hljs-params">err, fd</span>) =&gt;</span> {
  <span class="hljs-comment">// =&gt; [Error: EISDIR: illegal operation on a directory, open &lt;directory&gt;]</span>
});

<span class="hljs-comment">// Windows 和 FreeBSD</span>
fs.<span class="hljs-title function_">open</span>(<span class="hljs-string">'&lt;directory&gt;'</span>, <span class="hljs-string">'a+'</span>, <span class="hljs-function">(<span class="hljs-params">err, fd</span>) =&gt;</span> {
  <span class="hljs-comment">// =&gt; null, &lt;fd&gt;</span>
});</code></pre>
<p class="">在 Windows 上，使用 <code>'w'</code> 标志（通过 <code>fs.open()</code> 或 <code>fs.writeFile()</code> 或 <code>fsPromises.open()</code>）打开现有隐藏文件将失败并抛出 <code>EPERM</code>。
可以使用 <code>'r+'</code> 标志打开现有的隐藏文件进行写入。</p>
<p class="">调用 <code>fs.ftruncate()</code> 或 <code>filehandle.truncate()</code> 可用于重置文件内容。</p></section>
        <!-- API END -->
      </div>
    </div>
  </div>
  <div id="scroll_top" onclick="window.scrollTo(0,0);">返回顶部</div>
  
  <div id="wxpaycode_box" style="display: none;">
    <div id="wxpaycode_img_box">
      <div id="wxpaycode_vip_tips">
        因经营维护成本巨大，
        <br>为了能提供更高质量的中文文档，
        <br>即日起将只对VIP会员开放。
        <br>扫码成为VIP会员，会员费用为<span id="wxpaycode_vip_money">199</span>元/年
      </div>
      <img id="wxpaycode_img">
    </div>
  </div>
  
  



    <script src="../api/static/inject.js" defer=""></script></body></html>