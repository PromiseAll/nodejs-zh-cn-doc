<!DOCTYPE html><html lang="zh-CN"><head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width">
  <title>Extensions in subpaths | Node.js API 文档</title>
  
  

    <link href="../static/inject.css" rel="stylesheet"><link rel="icon" sizes="32x32" type="image/png" href="../static/favicon.png"></head>

<body class="alt apidoc" id="page_api_item">
  <div id="api-section-packages">
    <div id="content" class="clearfix">

      <div id="column1" data-id="__ID__" class="interior">
        <header>
          <h1>Extensions in subpaths</h1>
          <div id="gtoc">
            <ul>
              <li>v18.6.0</li>
              <li>
                <a href="../packages.html#packages_extensions_in_subpaths" name="toc">返回上层文档</a>
              </li>

              

              <li>
                <a href="http://api.nodejs.cn/" class="link-to-search">搜索</a>
              </li>
              <li>
                
                
              </li>

              <!-- <li>
                <a href="https://github.com/nodejscn/node-api-cn/edit/master/packages/#extensions-in-subpaths.md" rel="nofollow">提交修改</a>
              </li> -->
              <!-- <li>
                <a href="/gzh/">公众号</a>
              </li> -->
              <!-- <li class="biz_wrap" data-biz="api_item_nav">
                <a target="_blank" class="biz_title biz_link"></a>
              </li> -->
            </ul>
          </div>
          <hr>
        </header>

        <div id="apicontent">
          <div id="content_left"><p>包作者应在其导出中提供扩展 (<code>import 'pkg/subpath.js'</code>) 或无扩展 (<code>import 'pkg/subpath'</code>) 子路径。
这确保每个导出的模块只有一个子路径，以便所有依赖项导入相同的一致说明符，使消费者清楚地了解包合同并简化包子路径的完成。</p><p class="">传统上，包倾向于使用无扩展名风格，它具有可读性和掩盖包中文件的真实路径的好处。</p><p class="">随着<a href="https://github.com/WICG/import-maps">导入映射</a>现在为浏览器和其他 JavaScript 运行时中的包解析提供标准，使用无扩展风格可能会导致导入映射定义臃肿。
显式的文件扩展名可以通过启用导入映射来避免此问题，以利用<a href="https://github.com/WICG/import-maps#packages-via-trailing-slashes">包文件夹映射</a>在可能的情况下映射多个子路径，而不是每个包子路径导出单独的映射条目。
这也反映了在相对和绝对导入说明符中使用<a href="../esm.html#mandatory-file-extensions">完整说明符路径</a>的要求。</p></div>
          <div id="content_right"><p>Package authors should provide either extensioned (<code>import 'pkg/subpath.js'</code>) or
extensionless (<code>import 'pkg/subpath'</code>) subpaths in their exports. This ensures
that there is only one subpath for each exported module so that all dependents
import the same consistent specifier, keeping the package contract clear for
consumers and simplifying package subpath completions.</p><p>Traditionally, packages tended to use the extensionless style, which has the
benefits of readability and of masking the true path of the file within the
package.</p><p>With <a href="https://github.com/WICG/import-maps">import maps</a> now providing a standard for package resolution in browsers
and other JavaScript runtimes, using the extensionless style can result in
bloated import map definitions. Explicit file extensions can avoid this issue by
enabling the import map to utilize a <a href="https://github.com/WICG/import-maps#packages-via-trailing-slashes">packages folder mapping</a> to map multiple
subpaths where possible instead of a separate map entry per package subpath
export. This also mirrors the requirement of using <a href="../esm.html#mandatory-file-extensions">the full specifier path</a>
in relative and absolute import specifiers.</p></div>
          <div></div>
        </div>

        <!-- <div id="biz_item" class="biz_wrap" data-biz="api_item">
          <a target="_blank" class="biz_link">
            <img class="biz_img" />
          </a>
        </div> -->
      </div>
    </div>
  </div>
  
  <div id="wxpaycode_box" style="display: none;">
    <div id="wxpaycode_img_box">
      <div id="wxpaycode_vip_tips">
        因经营维护成本巨大，
        <br>为了能提供更高质量的中文文档，
        <br>即日起将只对VIP会员开放。
        <br>扫码成为VIP会员，会员费用为<span id="wxpaycode_vip_money">199</span>元/年
      </div>
      <img id="wxpaycode_img">
    </div>
  </div>
  
  
  



    <script src="../static/inject.js" defer=""></script></body></html>